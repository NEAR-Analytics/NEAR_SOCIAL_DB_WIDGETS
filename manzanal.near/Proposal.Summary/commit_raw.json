{"tx_hash": "BvhmiHq6xvMTZdeaaPv6YtSfKfrDEWq5haRD7xEJqFCf", "action_id_social": "DzKsEhMmNzYhaSHpeDEUoC6WAmbExEZmww4xhRrzcDEn-0-widget", "block_id": 90477991, "block_timestamp": "2023-04-26 13:48:31.385", "signer_id": "manzanal.near", "widget_name": "Proposal.Summary", "source_code": "const ownerId = \"contribut3.near\";\nconst accountId = props.accountId ?? context.accountId;\nconst cid = props.cid;\nconst vendorId = props.vendorId;\nconst size = props.size ?? \"1em\";\n\nState.init({\n  proposal: null,\n  proposalIsFetched: false,\n  request: null,\n  requestIsFetched: false,\n});\n\nif (!state.proposalIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_proposal\",\n    { project_id: accountId, cid, vendor_id: vendorId },\n    \"final\",\n    false\n  ).then((proposal) => State.update({ proposal, proposalIsFetched: true }));\n}\n\nif (!state.requestIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_request\",\n    { account_id: accountId, cid, vendor_id: vendorId },\n    \"final\",\n    false\n  ).then((request) => State.update({ request, requestIsFetched: true }));\n}\n\nif (!state.proposalIsFetched || !state.requestIsFetched) return <>Loading...</>;\n\nconst Container = styled.div`\n  width: 100%;\n  color: #101828;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  padding: 16px 24px;\n  gap: 8px;\n  background: #fafafa;\n  border-bottom: 1px solid #eceef0;\n  border-radius: 8px;\n`;\n\nconst Title = styled.div`\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1em;\n  color: #101828;\n`;\n\nconst Detail = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 0.125em;\n  font-style: normal;\n  font-weight: 400;\n  font-size: 0.75em;\n  line-height: 1em;\n  color: #11181c;\n`;\n\nconst Item = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  padding: 0px;\n  gap: 0.4em;\n  flex: none;\n  order: 1;\n  flex-grow: 0;\n  font-style: normal;\n  font-weight: 500;\n  font-size: 0.75em;\n  line-height: 1em;\n  color: #11181c;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 100%;\n`;\n\nconst Column = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 0.25em;\n  width: 100%;\n`;\n\nconst Quote = styled.div`\n  padding-left: 1em;\n  border-left: 3px solid #b2ddff;\n  width: 100%;\n`;\n\nconst Price = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 0.125em;\n\n  span:first-child {\n    font-style: normal;\n    font-weight: 400;\n    font-size: 0.75em;\n    line-height: 1em;\n    text-decoration-line: line-through;\n    color: #7e868c;\n  }\n\n  span:last-child {\n    font-style: normal;\n    font-weight: 700;\n    font-size: 0.75em;\n    line-height: 1em;\n    text-decoration-line: none;\n    color: #11181c;\n  }\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  line-height: 1.5rem;\n  color: ${(p) => (p.bold ? \"#11181C\" : \"#687076\")} !important;\n  font-weight: 400;\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\n  overflow: ${(p) => (p.ellipsis ? \"hidden\" : \"\")};\n  text-overflow: ${(p) => (p.ellipsis ? \"ellipsis\" : \"\")};\n  white-space: ${(p) => (p.ellipsis ? \"nowrap\" : \"\")};\n  overflow-wrap: anywhere;\n\n  b {\n    font-weight: 600;\n    color: #11181c;\n  }\n\n  &[href] {\n    font-weight: 600;\n    color: #006adc !important;\n    display: inline-flex;\n    gap: 0.25rem;\n\n    &:hover,\n    &:focus {\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst price =\n  state.proposal.price !== state.request.budget ? (\n    <>\n      <span>NH {state.request.budget}</span>\n      {\" \u2192 \"}\n      <span>NH {state.proposal.price}</span>\n    </>\n  ) : (\n    <span>NH {state.proposal.price}</span>\n  );\n\nreturn (\n  <Container>\n    <Column>\n      <Quote>\n        <Row>\n          <Detail>\n            Type: <b>{state.proposal.proposal_type}</b>\n          </Detail>\n          <Detail>\n            Price:{\" \"}\n            <b>\n              <Price>{price}</Price>\n            </b>\n          </Detail>\n        </Row>\n        <Text bold>{state.proposal.title}</Text>\n        <Widget\n          src={`${ownerId}/widget/DescriptionArea`}\n          props={{ description: state.proposal.description }}\n        />\n      </Quote>\n    </Column>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/manzanal.near/widget/Proposal.Summary"}