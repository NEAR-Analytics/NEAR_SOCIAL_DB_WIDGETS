{"tx_hash": "EQDfUBAezanDRdG6iWm2ouqVLTbBNQLHyeiEwVaWHcMW", "action_id_social": "9jeSBRphB3trSPQwi6jUzajeLU3ttn9yh9xavRar8TRb-1-widget", "block_id": 84847253, "block_timestamp": "2023-02-09 14:45:52.704", "signer_id": "manzanal.near", "widget_name": "UserVotingDashComponent", "source_code": "if (!context.accountId)\n  return \"Connect your wallet to see your voting power balance\";\nconst CONTRACT_ID = \"meta-vote.near\";\nconst GET_VP_METHOD = \"get_available_voting_power\";\nconst GET_IN_USE_VP_METHOD = \"get_used_voting_power\";\n\nconst YoctoToNear = (amountYocto) =>\n  new Big(amountYocto).div(new Big(10).pow(24)).toFixed(2);\n\nconst numberWithCommas = (x) =>\n  x.toString().replace(/\\B(?<!\\.\\d*)(?=(\\d{3})+(?!\\d))/g, \",\");\n\nconst getVotingPowerBalance = () => {\n  const balanceYocto = Near.view(CONTRACT_ID, GET_VP_METHOD, {\n    voter_id: context.accountId,\n  });\n  return YoctoToNear(balanceYocto);\n};\n\nconst getInUseVotingPower = () => {\n  const inUserVotingPower = Near.view(CONTRACT_ID, GET_IN_USE_VP_METHOD, {\n    voter_id: context.accountId,\n  });\n  return YoctoToNear(inUserVotingPower);\n};\n\nlet data = {\n  available: getVotingPowerBalance(),\n  inUse: getInUseVotingPower(),\n};\n\nreturn (\n  <div className={props.noborder ? \"card border-0\" : \"card\"}>\n    <div class=\"card-body p-3\">\n      <h5 class=\"card-title\">Your Voting Power Balance</h5>\n      <div class=\"row\">\n        <div class=\"col-md-6 p-3\">\n          <h6 class=\"card-subtitle mb-2 text-muted\">Available</h6>\n          <h6 class=\"text-success fs-5\">\n            {numberWithCommas(data.available)} VP\n          </h6>\n        </div>\n        <div class=\"col-md-6 p-3\">\n          <h6 class=\"card-subtitle mb-2 text-muted\">In Use</h6>\n          <h6 class=\"text-danger fs-5\">{numberWithCommas(data.inUse)} VP</h6>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/manzanal.near/widget/UserVotingDashComponent", "metadata.tags.component": NaN, "metadata.tags.inline": NaN, "metadata": NaN}