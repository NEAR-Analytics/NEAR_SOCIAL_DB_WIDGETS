{"tx_hash": "6qtZaZdFru2zPXHYrRXBrbeg3jJioC6rxrU2xL9kWX9u", "action_id_social": "E1xTr2BTLYjwuMfbeW6gNJfM2wmZV885AeVPEVzwMwB-0-widget", "block_id": 88949550, "block_timestamp": "2023-04-06 11:35:37.226", "signer_id": "manzanal.near", "widget_name": "IpfsFileUpload", "source_code": "const fileAccept = props.fileAccept || \"*\";\nconst fileIcon = props.fileIcon || \"bi-file\";\nconst buttonText = props.buttonText || \"Upload a file\";\nprops.fileType ||\n  initState({\n    file: null,\n  });\n\nconst ipfsUrl = (cid) => `https://ipfs.near.social/ipfs/${cid}`;\n\nconst filesOnChange = (file) => {\n  if (file?.length > 0) {\n    State.update({\n      file: {\n        uploading: true,\n        cid: null,\n      },\n    });\n    const body = file[0];\n    asyncFetch(\"https://ipfs.near.social/add\", {\n      method: \"POST\",\n      headers: {\n        Accept: \"application/json\",\n      },\n      body,\n    }).then((res) => {\n      const cid = res.body.cid;\n      console.log(\"CID\", cid);\n      State.update({\n        file: {\n          cid,\n        },\n      });\n    });\n  } else {\n    State.update({\n      file: null,\n    });\n  }\n};\n\nreturn (\n  <div className=\"d-inline-block\">\n    {state.file?.cid && (\n      <div\n        className=\"d-inline-block me-2 overflow-hidden align-middle\"\n        style={{ width: \"2.5em\", height: \"2.5em\" }}\n      >\n        <i class={`bi fs-3 ${fileIcon}`} />\n      </div>\n    )}\n    <Files\n      multiple={false}\n      accepts={[fileAccept]}\n      minFileSize={1}\n      clickable\n      className=\"btn btn-outline-primary\"\n      onChange={filesOnChange}\n    >\n      {state.file?.uploading ? (\n        <>{Loading} Uploading</>\n      ) : state.file && state.file.cid ? (\n        \"Replace\"\n      ) : (\n        \"Upload a file\"\n      )}\n    </Files>\n  </div>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/manzanal.near/widget/IpfsFileUpload", "metadata.description": "Upload arbitrary file.\nExample props for PDF upload:\n{\n  \"fileAccept\": \"application/pdf\",\n  \"fileIcon\": \"bi-file-earmark-pdf\",\n  \"buttonText\": \"Upload a pfd\"\n}", "metadata.name": "IPFS File Upload", "metadata": NaN}