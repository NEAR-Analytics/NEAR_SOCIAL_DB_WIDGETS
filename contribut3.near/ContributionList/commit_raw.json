{"tx_hash": "HZxjBapuWbuqx1HaxAgdZsySvCPUSgjMnGHiPo4XmhH7", "action_id_social": "uhuPhtU7tK8FKH3wGaK1FuH7wRt9YhxfN1MXFPA5eGn-0-widget", "block_id": 86758379, "block_timestamp": "2023-03-07 12:14:24.187", "signer_id": "contribut3.near", "widget_name": "ContributionList", "source_code": "const ownerId = \"contribut3.near\";\nconst accountId = props.accountId;\nconst isEntity = props.isEntity ?? false;\nconst limit = 10;\n\nState.init({\n  items: [],\n  shown: [],\n  from: 0,\n  hasMore: true,\n});\n\nif (state.items.length === 0) {\n  Near.asyncView(\n    ownerId,\n    isEntity ? \"get_entity_contributions\" : \"get_contributor_contributions\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((accountIds) => State.update({ items: accountIds.sort(), shown: accountIds.slice(0, limit), from: limit, hasMore: accountIds.length > limit }));\n\n  if (!accountId) {\n    return \"Cannot render contribution list without account ID!\";\n  }\n\n  const contributions = Object.keys(\n    Near.view(\n      ownerId,\n      isEntity ? \"get_entity_contributions\" : \"get_contributor_contributions\",\n      { account_id: accountId },\n      \"final\",\n      true\n    ) ?? {}\n  );\n\n  if (!contributions) {\n    return \"Loading...\";\n  }\n\n  if (Array.isArray(contributions) && contributions.length === 0) {\n    return \"No contributions found!\";\n  }\n\n  const allContributions = contributions.filter((id) =>\n    id.includes(props.search)\n  );\n\n  if (!allContributions || allContributions.length === 0) {\n    return \"No contributions match search criteria!\";\n  }\n\n  return (\n    <>\n      {allContributions.map((id) => (\n        <div key={id} className=\"mt-3\">\n          <Widget\n            src={`${ownerId}/widget/Contribution`}\n            props={{\n              entityId: isEntity ? accountId : id,\n              contributorId: isEntity ? id : accountId,\n              isEntity,\n              update: props.update,\n            }}\n          />\n        </div>\n      ))}\n    </>\n  );\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/ContributionList"}