{"tx_hash": "HHjaeZ1vGxe6hvojGDvvc8ssgVN128vc8gyRkXER9Smq", "action_id_social": "3HoSgLNkKeLcoBktbFyCqx1dCWz7WLAMPEinQ6snZhoP-0-widget", "block_id": 85436655, "block_timestamp": "2023-02-17 15:36:34.239", "signer_id": "contribut3.near", "widget_name": "ContributionRequestList", "source_code": "const ownerId = \"contribut3.near\";\nconst search = props.search ?? \"\";\nconst accountId = props.accountId;\n\nconst needs = accountId\n  ? Near.view(\n    ownerId,\n    \"get_entity_contribution_requests\",\n    { entity_id: accountId },\n    \"final\",\n    true\n  )\n  : Near.view(ownerId, \"get_contribution_needs\", {}, \"final\", true);\n\nconst allNeeds = Object.keys(needs)\n  .reduce((list, accountIdOrCid) => {\n    if (props.accountId) {\n      return [\n        ...list,\n        [props.accountId, accountIdOrCid, needs[accountIdOrCid]],\n      ];\n    }\n\n    const entityNeeds = needs[accountIdOrCid];\n    const needsList = Object.keys(entityNeeds).map((cid) => [\n      accountIdOrCid,\n      cid,\n      entityNeeds[cid],\n    ]);\n\n    return [...list, ...needsList];\n  }, [])\n  .filter(\n    ([accountId, _, need]) =>\n      accountId.includes(search) ||\n      need.description.includes(search) ||\n      need.contribution_type.includes(search)\n  );\n\nif (!allNeeds || allNeeds.length === 0) {\n  return \"No contribution needs found!\";\n}\n\nreturn (\n  <>\n    {allNeeds.map(([accountId, cid]) => (\n      <div key={cid} className=\"mb-2\">\n        <Widget src={`${ownerId}/widget/Need`} props={{ accountId, cid }} />\n      </div>\n    ))}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/ContributionRequestList"}