{"tx_hash": "E77uzRneRoRNqm3ctAiPYbBFcH35SoMjfzNSs8Zukr7V", "action_id_social": "HxsxHscfiL7KvbjK23sCSqEeCbKWPyAsykH4L357MT5x-0-widget", "block_id": 86697399, "block_timestamp": "2023-03-06 16:23:53.127", "signer_id": "contribut3.near", "widget_name": "Inbox", "source_code": "const ownerId = \"contribut3.near\";\n\nconst availableContent = [\"proposals\", \"invitations\"];\n\nconst getContent = (content) => {\n  if (!content || !availableContent.includes(content)) {\n    return \"proposals\";\n  }\n\n  return content;\n};\n\nconst proposalsCount = (\n  Near.view(\n    ownerId,\n    \"get_admin_contribution_requests\",\n    { account_id: context.accountId },\n    \"final\",\n    true\n  ) ?? []\n).length;\n\nconst invitesCount = Object.keys(\n  Near.view(\n    ownerId,\n    \"get_contributor_invites\",\n    { account_id: context.accountId },\n    \"final\",\n    true\n  ) ?? {}\n).length;\n\nconst header = (\n  <div>\n    <h1 className=\"fs-2\">Inbox</h1>\n    <p className=\"fw-semibold fs-5 text-muted\">\n      Manage invitations and proposals\n    </p>\n  </div>\n);\n\nconst contentSelector = (\n  <Widget\n    src={`${ownerId}/widget/TabSelector`}\n    props={{\n      tab: \"inbox\",\n      content: getContent(props.content),\n      search: props.search,\n      update: props.update,\n      buttons: [\n        {\n          id: \"proposals\",\n          text: \"Proposals\",\n          count: proposalsCount,\n          icon: (\n            <svg\n              width=\"15\"\n              height=\"15\"\n              viewBox=\"0 0 20 20\"\n              fill=\"none\"\n              xmlns=\"http://www.w3.org/2000/svg\"\n            >\n              <path\n                d=\"M15.8333 7.5L13.3333 5M13.3333 5L15.8333 2.5M13.3333 5L18.3333 5M13.3333 17.5V16.5C13.3333 15.0999 13.3333 14.3998 13.0608 13.865C12.8211 13.3946 12.4387 13.0122 11.9683 12.7725C11.4335 12.5 10.7334 12.5 9.33329 12.5H5.66663C4.26649 12.5 3.56643 12.5 3.03165 12.7725C2.56124 13.0122 2.17879 13.3946 1.93911 13.865C1.66663 14.3998 1.66663 15.0999 1.66663 16.5V17.5M10.4166 6.25C10.4166 7.86083 9.11079 9.16667 7.49996 9.16667C5.88913 9.16667 4.58329 7.86083 4.58329 6.25C4.58329 4.63917 5.88913 3.33333 7.49996 3.33333C9.11079 3.33333 10.4166 4.63917 10.4166 6.25Z\"\n                stroke=\"#667085\"\n                stroke-width=\"1.66667\"\n                stroke-linecap=\"round\"\n                stroke-linejoin=\"round\"\n              />\n            </svg>\n          ),\n        },\n        {\n          id: \"invitations\",\n          text: \"Invitations\",\n          count: invitesCount,\n          icon: \"bi-person-up\",\n        },\n      ],\n    }}\n  />\n);\n\nconst content = {\n  proposals: (\n    <Widget\n      src={`${ownerId}/widget/ContributionRequestList`}\n      props={{ search: props.search, update: props.update }}\n    />\n  ),\n  invitations: (\n    <Widget\n      src={`${ownerId}/widget/InviteList`}\n      props={{ search: props.search, update: props.update }}\n    />\n  ),\n}[getContent(props.content)];\n\nreturn (\n  <div>\n    <div className=\"mb-3 px-3\">\n      <div className=\"d-flex flex-row justify-content-between mb-3\">\n        {header}\n      </div>\n      <div className=\"d-flex flex-row justify-content-between\">\n        {contentSelector}\n        <Widget\n          src={`${ownerId}/widget/SearchInput`}\n          props={{ search: props.search, update: props.update }}\n        />\n      </div>\n    </div>\n    <div className=\"px-3 pt-3\">\n      {context.accountId\n        ? content\n        : \"You need to be logged in to view this page!\"}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Inbox"}