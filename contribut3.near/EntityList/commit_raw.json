{"tx_hash": "2Y7xT5CfT2qWfnGMhQHbDpngcPp4arfMdnQYRBDrGpUM", "action_id_social": "DqwuGmUs1tzd27qbaPiCjnj1Hf4ZGdo8TDLWwBEHbT3o-0-widget", "block_id": 86749822, "block_timestamp": "2023-03-07 09:24:56.847", "signer_id": "contribut3.near", "widget_name": "EntityList", "source_code": "const ownerId = \"contribut3.near\";\r\nconst search = props.search ?? \"\";\r\n\r\nState.init({\r\n  entities: [],\r\n  from: 0,\r\n  hasMore: true,\r\n});\r\n\r\nconst loadMore = () => {\r\n  Near.asyncView(ownerId, \"get_entities\", {\r\n    from_index: state.from,\r\n    limit: 10,\r\n  }).then((entities) =>\r\n    State.update({\r\n      from: state.from + 10,\r\n      entities: [\r\n        ...state.entities,\r\n        ...Object.keys(entities).filter(\r\n          (entity) => !state.entities.includes(entity)\r\n        ),\r\n      ],\r\n      hasMore: Object.keys(entities).length > 0,\r\n    })\r\n  );\r\n};\r\n\r\nconst Container = styled.div`\r\n  margin: 0.5em 0;\r\n`;\r\n\r\nreturn (\r\n  <InfiniteScroll loadMore={loadMore} hasMore={state.hasMore}>\r\n    {state.entities\r\n      .filter((accountId) => (search ? accountId.includes(search) : true))\r\n      .map((accountId) => (\r\n        <Container key={accountId}>\r\n          <Widget\r\n            src={`${ownerId}/widget/Entity`}\r\n            props={{ accountId, update: props.update }}\r\n          />\r\n        </Container>\r\n      ))}\r\n  </InfiniteScroll>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/EntityList"}