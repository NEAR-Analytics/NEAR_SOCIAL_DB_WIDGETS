{"tx_hash": "ABY1zD75nXao1NiNWDFo7HQczyBGCneCjGuhJfDnvqFG", "action_id_social": "CoDwX2iJJ7PgFTvcTqvn6363oWLbTRMhR69rdGGwW73M-0-widget", "block_id": 85871486, "block_timestamp": "2023-02-23 14:49:29.296", "signer_id": "contribut3.near", "widget_name": "ModeratorSetForm", "source_code": "const ownerId = \"contribut3.near\";\r\n\r\nconst isModerator = Near.view(\r\n  ownerId,\r\n  \"check_is_moderator\",\r\n  { account_id: context.accountId },\r\n  \"final\",\r\n  true\r\n);\r\n\r\nif (isModerator === false) {\r\n  return \"You are not authorized to access this widget!\";\r\n}\r\n\r\nif (!isModerator) {\r\n  return \"Loading...\";\r\n}\r\n\r\nState.init({\r\n  accountId: \"\",\r\n  valid: true,\r\n});\r\n\r\nconst accountIdInput = (\r\n  <div className=\"col-lg-12  mb-2\">\r\n    <Widget\r\n      src={`${ownerId}/widget/ValidatedAccountIdInput`}\r\n      props={{\r\n        label: \"Account ID of moderator:\",\r\n        value: state.accountId,\r\n        update: (accountId, valid) => State.update({ accountId, valid }),\r\n      }}\r\n    />\r\n  </div>\r\n);\r\n\r\nconst onSubmit = () => {\r\n  if (!state.valid) {\r\n    return;\r\n  }\r\n\r\n  const args = {\r\n    moderator_id: state.accountId,\r\n  };\r\n\r\n  Near.call(ownerId, \"set_moderator\", args);\r\n};\r\n\r\nconst header = <div className=\"card-header\">Change the moderator</div>;\r\n\r\nconst body = (\r\n  <div className=\"card-body\">\r\n    <div className=\"row\">{accountIdInput}</div>\r\n\r\n    <a\r\n      className={`btn ${!state.valid ? \"btn-secondary\" : \"btn-primary\"} mb-2`}\r\n      onClick={onSubmit}\r\n    >\r\n      Submit\r\n    </a>\r\n  </div>\r\n);\r\n\r\nreturn (\r\n  <div className=\"card\">\r\n    {header}\r\n    {body}\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/ModeratorSetForm"}