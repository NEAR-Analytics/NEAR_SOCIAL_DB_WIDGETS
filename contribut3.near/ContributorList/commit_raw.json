{"tx_hash": "Hv1FpJNMWoMug8MXnnWVnW1t4FntxCw7KKuznjUnE8qe", "action_id_social": "JCFvtNsTS7hDPQY4rqpsvB7SM7EWG1cncdT6Ai9y3z2x-0-widget", "block_id": 86756956, "block_timestamp": "2023-03-07 11:45:09.292", "signer_id": "contribut3.near", "widget_name": "ContributorList", "source_code": "const ownerId = \"contribut3.near\";\r\nconst search = props.search ?? \"\";\r\nconst accountId = props.accountId;\r\nconst cid = props.cid;\r\nconst limit = 10;\r\n\r\nState.init({\r\n  contributors: [],\r\n  shown: [],\r\n  from: 0,\r\n  hasMore: true,\r\n});\r\n\r\nconst allContributors = (\r\n  accountId\r\n    ? Object.keys(\r\n      Near.view(\r\n        ownerId,\r\n        cid ? \"get_need_contributions\" : \"get_entity_contributions\",\r\n        { account_id: accountId, ...(cid ? { cid } : {}) },\r\n        \"final\",\r\n        false\r\n      ) ?? {}\r\n    )\r\n    : Near.view(ownerId, \"get_contributors\", {}, \"final\", false) ?? []\r\n).filter((id) => id.includes(search));\r\n\r\nif (state.contributors.length === 0) {\r\n  Near.asyncView(\r\n    ownerId,\r\n    accountId\r\n      ? cid\r\n        ? \"get_need_contributions\"\r\n        : \"get_entity_contributions\"\r\n      : \"get_contributors\",\r\n    {\r\n      ...(accountId ? { account_id: accountId } : {}),\r\n      ...(cid ? { cid } : {}),\r\n    },\r\n    \"final\",\r\n    false\r\n  ).then((contributors) => {\r\n    State.update({\r\n      contributors: contributors.sort(),\r\n      shown: contributors.slice(0, limit),\r\n      from: limit,\r\n      hasMore: contributors.length > limit,\r\n    });\r\n  });\r\n}\r\n\r\nif (!allContributors || allContributors.length === 0) {\r\n  return \"No contributors found!\";\r\n}\r\n\r\nreturn (\r\n  <>\r\n    {allContributors.map((id) => (\r\n      <div key={id} className=\"mb-2\">\r\n        <Widget\r\n          src={`${ownerId}/widget/Contributor`}\r\n          props={{ accountId: id, update: props.update }}\r\n        />\r\n      </div>\r\n    ))}\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/ContributorList"}