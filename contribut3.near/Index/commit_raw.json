{"tx_hash": "8fGnKG3LezA3Yroav6QV5p2SwTCGqPHLuH6aDjKa5mto", "action_id_social": "6LzNbCRp1yeSbzDrmGL9abv5UtxuCJr33s7qf1WxV5Mw-0-widget", "block_id": 84272628, "block_timestamp": "2023-02-01 10:18:57.450", "signer_id": "contribut3.near", "widget_name": "Index", "source_code": "const ownerId = \"contribut3.near\";\r\n\r\ninitState({\r\n  search: \"\",\r\n  content: props.content ?? \"entities\",\r\n});\r\n\r\nconst isModerator = Near.view(\r\n  ownerId,\r\n  \"check_is_moderator\",\r\n  { account_id: context.accountId },\r\n  \"final\",\r\n  true\r\n);\r\n\r\nconst editorsFooter = props.isPreview ? null : (\r\n  <div className=\"row\" id={`accordion`}>\r\n    <div\r\n      className=\"collapse\"\r\n      id=\"collapseContributionRequestForm\"\r\n      data-bs-parent=\"#accordion\"\r\n    >\r\n      <Widget src={`${ownerId}/widget/ContributionRequestForm`} />\r\n    </div>\r\n    <div\r\n      className=\"collapse\"\r\n      id=\"collapseEntityForm\"\r\n      data-bs-parent=\"#accordion\"\r\n    >\r\n      <Widget src={`${ownerId}/widget/EntityForm`} />\r\n    </div>\r\n    <div\r\n      className=\"collapse\"\r\n      id=\"collapseModeratorForm\"\r\n      data-bs-parent=\"#accordion\"\r\n    >\r\n      <Widget src={`${ownerId}/widget/ModeratorEntityForm`} />\r\n    </div>\r\n    <div\r\n      className=\"collapse\"\r\n      id=\"collapseModeratorSetForm\"\r\n      data-bs-parent=\"#accordion\"\r\n    >\r\n      <Widget src={`${ownerId}/widget/ModeratorSetForm`} />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst control = ({ formName, text, icon }) => (\r\n  <Widget\r\n    src={`${ownerId}/widget/NavbarControl`}\r\n    props={{ formName, text, icon }}\r\n  />\r\n);\r\n\r\nconst controls = (\r\n  <div className=\"card border-secondary mb-2\">\r\n    <div className=\"nav navbar navbar-expand-lg bg-body-tertiary\">\r\n      <div className=\"container-fluid\">\r\n        <div className=\"navbar-brand\">\r\n          <Widget\r\n            src=\"mob.near/widget/ProfileImage\"\r\n            props={{\r\n              metadata,\r\n              accountId,\r\n              widgetName,\r\n              style: { height: \"2.5em\", width: \"2.5em\", minWidth: \"2.5em\" },\r\n              className: \"me-2\",\r\n            }}\r\n          />\r\n        </div>\r\n        <div className=\"collapse navbar-collapse\" id=\"navbarText\">\r\n          <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n            {control({\r\n              formName: \"ContributionRequest\",\r\n              text: \"Request Contribution\",\r\n              icon: \"bi-plus-circle\",\r\n            })}\r\n            {control({\r\n              formName: \"Entity\",\r\n              text: \"Create Entity\",\r\n              icon: \"bi-plus-circle\",\r\n            })}\r\n            {!isModerator\r\n              ? null\r\n              : control({\r\n                  formName: \"Moderator\",\r\n                  text: \"Edit/Create Entity\",\r\n                  icon: \"bi-pencil-square\",\r\n                })}\r\n            {!isModerator\r\n              ? null\r\n              : control({\r\n                  formName: \"ModeratorSet\",\r\n                  text: \"Change moderator\",\r\n                  icon: \"bi-person-lock\",\r\n                })}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    {editorsFooter}\r\n  </div>\r\n);\r\n\r\nconst navbar = (\r\n  <div className=\"card border-secondary\">\r\n    <div className=\"nav navbar navbar-expand-lg bg-body-tertiary\">\r\n      <div className=\"container-fluid\">\r\n        <ul className=\"navbar-nav me-auto mb-2 mb-lg-0\">\r\n          <li className=\"nav-item \">\r\n            <a\r\n              className=\"nav-link active button\"\r\n              href={`https://near.social/#/${ownerId}/widget/Index?content=entities`}\r\n              role=\"button\"\r\n              onClick={() => State.update({ content: \"entities\" })}\r\n            >\r\n              <i className=\"bi-house-fill\" />\r\n              Entities\r\n            </a>\r\n          </li>\r\n          <li className=\"nav-item \">\r\n            <a\r\n              className=\"nav-link active button\"\r\n              href={`https://near.social/#/${ownerId}/widget/Index?content=contributors`}\r\n              role=\"button\"\r\n              onClick={() => State.update({ content: \"contributors\" })}\r\n            >\r\n              <i className=\"bi-person-plus-fill\" />\r\n              Contributors\r\n            </a>\r\n          </li>\r\n          <li className=\"nav-item \">\r\n            <a\r\n              className=\"nav-link active button\"\r\n              href={`https://near.social/#/${ownerId}/widget/Index?content=admin`}\r\n              role=\"button\"\r\n              onClick={() => State.update({ content: \"admin\" })}\r\n            >\r\n              <i className=\"bi-person-plus-fill\" />\r\n              Manage Entities\r\n            </a>\r\n          </li>\r\n          <li className=\"nav-item\">\r\n            <input\r\n              type=\"text\"\r\n              value={state.search}\r\n              placeholder=\"Search\"\r\n              onChange={(e) => State.update({ search: e.target.value })}\r\n            />\r\n          </li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n\r\nconst content = {\r\n  entities: (\r\n    <Widget\r\n      src={`${ownerId}/widget/EntityList`}\r\n      props={{ search: state.search }}\r\n    />\r\n  ),\r\n  contributors: (\r\n    <Widget\r\n      src={`${ownerId}/widget/ContributorList`}\r\n      props={{ search: state.search }}\r\n    />\r\n  ),\r\n  admin: (\r\n    <Widget\r\n      src={`${ownerId}/widget/AdminList`}\r\n      props={{ search: state.search }}\r\n    />\r\n  ),\r\n}[state.content];\r\n\r\nreturn (\r\n  <div>\r\n    {controls}\r\n    {navbar}\r\n    <div className=\"mt-2\">{content}</div>{\" \"}\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Index"}