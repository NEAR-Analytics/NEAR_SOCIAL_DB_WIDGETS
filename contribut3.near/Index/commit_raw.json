{"tx_hash": "FANgTPpEgHbECaWGygTPAXWaKwCiQAjuSacWGZzqPLHJ", "action_id_social": "8WDfQikRhGK5rupxGLv84uMAF1eJXMhhDLNn4PGibhdP-0-widget", "block_id": 95062598, "block_timestamp": "2023-06-26T08:51:37.223Z", "signer_id": "contribut3.near", "widget_name": "Index", "source_code": "const ownerId = \"contribut3.near\";\n\nState.init({\n  search: props.search ?? \"\",\n  content: props.content,\n  tab: props.tab ?? \"home\",\n  accountId: props.accountId,\n  entityId: props.entityId,\n  contributorId: props.contributorId,\n  kind: props.kind,\n  cid: props.cid,\n  projectId: props.projectId,\n  vendorId: props.vendorId,\n  tnc: true,\n  tncIsFetched: false,\n});\n\nif (context.accountId && !state.tncIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    { keys: [`${context.accountId}/profile/horizon_tnc`] },\n    \"final\",\n    false\n  ).then((data) =>\n    State.update({\n      tnc: data[context.accountId]?.profile?.horizon_tnc === \"true\",\n      tncIsFetched: true,\n    })\n  );\n}\n\nconst update = (state) => State.update(state);\n\nconst tabContent = {\n  home: (\n    <Widget\n      src={`${ownerId}/widget/Dashboard`}\n      props={{ content: state.content, update }}\n    />\n  ),\n  inbox: (\n    <Widget\n      src={`${ownerId}/widget/Inbox`}\n      props={{ content: state.content, search: state.search, update }}\n    />\n  ),\n  manage: (\n    <Widget\n      src={`${ownerId}/widget/Manage`}\n      props={{ content: state.content, search: state.search, update }}\n    />\n  ),\n  project: (\n    <Widget\n      src={`${ownerId}/widget/Project.Page`}\n      props={{\n        accountId: state.accountId,\n        search: state.search,\n        content: state.content,\n        update,\n      }}\n    />\n  ),\n  request: (\n    <Widget\n      src={`${ownerId}/widget/Request.Page`}\n      props={{\n        accountId: state.accountId,\n        search: state.search,\n        content: state.content,\n        update,\n        cid: state.cid,\n      }}\n    />\n  ),\n  vendor: (\n    <Widget\n      src={`${ownerId}/widget/Vendor.Page`}\n      props={{\n        accountId: state.accountId,\n        search: state.search,\n        content: state.content,\n        update,\n      }}\n    />\n  ),\n  backer: (\n    <Widget\n      src={`${ownerId}/widget/Investor.Page`}\n      props={{\n        accountId: state.accountId,\n        search: state.search,\n        content: state.content,\n        update,\n      }}\n    />\n  ),\n  contribution: (\n    <Widget\n      src={`${ownerId}/widget/Contribution.Page`}\n      props={{\n        accountId: state.accountId,\n        search: state.search,\n        content: state.content,\n        projectId: state.projectId,\n        vendorId: state.vendorId,\n        cid: state.cid,\n        update,\n      }}\n    />\n  ),\n  createproject: (\n    <Widget\n      src={`${ownerId}/widget/Project.Form`}\n      props={{\n        search: state.search,\n        content: state.content,\n        accountId: props.accountId,\n        kind: state.kind,\n        cid: state.cid,\n        update,\n      }}\n    />\n  ),\n  createrequest: (\n    <Widget\n      src={`${ownerId}/widget/Request.Form`}\n      props={{\n        search: state.search,\n        content: state.content,\n        accountId: props.accountId,\n        kind: state.kind,\n        cid: state.cid,\n        update,\n      }}\n    />\n  ),\n  createvendor: (\n    <Widget\n      src={`${ownerId}/widget/Vendor.Form`}\n      props={{\n        search: state.search,\n        content: state.content,\n        accountId: props.accountId,\n        kind: state.kind,\n        cid: state.cid,\n        update,\n      }}\n    />\n  ),\n  createbacker: (\n    <Widget\n      src={`${ownerId}/widget/Investor.Form`}\n      props={{\n        search: state.search,\n        content: state.content,\n        accountId: props.accountId,\n        kind: state.kind,\n        cid: state.cid,\n        update,\n      }}\n    />\n  ),\n  permissions: (\n    <Widget\n      src={`${ownerId}/widget/Inputs.SetUpPermissions`}\n      props={{ accountId: state.accountId, accountIds: props.accountIds }}\n    />\n  ),\n  learn: (\n    <Widget\n      src={`${ownerId}/widget/Learn.Page`}\n      props={{ accountId: state.accountId }}\n    />\n  ),\n  faq: <Widget src={`${ownerId}/widget/FAQ.Page`} />,\n  help: (\n    <Widget\n      src={`${ownerId}/widget/Help.Page`}\n      props={{ accountId: state.accountId }}\n    />\n  ),\n  legal: <Widget src={`${ownerId}/widget/TNCPage`} />,\n  admin: (\n    <Widget\n      src={`${ownerId}/widget/Admin.Page`}\n      props={{ update, content: state.content }}\n    />\n  ),\n  projects: (\n    <Widget\n      src={`${ownerId}/widget/Project.ListPage`}\n      props={{ update, content: state.content, urlProps: props }}\n    />\n  ),\n  investors: (\n    <Widget\n      src={`${ownerId}/widget/Investor.ListPage`}\n      props={{ update, content: state.content, urlProps: props }}\n    />\n  ),\n  vendors: (\n    <Widget\n      src={`${ownerId}/widget/Vendor.ListPage`}\n      props={{ update, content: state.content, urlProps: props }}\n    />\n  ),\n  requests: (\n    <Widget\n      src={`${ownerId}/widget/Request.ListPage`}\n      props={{ update, content: state.content, urlProps: props }}\n    />\n  ),\n  partners: <Widget src={`${ownerId}/widget/Application.Page`} />,\n  partner: (\n    <Widget src={`${ownerId}/widget/Application.DetailPage`} props={props} />\n  ),\n}[state.tab];\n\nconst ContentContainer = styled.div`\n  width: 100%;\n  background: #ffffff;\n  border: 1px solid #eceef0;\n  border-radius: 24px 24px 0px 0px;\n  padding: 3em;\n\n  &.form {\n    border: none;\n    background: #fafafa;\n  }\n\n  * {\n    margin: 0;\n  }\n`;\n\nconst Sidebar = styled.div`\n  display: ${({ show }) => (show ? \"flex\" : \"none\")};\n  flex-direction: row;\n  position: sticky;\n  top: 0;\n\n  @media screen and (max-width: 768px) {\n    & > div {\n      &:last-child {\n        display: none;\n      }\n    }\n  }\n\n  @media screen and (min-width: 768px) {\n    & > div {\n      &:first-child {\n        display: none;\n      }\n    }\n  }\n`;\n\nconst Content = styled.div`\n  display: flex;\n  flex-direction: row;\n  position: relative;\n  width: 100%;\n\n  @media screen and (max-width: 768px) {\n    flex-direction: column;\n  }\n`;\n\nconst Container = styled.div``;\n\nconst showSidebar = ![\n  \"createproject\",\n  \"createrequest\",\n  \"createvendor\",\n  \"createbacker\",\n  \"permissions\",\n  \"legal\",\n].includes(state.tab);\nconst isForm = [\n  \"createproject\",\n  \"createrequest\",\n  \"createvendor\",\n  \"createbacker\",\n].includes(state.tab);\n\nreturn (\n  <Container>\n    <Widget src={`${ownerId}/widget/Help.FeedbackButton`} props={{ update }} />\n    <Widget\n      src={`${ownerId}/widget/TNCModal`}\n      props={{\n        open: !state.tnc,\n        accept: () =>\n          Social.set(\n            { profile: { horizon_tnc: true } },\n            {\n              onCommit: () => {\n                State.update({ tnc: true });\n              },\n            }\n          ),\n      }}\n    />\n    <Widget src={`${ownerId}/widget/NavbarControl`} props={{ update }} />\n    <Content>\n      <Sidebar show={showSidebar}>\n        <Widget\n          src={`${ownerId}/widget/Sidebar`}\n          props={{ tab: state.tab, update, collapsible: true }}\n        />\n        <Widget\n          src={`${ownerId}/widget/Sidebar`}\n          props={{ tab: state.tab, update, collapsible: false }}\n        />\n      </Sidebar>\n      <ContentContainer className={isForm ? \"form\" : \"\"}>\n        {tabContent}\n      </ContentContainer>\n    </Content>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Index", "__row_index": 145}