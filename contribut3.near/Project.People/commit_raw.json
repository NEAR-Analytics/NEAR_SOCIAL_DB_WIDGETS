{"tx_hash": "9tKoepeCCTdCiJ9cUMYnewzUy3sajhmrpM1zPmL1e3ZQ", "action_id_social": "5it8xxhv7FpxuFqFuw9tS3exGvfRwDqkpKqgTFTvs8UQ-0-widget", "block_id": 91606360, "block_timestamp": "2023-05-11T12:23:30.769Z", "signer_id": "contribut3.near", "widget_name": "Project.People", "source_code": "const ownerId = \"contribut3.near\";\nconst accountId = props.accountId ?? context.accountId;\n\nState.init({\n  founders: null,\n  foundersIsFetched: false,\n  team: null,\n  teamIsFetched: false,\n});\n\nif (!state.foundersIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_founders\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((founders) => State.update({ founders, foundersIsFetched: true }));\n}\n\nif (!state.teamIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_team\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((team) => State.update({ team, teamIsFetched: true }));\n}\n\nif (!state.foundersIsFetched || !state.teamIsFetched) {\n  return <>Loading...</>;\n}\n\nif (!state.namesIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    {\n      keys: [...state.founders, ...Object.keys(state.team)].map(\n        (key) => `${key}/profile/name`\n      ),\n    },\n    \"final\",\n    false\n  ).then((names) => {\n    State.update({\n      names: new Map(\n        Object.keys(names).map((account) => [\n          account,\n          names[account].profile.name,\n        ])\n      ),\n      namesIsFetched: true,\n    });\n  });\n}\n\nif (!state.namesIsFetched) {\n  return <>Loading...</>;\n}\n\nconst List = styled.ul`\n  display: flex;\n  flex-direction: column;\n  gap: 1em;\n  padding: 0;\n  margin: 0;\n  list-style: none;\n  width: 100%;\n`;\n\nconst Item = styled.li`\n  display: flex;\n  flex-direction: row;\n  gap: 1em;\n  align-items: center;\n  justify-content: flex-start;\n  width: 100%;\n  padding: 1.5em 0px;\n  border-bottom: 1px solid #eaecf0;\n`;\n\nconst Heading = styled.h3`\n  font-style: normal;\n  font-weight: 700;\n  font-size: 1.125em;\n  line-height: 1.5em;\n  margin-top: 1em;\n\n  color: #000000;\n`;\n\nconst Container = styled.div`\n  width: 100%;\n`;\n\nconst onSave = (project) => {\n  Near.call(ownerId, \"edit_project\", {\n    account_id: accountId,\n    project,\n  });\n};\n\nreturn (\n  <Container>\n    <Heading>Founders</Heading>\n    {props.isAdmin ? (\n      <Widget\n        src={`${ownerId}/widget/Inputs.Founders`}\n        props={{\n          founders: state.founders,\n          update: (founders) => State.update({ founders }),\n          onSave: (founders) => onSave({ founders }),\n        }}\n      />\n    ) : (\n      <List>\n        {state.founders.map((founder) => (\n          <Item>\n            <Widget\n              src={`${ownerId}/widget/Vendor.Icon`}\n              props={{ accountId: founder, size: \"2em\" }}\n            />\n            <Widget\n              src={`${ownerId}/widget/NameAndAccount`}\n              props={{\n                accountId: founder,\n                name: state.names.get(founder),\n                nameSize: \".9em\",\n              }}\n            />\n          </Item>\n        ))}\n      </List>\n    )}\n    <Heading>Team</Heading>\n    {props.isAdmin ? (\n      <Widget\n        src={`${ownerId}/widget/Inputs.Team`}\n        props={{\n          team: state.team,\n          update: (team) => State.update({ team }),\n          onSave: (team) => onSave({ team }),\n        }}\n      />\n    ) : (\n      <List>\n        {Object.keys(state.team).map((member) => (\n          <Item>\n            <Widget\n              src={`${ownerId}/widget/Vendor.Icon`}\n              props={{ accountId: member, size: \"2em\" }}\n            />\n            <Widget\n              src={`${ownerId}/widget/NameAndAccount`}\n              props={{\n                accountId: member,\n                name: state.names.get(member),\n                nameSize: \".9em\",\n              }}\n            />\n          </Item>\n        ))}\n      </List>\n    )}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Project.People", "__row_index": 5}