{"tx_hash": "BzjXd474XZPCUzBxm425kV9th3MmX641qLDiDV3xodt5", "action_id_social": "J2L1bc3pygnCz2hjnBqyBKrYnKxPc9oLbcEaRaJoA4oC-0-widget", "block_id": 94764832, "block_timestamp": "2023-06-22T11:47:51.387Z", "signer_id": "contribut3.near", "widget_name": "Contribution.Details", "source_code": "const onSave = props.onSave ?? (() => {});\nconst ownerId = \"contribut3.near\";\nconst isAdmin = false;\nconst contribution = props.contribution;\nconst [[projectId, cid], vendorId] = contribution.proposal_id;\nconst proposal = props.proposal;\nconst request = props.request;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  padding: 0.5em 0.2em;\n  max-width: 100%;\n  font-size: 0.9em;\n`;\n\nconst Heading = styled.div`\n  padding-bottom: 0.5em;\n  border-bottom: 1px solid #eceef0;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 1em;\n  line-height: 1.4em;\n  color: #000;\n  width: 100%;\n`;\n\nState.init({\n  paymentSources: [],\n  paymentTypes: [],\n  requestTypes: [],\n  isFetched: false,\n  name: \"\",\n  nameIsFetched: false,\n  vendorName: \"\",\n  vendorNameIsFetched: false,\n});\n\nif (!state.isFetched) {\n  Near.asyncView(ownerId, \"get_payment_types\", {}, \"final\", false).then(\n    (paymentTypes) =>\n      State.update({\n        paymentTypes: paymentTypes.map((value) => ({ value, text: value })),\n      })\n  );\n  Near.asyncView(ownerId, \"get_payment_sources\", {}, \"final\", false).then(\n    (paymentSources) =>\n      State.update({\n        paymentSources: paymentSources.map((value) => ({ value, text: value })),\n      })\n  );\n  Near.asyncView(ownerId, \"get_request_types\", {}, \"final\", false).then(\n    (requestTypes) =>\n      State.update({\n        requestTypes: requestTypes.map((value) => ({ value, text: value })),\n      })\n  );\n  State.update({ isFetched: true });\n}\n\nif (!state.nameIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    { keys: [`${projectId}/profile/name`] },\n    \"final\",\n    false\n  ).then((data) =>\n    State.update({\n      name: data[projectId].profile.name,\n      nameIsFetched: true,\n    })\n  );\n}\n\nif (!state.vendorNameIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    { keys: [`${vendorId}/profile/name`] },\n    \"final\",\n    false\n  ).then((data) =>\n    State.update({\n      vendorName: data[vendorId].profile.name,\n      vendorNameIsFetched: true,\n    })\n  );\n}\n\nif (!state.nameIsFetched || !state.vendorNameIsFetched) {\n  return <>Loading...</>;\n}\n\nconst Project = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 0.25em;\n  width: 100%;\n\n  div {\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: flex-start;\n    gap: 0.5em;\n  }\n\n  label {\n    font-style: normal;\n    font-weight: 600;\n    font-size: 0.95em;\n    line-height: 1em;\n    color: #11181c;\n  }\n`;\n\nreturn (\n  <Container>\n    <Heading>Contract Details</Heading>\n    <Project>\n      <label>Project</label>\n      <div>\n        <Widget\n          src={`${ownerId}/widget/Project.Icon`}\n          props={{ accountId: projectId, size: \"2.5em\" }}\n        />\n        <Widget\n          src={`${ownerId}/widget/NameAndAccount`}\n          props={{\n            accountId: projectId,\n            name: state.name,\n            nameSize: \".95em\",\n            accountSize: \".75em\",\n          }}\n        />\n      </div>\n    </Project>\n    <Project>\n      <label>Contributor</label>\n      <div>\n        <Widget\n          src={`${ownerId}/widget/Vendor.Icon`}\n          props={{ accountId: vendorId, size: \"2.5em\" }}\n        />\n        <Widget\n          src={`${ownerId}/widget/NameAndAccount`}\n          props={{\n            accountId: vendorId,\n            name: state.vendorName,\n            nameSize: \".95em\",\n            accountSize: \".75em\",\n          }}\n        />\n      </div>\n    </Project>\n    <Widget\n      src={`${ownerId}/widget/Inputs.Viewable.Number`}\n      props={{\n        label: \"Budget\",\n        id: \"bugdet\",\n        value: contribution.price,\n        canEdit: isAdmin,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Viewable.Select`}\n      props={{\n        label: \"Payment source\",\n        id: \"source\",\n        value: {\n          value: proposal.payment_source,\n          text: proposal.payment_source,\n        },\n        canEdit: isAdmin,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Viewable.Select`}\n      props={{\n        label: \"Payment type\",\n        id: \"payment_type\",\n        value: { value: proposal.payment_type, text: proposal.payment_type },\n        canEdit: isAdmin,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Viewable.Select`}\n      props={{\n        label: \"Request type\",\n        id: \"request_type\",\n        value: { value: proposal.proposal_type, text: proposal.proposal_type },\n\n        canEdit: isAdmin,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Viewable.Date`}\n      props={{\n        label: \"Start date\",\n        id: \"start_date\",\n        value: proposal.start_date,\n        canEdit: isAdmin,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Viewable.Date`}\n      props={{\n        label: \"End date\",\n        id: \"end_date\",\n        value: proposal.end_date ?? \"Work in progress\",\n        canEdit: isAdmin,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Viewable.Date`}\n      props={{\n        label: \"Deadline\",\n        id: \"deadline\",\n        value: request.deadline,\n        canEdit: isAdmin,\n      }}\n    />\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Contribution.Details", "__row_index": 3}