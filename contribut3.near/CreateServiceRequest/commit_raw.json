{"tx_hash": "FUPFtKi4SyLkXUzrmcr4ViDFTrxWwdPsQ3emPdirmYX5", "action_id_social": "EGy7fm4kg1osmqw7G99CBzZnVe6jFJY28pQdkumMnkcE-0-widget", "block_id": 90076056, "block_timestamp": "2023-04-21 07:03:21.062", "signer_id": "contribut3.near", "widget_name": "CreateServiceRequest", "source_code": "const ownerId = \"contribut3.near\";\n\nconst LineContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 0.25em;\n\n  img {\n    vertical-align: top;\n  }\n`;\n\nconst Name = styled.div`\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1em;\n  color: #101828;\n`;\n\nconst AccountId = styled.div`\n  font-style: normal;\n  font-weight: 400;\n  font-size: 0.75em;\n  line-height: 1em;\n  color: #7e868c;\n`;\n\nconst ImageCircle = styled.img`\n  background: #fafafa;\n  border-radius: 8px;\n  object-fit: cover;\n  width: 100%;\n  height: 100%;\n`;\n\nconst ImageContainer = styled.div`\n  display: inline-block;\n  width: 1em;\n  height: 1em;\n`;\n\nconst createProjectLine = (accountId, name, image) => {\n  const fullName = name ?? accountId;\n  const url =\n    (image.ipfs_cid\n      ? `https://ipfs.near.social/ipfs/${image.ipfs_cid}`\n      : image.url) || \"https://thewiki.io/static/media/sasha_anon.6ba19561.png\";\n  const imageSrc = `https://i.near.social/thumbnail/${url}`;\n\n  return (\n    <LineContainer>\n      <ImageContainer title={`${fullName} @${accountId}`}>\n        <ImageCircle src={imageSrc} alt=\"profile image\" />\n      </ImageContainer>\n      <Name>{name}</Name>\n      <AccountId>@{accountId}</AccountId>\n    </LineContainer>\n  );\n};\n\nconst Form = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: flex-start;\n  width: 60%;\n  gap: 1em;\n`;\n\nconst FormHeader = styled.h3`\n  box-sizing: border-box;\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  padding: 0px 0px 0.5em;\n  border-bottom: 1px solid #eceef0;\n  font-style: normal;\n  font-weight: 700;\n  font-size: 1.125em;\n  line-height: 1.25em;\n  color: #000000;\n  width: 100%;\n`;\n\nconst FormFooter = styled.div`\n  display: flex;\n  flex-direction: row-reverse;\n  align-items: center;\n  justify-content: space-between;\n  width: 100%;\n`;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  width: 100%;\n  gap: 3em;\n  padding-bottom: 3em;\n`;\n\nconst Header = styled.h1`\n  font-style: normal;\n  font-weight: 700;\n  font-size: 2em;\n  line-height: 1.4em;\n  text-align: center;\n  color: #000000;\n`;\n\nconst SubHeader = styled.h2`\n  font-style: normal;\n  font-weight: 400;\n  font-size: 0.95em;\n  line-height: 1.25em;\n  text-align: center;\n  color: #101828;\n`;\n\nconst ProgressBar = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  gap: 0.375em;\n  width: 100%;\n  height: 0.5em;\n  padding: 0;\n  margin: 0;\n\n  div {\n    flex-grow: 1;\n    height: 100%;\n    width: 50%;\n    background: #00ec97;\n  }\n\n  &.half {\n    div:last-child {\n      background: #eceef0;\n    }\n  }\n`;\n\nState.init({\n  projectId: null,\n  projects: [],\n  projectsIsFetched: false,\n  tags: [],\n  title: \"\",\n  description: \"\",\n  requestType: null,\n  requestTypes: [],\n  paymentType: null,\n  paymentTypes: [],\n  paymentSource: null,\n  paymentSources: [],\n  budget: 0,\n  deadline: null,\n});\n\nif (!state.projectsIsFetched) {\n  Near.asyncView(ownerId, \"get_payment_types\", {}, \"final\", false).then(\n    (paymentTypes) =>\n      State.update({\n        paymentTypes: paymentTypes.map((value) => ({ value, text: value })),\n      })\n  );\n  Near.asyncView(ownerId, \"get_payment_sources\", {}, \"final\", false).then(\n    (paymentSources) =>\n      State.update({\n        paymentSources: paymentSources.map((value) => ({ value, text: value })),\n      })\n  );\n  Near.asyncView(ownerId, \"get_request_types\", {}, \"final\", false).then(\n    (requestTypes) =>\n      State.update({\n        requestTypes: requestTypes.map((value) => ({ value, text: value })),\n      })\n  );\n  Near.asyncView(\n    ownerId,\n    \"get_admin_projects\",\n    { account_id: context.accountId },\n    \"final\",\n    false\n  ).then((projects) => {\n    Near.asyncView(\n      \"social.near\",\n      \"get\",\n      { keys: projects.map((accountId) => `${accountId}/profile/**`) },\n      \"final\",\n      false\n    ).then((data) =>\n      State.update({\n        projects: projects.map((accountId) => ({\n          // text: <Widget\n          //   src={`${ownerId}/widget/Project.Line`}\n          //   props={{ accountId, size: \"1em\" }}\n          // />,\n          text: createProjectLine(\n            accountId,\n            data[accountId].profile.name,\n            data[accountId].profile.image\n          ),\n          value: accountId,\n        })),\n        projectsIsFetched: true,\n      })\n    );\n  });\n}\n\nreturn (\n  <Container>\n    {/*<ProgressBar className={state.step === \"step1\" ? \"half\" : \"\"}><div /><div /></ProgressBar>*/}\n    <div>\n      <Header>Create new contribution request</Header>\n      <SubHeader>\n        Use this form to post your business needs and match with reputable\n        contributors and service providers with ease\n      </SubHeader>\n    </div>\n    <Form>\n      <FormHeader>Request details</FormHeader>\n      <Widget\n        src={`${ownerId}/widget/Inputs.Select`}\n        props={{\n          label: \"Request as *\",\n          value: state.projectId,\n          options: state.projects,\n          onChange: (projectId) => State.update({ projectId }),\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Text`}\n        props={{\n          label: \"Title\",\n          placeholder: \"Looking for Rust developer to create smart contracts\",\n          value: state.title,\n          onChange: (title) => State.update({ title }),\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.TextArea`}\n        props={{\n          label: \"Description\",\n          placeholder:\n            \"Crypto ipsum bitcoin ethereum dogecoin litecoin. Holo stacks fantom kava flow algorand. Gala dogecoin gala XRP binance flow. Algorand polygon bancor arweave avalanche. Holo kadena telcoin kusama BitTorrent flow holo velas horizen. TerraUSD helium filecoin terra shiba-inu. Serum algorand horizen kava flow maker telcoin algorand enjin. Dai bitcoin.\",\n          value: state.description,\n          onChange: (description) => State.update({ description }),\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.MultiSelect`}\n        props={{\n          label: \"Tags\",\n          placeholder: \"DeFi, Gaming...\",\n          options: [\n            { text: \"Wallets\", value: \"wallets\" },\n            { text: \"Games\", value: \"games\" },\n          ],\n          value: state.tags,\n          onChange: (tags) => State.update({ tags }),\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Select`}\n        props={{\n          label: \"Request type *\",\n          options: state.requestTypes,\n          value: state.requestType,\n          onChange: (requestType) => State.update({ requestType }),\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Select`}\n        props={{\n          label: \"Payment type *\",\n          options: state.paymentTypes,\n          value: state.paymentType,\n          onChange: (paymentType) => State.update({ paymentType }),\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Select`}\n        props={{\n          label: \"Payment source *\",\n          options: state.paymentSources,\n          value: state.paymentSource,\n          onChange: (paymentSource) => State.update({ paymentSource }),\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Number`}\n        props={{\n          label: \"Budget *\",\n          placeholder: 1500,\n          value: state.budget,\n          onChange: (budget) => State.update({ bugdet }),\n        }}\n      />\n      <Widget\n        src={`${ownerId}/widget/Inputs.Date`}\n        props={{\n          label: \"Deadline *\",\n          value: state.deadline,\n          onChange: (deadline) => State.update({ deadline }),\n        }}\n      />\n      <FormFooter>\n        <Widget\n          src={`${ownerId}/widget/Buttons.Green`}\n          props={{\n            onClick: () => {\n              Near.call([\n                {\n                  contractName: \"social.near\",\n                  methodName: \"set\",\n                  args: {\n                    data: {\n                      [state.accountId]: {\n                        profile: {\n                          name: state.name,\n                          tagline: state.tagline,\n                          description: state.description,\n                          tags: state.tags.map(\n                            (acc, { name }) =>\n                              Object.assign(acc, { [name]: \"\" }),\n                            {}\n                          ),\n                          linktree: {\n                            ...state.socials,\n                            website: state.website,\n                          },\n                          category: state.category,\n                          team: state.team,\n                          stage: state.dev,\n                        },\n                      },\n                    },\n                  },\n                },\n                {\n                  contractName: ownerId,\n                  methodName: \"add_project\",\n                  args: { account_id: state.accountId },\n                },\n                {\n                  contractName: ownerId,\n                  methodName: \"edit_project\",\n                  args: {\n                    account_id: state.accountId,\n                    project: {\n                      application: {\n                        integration: state.integration,\n                        geo: state.geo,\n                      },\n                    },\n                  },\n                },\n              ]);\n            },\n            text: (\n              <>\n                <svg\n                  width=\"17\"\n                  height=\"18\"\n                  viewBox=\"0 0 17 18\"\n                  fill=\"none\"\n                  xmlns=\"http://www.w3.org/2000/svg\"\n                >\n                  <path\n                    d=\"M2.875 16.5V12.75M2.875 5.25V1.5M1 3.375H4.75M1 14.625H4.75M9.25 2.25L7.94937 5.63165C7.73786 6.18157 7.6321 6.45653 7.46765 6.68781C7.32189 6.8928 7.1428 7.07189 6.93781 7.21765C6.70653 7.3821 6.43157 7.48786 5.88165 7.69937L2.5 9L5.88165 10.3006C6.43157 10.5121 6.70653 10.6179 6.93781 10.7824C7.1428 10.9281 7.32189 11.1072 7.46765 11.3122C7.6321 11.5435 7.73786 11.8184 7.94937 12.3684L9.25 15.75L10.5506 12.3684C10.7621 11.8184 10.8679 11.5435 11.0324 11.3122C11.1781 11.1072 11.3572 10.9281 11.5622 10.7824C11.7935 10.6179 12.0684 10.5121 12.6184 10.3006L16 9L12.6184 7.69937C12.0684 7.48786 11.7935 7.3821 11.5622 7.21765C11.3572 7.07189 11.1781 6.8928 11.0324 6.68781C10.8679 6.45653 10.7621 6.18157 10.5506 5.63165L9.25 2.25Z\"\n                    stroke=\"#11181C\"\n                    stroke-width=\"1.66667\"\n                    stroke-linecap=\"round\"\n                    stroke-linejoin=\"round\"\n                  />\n                </svg>\n                Create project\n              </>\n            ),\n          }}\n        />\n      </FormFooter>\n    </Form>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/CreateServiceRequest"}