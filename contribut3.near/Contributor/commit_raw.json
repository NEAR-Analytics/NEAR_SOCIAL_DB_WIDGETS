{"tx_hash": "Ao9aeuaLXjAZE3XDZ81CRKWHRhyzEzYykmkp3F81MPc7", "action_id_social": "FQgrvZdncnmRGHgtXtC12rMYr3CNoH6VjXecj3bjRmWY-0-widget", "block_id": 86899692, "block_timestamp": "2023-03-09 10:43:47.678", "signer_id": "contribut3.near", "widget_name": "Contributor", "source_code": "const ownerId = \"contribut3.near\";\r\nconst accountId = props.accountId;\r\n\r\nif (!accountId) {\r\n  return \"Cannot show contributor without account ID!\";\r\n}\r\n\r\nState.init({\r\n  contributor: null,\r\n  contributorFetched: false,\r\n  isEntity: false,\r\n  isEntityFetched: false,\r\n  profile: null,\r\n  profileFetched: false,\r\n});\r\n\r\nif (!state.contributorFetched) {\r\n  Near.asyncView(\r\n    ownerId,\r\n    \"get_contributor\",\r\n    { account_id: accountId },\r\n    \"final\",\r\n    false\r\n  ).then((contributor) =>\r\n    State.update({ contributor, contributorFetched: true })\r\n  );\r\n}\r\n\r\nif (!state.contributor) {\r\n  return \"Loading...\";\r\n}\r\n\r\nif (!state.isEntityFetched) {\r\n  Near.asyncView(\r\n    ownerId,\r\n    \"check_is_entity\",\r\n    { account_id: accountId },\r\n    \"final\",\r\n    false\r\n  ).then((isEntity) => State.update({ isEntity, isEntityFetched: true }));\r\n}\r\n\r\nconst active = state.contributor.looking_for_work;\r\n\r\nif (!state.profileFetched) {\r\n  const profile = Social.get(`${accountId}/profile/**`, \"final\", {\r\n    subscribe: false,\r\n  });\r\n  State.update({ profile, profileFetched: true });\r\n}\r\n\r\nconst contributionTypes = state.contributor.contribution_types.reduce(\r\n  (ob, contributionType) =>\r\n    typeof contributionType === \"object\"\r\n      ? { ...ob, [contributionType.Other]: \"\" }\r\n      : { ...ob, [contributionType]: \"\" },\r\n  {}\r\n);\r\n\r\nif (contributionTypes && \"Other\" in contributionTypes) {\r\n  contributionTypes[contributionTypes.Other] = \"\";\r\n  delete contributionTypes.Other;\r\n}\r\n\r\nconst skills = state.contributor.skills.reduce(\r\n  (ob, skill) => ({ ...ob, [skill]: \"\" }),\r\n  {}\r\n);\r\n\r\nconst tags = { ...skills, ...contributionTypes } || state.profile.tags;\r\n\r\nconst Container = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: start;\r\n  min-height: 8em;\r\n  max-width: 100%;\r\n  padding: 0 0.75em;\r\n  border-bottom: 1px solid #eaecf0;\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  flex-grow: 1;\r\n  padding: 0.75em 0;\r\n  max-width: 100%;\r\n`;\r\n\r\nconst ActionColumn = styled.div`\r\n  display: ${({ show }) => (show ? \"flex\" : \"none\")};\r\n  flex-direction: row;\r\n  justify-content: between;\r\n  align-items: center;\r\n`;\r\n\r\nconst TypeContainer = styled.div`\r\n  display: flex;\r\n  flex-direction: row;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n\r\n  span {\r\n    margin-left: 0.5em;\r\n  }\r\n`;\r\n\r\nconst DescriptionWrapper = styled.div`\r\n  max-width: 100%;\r\n  margin-top: 0.5em;\r\n`;\r\n\r\nreturn (\r\n  <Container id={accountId}>\r\n    <Wrapper>\r\n      <Widget\r\n        src={`${ownerId}/widget/ProfileLine`}\r\n        props={{\r\n          accountId,\r\n          isEntity,\r\n          imageSize: \"3em\",\r\n          update: props.update,\r\n          additionalColumn: (\r\n            <ActionColumn show={!inboxView}>\r\n              <Widget\r\n                src={`${ownerId}/widget/ActiveIndicator`}\r\n                props={{\r\n                  active,\r\n                  activeText: \"Available\",\r\n                  inactiveText: \"Not avilable\",\r\n                }}\r\n              />\r\n              <Widget\r\n                src={`${ownerId}/widget/CardMenu`}\r\n                props={{\r\n                  update: props.update,\r\n                  items: [\r\n                    {\r\n                      text: \"Invite to contribute\",\r\n                      icon: \"bi-person-plus\",\r\n                      href: `/#/${ownerId}/widget/Index?tab=create&content=invite&accountId=${accountId}`,\r\n                      onClick: () =>\r\n                        props.update({\r\n                          tab: \"create\",\r\n                          content: \"invite\",\r\n                          search: \"\",\r\n                          accountId,\r\n                        }),\r\n                    },\r\n                    {\r\n                      text: \"View details\",\r\n                      icon: \"bi-info-circle\",\r\n                      href: `/#/${ownerId}/widget/Index?tab=contributor&accountId=${accountId}`,\r\n                      onClick: () =>\r\n                        props.update({\r\n                          tab: \"contributor\",\r\n                          content: \"\",\r\n                          search: \"\",\r\n                          accountId,\r\n                        }),\r\n                    },\r\n                    {\r\n                      text: \"Share\",\r\n                      icon: \"bi-arrow-up-right\",\r\n                      id: \"share\",\r\n                    },\r\n                  ],\r\n                }}\r\n              />\r\n            </ActionColumn>\r\n          ),\r\n          additionalRow: (\r\n            <>\r\n              <TypeContainer>\r\n                <i>\r\n                  {!state.isEntity ? (\r\n                    <svg\r\n                      width=\"20\"\r\n                      height=\"21\"\r\n                      viewBox=\"0 0 24 25\"\r\n                      fill=\"none\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path\r\n                        d=\"M16.6666 18C16.6666 16.837 16.6666 16.2555 16.5231 15.7824C16.1999 14.717 15.3662 13.8834 14.3009 13.5602C13.8277 13.4167 13.2462 13.4167 12.0832 13.4167H7.91659C6.75362 13.4167 6.17213 13.4167 5.69897 13.5602C4.63363 13.8834 3.79995 14.717 3.47678 15.7824C3.33325 16.2555 3.33325 16.837 3.33325 18M13.7499 6.75C13.7499 8.82107 12.071 10.5 9.99992 10.5C7.92885 10.5 6.24992 8.82107 6.24992 6.75C6.24992 4.67893 7.92885 3 9.99992 3C12.071 3 13.7499 4.67893 13.7499 6.75Z\"\r\n                        stroke=\"#667085\"\r\n                        stroke-width=\"1.5\"\r\n                        stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"\r\n                      />\r\n                    </svg>\r\n                  ) : (\r\n                    <svg\r\n                      width=\"20\"\r\n                      height=\"21\"\r\n                      viewBox=\"0 0 20 21\"\r\n                      fill=\"none\"\r\n                      xmlns=\"http://www.w3.org/2000/svg\"\r\n                    >\r\n                      <path\r\n                        d=\"M16.6666 18C16.6666 16.837 16.6666 16.2555 16.5231 15.7824C16.1999 14.717 15.3662 13.8834 14.3009 13.5602C13.8277 13.4167 13.2462 13.4167 12.0832 13.4167H 7.91659C6.75362 13.4167 6.17213 13.4167 5.69897 13.5602C4.63363 13.8834 3.79995 14.717 3.47678 15.7824C3.33325 16.2555 3.33325 16.837 3.33325 18M13.7499 6.75C13.74 99 8.82107 12.071 10.5 9.99992 10.5C7.92885 10.5 6.24992 8.82107 6.24992 6.75C6.24992 4.67893 7.92885 3 9.99992 3C12.071 3 13.7499 4.67893 13.7499 6.75Z\"\r\n                        stroke=\"#667085\"\r\n                        stroke-width=\"1.5\"\r\n                        stroke-linecap=\"round\"\r\n                        stroke-linejoin=\"round\"\r\n                      />\r\n                    </svg>\r\n                  )}\r\n                </i>\r\n                <span>\r\n                  {state.isEntity ? \"Organization\" : \"Individual contributor\"}\r\n                </span>\r\n              </TypeContainer>\r\n              <Widget src={`${ownerId}/widget/Tags`} props={{ tags }} />\r\n            </>\r\n          ),\r\n        }}\r\n      />\r\n      <DescriptionWrapper>\r\n        <Widget\r\n          src={`${ownerId}/widget/DescriptionArea`}\r\n          props={{\r\n            description: state.contributor.resume || state.profile.description,\r\n          }}\r\n        />\r\n      </DescriptionWrapper>\r\n    </Wrapper>\r\n  </Container>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Contributor"}