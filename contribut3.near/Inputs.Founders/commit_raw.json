{"tx_hash": "DkapkN5dhCCwZBZW5Fpsns3MfkKXuGYQ7VwGejzFHJv", "action_id_social": "5oGauGmaNwpKDdd9RqKiscyLvt3hj8k3bg9GQua3qCGd-0-widget", "block_id": 91361675, "block_timestamp": "2023-05-08T06:50:54.641Z", "signer_id": "contribut3.near", "widget_name": "Inputs.Founders", "source_code": "const ownerId = \"contribut3.near\";\nconst founders = props.founders ?? [];\nconst update = props.update ?? (() => {});\nconst onSave = props.onSave ?? (() => {});\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: space-between;\n  padding: 0.75em 0.95em;\n  gap: 0.75em;\n  width: 100%;\n  background: #f9fafb;\n  border-bottom: 1px solid #eaecf0;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.75em;\n  line-height: 1em;\n  color: #475467;\n`;\n\nconst Name = styled.div`\n  width: 85%;\n`;\n\nconst Other = styled.div`\n  text-align: center;\n  width: 15%;\n`;\n\nconst Container = styled.div`\n  .cont {\n    width: 100% !important;\n  }\n`;\n\nState.init({\n  founders: [],\n  following: [],\n  followingIsFetched: false,\n  followers: [],\n  followersIsFetched: false,\n});\n\nif (!state.followingIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    { keys: [`${context.accountId}/graph/follow/*`] },\n    \"final\",\n    false\n  ).then((data) => {\n    const following = (\n      Object.keys(data).length > 0\n        ? Object.keys(data[context.accountId]?.graph?.follow ?? {})\n        : []\n    ).map((name) => ({ name }));\n    State.update({\n      following,\n      followingIsFetched: true,\n    });\n  });\n}\n\nif (!state.followersIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    { keys: [`*/graph/follow/${context.accountId}`] },\n    \"final\",\n    false\n  ).then((data) => {\n    const followers = Object.keys(data ?? {}).map((name) => ({ name }));\n    State.update({\n      followers,\n      followersIsFetched: true,\n    });\n  });\n}\n\nconst SaveButton = styled.button`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0.5em 1em;\n  background: #00ec97;\n  border-radius: 50px;\n  border: none;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1em;\n  text-align: center;\n  color: #11181c;\n  margin-top: 1em;\n`;\n\nreturn (\n  <Container>\n    <Widget\n      src={`${ownerId}/widget/Inputs.MultiSelect`}\n      props={{\n        label: \"Add founders\",\n        placeholder: \"Start typing\",\n        options: [...state.followers, ...state.following].filter(\n          ({ name }) => !founders.includes(name)\n        ),\n        value: state.founders,\n        onChange: (founders) => {\n          State.update({ founders });\n          update(\n            Array.from(\n              new Set([...props.founders, ...founders.map(({ name }) => name)])\n            )\n          );\n        },\n      }}\n    />\n    <Header>\n      <Name>User</Name>\n      <Other />\n    </Header>\n    {founders.map((accountId) => (\n      <div key={accountId}>\n        <Widget\n          src={`${ownerId}/widget/Inputs.Founder`}\n          props={{\n            accountId,\n            onRemove: () =>\n              update(props.founders.filter((id) => id !== accountId)),\n          }}\n        />\n      </div>\n    ))}\n    <SaveButton onClick={() => onSave(founders)}>Save changes</SaveButton>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Inputs.Founders", "__row_index": 1}