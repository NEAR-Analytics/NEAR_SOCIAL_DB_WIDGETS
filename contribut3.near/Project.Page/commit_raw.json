{"tx_hash": "V8yjNbi8N4atNz5g4PyaoUKqCsY87aQLQkkwXdtkrP1", "action_id_social": "9pQ9WF6gMs4Ywc7yZEPaqSUbu3XHxLgDYMg9kLtWfrMW-0-widget", "block_id": 92594479, "block_timestamp": "2023-05-24T10:33:10.094Z", "signer_id": "contribut3.near", "widget_name": "Project.Page", "source_code": "const ownerId = \"contribut3.near\";\nconst accountId = props.accountId ?? context.accountId;\n\nState.init({\n  isAdmin: false,\n  isAdminIsFetched: false,\n  project: null,\n  projectIsFetched: false,\n});\n\nif (!state.isAdminIsFetched) {\n  if (!context.accountId) {\n    State.update({ isAdmin: false, isAdminIsFetched: true });\n  } else {\n    Near.asyncView(\n      ownerId,\n      \"check_is_project_admin\",\n      { project_id: accountId, account_id: context.accountId },\n      \"final\",\n      false\n    ).then((isAdmin) => State.update({ isAdmin, isAdminIsFetched: true }));\n  }\n}\n\nif (!state.projectIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_project\",\n    { account_id: accountId },\n    \"final\",\n    false\n  ).then((project) => State.update({ project, projectIsFetched: true }));\n}\n\nif (!state.projectIsFetched || !state.isAdminIsFetched) {\n  return <>Loading...</>;\n}\n\nconst availableContent = [\n  \"overview\",\n  \"requests\",\n  \"people\",\n  \"history\",\n  \"documents\",\n];\n\nconst getContent = (content) => {\n  if (!content || !availableContent.includes(content)) {\n    return \"overview\";\n  }\n\n  return content;\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: space-between;\n  gap: 1em;\n  width: 100%;\n`;\n\nconst HeaderDetails = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 80%;\n`;\n\nconst HeaderProgress = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  width: 20%;\n`;\n\nconst ContentContainer = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 100%;\n`;\n\nconst MainContent = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 80%;\n  padding-top: 0.25em;\n`;\n\nconst Sidebar = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 20%;\n`;\n\nconst circledPlus = (\n  <svg\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <g clip-path=\"url(#clip0_1624_38049)\">\n      <path\n        d=\"M9 6V12M6 9H12M16.5 9C16.5 13.1421 13.1421 16.5 9 16.5C4.85786 16.5 1.5 13.1421 1.5 9C1.5 4.85786 4.85786 1.5 9 1.5C13.1421 1.5 16.5 4.85786 16.5 9Z\"\n        stroke=\"currentColor\"\n        stroke-width=\"1.66667\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n      />\n    </g>\n    <defs>\n      <clipPath id=\"clip0_1624_38049\">\n        <rect width=\"18\" height=\"18\" fill=\"white\" />\n      </clipPath>\n    </defs>\n  </svg>\n);\n\nconst plus = (\n  <svg\n    width=\"18\"\n    height=\"18\"\n    viewBox=\"0 0 18 18\"\n    fill=\"none\"\n    xmlns=\"http://www.w3.org/2000/svg\"\n  >\n    <path\n      d=\"M9 3.75V14.25M3.75 9H14.25\"\n      stroke=\"#006ADC\"\n      stroke-width=\"1.66667\"\n      stroke-linecap=\"round\"\n      stroke-linejoin=\"round\"\n    />\n  </svg>\n);\n\nconst CTARow = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 0.75em;\n  margin-top: 1em;\n`;\n\nconst content = {\n  overview: (\n    <Widget\n      src={`${ownerId}/widget/Project.About`}\n      props={{ accountId: props.accountId, isAdmin: state.isAdmin }}\n    />\n  ),\n  requests: (\n    <Widget\n      src={`${ownerId}/widget/Project.Requests`}\n      props={{ accountId: props.accountId }}\n    />\n  ),\n  people: (\n    <Widget\n      src={`${ownerId}/widget/Project.People`}\n      props={{ accountId: props.accountId, isAdmin: state.isAdmin }}\n    />\n  ),\n  history: (\n    <Widget\n      src={`${ownerId}/widget/Project.History`}\n      props={{ accountId: props.accountId }}\n    />\n  ),\n  documents: (\n    <Widget\n      src={`${ownerId}/widget/Project.Documents`}\n      props={{ accountId: props.accountId, isAdmin: state.isAdmin }}\n    />\n  ),\n}[getContent(props.content)];\n\nconst GreyButton = styled.a`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0.75em 1em;\n  gap: 0.5em;\n  background: #fafafa;\n  border: 1px solid #eceef0;\n  border-radius: 50px;\n  color: #006adc;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1em;\n  text-align: center;\n  white-space: nowrap;\n`;\n\nreturn (\n  <Container>\n    <Header>\n      <HeaderDetails>\n        <Widget\n          src={`${ownerId}/widget/Project.HeaderDetails`}\n          props={{ accountId, isAdmin: state.isAdmin }}\n        />\n        <CTARow>\n          {state.isAdmin ? (\n            <>\n              {state.project.application === \"NotSubmitted\" ||\n                \"Rejected\" in state.project.application ? (\n                <GreyButton\n                  onClick={() =>\n                    Near.call(ownerId, \"apply_for_program\", {\n                      account_id: accountId,\n                    })\n                  }\n                >\n                  <svg\n                    width=\"18\"\n                    height=\"16\"\n                    viewBox=\"0 0 18 16\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M9.75 2.75C9.75 3.57843 7.90317 4.25 5.625 4.25C3.34683 4.25 1.5 3.57843 1.5 2.75M9.75 2.75C9.75 1.92157 7.90317 1.25 5.625 1.25C3.34683 1.25 1.5 1.92157 1.5 2.75M9.75 2.75V3.875M1.5 2.75V11.75C1.5 12.5784 3.34683 13.25 5.625 13.25M5.625 7.25C5.49859 7.25 5.37351 7.24793 5.25 7.24388C3.14756 7.17499 1.5 6.53246 1.5 5.75M5.625 10.25C3.34683 10.25 1.5 9.57843 1.5 8.75M16.5 7.625C16.5 8.45343 14.6532 9.125 12.375 9.125C10.0968 9.125 8.25 8.45343 8.25 7.625M16.5 7.625C16.5 6.79657 14.6532 6.125 12.375 6.125C10.0968 6.125 8.25 6.79657 8.25 7.625M16.5 7.625V13.25C16.5 14.0784 14.6532 14.75 12.375 14.75C10.0968 14.75 8.25 14.0784 8.25 13.25V7.625M16.5 10.4375C16.5 11.2659 14.6532 11.9375 12.375 11.9375C10.0968 11.9375 8.25 11.2659 8.25 10.4375\"\n                      stroke=\"#006adc\"\n                      stroke-width=\"1.66667\"\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                    />\n                  </svg>\n                  Apply for credits\n                </GreyButton>\n              ) : (\n                <GreyButton disabled>\n                  <svg\n                    width=\"18\"\n                    height=\"13\"\n                    viewBox=\"0 0 18 13\"\n                    fill=\"none\"\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                  >\n                    <path\n                      d=\"M17 1L6 12L1 7\"\n                      stroke=\"#878a8e\"\n                      stroke-width=\"2\"\n                      stroke-linecap=\"round\"\n                      stroke-linejoin=\"round\"\n                    />\n                  </svg>\n                  Credits requested\n                </GreyButton>\n              )}\n              <GreyButton\n                href={`/${ownerId}/widget/Index?tab=createrequest&accountId=${accountId}`}\n              >\n                {plus}Create request\n              </GreyButton>\n            </>\n          ) : (\n            <>\n              <Widget\n                src={`${ownerId}/widget/Project.ProposeSideWindow`}\n                props={{ accountId }}\n              />\n              <Widget\n                src={`${ownerId}/widget/Project.ClaimSideWindow`}\n                props={{ accountId }}\n              />\n            </>\n          )}\n        </CTARow>\n      </HeaderDetails>\n      <HeaderProgress>\n        <Widget\n          src={`${ownerId}/widget/Project.Progress`}\n          props={{ accountId }}\n        />\n      </HeaderProgress>\n    </Header>\n    <ContentContainer>\n      <MainContent>\n        <Widget\n          src={`${ownerId}/widget/TabSelector`}\n          props={{\n            tab: \"project\",\n            content: getContent(props.content),\n            search: props.search,\n            update: props.update,\n            accountId: props.accountId,\n            buttons: [\n              {\n                id: \"overview\",\n                text: \"Overview\",\n              },\n              {\n                id: \"requests\",\n                text: \"Requests\",\n              },\n              {\n                id: \"people\",\n                text: \"People\",\n              },\n              {\n                id: \"history\",\n                text: \"Work history\",\n              },\n              {\n                id: \"documents\",\n                text: \"Documents\",\n              },\n            ],\n          }}\n        />\n        {content}\n      </MainContent>\n      <Sidebar>\n        <Widget\n          src={`${ownerId}/widget/Project.Sidebar`}\n          props={{\n            accountId,\n            isAdmin: state.isAdmin,\n          }}\n        />\n      </Sidebar>\n    </ContentContainer>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/Project.Page", "__row_index": 15}