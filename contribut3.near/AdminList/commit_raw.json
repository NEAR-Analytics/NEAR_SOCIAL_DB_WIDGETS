{"tx_hash": "FgnrFyDm7aaE6m9sm6cQJiMZvNi177YCCipB2mR6U8sy", "action_id_social": "8pungvFnbFgYmB1nRGEh3bjoqmHw65YBQgGDcQoBnkTQ-0-widget", "block_id": 86754065, "block_timestamp": "2023-03-07 10:49:10.262", "signer_id": "contribut3.near", "widget_name": "AdminList", "source_code": "const ownerId = \"contribut3.near\";\r\nconst limit = 10;\r\nconst search = props.search ?? \"\";\r\n\r\nState.init({\r\n  entities: [],\r\n  shown: [],\r\n  from: 0,\r\n  hasMore: true,\r\n});\r\n\r\nNear.asyncView(\r\n  ownerId,\r\n  \"get_admin_entities\",\r\n  { account_id: context.accountId },\r\n  \"final\",\r\n  false\r\n).then((entities) => State.update({ entities: entities.sort() }));\r\n\r\nconst allEntities = (\r\n  Near.view(\r\n    ownerId,\r\n    \"get_admin_entities\",\r\n    { account_id: context.accountId },\r\n    \"final\",\r\n    false\r\n  ) ?? []\r\n).filter((accountId) => accountId.includes(search));\r\n\r\nconst loadMore = () =>\r\n  State.update({\r\n    shown: [\r\n      ...state.shown,\r\n      state.entities.slice(state.from, state.from + limit),\r\n    ],\r\n    from: state.from + limit,\r\n    hasMore: state.from + limit < state.entities.length,\r\n  });\r\n\r\nif (!allEntities || allEntities.length === 0) {\r\n  return \"No entities with Admin access for your account!\";\r\n}\r\n\r\nconst WidgetContainer = styled.div`\r\n  margin-bottom: 0.5em;\r\n`;\r\n\r\nreturn (\r\n  <>\r\n    {allEntities.map((accountId) => (\r\n      <WidgetContainer key={accountId}>\r\n        <Widget\r\n          src={`${ownerId}/widget/Entity`}\r\n          props={{\r\n            accountId,\r\n            notStandalone: false,\r\n            inboxView: true,\r\n            update: props.update,\r\n          }}\r\n        />\r\n      </WidgetContainer>\r\n    ))}\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/contribut3.near/widget/AdminList"}