{"tx_hash": "4TsTTNaVuyp2TvSjB7xwpkEnPn1QxZeoYnC5EM8sJqig", "action_id_social": "CmuhHmyYHachMqDki73zah7wdUJb94HvJ62mevqPpTN2-0-widget", "block_id": 86874854, "block_timestamp": "2023-03-09 02:40:55.912", "signer_id": "411a6689bda8aba25d5bcfd1fd9890641e1271436bd0baa4ae59ea28b136a467", "widget_name": "Paras-Marketplace-Dashboard", "source_code": "const bgStyle = {\r\n  background:\r\n    \"radial-gradient(64.28% 58.47% at 27.26% 59.61%,rgba(67,118,254,.55) 0,rgba(67,118,254,0) 100%)\",\r\n  filter: \"blur(95px)\",\r\n  pointerEvents: \"none\",\r\n  position: \"absolute\",\r\n  transform: \"matrix(-1,0,0,-1,0,0)\",\r\n  zIndex: 0,\r\n  width: \"100%\",\r\n  height: \"100%\",\r\n};\r\n\r\nconst wStyle = {\r\n  maxHeight: \"800px\",\r\n  overflow: \"scroll\",\r\n  background: \"blue\",\r\n  color: \"white\",\r\n  padding: \"0 25px 25px 25px\",\r\n};\r\n\r\nconst tableStyle = {\r\n  display: \"table\",\r\n  width: \"100%\",\r\n  borderCollapse: \"separate\",\r\n  borderSpacing: \"0px\",\r\n  fontSize: \"14px\",\r\n};\r\n\r\nconst tdStyle = {\r\n  textOverflow: \"ellipsis\",\r\n  overflow: \"hidden\",\r\n  whiteSpace: \"nowrap\",\r\n  padding: \"16px\",\r\n  maxWidth: \"130px\",\r\n  borderBottom: \"1px solid rgb(81, 81, 81)\",\r\n};\r\n\r\nconst theadStyle = {\r\n  position: \"sticky\",\r\n  top: 0,\r\n  background: \"rgb(13, 15, 36)\",\r\n  padding: \"16px\",\r\n  textAlign: \"left\",\r\n  lineHeight: \"12px\",\r\n};\r\n\r\nconst linkStyle = {\r\n  margin: \"0px\",\r\n  textDecoration: \"underline rgba(1, 199, 251, 0.4)\",\r\n  color: \"rgb(1, 199, 251)\",\r\n  fontWeight: 500,\r\n};\r\n\r\nState.init({\r\n  imgSrc1: \"\",\r\n});\r\n\r\nState.init({\r\n  imgSrc2: \"\",\r\n});\r\n\r\nState.init({\r\n  imgSrc3: \"\",\r\n});\r\n\r\nconst options = {\r\n  subscribe: true,\r\n  method: \"GET\",\r\n  headers: {\r\n    Accept: \"*/*\",\r\n  },\r\n};\r\n\r\nconst apiUrl1 =\r\n  \"https://api.flipsidecrypto.com/api/v2/queries/fe213752-a832-4f0b-a08a-52e85ae53798/data/latest\";\r\n\r\nconst apiUrl2 =\r\n  \"https://api.flipsidecrypto.com/api/v2/queries/a371f03d-ccdf-4e58-81cb-1c1aaff87b27/data/latest\";\r\n\r\nlet parasActivity = fetch(apiUrl1, options);\r\n\r\nlet parasMetrics = fetch(apiUrl2, options);\r\n\r\nconst pM = parasMetrics.body[0];\r\n\r\nlet res1 = fetch(\r\n  \"https://api.flipsidecrypto.com/api/v2/queries/10ee9d9f-489f-40d6-a2c4-2c474b659d03/data/latest\",\r\n  options\r\n);\r\n\r\nlet res2 = fetch(\r\n  \"https://api.flipsidecrypto.com/api/v2/queries/89568d53-1fe3-441a-b3e0-4ffd6f53afa9/data/latest\",\r\n  options\r\n);\r\n\r\nlet res3 = fetch(\r\n  \"https://api.flipsidecrypto.com/api/v2/queries/5fc6a473-47ff-4d61-8ff9-ad57aa3bb1d9/data/latest\",\r\n  options\r\n);\r\n\r\nlet res4 = fetch(\r\n  \"https://api.flipsidecrypto.com/api/v2/queries/c0fcca8f-f9bb-4eeb-b888-44363de1fc4e/data/latest\",\r\n  options\r\n);\r\n\r\nfunction numberWithCommas(x) {\r\n  return JSON.stringify(x).replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n}\r\n\r\nfunction chartMaker(response, imgsrc, type) {\r\n  let respKeys = Object.keys(response.body[0]);\r\n  let queryResults = Object.entries(response.body);\r\n  const chartType = `${JSON.stringify(type)}`;\r\n  const chartTitle = `\"Total Gross Sales in US$\"`;\r\n\r\n  let chartBottomAxisLabels = \"[\";\r\n  let chartValues = \"[\";\r\n\r\n  if (queryResults !== \"\") {\r\n    queryResults.map(([k, v], i) => {\r\n      if (i !== 0) {\r\n        chartBottomAxisLabels += \",\";\r\n        chartValues += \",\";\r\n      } else if (type === \"donut\") {\r\n        chartValues += `{label: '${chartTitle}', data:[`;\r\n      } else if (type === \"bar\") {\r\n        chartValues += `{label: '${chartTitle}',backgroundColor:'rgb(54, 162, 235, 0.5)',borderColor:'rgb(54, 162, 235)',borderWidth:1,data:[`;\r\n      } else if (type === \"line\") {\r\n        chartValues += `{label: '${chartTitle}',borderColor: getGradientFillHelper('vertical', ['rgb(235, 54, 57)', 'rgb(163, 54, 235)', 'rgb(54, 162, 235)']),borderWidth: 5, pointRadius: 0, fill: false, backgroundColor:'rgba(54, 162, 235, 0.5)',borderWidth:1,data:[`;\r\n      }\r\n\r\n      chartBottomAxisLabels += \"'\";\r\n      chartBottomAxisLabels += v[respKeys[0]];\r\n      chartBottomAxisLabels += \"'\";\r\n\r\n      chartValues += \"'\";\r\n      chartValues += v[respKeys[1]];\r\n      chartValues += \"'\";\r\n    });\r\n\r\n    chartValues += \"]}]\";\r\n    chartBottomAxisLabels += \"]\";\r\n\r\n    const imgTemplate = `https://quickchart.io/chart?width=265&height=180&chart=\r\n    {type:${chartType},data:{labels:${chartBottomAxisLabels}, datasets:${chartValues}},\r\n    options:\r\n    {plugins:\r\n    {datalabels:{\r\n    display:true,\r\n    backgroundColor: 'rgba(0, 0, 0, 0)',\r\n    font:{size:8,style:'bold',},\r\n    borderRadius:10,\r\n      },\r\n      },\r\n      legend:{labels:{fontSize:5,fontStyle:'bold'},position:'right'}\r\n      }\r\n      }`;\r\n\r\n    const imgTemplate1 = `https://quickchart.io/chart?width=270&height=220&chart=\r\n    {type:${chartType},data:{labels:${chartBottomAxisLabels}, datasets:${chartValues}},\r\n    options:{\r\n    scales:{\r\n    xAxes:[{gridLines:{display: false,},scaleLabel:{fontFamily:'roboto', display:true,fontSize:7,fontStyle:'bold',labelString:'Days'},ticks: {fontFamily: 'roboto',fontStyle: 'bold',fontSize:6}}],\r\n    yAxes:[{gridLines:{display: false,}, scaleLabel:{fontFamily:'roboto',display:true,fontSize:7,fontStyle:'bold',labelString: 'Total Gross Sales'},ticks: {fontFamily: 'roboto',fontStyle: 'bold',fontSize:6}}]\r\n    },plugins:\r\n    { tickFormat: {\r\n      style: 'currency',\r\n      currency: 'USD',\r\n      minimumFractionDigits: 2,\r\n    }, \"roundedBars\": true, datalabels:{\r\n    display:false,\r\n    font:{size:2,style:'bold',},\r\n    borderRadius:10,\r\n      },\r\n      },\r\n      legend:{labels:{fontSize:5,fontStyle:'bold'},position:'right',display:false,}\r\n      }\r\n      }`;\r\n\r\n    const imgTemplate2 = `https://quickchart.io/chart?width=270&height=220&chart=\r\n    {type:${chartType},data:{labels:${chartBottomAxisLabels}, datasets:${chartValues}},\r\n    options:{\r\n    scales:{\r\n    xAxes:[{gridLines:{display: false,},scaleLabel:{fontFamily:'roboto', display:true,fontSize:7,fontStyle:'bold',labelString:'Days'},ticks: {fontFamily: 'roboto',fontStyle: 'bold',fontSize:6}}],\r\n    yAxes:[{gridLines:{display: false,}, scaleLabel:{fontFamily:'roboto',display:true,fontSize:7,fontStyle:'bold',labelString: 'Cumulative Number of Sales'},ticks: {fontFamily: 'roboto',fontStyle: 'bold',fontSize:6}}]\r\n    },plugins:\r\n    { datalabels:{\r\n    display:false,\r\n    font:{size:2,style:'bold',},\r\n    borderRadius:10,\r\n      },\r\n      },\r\n      legend:{labels:{fontSize:5,fontStyle:'bold'},position:'right',display:false,}\r\n      }\r\n      }`;\r\n\r\n    if (imgsrc === \"imgSrc1\") {\r\n      State.update({\r\n        imgSrc1: imgTemplate,\r\n      });\r\n    } else if (imgsrc === \"imgSrc2\") {\r\n      State.update({\r\n        imgSrc2: imgTemplate,\r\n      });\r\n    } else if (imgsrc === \"imgSrc3\") {\r\n      State.update({\r\n        imgSrc3: imgTemplate1,\r\n      });\r\n    } else if (imgsrc === \"imgSrc4\") {\r\n      State.update({\r\n        imgSrc4: imgTemplate2,\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nchartMaker(res1, \"imgSrc1\", \"donut\");\r\nchartMaker(res2, \"imgSrc2\", \"donut\");\r\nchartMaker(res3, \"imgSrc3\", \"bar\");\r\nchartMaker(res4, \"imgSrc4\", \"line\");\r\n\r\nlet allRows = [];\r\nfor (let i = 0; i < parasActivity.body.length; i++) {\r\n  const pA = parasActivity.body[i];\r\n  const txDate = pA.EVENT_TIMESTAMP;\r\n  allRows.push(\r\n    <tr>\r\n      <td style={tdStyle}>\r\n        <a\r\n          style={linkStyle}\r\n          href={`https://paras.id${pA.CONTRACT_SUFFIX}`}\r\n          target=\"_blank\"\r\n        >\r\n          {pA.NFT_NAME}\r\n        </a>\r\n      </td>\r\n      <td style={tdStyle}>\r\n        <a\r\n          style={linkStyle}\r\n          href={`https://nearblocks.io/txns/${pA.TX_HASH}`}\r\n          target=\"_blank\"\r\n        >\r\n          {pA.ACTION}\r\n        </a>\r\n      </td>\r\n      <td style={tdStyle}>{txDate}</td>\r\n      <td style={tdStyle}>\r\n        {numberWithCommas(parseInt(pA.AMOUNT))}\r\n        <img\r\n          src=\"https://s2.coinmarketcap.com/static/img/coins/64x64/6535.png\"\r\n          height=\"20px\"\r\n          width=\"20px\"\r\n        ></img>\r\n      </td>\r\n      <td style={tdStyle}>{pA.CREATED_BY}</td>\r\n      <td style={tdStyle}>{pA.SOLD_TO}</td>\r\n    </tr>\r\n  );\r\n}\r\n\r\nreturn (\r\n  <div class=\"d-grid gap-5\" style={{ fontFamily: \"Arial\" }}>\r\n    <div>\r\n      <div style={bgStyle}></div>\r\n      <div style={wStyle}>\r\n        <h2 style={{ paddingTop: \"25px\", paddingBottom: \"25px\" }}>\r\n          <a\r\n            href=\"https://flipsidecrypto.xyz/edit/queries/fe213752-a832-4f0b-a08a-52e85ae53798\"\r\n            target=\"_blank\"\r\n          >\r\n            Paras Marketplace Activity\r\n          </a>\r\n          <span class=\"fs-6\"> Last 7 days</span>\r\n        </h2>\r\n\r\n        <table style={tableStyle}>\r\n          <thead>\r\n            <tr>\r\n              <th style={theadStyle}>NFT</th>\r\n              <th style={theadStyle}>ACTION</th>\r\n              <th style={theadStyle}>ACTION TIMESTAMP</th>\r\n              <th style={theadStyle}>AMOUNT</th>\r\n              <th style={theadStyle}>CREATED BY</th>\r\n              <th style={theadStyle}>SOLD TO</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>{allRows}</tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"row\" style={{ marginTop: \"20px\" }}>\r\n      <div\r\n        class=\"card text-white bg-success mb-3\"\r\n        style={{ maxWidth: \"14rem\", marginRight: \"10px\" }}\r\n      >\r\n        <div class=\"card-body\">\r\n          <p class=\"card-title\" style={{ fontSize: \"11px\" }}>\r\n            <a\r\n              style={linkStyle}\r\n              href=\"https://flipsidecrypto.xyz/edit/queries/a371f03d-ccdf-4e58-81cb-1c1aaff87b27\"\r\n              target=\"_blank\"\r\n            >\r\n              Total NFTs Sold in 30 Days\r\n            </a>\r\n          </p>\r\n          <p class=\"card-text fs-4\">\r\n            {numberWithCommas(parseInt(pM.TOTAL_NFT_SOLD))}\r\n          </p>\r\n        </div>\r\n      </div>\r\n\r\n      <div\r\n        class=\"card text-white bg-success mb-3\"\r\n        style={{ maxWidth: \"13rem\", marginRight: \"10px\" }}\r\n      >\r\n        <div class=\"card-body\">\r\n          <p class=\"card-title\" style={{ fontSize: \"11px\" }}>\r\n            <a\r\n              style={linkStyle}\r\n              href=\"https://flipsidecrypto.xyz/edit/queries/a371f03d-ccdf-4e58-81cb-1c1aaff87b27\"\r\n              target=\"_blank\"\r\n            >\r\n              Total Gross Sales in 30 Days\r\n            </a>\r\n          </p>\r\n          <p class=\"card-text fs-4\">\r\n            $\r\n            {JSON.parse(\r\n              numberWithCommas(parseFloat(pM.TOTAL_GROSS_SALES).toFixed(2))\r\n            )}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"card text-white bg-success mb-3\"\r\n        style={{ maxWidth: \"14rem\", marginRight: \"10px\" }}\r\n      >\r\n        <div class=\"card-body\">\r\n          <p class=\"card-title\" style={{ fontSize: \"11px\" }}>\r\n            <a\r\n              style={linkStyle}\r\n              href=\"https://flipsidecrypto.xyz/edit/queries/a371f03d-ccdf-4e58-81cb-1c1aaff87b27\"\r\n              target=\"_blank\"\r\n            >\r\n              Total Sold Collections in 30 Days\r\n            </a>\r\n          </p>\r\n          <p class=\"card-text fs-4\">\r\n            {numberWithCommas(parseInt(pM.TOTAL_SOLD_COLLECTIONS))}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"card text-white bg-success mb-3\"\r\n        style={{ maxWidth: \"13rem\", marginRight: \"10px\" }}\r\n      >\r\n        <div class=\"card-body\">\r\n          <p class=\"card-title\" style={{ fontSize: \"11px\" }}>\r\n            <a\r\n              style={linkStyle}\r\n              href=\"https://flipsidecrypto.xyz/edit/queries/a371f03d-ccdf-4e58-81cb-1c1aaff87b27\"\r\n              target=\"_blank\"\r\n            >\r\n              Total NFT Listings in 30 Days\r\n            </a>\r\n          </p>\r\n          <p class=\"card-text fs-4\">\r\n            {numberWithCommas(parseInt(pM.TOTAL_LISTINGS))}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div\r\n        class=\"card text-white bg-success mb-3\"\r\n        style={{ maxWidth: \"14rem\", marginRight: \"10px\" }}\r\n      >\r\n        <div class=\"card-body\">\r\n          <p class=\"card-title\" style={{ fontSize: \"11px\" }}>\r\n            <a\r\n              style={linkStyle}\r\n              href=\"https://flipsidecrypto.xyz/edit/queries/a371f03d-ccdf-4e58-81cb-1c1aaff87b27\"\r\n              target=\"_blank\"\r\n            >\r\n              Month-on-Month Sales Growth\r\n            </a>\r\n          </p>\r\n          <p class=\"card-text fs-4\">\r\n            {JSON.parse(\r\n              numberWithCommas(parseFloat(pM.MONTH_ON_MONTH_SALES).toFixed(2))\r\n            )}\r\n            %\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class=\"row\">\r\n      <div class=\"col\">\r\n        <a href=\"https://flipsidecrypto.xyz/edit/queries/10ee9d9f-489f-40d6-a2c4-2c474b659d03\">\r\n          <h6>Top 10 Highest Selling Collections (Last 7 Days)</h6>\r\n        </a>\r\n        <img src={state.imgSrc1} />\r\n      </div>\r\n      <div class=\"col\">\r\n        <a href=\"https://flipsidecrypto.xyz/edit/queries/89568d53-1fe3-441a-b3e0-4ffd6f53afa9\">\r\n          <h6>Top 10 Sellers Based on Gross Sales in US$ (Last 7 Days)</h6>\r\n        </a>\r\n        <img src={state.imgSrc2} />\r\n      </div>\r\n    </div>\r\n    <div class=\"row\" style={{ marginTop: \"20px\" }}>\r\n      <div class=\"col\">\r\n        <a href=\"https://flipsidecrypto.xyz/edit/queries/5fc6a473-47ff-4d61-8ff9-ad57aa3bb1d9\">\r\n          <h6>Total Gross Sales in US$ Per Day (Last 30 Days)</h6>\r\n        </a>\r\n        <img src={state.imgSrc3} />\r\n      </div>\r\n      <div class=\"col\">\r\n        <a href=\"https://flipsidecrypto.xyz/edit/queries/c0fcca8f-f9bb-4eeb-b888-44363de1fc4e\">\r\n          <h6>Cumulative Number of Sales (Last 30 Days)</h6>\r\n        </a>\r\n        <img src={state.imgSrc4} />\r\n      </div>\r\n    </div>\r\n    <div\r\n      class=\"text-center p-4\"\r\n      style={{ backgroundColor: \"rgba(0, 0, 0, 0.05)\" }}\r\n    >\r\n      <p>\r\n        Powered by:{\"\"}\r\n        <img\r\n          src=\"https://www.gitbook.com/cdn-cgi/image/width=30,height=30,fit=contain,dpr=2,format=auto/https%3A%2F%2F1048384174-files.gitbook.io%2F~%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fspaces%252F-LdEnDLYh6Su5z7LbnEZ%252Favatar.png%3Fgeneration%3D1575431493257333%26alt%3Dmedia\"\r\n          height=\"20px\"\r\n          width=\"20px\"\r\n        ></img>\r\n        Flipside\r\n        <span class=\"blockquote-footer\">Data refreshes once every 24h</span>\r\n      </p>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/411a6689bda8aba25d5bcfd1fd9890641e1271436bd0baa4ae59ea28b136a467/widget/Paras-Marketplace-Dashboard"}