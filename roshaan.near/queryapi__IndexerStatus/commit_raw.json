{"tx_hash": "C2QPNZNuHCdSW8AR6td7D8gdfdU7mcHnXtzEiAejQnGY", "action_id_social": "Fd4K2JXoxvbDNZ8jnz51rwDAAxHYPBa6amjkWH6pZPDK-0-widget", "block_id": 85228793, "block_timestamp": "2023-02-14 17:57:57.927", "signer_id": "roshaan.near", "widget_name": "queryapi__IndexerStatus", "source_code": "//props indexer_name\nlet indexer_name = props.indexer_name ?? 'indexer_name';\n\nState.init({ logs: [], state: [] });\nfunction query() {\n  let response = fetch(\n    'https://query-api-hasura-vcqilefdcq-uc.a.run.app/v1/graphql',\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        query: `\n  query IndexerStatus {\n  indexer_state(\n    where: {function_name: {_eq: ${indexer_name}}}\n    order_by: {current_block_height: desc}\n  ) {\n    current_block_height\n  }\n  log_entries(\n    where: {function_name: {_eq: ${indexer_name}}}\n    order_by: {timestamp: desc}\n  ) {\n    id\n    message\n    timestamp\n  }\n}\n    `,\n      }),\n    }\n  );\n  console.log(response);\n  if (!response) {\n    return;\n  }\n  let state = response.body.data.indexer_state;\n  let logs = response.body.data.log_entries;\n  State.update({ state, logs });\n}\n\nif (indexer_name) {\n  query();\n}\nreturn (\n  <>\n    <h1>Indexer Status</h1>\n    <h1> State </h1>\n    {state.state && JSON.stringify(state.state)}\n    <h1> Logs </h1>\n    {state.logs && JSON.stringify(state.logs)}\n  </>\n);\n", "metadata": null, "branch": NaN, "widget_modules_used": null, "widget_url": "https://near.social/#/roshaan.near/widget/queryapi__IndexerStatus", "branch.draft.": NaN, "branch.draft.metadata": NaN}