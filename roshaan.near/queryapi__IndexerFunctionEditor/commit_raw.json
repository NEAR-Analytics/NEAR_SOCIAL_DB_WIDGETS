{"tx_hash": "4NXKtJrL66SRF8ALsV3CnAgt1FuFMaBBHGPKatBuuVo6", "action_id_social": "5AQiKZnLtjke52F4nW8zFzcStbWc4L6rD6yyvTFTDNxq-0-widget", "block_id": 85159673, "block_timestamp": "2023-02-13 18:49:27.100", "signer_id": "roshaan.near", "widget_name": "queryapi__IndexerFunctionEditor", "source_code": "const initialText = '# Hello World\\n\\n';\nState.init({\n  m: initialText,\n});\n\nconst code = `\n<script src=\"https://unpkg.com/react@18/umd/react.development.js\" crossorigin></script>\n<script src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\" crossorigin></script>\n\n<div id=\"root\">\n</div>\n<script >\nfunction TestReact(props) {\n  const [value, setValue] = React.useState(props.initialText || \"\");\n  React.useEffect(() => {\n    // Add a listener for messages from other sources\n    window.addEventListener(\"message\", handleMessage);\n\n    return () => {\n      // Clean up the listener when the component unmounts\n      window.removeEventListener(\"message\", handleMessage);\n    };\n  }, []);\n\n  const handleMessage = (event) => {\n    // Handle incoming messages\n    console.log(\"Received message:\", event.data);\n    // Forward the message to the parent window\n    window.parent.postMessage(event.data, \"*\");\n  };\n  return React.createElement(\"iframe\", {\n    src:\"http://localhost:3000/query-api-editor\",\n    height: \"400px\",\n    width: \"400px\",\n    }); \n}\n\nconst domContainer = document.querySelector('#root');\nconst root = ReactDOM.createRoot(domContainer);\n\nwindow.addEventListener(\"message\", (event) => {\n  root.render(React.createElement(TestReact, {\n    initialText: event.data,\n  }));\n   \n});\n\n</script>\n`;\n\nreturn (\n  <div>\n    <iframe\n      className=\"w-100\"\n      style={{ height: '300px' }}\n      srcDoc={code}\n      message={initialText}\n      onMessage={(m) => State.update({ m })}\n    />\n    <Markdown text={state.m} />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/roshaan.near/widget/queryapi__IndexerFunctionEditor"}