{"tx_hash": "12eAYrM3QLa1k48ki6A7PjKU7VKVJDm86ANNW95QS1F6", "action_id_social": "5DvV2FsbdrTFYd4cFyGLL2xfok9YBJ8x58futDM4Kd4V-0-widget", "block_id": 85150818, "block_timestamp": "2023-02-13 15:57:56.556", "signer_id": "roshaan.near", "widget_name": "queryapi__IndexerFunctionEditor", "source_code": "//props indexer_name\nlet indexer_name = props.indexer_name;\n\nconst initialText = '# Hello World\\n\\n';\nState.init({\n  m: initialText,\n});\n\nconst code = `\n<script src=\"https://unpkg.com/react@18/umd/react.development.js\" crossorigin></script>\n<script src=\"https://unpkg.com/react-dom@18/umd/react-dom.development.js\" crossorigin></script>\n<script src=\"https://unpkg.com/react-markdown-editor-lite@1.3.4/lib/index.js\" crossorigin></script>\n<link rel=\"stylesheet\" href=\"https://unpkg.com/react-markdown-editor-lite@1.3.4/lib/index.css\" />\n\n<style>\n#text-editor {\n  border: 1px solid red;\n}\n#react-root {\n  border: 1px solid blue;\n}\n</style>\n<div id=\"root\">\n<h1> code editor </h1>\n<div id=\"code-editor\">\ncode editor </div>\n<h1> text editor </h1>\n\n<div id=\"text-editor\">\ntext editor\n</div>\n</div>\n<script type=\"module\">\nimport ReactMarkdownEditorLite from \"https://esm.sh/react-markdown-editor-lite@1.3.4\"\nimport Editor from \"https://esm.sh/@monaco-editor/react@4.4.6\"\nfunction TestReact(props) {\n  const [value, setValue] = React.useState(props.initialText || \"\");\n  return React.createElement(ReactMarkdownEditorLite, {\n      value,\n      view: { menu: true, md: true, html: false },\n      canView: { menu: true, md: false, html: false, fullScreen: false, hideMenu: true },\n      onChange: ({ text }) => {\n        setValue(text);\n        window.top.postMessage(text, \"*\");\n      },\n      renderHTML: () => {},\n      className: \"full\",\n    }); \n}\n\nconst domContainer = document.querySelector('#root');\nconst root = ReactDOM.createRoot(domContainer);\n\nwindow.addEventListener(\"message\", (event) => {\n  root.render(React.createElement(TestReact, {\n    initialText: event.data,\n  }));\n   \n});\n\n</script>\n`;\nreturn (\n  <>\n    <div>\n      <iframe\n        className=\"w-100\"\n        style={{ height: '300px' }}\n        srcDoc={code}\n        message={initialText}\n        onMessage={(m) => console.log(m, 'yo')}\n      />\n    </div>\n    <Markdown text={state.m} />\n    <Widget\n      src={'roshaan.near/widget/queryapi__RegisterIndexerFunctionButton'}\n    />\n  </>\n);\n\nfunction TestReact(props) {\n  const [value, setValue] = React.useState(props.initialText || '');\n  return React.createElement(ReactMarkdownEditorLite, {\n    value,\n    view: { menu: true, md: true, html: false },\n    canView: {\n      menu: true,\n      md: false,\n      html: false,\n      fullScreen: false,\n      hideMenu: true,\n    },\n    onChange: ({ text }) => {\n      setValue(text);\n      window.top.postMessage(text, '*');\n    },\n    renderHTML: () => {},\n    className: 'full',\n  });\n}\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/roshaan.near/widget/queryapi__IndexerFunctionEditor"}