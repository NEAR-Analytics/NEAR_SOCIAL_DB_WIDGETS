{"tx_hash": "ETLD31oYP5oCQ5PDDX7nXt8amAgDcKM3EHgxEzFE8ian", "action_id_social": "DwiCW8qbqPUE8CKse2eEjFZPX56EsdMDwZcq5heUxVeo-0-widget", "block_id": 85652537, "block_timestamp": "2023-02-20 15:33:50.611", "signer_id": "roshaan.near", "widget_name": "queryapi__ViewAllPublicIndexers", "source_code": "const limit = 7;\nconst registry_contract_id =\n  props.registry_contract_id || \"registry.queryapi.near\";\nconst accountId = context.accountId;\nconst H2 = styled.h2`\n  font-size: 19px;\n  line-height: 22px;\n  color: #11181c;\n  margin: 0 0 24px;\n`;\n\nNear.asyncView(registry_contract_id, \"list_indexer_functions\").then((data) => {\n  let indexer_paths = Object.keys(data);\n  let indexers = indexer_paths\n    .map((indexer_path) => {\n      return {\n        accountId: indexer_path.split(\"/\")[0],\n        indexerName: indexer_path.split(\"/\").splice(1).join(\"/\"),\n      };\n    })\n    .filter((indexer) => indexer.accountId !== accountId);\n\n  State.update({ indexers: indexers, totalIndexers: indexer_paths.length });\n});\n\nconst CardWrapper = styled.div`\n  margin: 0 0 16px;\n`;\n\nconst sharedButtonStyles = `\ndisplay: inline-flex;\nalign-items: center;\ngap: 8px;\npadding: 8px 16px;\nmargin-top: 12px;\nmargin-bottom: 12px;\nheight: 32px;\nborder-radius: 6px;\nfont-weight: 600;\nfont-size: 12px;\nline-height: 15px;\ntext-align: center;\ncursor: pointer;\n\n&:hover,\n&:focus {\n  text-decoration: none;\n  outline: none;\n}\n\ni {\n  color: #7E868C;\n}\n\n.bi-16 {\n  font-size: 16px;\n}\n`;\n\nconst Button = styled.button`\n  ${sharedButtonStyles}\n  color: ${(p) => (p.primary ? \"#fff\" : \"#11181C\")} !important;\n  background: ${(p) => (p.primary ? \"#0091FF\" : \"#FBFCFD\")};\n  border: ${(p) => (p.primary ? \"none\" : \"1px solid #D7DBDF\")};\n\n  &:hover,\n  &:focus {\n    background: ${(p) => (p.primary ? \"#0484e5\" : \"#ECEDEE\")};\n  }\n`;\n\nconst ButtonLink = styled.a`\n  ${sharedButtonStyles}\n  color: ${(p) => (p.primary ? \"#fff\" : \"#11181C\")} !important;\n  background: ${(p) => (p.primary ? \"#0091FF\" : \"#FBFCFD\")};\n  border: ${(p) => (p.primary ? \"none\" : \"1px solid #D7DBDF\")};\n\n  &:hover,\n  &:focus {\n    background: ${(p) => (p.primary ? \"#0484e5\" : \"#ECEDEE\")};\n  }\n`;\nconst Subheading = styled.h2`\n  display: block;\n  margin: 0;\n  font-size: 14px;\n  line-height: 20px;\n  color: ${(p) => (p.bold ? \"#11181C !important\" : \"#687076 !important\")};\n  font-weight: ${(p) => (p.bold ? \"600\" : \"400\")};\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\n  overflow: ${(p) => (p.ellipsis ? \"hidden\" : \"visible\")};\n  text-overflow: ${(p) => (p.ellipsis ? \"ellipsis\" : \"unset\")};\n  white-space: nowrap;\n  outline: none;\n`;\nconst statusUrl = `https://near.social/#/roshaan.near/widget/queryapi__QueryApiDashboard?indexer_path=${accountId}/${indexerName}&view=indexer-status`;\n\nreturn (\n  <>\n    <ButtonLink\n      primary\n      href=\"/#/roshaan.near/widget/queryapi__QueryApiDashboard\"\n    >\n      Create New Indexer\n    </ButtonLink>\n    <H2>\n      Public Indexers <span>({state.indexers.length})</span>\n    </H2>\n    {state.indexers.map((indexer, i) => (\n      <CardWrapper key={i}>\n        <Widget\n          src=\"roshaan.near/widget/queryapi__IndexerView\"\n          props={{\n            accountId: indexer.accountId,\n            indexerName: indexer.indexerName,\n          }}\n        ></Widget>\n      </CardWrapper>\n    ))}\n    {state.indexers.length === 0 && (\n      <Subheading> You have no indexers to show...</Subheading>\n    )}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/roshaan.near/widget/queryapi__ViewAllPublicIndexers"}