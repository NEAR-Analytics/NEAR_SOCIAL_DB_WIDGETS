{"tx_hash": "F4DYBSVEUJbsRiQRpW3rqCmoT4WVmM9RU3MasWY4HwtV", "action_id_social": "iBBWyPkC7ZciVcwQd1g7TyMcvBiijFicFEf5zjZzwCr-0-widget", "block_id": 94857690, "block_timestamp": "2023-06-23T17:05:30.003Z", "signer_id": "roshaan.near", "widget_name": "QueryApiRenderer", "source_code": "const query = props.query || \"\";\nconst indexer_user = props.user;\nconst queryName = props.queryName;\nconst statehandler = props.stateHandler;\n\nconst QUERYAPI_ENDPOINT =\n  props.graphqlEndpoint ||\n  \"https://near-queryapi.dev.api.pagoda.co/v1/graphql/\";\n\nconst defaultRenderer = (data) => {\n  return <div key={JSON.stringify(data)}>{JSON.stringify(data)}</div>;\n};\n\nconst renderer = props.renderer || defaultRenderer;\n\nfunction fetchGraphQL(operationsDoc, operationName, variables) {\n  let fetchOptions = {\n    method: \"POST\",\n    body: JSON.stringify({\n      query: operationsDoc,\n      variables: variables,\n      operationName: operationName,\n    }),\n  };\n\n  if (indexer_user) {\n    fetchOptions.headers = { \"x-hasura-role\": indexer_user };\n  }\n\n  return asyncFetch(QUERYAPI_ENDPOINT, fetchOptions);\n}\n\nfetchGraphQL(query, queryName, {}).then((result) => {\n  if (result.status === 200) {\n    if (result.body.data) {\n      stateHandler(State, result.body.data);\n    }\n  }\n});\n\nconst renderData = (a) => {\n  return <div key={JSON.stringify(a)}>{JSON.stringify(a)}</div>;\n};\n\nState.init({\n  data: [],\n});\n\nconst renderedData = state.data.map(renderer);\n\nreturn { renderedData };\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/roshaan.near/widget/QueryApiRenderer", "__row_index": 3}