{"tx_hash": "GHT7a8EptZitak7WNz36nuxbje8fQjYF84HtkjpQPW8R", "action_id_social": "7TYQMKQ5DDRNfN154WAeKEJsgrFJunsGHV8XYUQR3dqp-0-widget", "block_id": 85945678, "block_timestamp": "2023-02-24 14:41:09.972", "signer_id": "bozon.near", "widget_name": "Widget.Collaborators", "source_code": "/*props\r\n\r\nwidgetPath: string\r\n\r\n*/\r\n\r\nif (!props.widgetPath) return \"send {widgetPath: string} in props\";\r\n\r\nconst SOCIAL_CONTRACT = \"social.near\";\r\n\r\nconst [widgetAccountId, _, widget] = props.widgetPath.split(\"/\");\r\n\r\n//to_vec overflow rust contract\r\nconst accountsGrantedPermissions = Near.view(\r\n  SOCIAL_CONTRACT,\r\n  \"debug_get_permissions\",\r\n  { account_id: widgetAccountId }\r\n);\r\n\r\nconst widgetwithNodeId = Near.view(SOCIAL_CONTRACT, \"get\", {\r\n  keys: [props.widgetPath],\r\n  options: { with_node_id: true },\r\n});\r\n\r\nconst nodeIds = [\r\n  widgetwithNodeId[\":node\"],\r\n  widgetwithNodeId[widgetAccountId][\":node\"],\r\n  widgetwithNodeId[widgetAccountId][\"widget\"][\":node\"],\r\n  widgetwithNodeId[widgetAccountId][\"widget\"][widget][\":node\"],\r\n];\r\nconst map_filtered_accounts_granted_permissions =\r\n  accountsGrantedPermissions.map((filter) => {\r\n    return filter[0].AccountId;\r\n  });\r\n\r\nreturn (\r\n  <div>\r\n    {accountsGrantedPermissions.map((el) => {\r\n      return (\r\n        el[1].Granted.find((el) => nodeIds.includes(el)) && (\r\n          <div>{el[0].AccountId || el[0].SignerPublicKey}</div>\r\n        )\r\n      );\r\n    })}\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bozon.near/widget/Widget.Collaborators"}