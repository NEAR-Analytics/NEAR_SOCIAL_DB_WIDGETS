{"tx_hash": "HPL7GQ879VTp2qoVDBnf8Y51aLKU6UXkPUm4zsFfJxCe", "action_id_social": "74EUQ6XAsZgMiWyMn5uimBMMBY7iqmk6fKvdNX3mdH7f-0-widget", "block_id": 83086559, "block_timestamp": "2023-01-16 14:25:30.850", "signer_id": "bozon.near", "widget_name": "Developer", "source_code": "const accountId = props.accountId || context.accountId;\r\n\r\nif (!accountId) return \"login or send accountId in props\";\r\n\r\nconst widgetsHistoryChangesBlocks = Social.keys(\r\n  `${accountId}/widget/*`,\r\n  \"final\",\r\n  {\r\n    return_type: \"History\",\r\n  }\r\n);\r\n\r\nif (widgetsHistoryChangesBlocks === null) return \"Loading...\";\r\n\r\nState.init({\r\n  widgetsHistoryChangesBlocks: Object.keys(\r\n    widgetsHistoryChangesBlocks[accountId][\"widget\"]\r\n  )\r\n    .map((key) => {\r\n      return {\r\n        name: key,\r\n        blocks: widgetsHistoryChangesBlocks[accountId][\"widget\"][key],\r\n      };\r\n    })\r\n    .sort(\r\n      (a, b) => b.blocks[b.blocks.length - 1] - a.blocks[a.blocks.length - 1]\r\n    ),\r\n});\r\n\r\nconsole.log(state.widgetsHistoryChangesBlocks);\r\n\r\nreturn (\r\n  <div>\r\n    <div div class=\"card mb-3\">\r\n      <Widget\r\n        src=\"mob.near/widget/Profile.ShortInlineBlock\"\r\n        props={{ accountId }}\r\n      />\r\n    </div>\r\n    <div div class=\"card mb-3\">\r\n      <h3 class=\"card-header\">Widgets</h3>\r\n\r\n      <div class=\"list-group\">\r\n        {state.widgetsHistoryChangesBlocks.map((element) => (\r\n          <div>\r\n            <button\r\n              className={`d-flex flex-row list-group-item list-group-item-action`}\r\n              onClick={() => {\r\n                State.update({ selectedBlockHeight: blockHeight });\r\n              }}\r\n            >\r\n              <div>{element.name}</div>\r\n              <span class=\"badge text-bg-success p-2 me-1 align-self-center\">\r\n                {element.blocks.length}\r\n              </span>\r\n              <span class=\"badge text-bg-success p-2 me-1 align-self-center\">\r\n                {\r\n                  <Widget\r\n                    src={`mob.near/widget/TimeAgo`}\r\n                    props={{\r\n                      blockHeight: element.blocks[element.blocks.length - 1],\r\n                    }}\r\n                  />\r\n                }\r\n              </span>\r\n            </button>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bozon.near/widget/Developer"}