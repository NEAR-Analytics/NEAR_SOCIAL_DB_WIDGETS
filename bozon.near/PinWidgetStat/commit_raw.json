{"tx_hash": "6TbG8LuczXvHFMbj7sub23Q95VSP4wHvjS3fqkP6coVM", "action_id_social": "EPruN3wGRV9yqGBMqMjJE7KNYmFJNK239sraG1Mho7XG-0-widget", "block_id": 85941797, "block_timestamp": "2023-02-24 13:24:05.952", "signer_id": "bozon.near", "widget_name": "PinWidgetStat", "source_code": "const settings = Social.get(\"*/settings/near.social/homepage.rhs/\", \"final\");\r\n\r\nconst resultObject = Object.keys(settings)\r\n  .map((accountId) =>\r\n    JSON.parse(settings[accountId][\"settings\"][\"near.social\"][\"homepage.rhs\"])\r\n  )\r\n  //unite two dimensional array\r\n  .reduce((prev, cur) => {\r\n    return prev.concat(cur);\r\n  }, [])\r\n  .map((el) => el.src)\r\n  //count\r\n  .reduce((prev, cur) => {\r\n    if (!prev[cur]) prev[cur] = 1;\r\n    else prev[cur] = prev[cur] + 1;\r\n    return prev;\r\n  }, {});\r\n\r\nconst resultArraySort = Object.keys(resultObject)\r\n  .map((key) => [key, resultObject[key]])\r\n  .sort((a, b) => b[1] - a[1]);\r\n\r\nreturn (\r\n  <div>\r\n    <div>Total users: {Object.keys(settings).length}</div>\r\n    <div>Total wigets: {resultArraySort.length}</div>\r\n    {resultArraySort.map((el) => (\r\n      <div>\r\n        {el[1]} - {el[0]}\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bozon.near/widget/PinWidgetStat"}