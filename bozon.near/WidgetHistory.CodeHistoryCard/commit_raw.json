{"tx_hash": "6qwh8uZ8qdZo4LLpQZ2swkbERMyDzjCP7BWkcwetSaH9", "action_id_social": "8onoZrH6DeL2CwLeR3HECqFTF3JuwzktGy8K9E1yjqCD-0-widget", "block_id": 86235087, "block_timestamp": "2023-02-28 11:05:27.054", "signer_id": "bozon.near", "widget_name": "WidgetHistory.CodeHistoryCard", "source_code": "//props\r\n//props.pathToWidget: string (\"bozon.near/widget/PrivateMailBox\")\r\n//props.currentBlockHeight: number\r\n//props.prevBlockHeight?: number\r\n\r\nState.init({});\r\n\r\nfunction getDatastringFromBlockHeight(blockHeight) {\r\n  const block = Near.block(blockHeight);\r\n  const date = new Date(block.header.timestamp_nanosec / 1e6);\r\n  return date.toDateString() + \" \" + date.toLocaleTimeString();\r\n}\r\n\r\nlet CodeWrapper = styled.div`\r\n& > pre > div {\r\n  margin: 0px !important;\r\n}\r\n\r\n& > pre {\r\n  margin: 0px !important;\r\n  border-radius: 0px 0px 5px 5px;\r\n}\r\n`;\r\n\r\nreturn (\r\n  <div className=\"card border-primary\">\r\n    <div className=\"card-header\">\r\n      <small class=\"text-muted\">\r\n        <div class=\"row justify-content-between\">\r\n          <div class=\"col-4 d-flex frex-row justify-content-start align-items-center\">\r\n            <div class=\"p-2\">changes in block #{props.currentBlockHeight}</div>\r\n\r\n            <OverlayTrigger\r\n              placement=\"auto\"\r\n              overlay={<Tooltip>count inserted lines</Tooltip>}\r\n            >\r\n              <span class=\"badge text-bg-success p-2 me-1 align-self-center\">\r\n                {state.lineCountInserted}\r\n              </span>\r\n            </OverlayTrigger>\r\n\r\n            <OverlayTrigger\r\n              placement=\"auto\"\r\n              overlay={<Tooltip>count deleted lines</Tooltip>}\r\n            >\r\n              <span class=\"badge text-bg-danger p-2 me-1 align-self-center\">\r\n                {state.lineCountDeleted}\r\n              </span>\r\n            </OverlayTrigger>\r\n          </div>\r\n          <div class=\"col-4 d-flex justify-content-end align-items-center\">\r\n            {getDatastringFromBlockHeight(props.currentBlockHeight)}\r\n          </div>\r\n        </div>\r\n      </small>\r\n    </div>\r\n    <CodeWrapper>\r\n      <Widget\r\n        src={`bozon.near/widget/WidgetHistory.CodeHistory`}\r\n        props={{\r\n          pathToWidget: props.pathToWidget,\r\n          currentBlockHeight: props.currentBlockHeight,\r\n          prevBlockHeight: props.prevBlockHeight,\r\n          findUniqueResult: (\r\n            lineCountDeleted,\r\n            lineCountInserted,\r\n            lineCountCurrentCode,\r\n            lineCountPrevCode,\r\n            allLineCount\r\n          ) => {\r\n            if (\r\n              state.lineCountDeleted === undefined ||\r\n              state.lineCountInserted === undefined\r\n            )\r\n              State.update({ lineCountDeleted, lineCountInserted });\r\n          },\r\n        }}\r\n      />\r\n    </CodeWrapper>\r\n  </div>\r\n);\r\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bozon.near/widget/WidgetHistory.CodeHistoryCard", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.name": NaN, "metadata.tags.dev": NaN, "metadata.tags.markdown": NaN, "metadata.tags.widget": NaN}