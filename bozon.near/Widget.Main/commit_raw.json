{"tx_hash": "HUGToNwAngNa8RpW5C9Lk9zH28EZF5hNrmgb3xAz3PS5", "action_id_social": "DYVSmkzW6fLeAU7k8h6urX7kQJp2ek6Q7uQ4DeAoWnrd-0-widget", "block_id": 86024784, "block_timestamp": "2023-02-25 16:03:57.763", "signer_id": "bozon.near", "widget_name": "Widget.Main", "source_code": "//props.widgetPath\r\n\r\nconst [accountId, _, widget] = props.widgetPath.split(\"/\");\r\n\r\nconst code = Social.get(props.widgetPath);\r\n\r\nif (code === null) return \"Loading\";\r\nif (code === undefined) return \"Widget not found\";\r\n\r\nconst text = `\r\n\\`\\`\\`jsx\r\n${code}\r\n\\`\\`\\`\r\n`;\r\n\r\nfunction isOwner() {\r\n  const [widgetOwnerAccountId, _, widget] = props.widgetPath.split(\"/\");\r\n  return widgetOwnerAccountId == context.accountId;\r\n}\r\n\r\nState.init({\r\n  tab: \"code\",\r\n\r\n  collaboratorsCount: 0,\r\n  historyCount: 0,\r\n});\r\n\r\nconst Tabs = styled.div`\r\n  display: flex;\r\n  padding: 0 12px;\r\n  height: 48px;\r\n  border-bottom: 1px solid #ECEEF0;\r\n`;\r\n\r\nconst TabView = styled.div`\r\n  padding: 10px;\r\n`;\r\n\r\nconst TabsButton = styled.button`\r\n  font-weight: 400;\r\n  font-size: 14px;\r\n  padding: 0 12px;\r\n  position: relative;\r\n  color: ${(p) => (p.selected ? \"#11181C\" : \"#687076\")};\r\n  background: none;\r\n  border: none;\r\n\r\n  &:hover {\r\n    color: #11181C;\r\n  }\r\n\r\n  &::after {\r\n    content: '';\r\n    display: ${(p) => (p.selected ? \"block\" : \"none\")};\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 12px;\r\n    right: 12px;\r\n    height: 3px;\r\n    background: #0091FF;\r\n  }\r\n`;\r\n\r\n//using \"display: none\" to make functions work on initialization\r\nreturn (\r\n  <div>\r\n    <Tabs>\r\n      <TabsButton\r\n        onClick={() => State.update({ tab: \"code\" })}\r\n        selected={state.tab == \"code\"}\r\n      >\r\n        Code\r\n      </TabsButton>\r\n      <TabsButton\r\n        onClick={() => State.update({ tab: \"history\" })}\r\n        selected={state.tab == \"history\"}\r\n      >\r\n        History {state.historyCount}\r\n      </TabsButton>\r\n      <TabsButton\r\n        onClick={() => State.update({ tab: \"issues\" })}\r\n        selected={state.tab == \"issues\"}\r\n      >\r\n        Issues\r\n      </TabsButton>\r\n      <TabsButton\r\n        onClick={() => State.update({ tab: \"pullRequests\" })}\r\n        selected={state.tab == \"pullRequests\"}\r\n      >\r\n        Pull requests\r\n      </TabsButton>\r\n      <TabsButton\r\n        onClick={() => State.update({ tab: \"collaborators\" })}\r\n        selected={state.tab == \"collaborators\"}\r\n      >\r\n        Developers {state.collaboratorsCount}\r\n      </TabsButton>\r\n    </Tabs>\r\n\r\n    <TabView>\r\n      {state.tab == \"code\" && <Markdown text={text} />}\r\n\r\n      <div\r\n        style={{\r\n          display: state.tab == \"pullRequests\" ? \"block\" : \"none\",\r\n        }}\r\n      >\r\n        <Widget src=\"bozon.near/widget/Widget.PullRequests\" />\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          display: state.tab == \"history\" ? \"block\" : \"none\",\r\n        }}\r\n      >\r\n        <Widget\r\n          src=\"bozon.near/widget/WidgetHistory.History\"\r\n          props={{\r\n            widgetPath: props.widgetPath,\r\n            count: (count) => State.update({ historyCount: count }),\r\n          }}\r\n        />\r\n      </div>\r\n\r\n      <div\r\n        style={{\r\n          display: state.tab == \"collaborators\" ? \"block\" : \"none\",\r\n        }}\r\n      >\r\n        <Widget\r\n          src=\"bozon.near/widget/Widget.Developers\"\r\n          props={{\r\n            widgetPath: props.widgetPath,\r\n            count: (count) => State.update({ collaboratorsCount: count }),\r\n          }}\r\n        />\r\n      </div>\r\n    </TabView>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bozon.near/widget/Widget.Main"}