{"tx_hash": "9sRLvMR3mwSc6AF8e5vvFkDYPwSy6jWeALNc8EuNUp1P", "action_id_social": "A9V6yEbq4WKkqJYjUFEJUdK8ErKstfNjUh666YxteU8e-0-widget", "block_id": 85529313, "block_timestamp": "2023-02-18 21:02:34.238", "signer_id": "bozon.near", "widget_name": "Sudoku.Timer", "source_code": "State.init({\r\n  startTime: props.startTime || Date.now() - 10000000,\r\n  curTime: Date.now(),\r\n});\r\n\r\nconst code = `\r\n<script>\r\nwindow.addEventListener(\"message\", (event) => {\r\n    setInterval(() => event.source.postMessage(\"ping\", \"*\"), event.data.timeout);\r\n});\r\n</script>\r\n`;\r\n\r\nconst timeAgo = (diffSec) => {\r\n  if (diffSec < 60 * 1000) return `${(diffSec / 1000) | 0}s`;\r\n  if (diffSec < 60 * 60 * 1000) {\r\n    const sec = (diffSec % (60 * 1000)) / 1000;\r\n    const min = (diffSec - sec) / (60 * 1000);\r\n\r\n    return `${min | 0}m ${sec | 0}s`;\r\n  }\r\n  if (diffSec < 60 * 60 * 1000) {\r\n    const sec = (diffSec % (60 * 1000)) / 1000;\r\n    const min = (diffSec - sec) / (60 * 1000);\r\n\r\n    return `${min | 0}m ${sec | 0}s`;\r\n  }\r\n\r\n  const sec = (diffSec % (60 * 1000)) / 1000;\r\n  const min = (diffSec % (60 * 60 * 1000)) / (60 * 1000);\r\n  const hour = (diffSec - min - sec) / (60 * 60 * 1000);\r\n\r\n  return `${hour | 0}h ${min | 0}m ${sec | 0}s`;\r\n};\r\n\r\nfunction onPing() {\r\n  State.update({ curTime: Date.now() });\r\n}\r\n\r\nreturn (\r\n  <div>\r\n    <iframe\r\n      style={{ display: \"none\" }}\r\n      srcDoc={code}\r\n      onMessage={onPing}\r\n      message={{ timeout: 1000 }}\r\n    />\r\n    {timeAgo(state.curTime - state.startTime)}\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bozon.near/widget/Sudoku.Timer"}