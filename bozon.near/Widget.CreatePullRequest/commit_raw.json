{"tx_hash": "FYhuWyAfMqWii4wQPoPBFHvSuu8B8735b9TjiGjN1fWK", "action_id_social": "UJob7BKBvyT1XSk1q9SuuTJ78rkPmqp9n9wvonLW87D-0-widget", "block_id": 85950070, "block_timestamp": "2023-02-24 16:08:07.869", "signer_id": "bozon.near", "widget_name": "Widget.CreatePullRequest", "source_code": "/*\r\n\r\nonClose(): function\r\n\r\n*/\r\n\r\nconst initWidgetPath = \"devgovgigs.near/widget/Ideas\";\r\n\r\nState.init({\r\n  widgetPath: initWidgetPath,\r\n  code: \"\",\r\n  memo: \"\",\r\n});\r\n\r\nconst widgetCode = Social.get(state.widgetPath);\r\n\r\nif (widgetCode === null) return \"loading...\";\r\n\r\nconst [widgetAccountId, _, widgetName] = state.widgetPath.split(\"/\");\r\n\r\nfunction getDatastringFromBlockHeight(blockHeight) {\r\n  const block = Near.block(blockHeight);\r\n  const date = new Date(block.header.timestamp_nanosec / 1e6);\r\n  return date.toDateString() + \" \" + date.toLocaleTimeString();\r\n}\r\n\r\nreturn (\r\n  <div>\r\n    <div className=\"card\">\r\n      <div className=\"card-header d-flex align-items-center justify-content-between\">\r\n        Create Pull Request<button onClick={() => props.onClose()}>X</button>\r\n      </div>\r\n\r\n      <div class=\"card-body\">\r\n        <div className=\"row\">\r\n          <div className=\"col-lg-12  mb-2\">\r\n            Widget path:\r\n            <input\r\n              class=\"form-control mb-3\"\r\n              placeholder=\"path to widget\"\r\n              defaultValue={state.widgetPath || initWidgetPath}\r\n              onBlur={(e) => {\r\n                State.update({\r\n                  widgetPath: e.target.value,\r\n                });\r\n              }}\r\n            />\r\n            Code:\r\n            <textarea\r\n              type=\"text\"\r\n              rows={6}\r\n              class=\"form-control\"\r\n              placeholder=\"code\"\r\n              onBlur={(e) => {\r\n                State.update({\r\n                  code: e.target.value,\r\n                });\r\n              }}\r\n            />\r\n            Memo:\r\n            <textarea\r\n              type=\"text\"\r\n              rows={2}\r\n              class=\"form-control\"\r\n              placeholder=\"code\"\r\n              onBlur={(e) => {\r\n                State.update({\r\n                  memo,\r\n                });\r\n              }}\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <button\r\n          onClick={onClick}\r\n          class={`btn btn-primary`}\r\n          disabled={widgetCode === undefined}\r\n        >\r\n          {widgetCode ? \"Submit\" : \"Widget not found\"}\r\n        </button>\r\n      </div>\r\n      <div class=\"card-footer\">\r\n        Preview:\r\n        <Widget\r\n          src={`bozon.near/widget/CodeDiff`}\r\n          props={{\r\n            currentCode: state.code,\r\n            prevCode: widgetCode,\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bozon.near/widget/Widget.CreatePullRequest"}