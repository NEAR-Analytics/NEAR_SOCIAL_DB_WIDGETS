{"tx_hash": "79BmhPUCV2BWFzHyBdyxdBBXMCHuhEvi8jkh7Zk9ejQH", "action_id_social": "GDQjTWhu8ESD7t38Hwo4pRzXPCWwkn3UbiFYYTkPwvUb-1-widget", "block_id": 87934717, "block_timestamp": "2023-03-23 09:57:15.731", "signer_id": "imiroslav.near", "widget_name": "AwesomeNearProjectCardLite", "source_code": "const widgetAuthor = \"imiroslav.near\";\r\nconst API_KEY = \"tESt_keY\"; // TODO get from Social db?\r\nconst symbol = props.symbol ?? \"NEAR\";\r\n\r\nconst css = fetch(\r\n  \"https://gateway.pinata.cloud/ipfs/QmTQKDx6jGLkigj9yAWZow1d1dEYrqUeSvKgHtcmnBEVYK?_gl=1*1uz9sye*_ga*MjRlZDQxNzQtOGRlNy00ZGZjLTlhNWEtMWEyNjU5OGUzMGMw*_ga_5RMPXG14TE*MTY3OTI5NjkzNy4xLjEuMTY3OTI5NzQ3MC41NC4wLjA.\"\r\n).body;\r\n\r\nif (!css) return \"\";\r\n\r\nif (!state.theme) {\r\n  State.update({\r\n    theme: styled.div`\r\n    ${css}`,\r\n  });\r\n}\r\n\r\nconst Theme = state.theme;\r\n\r\nconst queryContent = {\r\n  query: `{\r\n    projects(filter: {contractAddress: {}, symbol: \"${symbol}\"}) {\r\n        edges {\r\n            node {\r\n                logo\r\n                link\r\n                linkedIn\r\n                investors\r\n                grants\r\n                title\r\n                telegram\r\n                status\r\n                oneliner\r\n                medium\r\n                twitter\r\n                website\r\n                whitepaper\r\n                github\r\n                facebook\r\n                discord\r\n                description\r\n                dapp\r\n                categories\r\n                }   \r\n            }\r\n        }\r\n    }`,\r\n};\r\n\r\nconst queryBody = JSON.stringify(queryContent);\r\nconst projects = fetch(\"https://awesomenear.com/api/graphql/public\", {\r\n  method: \"POST\",\r\n  headers: {\r\n    \"Content-Type\": \"application/json\",\r\n    Authorization: `Bearer ${API_KEY}`,\r\n  },\r\n  body: queryBody,\r\n});\r\n\r\nif (!projects) return \"Loading\";\r\nconsole.log(projects);\r\n\r\nif (projects?.body?.errors) {\r\n  return `Erorr: ${projects.body.errors.map((error) => error.message)}`;\r\n}\r\n\r\nconst data = projects?.body?.data?.projects;\r\nif (!data) {\r\n  return \"NO DATA\";\r\n}\r\n\r\nif (data.edges.length === 0) return `Failed to get data for symbol ${symbol}`;\r\n\r\nconst project = {\r\n  ...data.edges[0].node,\r\n  series: [], // TODO not exposed by API yet\r\n};\r\n\r\nconsole.log(project);\r\n\r\nconst isBuilding = project.status === \"BUILDING\";\r\n\r\nreturn (\r\n  <Theme>\r\n    <Widget src={`${widgetAuthor}/widget/AwesomeNearIcons`} />\r\n    <div className=\"near-item near-item-list\">\r\n      <div className=\"near-item-header\">\r\n        <div className=\"tile\">\r\n          <div className=\"tile-icon\">\r\n            <img src={project.logo} alt={project.title} loading=\"lazy\" />\r\n          </div>\r\n          <div className=\"tile-content\">\r\n            <h3 className=\"tile-title\">{project.title}</h3>\r\n            <div className=\"tile-tags text-gray\">{project.oneliner}</div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </Theme>\r\n);\r\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/imiroslav.near/widget/AwesomeNearProjectCardLite", "metadata.linktree.website": "awesomenear.com", "metadata.name": "AwesomeNear Project Card Lite"}