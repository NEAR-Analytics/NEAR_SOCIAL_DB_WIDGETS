{"tx_hash": "2NRzWsDBW2yhTeq7FG1SGbao9vYr9LCUn39Q9FeTZu1n", "action_id_social": "69KuWQXmU2sKFNgcvbh3sBW5QTacTzQiVmcQuFrmiwDv-0-widget", "block_id": 80730772, "block_timestamp": "2022-12-15 21:06:33.256", "signer_id": "calebjacob.near", "widget_name": "Badges", "source_code": "const accountId = props.accountId || context.accountId;\n\nState.init({ giveBadgeAccountId: \"\" });\n\nif (!accountId) {\n  return <p>No account ID.</p>;\n}\n\nlet queries = [];\nconst yourBadgesQuery = Social.keys(`*/badge/*/holder/${accountId}`, \"final\");\n\nif (!yourBadgesQuery) {\n  return <p>Loading...</p>;\n}\n\nObject.entries(yourBadgesQuery).forEach(([badgeAccountId, contractData]) => {\n  Object.entries(contractData.badge).forEach(([badgeId, badgeData]) => {\n    const query = Social.getr(`${badgeAccountId}/badge/${badgeId}`);\n    queries.push(query);\n  });\n});\n\nreturn (\n  <div className=\"container\">\n    <div className=\"d-flex gap-2 flex-wrap\">\n      {queries.map((badge) => {\n        return (\n          <div className=\"card overflow-hidden\" style={{ width: \"15rem\" }}>\n            <img\n              style={{\n                objectFit: \"cover\",\n                objectPosition: \"center\",\n                height: \"15rem\",\n                width: \"15rem\",\n              }}\n              src={badge.info.image.url}\n              alt={badge.info.name}\n              title={badge.info.description}\n            />\n            <div className=\"card-body\">\n              <h5 className=\"card-title\">{badge.info.name}</h5>\n              <p className=\"card-text\">{badge.info.description}</p>\n            </div>\n          </div>\n        );\n      })}\n    </div>\n\n    {props.devMode && (\n      <div\n        class=\"d-flex flex-row\"\n        style={{ marginTop: \"2rem\", gap: \"1rem\", whiteSpace: \"nowrap\" }}\n      >\n        <input\n          className=\"form-control\"\n          type=\"text\"\n          placeholder=\"Account Address\"\n          value={state.giveBadgeAccountId}\n          onChange={(e) => {\n            const accountId = e.target.value\n              .toLowerCase()\n              .replace(/[^a-z0-9_.-]/g, \"\");\n            State.update({ giveBadgeAccountId: accountId });\n          }}\n        />\n\n        <CommitButton\n          data={{\n            badge: {\n              brownie: {\n                info: {\n                  name: \"Brownie\",\n                  description: \"A cool brownie\",\n                  image: {\n                    url: \"https://www.inspiredtaste.net/wp-content/uploads/2016/06/Brownies-Recipe-1-1200.jpg\",\n                  },\n                },\n                holder: {\n                  [state.giveBadgeAccountId]: \"\",\n                },\n              },\n            },\n          }}\n        >\n          Give Badge\n        </CommitButton>\n      </div>\n    )}\n  </div>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/calebjacob.near/widget/Badges", "metadata.image.ipfs_cid": NaN, "metadata.description": NaN, "metadata.name": NaN, "metadata.tags.badges": NaN}