{"tx_hash": "EUd113mkaU3Fpx5xt7Z7Cmgt7uCKi3zUEsHWy79FM3GA", "action_id_social": "8SCjojDPfr7EBnFUSJZdrUETEJLCjAD31rRy2vrCfEFJ-0-widget", "block_id": 85734445, "block_timestamp": "2023-02-21 17:55:05.105", "signer_id": "calebjacob.near", "widget_name": "Comments.Comment", "source_code": "const accountId = props.accountId;\nconst blockHeight =\n  props.blockHeight === \"now\" ? \"now\" : parseInt(props.blockHeight);\nconst content =\n  props.content ??\n  JSON.parse(Social.get(`${accountId}/post/comment`, blockHeight) ?? \"null\");\nconst parentItem = content.item;\nconst highlight = !!props.highlight;\nconst raw = !!props.raw;\n\nconst extractNotifyAccountId = (parentItem) => {\n  if (!parentItem || parentItem.type !== \"social\" || !parentItem.path) {\n    return undefined;\n  }\n  const accountId = parentItem.path.split(\"/\")[0];\n  return `${accountId}/post/main` === parentItem.path ? accountId : undefined;\n};\n\nconst commentUrl = `/#/calebjacob.near/widget/PostPage?accountId=${accountId}&commentBlockHeight=${blockHeight}`;\n\nconst Post = styled.div`\n  position: relative;\n  background: ${props.highlight ? \"#f00\" : \"\"};\n  margin-left: 12px;\n\n  &::before {\n    content: '';\n    display: block;\n    position: absolute;\n    left: 15px;\n    top: 52px;\n    bottom: 12px;\n    width: 2px;\n    background: #ECEEF0;\n  }\n`;\n\nconst Header = styled.div`\n  display: inline-flex;\n  margin-bottom: 12px;\n`;\n\nconst Body = styled.div`\n  padding-left: 52px;\n  padding-bottom: 1px;\n`;\n\nconst Content = styled.div`\n  img {\n    display: block;\n    max-width: 100%;\n    max-height: 80vh;\n    margin: 0 0 12px;\n  }\n`;\n\nconst Text = styled.p`\n  display: block;\n  margin: 0;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: 400;\n  color: #687076;\n  white-space: nowrap;\n`;\n\nconst Actions = styled.div`\n  display: flex;\n  align-items: center;\n  gap: 12px;\n  margin: 0 -6px 6px;\n`;\n\nreturn (\n  <Post>\n    <Header>\n      <Widget\n        src=\"calebjacob.near/widget/AccountProfile\"\n        props={{\n          accountId,\n          avatarSize: \"32px\",\n          hideAccountId: true,\n          inlineContent: (\n            <>\n              <Text as=\"span\">\uff65</Text>\n              {blockHeight === \"now\" ? (\n                \"now\"\n              ) : (\n                <Text>\n                  <Widget\n                    src=\"mob.near/widget/TimeAgo\"\n                    props={{ blockHeight }}\n                  />{\" \"}\n                  ago\n                </Text>\n              )}\n            </>\n          ),\n        }}\n      />\n    </Header>\n\n    <Body>\n      <Content>\n        {content.text && (\n          <Widget\n            src=\"calebjacob.near/widget/SocialMarkdown\"\n            props={{ text: content.text }}\n          />\n        )}\n\n        {content.image && (\n          <Widget\n            src=\"mob.near/widget/Image\"\n            props={{\n              image: content.image,\n            }}\n          />\n        )}\n      </Content>\n\n      {blockHeight !== \"now\" && (\n        <Actions>\n          <Widget\n            src=\"calebjacob.near/widget/LikeButton\"\n            props={{\n              item: {\n                type: \"social\",\n                path: `${accountId}/post/comment`,\n                blockHeight,\n              },\n              notifyAccountId,\n            }}\n          />\n          <Widget\n            src=\"calebjacob.near/widget/CommentButton\"\n            props={{\n              hideCount: true,\n              onClick: () => State.update({ showReply: !state.showReply }),\n            }}\n          />\n          <Widget\n            src=\"calebjacob.near/widget/CopyUrlButton\"\n            props={{\n              url: commentUrl,\n            }}\n          />\n        </Actions>\n      )}\n\n      {state.showReply && (\n        <div className=\"mb-2\">\n          <Widget\n            src=\"calebjacob.near/widget/Comments.Compose\"\n            props={{\n              initialText: `@${accountId}, `,\n              notifyAccountId: extractNotifyAccountId(parentItem),\n              item: parentItem,\n              onComment: () => State.update({ showReply: false }),\n            }}\n          />\n        </div>\n      )}\n    </Body>\n  </Post>\n);\n\n// return (\n//   <>\n//     <div\n//       className={`pt-3 border-top pb-2 ${\n//         highlight ? \"bg-warning bg-opacity-10\" : \"\"\n//       }`}\n//     >\n//       <Widget\n//         src=\"mob.near/widget/MainPage.Post.Header\"\n//         props={{ accountId, blockHeight, link, postType: \"comment\" }}\n//       />\n//       <div className=\"mt-2 text-break\">\n//         <Widget\n//           src=\"mob.near/widget/MainPage.Post.Content\"\n//           props={{ content, raw }}\n//         />\n//       </div>\n//       {blockHeight !== \"now\" && (\n//         <div className=\"mt-1 d-flex justify-content-between\">\n//           <Widget\n//             src=\"mob.near/widget/LikeButton\"\n//             props={{\n//               notifyAccountId: accountId,\n//   item: {\n//     type: \"social\",\n//     path: `${accountId}/post/comment`,\n//     blockHeight,\n//   },\n//             }}\n//           />\n//           {parentItem && (\n//             <Widget\n//               src=\"mob.near/widget/CommentButton\"\n//               props={{\n//                 onClick: () =>\n//                   !state.showReply && State.update({ showReply: true }),\n//               }}\n//             />\n//           )}\n//         </div>\n//       )}\n//     </div>\n//     {state.showReply && (\n//       <div className=\"mb-2\" key=\"reply\">\n//         <Widget\n//           src=\"mob.near/widget/MainPage.Comment.Compose\"\n//           props={{\n// initialText: `@${accountId}, `,\n// notifyAccountId: extractNotifyAccountId(parentItem),\n// item: parentItem,\n// onComment: () => State.update({ showReply: false }),\n//           }}\n//         />\n//       </div>\n//     )}\n//   </>\n// );\n", "metadata": null, "branch": NaN, "widget_modules_used": null, "widget_url": "https://near.social/#/calebjacob.near/widget/Comments.Comment", "branch.draft.": NaN, "branch.draft.metadata": NaN}