{"tx_hash": "2LtGeQvKfG7qvDPpJPkjmdaVL4Rsr11SWH1PzpYLGGgi", "action_id_social": "8HAhfbSuV6P1Fr4mMzXwGKBKYBg3FpEkKWV2dbfBzWyj-0-widget", "block_id": 85809878, "block_timestamp": "2023-02-22 18:28:57.832", "signer_id": "calebjacob.near", "widget_name": "NotificationButton", "source_code": "const accountId = context.accountId;\n\nif (context.loading || !accountId) return <></>;\n\nconst notificationFeedSrc = \"calebjacob.near/widget/NotificationsPage\";\nconst lastBlockHeight = Storage.get(\"lastBlockHeight\", notificationFeedSrc);\nconst notifications = Social.index(\"notify\", accountId, {\n  order: \"asc\",\n  from: (lastBlockHeight ?? 0) + 1,\n  subscribe: true,\n});\nconst notificationsCount = notifications.length || 0;\n\nconst Button = styled.a`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: 40px;\n  height: 40px;\n  border-radius: 100%;\n  background: #2B2F31;\n  color: #ECEDEE;\n  transition: all 200ms;\n  margin: 0;\n  padding: 0;\n  border: none;\n  outline: none;\n\n  &:hover {\n    color: #fff;\n    background: rgb(60 65 68);\n  }\n\n  &:focus {\n    box-shadow: 0 0 0 1px #fff;\n  }\n\n  svg {\n    width: 16px;\n    height: 16px;\n  }\n\n  span {\n    min-width: 13px;\n    height: 13px;\n    padding: 0 3px;\n    display: block;\n    color: #fff;\n    background: #E5484D;\n    border-radius: 100px;\n    font-size: 10px;\n    line-height: 13px;\n    text-align: center;\n    font-weight: 600;\n    position: absolute;\n    top: -2px;\n    right: -1px;\n  }\n`;\n\nreturn (\n  <Button href={`/#/${notificationFeedSrc}`} aria-label=\"View Notifications\">\n    <svg viewBox=\"0 0 16 16\" fill=\"none\">\n      <path\n        d=\"M4.97282 11.8248C4.97282 11.8248 4.32577 14.2396 7.22354 15.0161C10.1213 15.7925 10.7684 13.3777 10.7684 13.3777M14.6887 7.44006L14.1711 9.37191L15.003 13.9947L0.99704 10.2419L4.02887 6.65431L4.54651 4.72246C5.29696 1.92176 8.17572 0.259704 10.9764 1.01015C13.7771 1.76059 15.4392 4.63936 14.6887 7.44006Z\"\n        stroke=\"currentColor\"\n        stroke-width=\"1.5\"\n        stroke-linecap=\"round\"\n        stroke-linejoin=\"round\"\n      />\n    </svg>\n\n    {notificationsCount > 0 && (\n      <span>{notificationsCount > 99 ? \"99+\" : notificationsCount}</span>\n    )}\n  </Button>\n);\n\nconst render = (counter, disabled) => {\n  const className = \"btn p-0 btn-sm border-0 link-dark\";\n  const inner = (\n    <>\n      <i className=\"fs-4 bi bi-bell\"></i>\n      {counter !== undefined && counter > 0 && (\n        <span\n          className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-primary\"\n          style={{ zIndex: 1, border: \"1px solid rgb(9,66,150)\" }}\n        >\n          {counter}\n        </span>\n      )}\n    </>\n  );\n\n  return (\n    <div className=\"d-inline position-relative\">\n      {disabled ? (\n        <button disabled className={className}>\n          {inner}\n        </button>\n      ) : (\n        <a className={className} href={`/#/${notificationFeedSrc}`}>\n          {inner}\n        </a>\n      )}\n    </div>\n  );\n};\n", "metadata": null, "branch": NaN, "widget_modules_used": null, "widget_url": "https://near.social/#/calebjacob.near/widget/NotificationButton", "branch.draft": NaN}