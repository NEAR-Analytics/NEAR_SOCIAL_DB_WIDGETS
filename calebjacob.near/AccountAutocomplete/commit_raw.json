{"tx_hash": "4rmrcL3ZysDGhHDwqua3ct8Y4JQjFAXsjpgwWyHuP9UP", "action_id_social": "E47U4pecie5ZhcKm4Kt61uCcsXm6CtwQ9kadyb7oaea9-0-widget", "block_id": 85820514, "block_timestamp": "2023-02-22 21:53:52.324", "signer_id": "calebjacob.near", "widget_name": "AccountAutocomplete", "source_code": "if (!context.accountId || !props.term) return <></>;\n\nlet results = [];\nconst profilesData = Social.get(\"*/profile/name\", \"final\") || {};\nconst followingData = Social.get(\n  `${context.accountId}/graph/follow/**`,\n  \"final\"\n);\n\nif (!profilesData || !followingData) return <></>;\n\nconst profiles = Object.entries(profilesData);\nprofiles.sort((a, b) => {\n  if (followingData[a[0]] === \"\" && followingData[b[0]] !== \"\") return -1;\n  return 0;\n});\nconst term = (props.term || \"\").replace(/\\W/g, \"\").toLowerCase();\nconst limit = 5;\n\nfor (let i = 0; i < profiles.length; i++) {\n  const search = (profiles[i][0] + profiles[i][1]?.profile?.name)\n    .replace(/\\W/g, \"\")\n    .toLowerCase();\n\n  if (search.indexOf(term) > -1) {\n    results.push({\n      accountId: profiles[i][0],\n    });\n  }\n\n  if (results.length === limit) break;\n}\n\nfunction onResultClick(id) {\n  props.onSelect && props.onSelect(id);\n}\n\nconst Wrapper = styled.div`\n  background: #fff;\n  display: flex;\n  gap: 12px;\n  padding: 0 12px 12px 12px;\n  overflow: auto;\n  scroll-behavior: smooth;\n  align-items: center;\n\n  > * {\n    max-width: 175px;\n    flex-grow: 0;\n    flex-shrink: 0;\n    \n    button {\n        border: 1px solid #ECEEF0;\n        border-radius: 6px;\n        padding: 6px;\n        transition: all 200ms;\n\n        &:focus, &:hover {\n            border-color: #687076;\n        }\n    }\n  }\n`;\n\nif (results.length === 0) return <></>;\n\nreturn (\n  <Wrapper>\n    {results.map((result) => {\n      return (\n        <Widget\n          key={result.accountId}\n          src=\"calebjacob.near/widget/AccountProfile\"\n          props={{ accountId: result.accountId, onClick: onResultClick }}\n        />\n      );\n    })}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/calebjacob.near/widget/AccountAutocomplete"}