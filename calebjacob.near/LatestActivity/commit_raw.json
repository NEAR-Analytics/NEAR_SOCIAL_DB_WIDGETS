{"tx_hash": "4hBctonQKNAn1jRj6MKECSCKrsKvGyHuc9FuCWvUDWNa", "action_id_social": "Fqpjt7AYQ4oYy4TFEcBBAuxtSAHyYDxPkb25Gy15Xh6U-0-widget", "block_id": 85387124, "block_timestamp": "2023-02-16 23:57:08.079", "signer_id": "calebjacob.near", "widget_name": "LatestActivity", "source_code": "const limit = 10;\nlet items = [];\n\nconst followData = Social.index(\"graph\", \"follow\", {\n  subscribe: true,\n  limit,\n  order: \"desc\",\n});\n\nconst pokeData = Social.index(\"graph\", \"poke\", {\n  subscribe: true,\n  limit,\n  order: \"desc\",\n});\n\nif (pokeData && followData) {\n  const data = [];\n\n  pokeData.forEach((poke) => {\n    data.push({\n      ...poke,\n      type: \"poke\",\n    });\n  });\n\n  followData.forEach((follow) => {\n    data.push({\n      ...follow,\n      type: \"follow\",\n    });\n  });\n\n  data.sort((a, b) => b.blockHeight - a.blockHeight);\n\n  items = data.slice(0, limit);\n}\n\nconst H2 = styled.h2`\n  font-size: 19px;\n  line-height: 22px;\n  color: #11181C;\n  margin: 0 0 24px;\n`;\n\nconst Item = styled.div`\n  display: grid;\n  grid-template-columns: 100px 1fr 100px;\n  gap: 12px;\n  align-items: center;\n  margin-bottom: 24px;\n  width: 300px;\n  overflow: hidden;\n\n  > * {\n    min-width: 0\n  }\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  font-size: 14px;\n  line-height: 20px;\n  color: ${(p) => (p.bold ? \"#11181C\" : \"#687076\")};\n  font-weight: ${(p) => (p.bold ? \"600\" : \"400\")};\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\n  overflow: ${(p) => (p.ellipsis ? \"hidden\" : \"\")};\n  text-overflow: ${(p) => (p.ellipsis ? \"ellipsis\" : \"\")};\n  white-space: nowrap;\n  flex-shrink: 0;\n`;\n\nreturn (\n  <>\n    <H2>Activity</H2>\n\n    {items.map((item, i) => (\n      <Item key={i}>\n        <Widget\n          src=\"calebjacob.near/widget/AccountProfileInline\"\n          props={{ accountId: item.accountId }}\n        />\n\n        {item.type === \"follow\" && <Text>followed</Text>}\n        {item.type === \"poke\" && <Text>poked</Text>}\n\n        <Widget\n          src=\"calebjacob.near/widget/AccountProfileInline\"\n          props={{ accountId: item.value.accountId }}\n        />\n      </Item>\n    ))}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/calebjacob.near/widget/LatestActivity"}