{"tx_hash": "51o34ZEFCVugmgVEYBohSx1eBDjHpLoHi3BHYL8m7upj", "action_id_social": "EjAeckAqPtVtU3Cz1ecgjjmjZfy64CwZpWUhE9x8BSAv-0-widget", "block_id": 80646130, "block_timestamp": "2022-12-14 17:29:24.960", "signer_id": "logunov.near", "widget_name": "FavouriteWidgets_debug", "source_code": "const accountId = context.accountId;\n\nif (!accountId) {\n  return \"Please sign in with NEAR wallet\";\n}\n\nconst data = Social.get(`${accountId}/graph/widget/*`, \"final\");\n\nconst widgets = data ? Object.entries(data) : [];\nconst wrappedWidgets = [];\nconst maxIndex = -1;\nfor (let i = 0; i < widgets.length; ++i) {\n  const index = widgets[i][0];\n  maxIndex = Math.max(maxIndex, index);\n  const src = widgets[i][1];\n  wrappedWidgets.push(\n    <tr border=\"1\">\n      <td>{index}</td>\n      <td>\n        <a href={`#/${src}`}>\n          <i>{src}</i>\n        </a>\n      </td>\n    </tr>\n  );\n}\n\nState.init({ new_widget: \"\", next_index: maxIndex + 1, remove_index: 0 });\n\nreturn (\n  <div>\n    <div>{maxIndex}</div>\n    <div className=\"mb-2\">\n      <h4>Add widget by relative link</h4>\n      <input\n        type=\"text\"\n        className=\"form-control\"\n        placeholder=\"mob.near/widget/Welcome\"\n        onChange={(e) =>\n          State.update({\n            next_index: Math.max(maxIndex + 1, state.next_index),\n            new_widget: e.target.value,\n          })\n        }\n      />\n    </div>\n    <CommitButton\n      data={{ graph: { widget: { [state.next_index]: state.new_widget } } }}\n      onClick={(e) => State.update({ next_index: state.next_index + 1 })}\n    >\n      Save\n    </CommitButton>\n\n    <div className=\"mb-2\">\n      <h4>Remove widget by index</h4>\n      <input\n        type=\"text\"\n        className=\"form-control\"\n        placeholder=\"0\"\n        onChange={(e) => State.update({ remove_index: e.target.value })}\n      />\n    </div>\n    <CommitButton data={{ graph: { widget: { [state.remove_index]: null } } }}>\n      Remove\n    </CommitButton>\n    <br />\n    <table class=\"table\">\n      <thead>\n        <tr>\n          <th scope=\"col\">Index</th>\n          <th scope=\"col\">Link</th>\n        </tr>\n      </thead>\n      <tbody>{wrappedWidgets}</tbody>\n    </table>\n    <br />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/logunov.near/widget/FavouriteWidgets_debug"}