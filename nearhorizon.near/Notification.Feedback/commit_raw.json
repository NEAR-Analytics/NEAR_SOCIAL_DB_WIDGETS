{"tx_hash": "EKGnSSsy8YZ3MfBEZtuoaiboWhMZNJkYACevH8wNrSTa", "action_id_social": "Gszd8KTMPG4yNaBDz1NnqmYHb9cJMc2JCLAXkjeBj47t-0-widget", "block_id": 91007234, "block_timestamp": "2023-05-03 13:44:06.041", "signer_id": "nearhorizon.near", "widget_name": "Notification.Feedback", "source_code": "const ownerId = \"nearhorizon.near\";\nconst { contributionId, vendorId } = props.value;\nconst [accountId, cid] = contributionId;\n\nState.init({\n  contribution: null,\n  contributionIsFetched: false,\n  proposal: null,\n  proposalIsFetched: false,\n  isProjectAdmin: null,\n  isProjectAdminIsFetched: false,\n});\n\nif (!state.contributionIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_contribution\",\n    { project_id: accountId, cid, vendor_id: vendorId },\n    \"final\",\n    false\n  ).then((contribution) =>\n    State.update({ contribution, contributionIsFetched: true })\n  );\n}\n\nif (!state.proposalIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"get_proposal\",\n    { project_id: accountId, cid, vendor_id: vendorId },\n    \"final\",\n    false\n  ).then((proposal) => State.update({ proposal, proposalIsFetched: true }));\n}\n\nif (!state.isProjectAdminIsFetched) {\n  Near.asyncView(\n    ownerId,\n    \"check_is_project_admin\",\n    { project_id: accountId, account_id: context.accountId },\n    \"final\",\n    false\n  ).then((isProjectAdmin) =>\n    State.update({ isProjectAdmin, isProjectAdminIsFetched: true })\n  );\n}\n\nif (\n  !state.contributionIsFetched ||\n  !state.proposalIsFetched ||\n  !state.isProjectAdminIsFetched\n) {\n  return <>Loading...</>;\n}\nconst Text = styled.p`\n  margin: 0;\n  line-height: 1.5rem;\n  color: ${(p) => (p.bold ? \"#11181C\" : \"#687076\")} !important;\n  font-weight: 400;\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\n  overflow: ${(p) => (p.ellipsis ? \"hidden\" : \"\")};\n  text-overflow: ${(p) => (p.ellipsis ? \"ellipsis\" : \"\")};\n  white-space: ${(p) => (p.ellipsis ? \"nowrap\" : \"\")};\n  overflow-wrap: anywhere;\n\n  b {\n    font-weight: 600;\n    color: #11181c;\n  }\n\n  &[href] {\n    font-weight: 600;\n    color: #006adc !important;\n    display: inline-flex;\n    gap: 0.25rem;\n\n    &:hover,\n    &:focus {\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n  justify-content: flex-start;\n  gap: 0.25em;\n  width: 100%;\n`;\n\nconst Column = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 0.25em;\n  width: 100%;\n`;\n\nconst GreyButton = styled.button`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0.75em 1em;\n  gap: 0.5em;\n  background: #fafafa;\n  border: 1px solid #eceef0;\n  border-radius: 50px;\n  color: #006adc;\n  font-style: normal;\n  font-weight: 600;\n  font-size: 0.95em;\n  line-height: 1em;\n  text-align: center;\n  white-space: nowrap;\n`;\n\nreturn (\n  <>\n    <Row>\n      <Text>\n        <Widget\n          src=\"mob.near/widget/TimeAgo\"\n          props={{ blockHeight: props.blockHeight }}\n        />\n        ago\n      </Text>\n    </Row>\n    <Row>\n      <Widget\n        src=\"near/widget/AccountProfileInline\"\n        props={{ accountId: state.isProjectAdmin ? vendorId : accountId }}\n      />\n      <Text>gave you feedback</Text>\n    </Row>\n\n    <GreyButton\n      href={`${ownerId}/widget/Index?tab=contribution&projectId=${accountId}&vendorId=${vendorId}&cid=${cid}&content=feedback`}\n      onClick={() =>\n        props.update({\n          tab: \"contribution\",\n          content: \"feedback\",\n          search: \"\",\n          accountId,\n        })\n      }\n    >\n      View Feedback\n    </GreyButton>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearhorizon.near/widget/Notification.Feedback"}