{"tx_hash": "CnPc18RCGMF4quQ7U3EdoxZKjV9sJVKWyCkBNoTrCgLW", "action_id_social": "E7ghC2NFuFnFP2KhS1vgU9hwvNS7AhSEgKbvzMVpMUg6-0-widget", "block_id": 91007196, "block_timestamp": "2023-05-03 13:43:16.036", "signer_id": "nearhorizon.near", "widget_name": "Contribution.Feedback", "source_code": "const ownerId = \"nearhorizon.near\";\nconst projectId = props.projectId;\nconst vendorId = props.vendorId;\nconst status = props.status;\nconst vendorFeedback = props.vendorFeedback;\nconst projectFeedback = props.projectFeedback;\nconst title = props.title;\n\nif (typeof status === \"string\" || !(\"Completed\" in status)) {\n  return <>No feedback yet. Contract still in progress...</>;\n}\n\nState.init({\n  name: \"\",\n  nameIsFetched: false,\n  vendorName: \"\",\n  vendorNameIsFetched: false,\n});\n\nif (!state.nameIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    { keys: [`${projectId}/profile/name`] },\n    \"final\",\n    false\n  ).then((data) =>\n    State.update({\n      name: data[projectId].profile.name,\n      nameIsFetched: true,\n    })\n  );\n}\n\nif (!state.vendorNameIsFetched) {\n  Near.asyncView(\n    \"social.near\",\n    \"get\",\n    { keys: [`${vendorId}/profile/name`] },\n    \"final\",\n    false\n  ).then((data) =>\n    State.update({\n      vendorName: data[vendorId].profile.name,\n      vendorNameIsFetched: true,\n    })\n  );\n}\n\nif (!state.nameIsFetched || !state.vendorNameIsFetched) {\n  return <>Loading...</>;\n}\n\nconst Container = styled.div`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 100%;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 1em;\n  width: 100%;\n`;\n\nconst Column = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 0.25em;\n  width: 100%;\n`;\n\nconst Description = styled.div`\n  padding-left: 1em;\n  border-left: 3px solid #00ec97;\n  width: 100%;\n`;\n\nconst projectFeedbackView = projectFeedback ? (\n  <Widget\n    src={`${ownerId}/widget/Card`}\n    props={{\n      body: (\n        <Container>\n          <Column>\n            <Row>\n              <Widget\n                src={`${ownerId}/widget/Project.Icon`}\n                props={{ accountId: projectId, size: \"2em\" }}\n              />\n              <Widget\n                src={`${ownerId}/widget/NameAndAccount`}\n                props={{\n                  accountId: projectId,\n                  name: state.name,\n                  nameSize: \"1.125em\",\n                }}\n              />\n            </Row>\n            <h3>{title}</h3>\n            <Description>\n              <Widget\n                src={`${ownerId}/widget/DescriptionArea`}\n                props={{ description: projectFeedback }}\n              />\n            </Description>\n          </Column>\n        </Container>\n      ),\n    }}\n  />\n) : (\n  <>No project feedback yet...</>\n);\n\nconst vendorFeedbackView = vendorFeedback ? (\n  <Widget\n    src={`${ownerId}/widget/Card`}\n    props={{\n      body: (\n        <Container>\n          <Column>\n            <Row>\n              <Widget\n                src={`${ownerId}/widget/Vendor.Icon`}\n                props={{ accountId: vendorId, size: \"2em\" }}\n              />\n              <Widget\n                src={`${ownerId}/widget/NameAndAccount`}\n                props={{\n                  accountId: vendorId,\n                  name: state.name,\n                  nameSize: \"1.125em\",\n                }}\n              />\n            </Row>\n            <h3>{title}</h3>\n            <Description>\n              <Widget\n                src={`${ownerId}/widget/DescriptionArea`}\n                props={{ description: vendorFeedback }}\n              />\n            </Description>\n          </Column>\n        </Container>\n      ),\n    }}\n  />\n) : (\n  <>No vendor feedback yet...</>\n);\n\nreturn (\n  <Column>\n    {projectFeedback}\n    {vendorFeedback}\n  </Column>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearhorizon.near/widget/Contribution.Feedback"}