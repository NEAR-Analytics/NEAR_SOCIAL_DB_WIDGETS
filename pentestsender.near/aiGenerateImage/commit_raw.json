{"tx_hash": "2qob3hox2jNZvdoQSjDJyfSmhPUdJZqteHscMiTot5nd", "action_id_social": "GSJBXAzvLm5wSQfKVZR4E4fiNMLYjJubELp9f9x1fMTr-0-widget", "block_id": 94988458, "block_timestamp": "2023-06-25T09:44:17.180Z", "signer_id": "pentestsender.near", "widget_name": "aiGenerateImage", "source_code": "State.init({\n  imgUrl: \"\",\n  fetchStatusError: false,\n  prompt: \"\",\n  isLoading: false,\n});\n\nconst uploadFileUpdateState = (prompt) => {\n  asyncFetch(\"https://genadrop.onrender.com/api/v1/general/generate-image\", {\n    method: \"POST\",\n    mode: \"cors\",\n    credentials: \"same-origin\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      Authorization: \"Basic dXNlcm5hbWViYXNpYzpwYXNzd29yZGJhc2lj\",\n    },\n\n    body: JSON.stringify({\n      prompt,\n      n: 1,\n      size: \"512x512\",\n    }),\n  })\n    .then((res) => {\n      console.log(res);\n      State.update({ prompt: \"\", isLoading: false });\n      if (res.body.resultCode === 0) {\n        State.update({ imgUrl: res.body.content[0].url });\n      }\n    })\n    .catch((err) => {\n      State.update({ fetchStatusError: true });\n    });\n};\n\nconst filesOnChange = () => {\n  State.update({ imgUrl: \"\", isLoading: true });\n  if (state.prompt) {\n    uploadFileUpdateState(state.prompt);\n  } else {\n    uploadFileUpdateState(\"a man in blue sky\");\n  }\n};\n\nconst handleInputChange = (event) => {\n  State.update({ prompt: event.target.value });\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding-top: 100px;\n`;\n\nconst ImageContainer = styled.div`\n  width: 100%;\n  max-width: 400px;\n  margin-bottom: 20px;\n`;\n\nconst Images = styled.img`\n  width: 100%;\n  height: auto;\n  object-fit: cover;\n`;\n\nconst DefaultImage = styled.div`\n  width: 100%;\n  height: 512px;\n  background-color: #f0f0f0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n`;\n\nconst DefaultImageText = styled.span`\n  font-size: 18px;\n  color: #555;\n`;\n\nconst TextArea = styled.textarea`\n  width: 100%;\n  max-width: 400px;\n  height: 150px;\n  padding: 10px;\n  font-size: 16px;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  resize: vertical;\n\n  @media (max-width: 768px) {\n    max-width: 300px;\n    height: 100px;\n    font-size: 14px;\n  }\n`;\n\nconst Button = styled.button`\n  padding: 10px 20px;\n  padding-top: 10px;\n  font-size: 16px;\n  border: none;\n  border-radius: 4px;\n  background-color: #0d99ff;\n  color: #fff;\n  cursor: pointer;\n\n  @media (max-width: 768px) {\n    padding: 8px 16px;\n    font-size: 14px;\n  }\n`;\n\nreturn (\n  <Container>\n    <ImageContainer>\n      {state.imgUrl ? (\n        <Images src={state.imgUrl} alt=\"Preview\" />\n      ) : (\n        <DefaultImage>\n          {state.fetchStatusError ? (\n            <DefaultImageText>Failed generate image!</DefaultImageText>\n          ) : (\n            <DefaultImageText>\n              Generated image will appear here!\n            </DefaultImageText>\n          )}\n        </DefaultImage>\n      )}\n    </ImageContainer>\n    <TextArea\n      placeholder=\"a man in blue sky....\"\n      value={state.prompt}\n      onChange={handleInputChange}\n    />\n    <div style={{ paddingTop: 20, paddingBottom: 20 }}>\n      <Button onClick={filesOnChange}>\n        {state.isLoading ? \"Generating Image....\" : \"Generate Image\"}\n      </Button>\n    </div>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/pentestsender.near/widget/aiGenerateImage", "__row_index": 0}