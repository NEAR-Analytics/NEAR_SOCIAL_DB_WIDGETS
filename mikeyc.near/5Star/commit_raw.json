{"tx_hash": "Fppr4MvVVCRSvSHdqGXUAB8nc2GqU3jxUyrmrYTbD6rx", "action_id_social": "7eE8gHsSaTk32Maz7rSf8cdECQWjkKkbELeAVigHQfVP-0-widget", "block_id": 80760025, "block_timestamp": "2022-12-16 06:29:55.768", "signer_id": "mikeyc.near", "widget_name": "5Star", "source_code": "// Set Contract Name\nconst cName = \"5star.dorgon108.near\";\n//Load widget Names\nlet widgetNames = Near.view(cName, \"getListOfWidgets\");\n// let widgetNames = [\"hey\", \"yeha\"];\n\n//get widgetInfo\nlet widgetInfo = widgetNames.map((el) => {\n  return Near.view(cName, \"getWidgetObject\", { title: el });\n});\n\n//Load Widget Ranking Average\nlet ratingAverages = widgetNames.map((element, i) => {\n  console.log(\"average title name\", element);\n  return Math.round(\n    Near.view(cName, \"getVoteAverage\", {\n      widgetName: element,\n    })\n  );\n});\n\n// Load Widget Ranking Array to get total votes\nlet rankingArraysLength = widgetNames.map((element, i) => {\n  let arrays = Near.view(cName, \"getRankingArray\", { widgetName: element });\n  return arrays.length;\n});\nconsole.log(\"vote array\", rankingArraysLength);\n\n// let WidgetNames = [\"poll\", \"checkers\", \"Dao\"];\nlet value = 5;\n\nreturn (\n  <div>\n    <h1>5star</h1>\n    <h2>{`One stop shop for widget ratings`}</h2>\n    <Widget src=\"dorgon108.near/widget/NewWidgetForm\" />\n\n    <div>\n      {widgetNames.map((el, i) => {\n        let value = ratingAverages[i];\n        let title = el;\n        let owner = widgetInfo[i].owner;\n        let url = widgetInfo[i].url;\n        let image = widgetInfo[i].image;\n        let totalVotes = rankingArraysLength[i];\n\n        return (\n          <div key={i} style={{ backgroundColor: \"#A8A8A8\", margin: \"10px\" }}>\n            {\n              <div>\n                <div>\n                  <div style={{ display: \"flex\", justifyContent: \"center\" }}>\n                    <img src={image} style={{ width: \"30vw\" }} />\n                  </div>\n\n                  <h1>{el}</h1>\n                  <h2>Owner:{owner}</h2>\n                  <h2>\n                    <Widget\n                      src=\"dorgon108.near/widget/Star-Rating-Static\"\n                      props={{\n                        value,\n                      }}\n                    />\n                  </h2>\n                </div>\n                <div>\n                  <h2>\"Add Your Rating\"</h2>\n                  <Widget\n                    src=\"dorgon108.near/widget/Star-Rating-Widget\"\n                    props={{\n                      title,\n                    }}\n                  />\n                  <p>`total votes:{totalVotes}`</p>\n                </div>\n              </div>\n            }\n            {}\n          </div>\n        );\n      })}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mikeyc.near/widget/5Star"}