{"tx_hash": "HNxy6eprPmsr6a9XpAW2baTYczv1wYyYbNtM2F5Y6bS5", "action_id_social": "GVebjaEbmxtKJU6qL51MjjP2MMz2t6Gfg46AbQa2fWnD-0-widget", "block_id": 83173652, "block_timestamp": "2023-01-17 18:00:43.316", "signer_id": "easypoll.near", "widget_name": "answersHeader", "source_code": "State.init({\n  questions: {},\n  profile: {},\n});\n\nif (!props.blockHeight) {\n  return \"Prop blockHeight is not set\";\n}\n\nconst widgetOwner = \"easypoll.near\";\n\nconst questionBlockHeight = props.blockHeight;\nlet questions = Social.index(\"poll_question\", \"question-v3.1.0\");\n\nif (JSON.stringify(questions) != JSON.stringify(state.questions)) {\n  State.update({ questions: questions });\n}\nif (!questions) {\n  return \"Loading\";\n}\nlet questionParams = questions.find(\n  (q) => q.blockHeight == questionBlockHeight\n);\n\nfunction isActive() {\n  return (\n    questionParams.value.startTimestamp < Date.now() &&\n    Date.now() < questionParams.value.endTimestamp\n  );\n}\n\nfunction isUpcoming() {\n  return questionParams.value.startTimestamp > Date.now();\n}\n\nlet profile = Social.getr(`${props.accountId}/profile`);\n\nif (JSON.stringify(profile) != JSON.stringify(state.profile)) {\n  State.update({ profile: profile });\n}\nif (!profile) {\n  return \"Loading\";\n}\n\nreturn (\n  <div className=\"my-2\">\n    <div className=\"d-flex no-wrap justify-content-between\">\n      <Widget\n        src={`${widgetOwner}/widget/Profile`}\n        props={{ userMakingQuestion: props.accountId, profile }}\n      />\n\n      <div className=\"d-flex\">\n        <span className=\"mx-2\" style={{ fontWeight: \"500\" }}>\n          End date:{\" \"}\n          {new Date(questionParams.value.endTimestamp).toLocaleDateString()}\n        </span>\n        <span\n          style={{\n            backgroundColor: isUpcoming()\n              ? \"#FFF3B4\"\n              : isActive()\n              ? \"#D9FCEF\"\n              : \"#FFE5E5\",\n\n            height: \"max-content\",\n            width: \"6rem\",\n            border: \"1px solid rgb(0, 82, 204)\",\n            textAlign: \"center\",\n            borderRadius: \"80px\",\n            color: isUpcoming()\n              ? \"#FFC905\"\n              : isActive()\n              ? \"#00B37D\"\n              : \"#FF4747\",\n          }}\n        >\n          {isUpcoming() ? \"Upcoming\" : isActive() ? \"Active\" : \"Closed\"}\n        </span>\n      </div>\n    </div>\n    <h5 className=\"mt-3\">{questionParams.value.title}</h5>\n    <p>{questionParams.value.description}</p>\n    <p>{questionParams.value.question}</p>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/easypoll.near/widget/answersHeader"}