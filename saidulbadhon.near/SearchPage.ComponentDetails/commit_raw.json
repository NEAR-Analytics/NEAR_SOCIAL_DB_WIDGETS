{"tx_hash": "31nPAEYxvy4iDcXEybpj6dMLfeYS1WBqoYrXLgCyUnxs", "action_id_social": "9qP7cT6oWTVpNfc5x1pKzpDPvP1fMXdKBpk6f1eGUk1u-0-widget", "block_id": 89043339, "block_timestamp": "2023-04-07 17:05:12.163", "signer_id": "saidulbadhon.near", "widget_name": "SearchPage.ComponentDetails", "source_code": "State.init({\r\n  copiedShareUrl: false,\r\n  selectedTab: props.tab ?? \"source\",\r\n});\r\n\r\nif (props.tab && props.tab !== state.selectedTab) {\r\n  State.update({\r\n    selectedTab: props.tab,\r\n  });\r\n}\r\n\r\nconst src = props.src;\r\nconst [accountId, widget, widgetName] = src.split(\"/\");\r\nconst existsData = Social.keys(`${accountId}/widget/${widgetName}`);\r\nconst exists = !existsData || Object.keys(existsData).length > 0;\r\nconst code = Social.get(`${accountId}/widget/${widgetName}`);\r\nconst data = Social.get(`${accountId}/widget/${widgetName}/**`);\r\nconst metadata = data.metadata;\r\nconst tags = Object.keys(metadata.tags || {});\r\nconst detailsUrl = `/#/adminalpha.near/widget/ComponentDetailsPage?src=${src}`;\r\nconst shareUrl = `https://alpha.near.org${detailsUrl}`;\r\n\r\nconst dependencyMatch =\r\n  code && code.matchAll(/<Widget[\\s\\S]*?src=.*?\"(.+)\"[\\s\\S]*?\\/>/g);\r\nlet dependencySources = [...(dependencyMatch || [])]\r\n  .map((r) => r[1])\r\n  .filter((r) => !!r);\r\ndependencySources = dependencySources.filter(\r\n  (r, i) => dependencySources.indexOf(r) === i && r !== \"(.+)\"\r\n);\r\n\r\nconst sourceCode = `\r\n\\`\\`\\`jsx\r\n${code}\r\n\\`\\`\\`\r\n`;\r\n\r\nconst Wrapper = styled.div`\r\n  padding-bottom: 48px;\r\n`;\r\n\r\nconst SummaryWrapper = styled.div`\r\n  margin-bottom: 32px;\r\n`;\r\n\r\nconst Tabs = styled.div`\r\n  display: flex;\r\n  height: 48px;\r\n  border-bottom: 1px solid #eceef0;\r\n  margin-bottom: 32px;\r\n  overflow: auto;\r\n  scroll-behavior: smooth;\r\n\r\n  @media (max-width: 900px) {\r\n    background: #f8f9fa;\r\n    border-top: 1px solid #eceef0;\r\n    margin: 0 -12px 48px;\r\n\r\n    > * {\r\n      flex: 1;\r\n    }\r\n  }\r\n`;\r\n\r\nconst TabsButton = styled.a`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  height: 100%;\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n  padding: 0 12px;\r\n  position: relative;\r\n  color: ${(p) => (p.selected ? \"#11181C\" : \"#687076\")};\r\n  background: none;\r\n  border: none;\r\n  outline: none;\r\n  text-align: center;\r\n  text-decoration: none !important;\r\n\r\n  &:hover {\r\n    color: #11181c;\r\n  }\r\n\r\n  &::after {\r\n    content: \"\";\r\n    display: ${(p) => (p.selected ? \"block\" : \"none\")};\r\n    position: absolute;\r\n    bottom: 0;\r\n    left: 0;\r\n    right: 0;\r\n    height: 3px;\r\n    background: #59e692;\r\n  }\r\n`;\r\n\r\nconst Content = styled.div`\r\n  display: grid;\r\n  grid-template-columns: minmax(0, 1fr) 336px;\r\n  gap: 64px;\r\n\r\n  @media (max-width: 995px) {\r\n    grid-template-columns: 1fr;\r\n    gap: 24px;\r\n  }\r\n`;\r\n\r\nconst Sidebar = styled.div`\r\n  > div {\r\n    padding-bottom: 32px;\r\n    border-bottom: 1px solid #eceef0;\r\n    margin-bottom: 32px;\r\n\r\n    &:last-child {\r\n      padding-bottom: 0;\r\n      border-bottom: none;\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n\r\n  @media (max-width: 995px) {\r\n    padding-bottom: 32px;\r\n    border-bottom: 1px solid #eceef0;\r\n    grid-row: 1;\r\n  }\r\n`;\r\n\r\nconst SmallTitle = styled.h3`\r\n  color: #687076;\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n  line-height: 15px;\r\n  margin-bottom: 32px;\r\n  text-transform: uppercase;\r\n\r\n  @media (max-width: 770px) {\r\n    margin-bottom: 16px;\r\n  }\r\n`;\r\n\r\nconst TextLink = styled.a`\r\n  display: inline-flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  color: #0091ff;\r\n  font-weight: 600;\r\n  font-size: 12px;\r\n  line-height: 15px;\r\n`;\r\n\r\nconst Text = styled.p`\r\n  margin: 0;\r\n  font-size: 14px;\r\n  line-height: 20px;\r\n  color: ${(p) => (p.bold ? \"#11181C\" : \"#687076\")};\r\n  font-weight: ${(p) => (p.bold ? \"600\" : \"400\")};\r\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\r\n\r\n  i {\r\n    margin-right: 4px;\r\n  }\r\n`;\r\n\r\nconst Dependency = styled.div`\r\n  margin-bottom: 24px;\r\n`;\r\n\r\nconst HistoryContainer = styled.div`\r\n  > div > h1,\r\n  > div > .input-group.mb-3 {\r\n    display: none;\r\n  }\r\n`;\r\n\r\nif (!exists) {\r\n  return (\r\n    <>\r\n      <Text bold>Error</Text>\r\n      <Text>Could not find: {src}</Text>\r\n    </>\r\n  );\r\n}\r\n\r\nreturn (\r\n  <Wrapper>\r\n    <SummaryWrapper>\r\n      <Widget\r\n        src=\"saidulbadhon.near/widget/SearchPage.ComponentDetails.ComponentSummary\"\r\n        props={{\r\n          primaryAction: \"open\",\r\n          size: \"large\",\r\n          showTags: false,\r\n          src,\r\n        }}\r\n      />\r\n    </SummaryWrapper>\r\n\r\n    <Tabs>\r\n      <TabsButton\r\n        href={`${detailsUrl}&tab=about`}\r\n        selected={state.selectedTab === \"about\"}\r\n      >\r\n        About\r\n      </TabsButton>\r\n\r\n      <TabsButton\r\n        href={`${detailsUrl}&tab=source`}\r\n        selected={state.selectedTab === \"source\"}\r\n      >\r\n        Source\r\n      </TabsButton>\r\n\r\n      <TabsButton\r\n        href={`${detailsUrl}&tab=history`}\r\n        selected={state.selectedTab === \"history\"}\r\n      >\r\n        History\r\n      </TabsButton>\r\n    </Tabs>\r\n\r\n    {state.selectedTab === \"about\" && (\r\n      <Content>\r\n        <div>\r\n          {metadata.description ? (\r\n            <Markdown text={metadata.description} />\r\n          ) : (\r\n            <Text>This component has no description.</Text>\r\n          )}\r\n        </div>\r\n\r\n        <Sidebar>\r\n          {(tags.includes(\"Coming Soon\") || tags.includes(\"coming-soon\")) && (\r\n            <div>\r\n              <Widget src=\"adminalpha.near/widget/waitList\" />\r\n            </div>\r\n          )}\r\n\r\n          <div>\r\n            <SmallTitle>Developer</SmallTitle>\r\n            <Widget\r\n              src=\"adminalpha.near/widget/AccountProfile\"\r\n              props={{\r\n                accountId: accountId,\r\n              }}\r\n            />\r\n          </div>\r\n\r\n          {tags.length > 0 && (\r\n            <div>\r\n              <SmallTitle>Tags</SmallTitle>\r\n              <Widget\r\n                src=\"adminalpha.near/widget/Tags\"\r\n                props={{\r\n                  tags,\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n\r\n          {metadata.linktree?.website && (\r\n            <div>\r\n              <SmallTitle>Website</SmallTitle>\r\n              <TextLink\r\n                href={`https://${metadata.linktree.website}`}\r\n                target=\"_blank\"\r\n              >\r\n                {metadata.linktree.website}\r\n                <i className=\"bi bi-box-arrow-up-right\"></i>\r\n              </TextLink>\r\n            </div>\r\n          )}\r\n\r\n          <div>\r\n            <Text small>\r\n              <i className=\"bi bi-clock\"></i>\r\n              Last updated\r\n              <Widget\r\n                src=\"mob.near/widget/TimeAgo\"\r\n                props={{ keyPath: `${accountId}/widget/${widgetName}` }}\r\n              />{\" \"}\r\n              ago.\r\n            </Text>\r\n          </div>\r\n        </Sidebar>\r\n      </Content>\r\n    )}\r\n\r\n    {state.selectedTab === \"source\" && (\r\n      <Content>\r\n        <Markdown text={sourceCode} />\r\n\r\n        <Sidebar>\r\n          <div>\r\n            <SmallTitle>Dependencies ({dependencySources.length})</SmallTitle>\r\n\r\n            {dependencySources.length === 0 && (\r\n              <Text>This component has no dependencies.</Text>\r\n            )}\r\n\r\n            {dependencySources.map((source) => (\r\n              <Dependency key={source}>\r\n                <Widget\r\n                  src=\"adminalpha.near/widget/ComponentProfile\"\r\n                  props={{ src: source }}\r\n                />\r\n              </Dependency>\r\n            ))}\r\n          </div>\r\n        </Sidebar>\r\n      </Content>\r\n    )}\r\n\r\n    {state.selectedTab === \"history\" && (\r\n      <HistoryContainer>\r\n        <Widget\r\n          src=\"bozon.near/widget/WidgetHistory\"\r\n          props={{ widgetPath: src }}\r\n        />\r\n      </HistoryContainer>\r\n    )}\r\n  </Wrapper>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/saidulbadhon.near/widget/SearchPage.ComponentDetails"}