{"tx_hash": "4KAKxBwcCaVtBhmvATqrwwQKY7aeoknDHiSvu3UZ6Z4y", "action_id_social": "Gme6gsvguPsEXEf1CAX2DtVtsvDscNPmVepiRMBqCa65-0-widget", "block_id": 88801379, "block_timestamp": "2023-04-04 12:57:16.246", "signer_id": "saidulbadhon.near", "widget_name": "SearchPage.ComponentItem.TimeAgo", "source_code": "if (props.now) {\r\n  return \"now\";\r\n}\r\n\r\nconst keyPath = props.keyPath;\r\nlet blockHeight = props.blockHeight ? parseInt(props.blockHeight) : undefined;\r\n\r\nif (blockHeight === undefined && keyPath) {\r\n  blockHeight = Social.keys(keyPath, undefined, {\r\n    return_type: \"BlockHeight\",\r\n  });\r\n  if (blockHeight === null) {\r\n    return \"Loading\";\r\n  }\r\n  keyPath.split(\"/\").forEach((key) => {\r\n    blockHeight = blockHeight[key];\r\n  });\r\n}\r\n\r\nif (!blockHeight) {\r\n  return \"unknown\";\r\n}\r\n\r\nconst block = Near.block(blockHeight);\r\n\r\nif (block === null) {\r\n  return \"Loading\";\r\n}\r\n\r\nif (!block) {\r\n  return \"unknown\";\r\n}\r\n\r\nconst timeMs = parseFloat(block.header.timestamp_nanosec) / 1e6;\r\nconst date = new Date(timeMs);\r\nconst title = `${date.toLocaleTimeString([], {\r\n  hour: \"2-digit\",\r\n  minute: \"2-digit\",\r\n})} ${date.toLocaleDateString([], {\r\n  day: \"numeric\",\r\n  month: \"short\",\r\n  year: \"numeric\",\r\n})}`;\r\n\r\nconst timeAgo = (diffSec) =>\r\n  diffSec < 60000\r\n    ? `${(diffSec / 1000) | 0}s`\r\n    : diffSec < 3600000\r\n    ? `${(diffSec / 60000) | 0}m`\r\n    : diffSec < 86400000\r\n    ? `${(diffSec / 3600000) | 0}h`\r\n    : `${(diffSec / 86400000) | 0}d`;\r\n\r\nconst TimeAgoContainer = styled.div`\r\n  color: ${props.theme.textColor2};\r\n  display: flex;\r\n  gap: 4px;\r\n  justify-content: center;\r\n  // padding: 4px 8px;\r\n  // border-radius: 4px;\r\n\r\n  // position: absolute;\r\n  // top: 8px;\r\n  // right: 8px;\r\n  // background-color: ${props.theme.ui2};\r\n\r\n  z-index: 10;\r\n`;\r\n\r\n// <TimeAgoContainer>\r\n// <i className=\"bi bi-clock\" style={{ fontSize: 14 }}></i>{\" \"}\r\nreturn (\r\n  <p style={props.style} title={title}>\r\n    {timeAgo(Date.now() - timeMs)} ago\r\n  </p>\r\n);\r\n// </TimeAgoContainer>\r\n", "metadata": null, "branch": NaN, "widget_modules_used": null, "widget_url": "https://near.social/#/saidulbadhon.near/widget/SearchPage.ComponentItem.TimeAgo", "branch.draft": NaN}