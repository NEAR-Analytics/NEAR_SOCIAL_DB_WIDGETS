{"tx_hash": "FyUgLwPSru1EQCdyFrtvsZtwbMmjvGGiiKwF5fgnWG74", "action_id_social": "6nJdAJQVPGhcaJ5omr4W6qQy5dir1jdct5wZaoxCC4SJ-0-widget", "block_id": 94936668, "block_timestamp": "2023-06-24T17:38:04.999Z", "signer_id": "saidulbadhon.near", "widget_name": "Activitybar.NotificationButton", "source_code": "const accountId = context.accountId;\nconst moderatorAccount = props?.moderatorAccount || \"adminalpha.near\";\n\nif (context.loading || !accountId) return <></>;\n\nconst filterUsersRaw = Social.get(\n  `${moderatorAccount}/moderate/users`, //TODO\n  \"optimistic\",\n  {\n    subscribe: true,\n  }\n);\n\nif (filterUsers === null) {\n  // haven't loaded filter list yet, return early\n  return <></>;\n}\n\nconst filterUsers = filterUsersRaw ? JSON.parse(filterUsersRaw) : [];\nconst notificationFeedSrc = \"calebjacob.near/widget/NotificationsPage\";\nconst lastBlockHeight = Storage.get(\"lastBlockHeight\", notificationFeedSrc);\nlet notifications =\n  Social.index(\"notify\", accountId, {\n    order: \"asc\",\n    from: (lastBlockHeight ?? 0) + 1,\n    subscribe: true,\n  }) || [];\nnotifications = notifications.filter((i) => !filterUsers.includes(i.accountId));\nconst notificationsCount = notifications.length || 0;\n\nconst Button = styled.a`\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: relative;\n  width: 40px;\n  height: 40px;\n  border-radius: 100%;\n  background: #2B2F31;\n  color: #ECEDEE;\n  transition: all 200ms;\n  margin: 0;\n  padding: 0;\n  border: none;\n  outline: none;\n\n  &:hover {\n    color: #fff;\n    background: rgb(60 65 68);\n  }\n\n  &:focus {\n    box-shadow: 0 0 0 1px #fff;\n  }\n\n  svg {\n    width: 25px;\n    height: 25px;\n  }\n\n  span {\n    min-width: 13px;\n    height: 13px;\n    padding: 0 3px;\n    display: block;\n    color: #fff;\n    background: #E5484D;\n    border-radius: 100px;\n    font-size: 10px;\n    line-height: 13px;\n    text-align: center;\n    font-weight: 600;\n    position: absolute;\n    top: -2px;\n    right: -1px;\n  }\n`;\n\nreturn (\n  <Button\n    aria-label=\"View Notifications\"\n    style={{ backgroundColor: \"transparent\" }}\n  >\n    <svg\n      focusable=\"false\"\n      aria-hidden=\"true\"\n      viewBox=\"0 0 24 24\"\n      data-testid=\"NotificationsRoundedIcon\"\n      fill=\"#7b7c7d\"\n    >\n      <path d=\"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-1.29 1.29c-.63.63-.19 1.71.7 1.71h13.17c.89 0 1.34-1.08.71-1.71L18 16z\"></path>\n    </svg>\n\n    {notificationsCount > 0 && (\n      <span>{notificationsCount > 99 ? \"99+\" : notificationsCount}</span>\n    )}\n  </Button>\n);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/saidulbadhon.near/widget/Activitybar.NotificationButton", "__row_index": 1}