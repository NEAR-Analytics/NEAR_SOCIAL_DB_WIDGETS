{"tx_hash": "Doc9eKMnesi6HF2otwRvCt8wkHJd6iwQcf1gk5ArTeFa", "action_id_social": "Dk8b7k4W8GFbU4nC6tCgyVHyGhtDSD5yhQK4iqZhTuZ6-0-widget", "block_id": 95026013, "block_timestamp": "2023-06-25T21:30:28.641Z", "signer_id": "yokulguy.near", "widget_name": "prompt", "source_code": "const getRandomInt = (max) => {\n  return Math.floor(Math.random() * max);\n};\nconst getPrompt = (page, cb) =>\n  asyncFetch(\n    `https://alpha.tryhologram.art/api/prompt/pagination?page=${page}`\n  ).then(cb);\n\nconst initialPage = getRandomInt(10);\nconst lastPage = initialPage + 10;\nconst sender = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nState.init({\n  contents: [],\n  currentPage: initialPage,\n  lastPage: lastPage,\n  isLoading: true,\n});\n\nconst loadMore = () => {\n  State.update({\n    isLoading: true,\n    ...state,\n  });\n  const newPage = state.currentPage + 1;\n  getPrompt(newPage, (res) => {\n    console.log({ res });\n    State.update({\n      contents: state.contents.concat(res.body.prompt.rows),\n      currentPage: newPage,\n      lastPage: res.body.lastPage,\n      isLoading: false,\n    });\n  });\n};\n\nconst mint = () => {\n  const hologram = new ethers.Contract(CONTRACT_ADDRESS, contract.abi, sender);\n  console.log({hologram});\n}\n\nconst createCard = ({ imageUrl, creatorAddress, prompt, objectName, ipfsUrl }) => {\n  return (\n    <div class=\"text-center p-2\">\n      <p>\n        <strong>\u26a1\ufe0f {objectName} \u26a1\ufe0f</strong>\n      </p>\n      <img class=\"border border-dark rounded\" src={imageUrl} />\n      <p>\u26d3\ufe0f {creatorAddress}</p>\n      <p>\ud83d\udd8c\ufe0f {prompt}</p>\n      {sender && ipfsUrl && <button class=\"btn btn-primary\" onClick={mint(ipfsUrl)}>Mint</button>}\n    </div>\n  );\n};\n\nreturn (\n  <>\n    {state.isLoading && (\n      <div class=\"position-sticky alert alert-primary\" role=\"alert\">\n        Loading...\n      </div>\n    )}\n\n    <div class=\"container border border-info p-3 text-center min-vw-90\">\n      <h1>Hologram AI</h1>\n      <p>What you are imagining today?</p>\n      {sender && <p>Account: {sender}</p>}\n    </div>\n    <div className=\"px-2 mx-auto\">\n      <InfiniteScroll\n        loadMore={loadMore}\n        hasMore={state.currentPage ? state.currentPage < state.lastPage : true} // infinite\n      >\n        {state.contents && state.contents.map(createCard)}\n      </InfiniteScroll>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/yokulguy.near/widget/prompt", "__row_index": 14}