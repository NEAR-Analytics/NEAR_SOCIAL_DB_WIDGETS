{"tx_hash": "As9bkXCskbQRaRfbCiQtQ5z1YXhG2Tzz29Df7SjSw4DL", "action_id_social": "8PiV8be2QB7yYE52y3scuCjigLwidT3wXfE26j9VXmgu-0-widget", "block_id": 81754945, "block_timestamp": "2022-12-29 22:20:45.135", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "answersHeader", "source_code": "if (!props.blockHeight) {\r\n  return \"Prop blockHeight is not set\";\r\n}\r\n\r\nconst questionBlockHeight = props.blockHeight;\r\nlet questions = Social.index(\"poll_question\", \"question-v3.0.1\");\r\nif (!questions) {\r\n  return \"Loading\";\r\n}\r\nlet questionParams = questions.find(\r\n  (q) => q.blockHeight == questionBlockHeight\r\n);\r\n\r\nfunction isActive() {\r\n  return (\r\n    questionParams.value.startTimestamp < Date.now() &&\r\n    Date.now() < questionParams.value.endTimestamp\r\n  );\r\n}\r\n\r\nfunction isUpcoming() {\r\n  return questionParams.value.startTimestamp > Date.now();\r\n}\r\n\r\nlet profile = Social.getr(`${props.accountId}/profile`);\r\n// if (!profile) {\r\n//   return \"Loading\";\r\n// }\r\n\r\nreturn (\r\n  <div className=\"my-2\">\r\n    <div className=\"d-flex no-wrap justify-content-between\">\r\n      <Widget\r\n        src={`f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/Profile`}\r\n        props={{ userMakingQuestion: props.accountId, profile }}\r\n      />\r\n\r\n      <div className=\"d-flex\">\r\n        <span className=\"mx-2\" style={{ fontWeight: \"500\" }}>\r\n          End date:{\" \"}\r\n          {new Date(questionParams.value.endTimestamp).toLocaleDateString()}\r\n        </span>\r\n        <span\r\n          style={{\r\n            backgroundColor: isUpcoming()\r\n              ? \"rgb(255, 255, 128)\"\r\n              : isActive()\r\n              ? \"rgb(153, 255, 153)\"\r\n              : \"rgb(255, 128, 128)\",\r\n\r\n            height: \"max-content\",\r\n            width: \"6rem\",\r\n            border: \"1px solid rgb(0, 82, 204)\",\r\n            textAlign: \"center\",\r\n            borderRadius: \"80px\",\r\n          }}\r\n        >\r\n          {isUpcoming() ? \"Upcoming\" : isActive() ? \"Active\" : \"Closed\"}\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <h5 className=\"mt-3\">{questionParams.value.title}</h5>\r\n    <p>{questionParams.value.description}</p>\r\n    <p>{questionParams.value.question}</p>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/answersHeader"}