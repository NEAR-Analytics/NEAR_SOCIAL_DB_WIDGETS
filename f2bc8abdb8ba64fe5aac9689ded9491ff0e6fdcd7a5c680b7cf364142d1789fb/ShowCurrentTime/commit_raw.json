{"tx_hash": "4a5kAwQH1Fzq7nzEtseZaC7jKWDtcBqgKNQKnWKizjj9", "action_id_social": "Ebj4Yahi7WDzVdTUttWXkmvLvG7RzF3GaktRsNjYYUF8-0-widget", "block_id": 86201040, "block_timestamp": "2023-02-28 00:22:38.225", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "ShowCurrentTime", "source_code": "const time_zone = props.time_zone ?? \"(UTC-04:00) UTC\";\nState.init({\n  user_time: null,\n  local_time: null,\n});\n\nconsole.log(\"time_zone: \", time_zone);\n\nconst code = `\n<script>\n    window.addEventListener(\"message\", (event) => {\n        setInterval(() => event.source.postMessage(\"ping\", \"*\"), event.data.timeout);\n    });\n</script>\n`;\n\nvar zone = time_zone.split(\" \")[0].split(\"UTC\")[1].split(\":\");\nvar offset = parseInt(zone[0]);\n\nfunction onInterval() {\n  var today = new Date();\n  var month = today.getMonth() + 1;\n  var day = today.getDate();\n  var year = today.getFullYear();\n  var hour = today.getHours();\n  var minute = today.getMinutes();\n  var local_time = new Date(\n    today.getTime() + today.getTimezoneOffset() * 60000 + offset * 3600000\n  );\n  var local_month = local_time.getMonth() + 1;\n  var local_day = local_time.getDate();\n  var local_year = local_time.getFullYear();\n  var local_hour = local_time.getHours();\n  var local_minute = local_time.getMinutes();\n  State.update({\n    user_time: month + \"/\" + day + \"/\" + year + \" - \" + hour + \":\" + minute,\n    local_time:\n      local_month +\n      \"/\" +\n      local_day +\n      \"/\" +\n      local_year +\n      \" - \" +\n      local_hour +\n      \":\" +\n      local_minute,\n  });\n}\n\nreturn (\n  <div>\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      {state.local_time && (\n        <div\n          style={{\n            fontSize: font_big,\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n          }}\n        >{`Local Time: ${state.local_time}`}</div>\n      )}\n      {state.user_time && (\n        <div\n          style={{\n            fontSize: font_big,\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n          }}\n        >{`Your Time: ${state.user_time}`}</div>\n      )}\n    </div>\n    <iframe\n      style={{ height: \"0px\" }}\n      srcDoc={code}\n      message={{ timeout: 1000 }}\n      onMessage={onInterval}\n    />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/ShowCurrentTime"}