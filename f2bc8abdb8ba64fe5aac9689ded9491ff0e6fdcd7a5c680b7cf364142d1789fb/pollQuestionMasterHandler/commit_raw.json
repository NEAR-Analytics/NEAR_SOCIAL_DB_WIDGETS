{"tx_hash": "HUk5wccA5BcQaXkTwY3rLmvWBiUnSMe77shAkHcS61r7", "action_id_social": "GW9TiXDc7Ng8snZcfA9aeNRSgTrrtbM6eZ8NJjkUwr3j-0-widget", "block_id": 81821606, "block_timestamp": "2022-12-30 19:27:22.560", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "pollQuestionMasterHandler", "source_code": "const tabs = {\n  MY_POLLS: { id: 0, text: \"My Polls\" },\n  ALL_EXISTING_POLLS: { id: 1, text: \"All existing polls\" },\n  NEW_POLL: { id: 2, text: \"Create a poll\" },\n};\n\nconst widgetOwner =\n  \"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb\";\n\nState.init({\n  displaying: tabs.MY_POLLS.id,\n  hoveringElement: \"\",\n});\n\nfunction makeAccountIdShorter(accountId, length) {\n  if (accountId.length > length) {\n    return accountId.slice(0, length) + \"...\";\n  }\n  return accountId;\n}\n\nconst profile = Social.getr(`${context.accountId}/profile`);\n\nif (!profile) {\n  return \"Loading...\";\n}\n\nreturn (\n  <div\n    style={{\n      backgroundColor: \"rgb(230, 230, 230)\",\n      fontFamily: \"Onest\",\n      fontStyle: \"normal\",\n      borderRadius: \"20px\",\n    }}\n  >\n    <div\n      className=\"d-flex justify-content-between align-items-center px-4 py-3\"\n      style={{\n        backgroundColor: \"white\",\n        boxShadow: \"0px 4px 28px rgba(43, 68, 106, 0.04)\",\n      }}\n    >\n      <div className=\"d-flex align-items-center\">\n        <div\n          className=\"d-flex align-items-center justify-content-center\"\n          style={{\n            backgroundColor: \"#010A2D\",\n            color: \"white\",\n            height: \"100%\",\n            minWidth: \"2.5rem\",\n            aspectRatio: \"1\",\n            borderRadius: \"12px\",\n          }}\n        >\n          <i className=\"bi bi-bar-chart-fill\"></i>\n        </div>\n        <h3\n          style={{\n            margin: \"0 0.5rem\",\n            color: \"#010A2D\",\n            fontWeight: \"700\",\n            fontSize: \"1.3rem\",\n            letterSpacing: \"0.1px\",\n          }}\n        >\n          EasyPoll\n        </h3>\n      </div>\n      {state.displaying != tabs.NEW_POLL.id && (\n        <div\n          className=\"w-100 d-flex justify-content-between\"\n          style={{ margin: \"0 4rem\" }}\n        >\n          <div style={{ marginTop: \"0.6rem\" }}>\n            <div className=\"d-flex\">\n              {Object.keys(tabs).map((tabKey) => {\n                const tab = tabs[tabKey];\n                if (tabKey != \"NEW_POLL\") {\n                  return (\n                    <div\n                      style={{\n                        marginRight: \"1.5rem\",\n                        position: \"relative\",\n                        cursor: \"pointer\",\n                        userSelect: \"none\",\n                      }}\n                    >\n                      <p\n                        ariaCurrent=\"page\"\n                        onMouseEnter={() => {\n                          State.update({ hoveringElement: tab.id });\n                        }}\n                        onMouseLeave={() => {\n                          State.update({ hoveringElement: \"\" });\n                        }}\n                        onClick={() => {\n                          State.update({ displaying: tab.id });\n                        }}\n                        style={{\n                          fontWeight: \"500\",\n                          fontSize: \"1rem\",\n                          margin: \"0\",\n                        }}\n                      >\n                        {tab.text}\n                      </p>\n                      {(state.hoveringElement == tab.id ||\n                        state.displaying == tab.id) && (\n                        <div\n                          style={{\n                            height: \"0.2rem\",\n                            width: \"50%\",\n                            position: \"absolute\",\n                            bottom: \"-55%\",\n                            left: \"25%\",\n                            backgroundColor: \"#010A2D\",\n                            borderRadius: \"8px\",\n                          }}\n                        >\n                          {/*Decorative Div, do not delete*/}\n                        </div>\n                      )}\n                    </div>\n                  );\n                }\n              })}\n            </div>\n          </div>\n\n          <div className=\"d-flex\">\n            <button\n              onMouseEnter={() => {\n                State.update({ hoveringElement: tabs.NEW_POLL.id });\n              }}\n              onMouseLeave={() => {\n                State.update({ hoveringElement: \"\" });\n              }}\n              onClick={() => {\n                State.update({ displaying: tabs.NEW_POLL.id });\n              }}\n              style={\n                state.hoveringElement == tabs.NEW_POLL.id\n                  ? {\n                      border: \"2px solid black\",\n                      color: \"black\",\n                      backgroundColor: \"white\",\n                      fontWeight: \"500\",\n                      fontSize: \"1rem\",\n                      margin: \"0\",\n                      padding: \"0.3rem 1.5rem\",\n                      borderRadius: \"12px\",\n                    }\n                  : {\n                      border: \"2px solid transparent\",\n                      fontWeight: \"500\",\n                      fontSize: \"1rem\",\n                      margin: \"0\",\n                      padding: \"0.3rem 1.5rem\",\n                      backgroundColor: \"#010A2D\",\n                      borderRadius: \"12px\",\n                      color: \"white\",\n                    }\n              }\n            >\n              <i\n                className=\"bi bi-plus-lg\"\n                style={\n                  state.hoveringElement == tabs.NEW_POLL.id\n                    ? { color: \"black\" }\n                    : { color: \"white\" }\n                }\n              ></i>\n              {tabs.NEW_POLL.text}\n            </button>\n          </div>\n        </div>\n      )}\n      <div className=\"p-2\">\n        <div>\n          <p style={{ margin: \"0\", fontSize: \"0.8rem\" }}>\n            {makeAccountIdShorter(profile.name, 12)}\n          </p>\n          <p style={{ margin: \"0\", fontSize: \"0.8rem\" }}>\n            @{makeAccountIdShorter(context.accountId, 12)}\n          </p>\n        </div>\n      </div>\n    </div>\n\n    {state.displaying == tabs.ALL_EXISTING_POLLS.id ? (\n      <div className=\"px-4\">\n        <h2 style={{ margin: \"2rem 0 0.5rem 0\", fontWeight: \"700\" }}>\n          All existing polls\n        </h2>\n        <Widget src={`${widgetOwner}/widget/showQuestionsHandler`} />\n      </div>\n    ) : state.displaying == tabs.MY_POLLS.id ? (\n      <div className=\"px-4\">\n        <h2 style={{ margin: \"2rem 0 0.5rem 0\", fontWeight: \"700\" }}>\n          My Polls\n        </h2>\n        <Widget\n          src={`${widgetOwner}/widget/showQuestionsHandler`}\n          props={{ onlyUser: true }}\n        />\n      </div>\n    ) : (\n      state.displaying == tabs.NEW_POLL.id && (\n        <div\n          className=\"px-4 mx-4 mt-2\"\n          style={{ backgroundColor: \"white\", borderRadius: \"28px\" }}\n        >\n          <div style={{ position: \"relative\" }}>\n            <i\n              className=\"bi bi-x-lg\"\n              style={{\n                cursor: \"pointer\",\n                position: \"absolute\",\n                right: \"2rem\",\n                top: \"2rem\",\n              }}\n              onClick={() => {\n                State.update({\n                  displaying: tabs.MY_POLLS.id,\n                  hoveringElement: \"\",\n                });\n              }}\n            ></i>\n            <h2\n              style={{\n                padding: \"2rem\",\n                margin: \"2rem 0 0.5rem 0\",\n                fontWeight: \"700\",\n              }}\n            >\n              Create a poll\n            </h2>\n          </div>\n          <Widget src={`${widgetOwner}/widget/newPollQuestionInterface`} />\n        </div>\n      )\n    )}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/pollQuestionMasterHandler"}