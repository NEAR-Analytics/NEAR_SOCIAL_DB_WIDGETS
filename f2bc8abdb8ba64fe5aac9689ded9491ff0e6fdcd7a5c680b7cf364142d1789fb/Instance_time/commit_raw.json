{"tx_hash": "DGo9My4mtV2LUvVTh5MH1H7vhCZscJWerTdf6SaqNMkr", "action_id_social": "5dwA2Xt9CVoRBSC5PSd1X18vEFkqigfSbHDFBy5zreM5-0-widget", "block_id": 86275390, "block_timestamp": "2023-03-01 00:18:39.382", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "Instance_time", "source_code": "const data = Social.index(\"Instance_time\", \"schedule\");\r\nif (!data) {\r\n  return \"Loading datas\";\r\n}\r\n\r\nconst widgetOwner =\r\n  \"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb\";\r\n\r\nvar sortedData = data.sort((d1, d2) => d2.blockHeight - d1.blockHeight);\r\nvar accountIds = [\"All\"];\r\nvar finalData = undefined;\r\nfor (let i = 0; i < sortedData.length; i++) {\r\n  if (accountIds.indexOf(sortedData[i].accountId) < 0) {\r\n    accountIds.push(sortedData[i].accountId);\r\n    if (sortedData[i].accountId == context.accountId) {\r\n      finalData = sortedData[i];\r\n    }\r\n  }\r\n}\r\n\r\nconst tabs = {\r\n  MY_SCHEDULE: { id: 1, text: \"My Schedule\" },\r\n  ALL_SCHEDULE: { id: 2, text: \"All Schedules\" },\r\n  NEW_SCHEDULE: {\r\n    id: 3,\r\n    text: finalData ? \"Edit Schedule\" : \"Create Schedule\",\r\n  },\r\n};\r\n\r\nState.init({\r\n  tab: tabs.ALL_SCHEDULE.id,\r\n  hoveringElement: \"\",\r\n  showAbortScheduleCreation: false,\r\n  abortThroughAllExistingSchedule: false,\r\n});\r\n\r\nfunction makeStringShorter(string, length) {\r\n  if (string.length > length) {\r\n    return string.slice(0, length) + \"...\";\r\n  }\r\n  return string;\r\n}\r\n\r\nconst profile = Social.getr(`${context.accountId}/profile`);\r\n\r\nconst flex_column = {\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n};\r\n\r\nconst comboBox = {\r\n  background: \"rgb(230, 230, 230)\",\r\n  color: \"black\",\r\n  borderRadius: \"1rem\",\r\n  padding: \"1rem\",\r\n  fontWeight: \"500\",\r\n  fontSize: \"1rem\",\r\n};\r\n\r\nreturn (\r\n  <div\r\n    className=\"pb-5\"\r\n    style={{\r\n      backgroundColor: \"rgb(230, 230, 230)\",\r\n      fontFamily: \"Onest\",\r\n      fontStyle: \"normal\",\r\n      borderRadius: \"20px\",\r\n    }}\r\n  >\r\n    <div className=\"d-flex flex-column\">\r\n      <div\r\n        className=\"d-flex justify-content-between align-items-center px-4 py-3\"\r\n        style={{\r\n          backgroundColor: \"white\",\r\n          boxShadow: \"rgba(43, 68, 106, 0.04) 0px 4px 28px\",\r\n        }}\r\n      >\r\n        <div className=\"d-flex align-items-center\">\r\n          <i className=\"bi bi-calendar-week-fill\"></i>\r\n          <h3\r\n            style={{\r\n              margin: \"0px 0.5rem\",\r\n              color: \"rgb(1, 10, 45)\",\r\n              fontWeight: \"700\",\r\n              fontSize: \"1.3rem\",\r\n              letterSpacing: \"0.1px\",\r\n            }}\r\n          >\r\n            WeeklySchedule\r\n          </h3>\r\n        </div>\r\n        <div\r\n          className=\"w-100 d-flex justify-content-between\"\r\n          style={{ margin: \"0px 4rem\" }}\r\n        >\r\n          <div style={{ marginTop: \"0.6rem\" }}>\r\n            <div className=\"d-flex\">\r\n              {Object.keys(tabs).map((tabKey) => {\r\n                const tab = tabs[tabKey];\r\n                if (tabKey != \"NEW_SCHEDULE\") {\r\n                  return (\r\n                    <div\r\n                      style={{\r\n                        marginRight: \"1.5rem\",\r\n                        position: \"relative\",\r\n                        cursor: \"pointer\",\r\n                        userSelect: \"none\",\r\n                      }}\r\n                    >\r\n                      <p\r\n                        ariaCurrent=\"page\"\r\n                        onMouseEnter={() => {\r\n                          State.update({ hoveringElement: tab.id });\r\n                        }}\r\n                        onMouseLeave={() => {\r\n                          State.update({ hoveringElement: \"\" });\r\n                        }}\r\n                        onClick={() => {\r\n                          state.tab != tabs.NEW_SCHEDULE.id\r\n                            ? State.update({ tab: tab.id })\r\n                            : tab.id == tabs.ALL_SCHEDULE.id\r\n                            ? State.update({\r\n                                showAbortScheduleCreation: true,\r\n                                abortThroughAllExistingSchedule: true,\r\n                              })\r\n                            : State.update({ showAbortScheduleCreation: true });\r\n                        }}\r\n                        style={{\r\n                          fontWeight: \"500\",\r\n                          fontSize: \"1rem\",\r\n                          margin: \"0\",\r\n                        }}\r\n                      >\r\n                        {tab.text}\r\n                      </p>\r\n                      {(state.hoveringElement == tab.id ||\r\n                        state.tab == tab.id) && (\r\n                        <div\r\n                          style={{\r\n                            height: \"0.2rem\",\r\n                            width: \"50%\",\r\n                            position: \"absolute\",\r\n                            bottom: \"-55%\",\r\n                            left: \"25%\",\r\n                            backgroundColor: \"#010A2D\",\r\n                            borderRadius: \"8px\",\r\n                          }}\r\n                        >\r\n                          {/*Decorative Div, do not delete*/}\r\n                        </div>\r\n                      )}\r\n                    </div>\r\n                  );\r\n                }\r\n              })}\r\n            </div>\r\n          </div>\r\n          <button\r\n            onMouseEnter={() => {\r\n              State.update({ hoveringElement: tabs.NEW_SCHEDULE.id });\r\n            }}\r\n            onMouseLeave={() => {\r\n              State.update({ hoveringElement: \"\" });\r\n            }}\r\n            onClick={() => {\r\n              State.update({ tab: tabs.NEW_SCHEDULE.id });\r\n            }}\r\n            style={\r\n              state.hoveringElement == tabs.NEW_SCHEDULE.id ||\r\n              state.tab == tabs.NEW_SCHEDULE.id\r\n                ? {\r\n                    border: \"2px solid black\",\r\n                    color: \"black\",\r\n                    backgroundColor: \"white\",\r\n                    fontWeight: \"500\",\r\n                    fontSize: \"1rem\",\r\n                    margin: \"0\",\r\n                    padding: \"0.3rem 1.5rem\",\r\n                    borderRadius: \"12px\",\r\n                  }\r\n                : {\r\n                    border: \"2px solid transparent\",\r\n                    fontWeight: \"500\",\r\n                    fontSize: \"1rem\",\r\n                    margin: \"0\",\r\n                    padding: \"0.3rem 1.5rem\",\r\n                    backgroundColor: \"#010A2D\",\r\n                    borderRadius: \"12px\",\r\n                    color: \"white\",\r\n                  }\r\n            }\r\n          >\r\n            <i\r\n              className=\"bi bi-plus-lg\"\r\n              style={\r\n                state.hoveringElement == tabs.NEW_SCHEDULE.id ||\r\n                state.tab == tabs.NEW_SCHEDULE.id\r\n                  ? { color: \"black\" }\r\n                  : { color: \"white\" }\r\n              }\r\n            ></i>\r\n            {tabs.NEW_SCHEDULE.text}\r\n          </button>\r\n        </div>\r\n        <div className=\"d-flex flex-column\">\r\n          <p className=\"m-0\" style={{ margin: \"0px\", fontSize: \"0.8rem\" }}>\r\n            {makeStringShorter(profile.name, 12)}\r\n          </p>\r\n          <p className=\"m-0\" style={{ margin: \"0px\", fontSize: \"0.8rem\" }}>\r\n            @{makeStringShorter(context.accountId, 12)}\r\n          </p>\r\n        </div>\r\n      </div>\r\n      <div className=\"w-100 d-flex flex-row justify-content-between align-items-center\"></div>\r\n    </div>\r\n    <div className=\"align-items-center\">\r\n      {state.tab != tabs.NEW_SCHEDULE.id ? (\r\n        <Widget\r\n          src={`${widgetOwner}/widget/Instance_time_review`}\r\n          props={{\r\n            accountId:\r\n              state.tab == tabs.ALL_SCHEDULE.id ? \"All\" : context.accountId,\r\n            text:\r\n              state.tab == tabs.ALL_SCHEDULE.id\r\n                ? tabs.ALL_SCHEDULE.text\r\n                : tabs.MY_SCHEDULE.text,\r\n            className: \"d-inline-block\",\r\n            style: { width: \"100%\", height: \"1.5em\" },\r\n          }}\r\n        />\r\n      ) : (\r\n        <Widget src={`${widgetOwner}/widget/Instance_time_edit`} />\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\na;\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/Instance_time"}