{"tx_hash": "2sP5KnF5Gcp1v1TPysQUaQmsb4UGUXoRHw6vhAJN2rDA", "action_id_social": "CTCbRnr1mBPax6MqXe1G1KHsfUC9y16YLkbHJ4chh2UR-0-widget", "block_id": 86203295, "block_timestamp": "2023-02-28 01:05:35.360", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "Instance_time", "source_code": "const data = Social.index(\"Instance_time\", \"schedule\");\nif (!data) {\n  return \"Loading datas\";\n}\n\nconst widgetOwner =\n  \"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb\";\n\nvar sortedData = data.sort((d1, d2) => d2.blockHeight - d1.blockHeight);\nvar accountIds = [\"All\"];\nvar finalData = undefined;\nfor (let i = 0; i < sortedData.length; i++) {\n  if (accountIds.indexOf(sortedData[i].accountId) < 0) {\n    accountIds.push(sortedData[i].accountId);\n    if (sortedData[i].accountId == context.accountId) {\n      finalData = sortedData[i];\n    }\n  }\n}\nState.init({\n  tab: tabs.ALL_SCHEDULE.id,\n  hoveringElement: \"\",\n  _account: \"All\",\n});\n\nconst getFormatedTime = (time) => {\n  const hours = parseInt(time);\n  const mins = (time - hours) * 60;\n  let formated = `${hours}:${mins == 0 ? \"00\" : mins}`;\n\n  return formated;\n};\n\nconst profile = Social.getr(`${context.accountId}/profile`);\nconst flex_column = {\n  display: \"flex\",\n  flexDirection: \"column\",\n};\nconst comboBox = {\n  background: \"rgb(230, 230, 230)\",\n  color: \"black\",\n  borderRadius: \"1rem\",\n  padding: \"1rem\",\n  fontWeight: \"500\",\n  fontSize: \"1rem\",\n};\n\nreturn (\n  <div>\n    <div className=\"d-flex flex-column\">\n      <div className=\"d-flex justify-content-between\">\n        <div\n          style={{\n            display: \"flex\",\n            justifyContent: \"center\",\n            marginBottom: \"1rem\",\n            color: \"black\",\n            borderRadius: \"2rem\",\n            fontWeight: 600,\n            fontSize: \"xx-large\",\n          }}\n        >\n          Weekly Schedule\n        </div>\n        <div class=\"d-flex flex-column\">\n          <div>{profile.name}</div>\n          <div>@{context.accountId}</div>\n          <div>\n            {`(UTC ${getFormatedTime(\n              new Date().getTimezoneOffset() / 60\n            )}) ${new Date()\n              .toLocaleDateString(undefined, {\n                day: \"2-digit\",\n                timeZoneName: \"long\",\n              })\n              .substring(4)}`}\n          </div>\n        </div>\n      </div>\n      <div className=\"w-100 d-flex flex-row justify-content-between align-items-center\">\n        <div>\n          <select\n            style={comboBox}\n            name=\"accounts\"\n            id=\"accounts\"\n            value={state._account}\n            onChange={(e) => {\n              State.update({ _account: e.target.value });\n            }}\n          >\n            {accountIds.map((account) => (\n              <option value={account}>{account}</option>\n            ))}\n          </select>\n        </div>\n        <div>\n          <a\n            onMouseEnter={() => {\n              State.update({ hoveringElement: \"create\" });\n            }}\n            onMouseLeave={() => {\n              State.update({ hoveringElement: \"\" });\n            }}\n            href={`https://near.social/#/${widgetOwner}/widget/Instance_time_edit`}\n            style={\n              state.hoveringElement == \"create\"\n                ? {\n                    border: \"2px solid transparent\",\n                    fontWeight: \"500\",\n                    fontSize: \"1rem\",\n                    padding: \"0.3rem 1.5rem\",\n                    backgroundColor: \"#010A2D\",\n                    borderRadius: \"12px\",\n                    color: \"white\",\n                    textDecoration: \"none\",\n                  }\n                : {\n                    border: \"2px solid black\",\n                    color: \"black\",\n                    backgroundColor: \"white\",\n                    fontWeight: \"500\",\n                    fontSize: \"1rem\",\n                    padding: \"0.3rem 1.5rem\",\n                    borderRadius: \"12px\",\n                  }\n            }\n          >\n            {finalData ? \"Edit Schedule\" : \"Create Schedule\"}\n          </a>\n        </div>\n      </div>\n    </div>\n    <div className=\"align-items-center pt-3\">\n      <Widget\n        src={`${widgetOwner}/widget/Instance_time_review`}\n        props={{\n          accountId: state._account,\n          className: \"d-inline-block\",\n          style: { width: \"100%\", height: \"1.5em\" },\n        }}\n      />\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/Instance_time"}