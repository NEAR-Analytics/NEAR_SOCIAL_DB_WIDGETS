{"tx_hash": "55RgiKYEmxj3gTSHubRVt8vpreLjZi1jEyWGJvAPhgAU", "action_id_social": "8fSjJ8cnUCLRnR9sACDJc5uGF8w3pUHKtVkHFqHR12Jg-0-widget", "block_id": 87904425, "block_timestamp": "2023-03-22 23:53:23.491", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "FollowButton", "source_code": "if (\r\n  !props.accountId ||\r\n  !context.accountId ||\r\n  context.accountId === props.accountId\r\n) {\r\n  return \"\";\r\n}\r\n\r\nState.init({ hoveringElement: \"\" });\r\n\r\nconst standardButtonStyles = {\r\n  border: \"2px solid transparent\",\r\n  fontWeight: \"500\",\r\n  fontSize: font_big,\r\n  padding: \"0.3rem 1.5rem\",\r\n  backgroundColor: \"#010A2D\",\r\n  borderRadius: \"12px\",\r\n  color: \"white\",\r\n  textDecoration: \"none\",\r\n};\r\n\r\nconst hoveringButtonStyles = {\r\n  border: \"2px solid black\",\r\n  color: \"black\",\r\n  backgroundColor: \"white\",\r\n  fontWeight: \"500\",\r\n  fontSize: font_big,\r\n  padding: \"0.3rem 1.5rem\",\r\n  borderRadius: \"12px\",\r\n  textDecoration: \"none\",\r\n};\r\n\r\nconst followEdge = Social.keys(\r\n  `${context.accountId}/graph/follow/${props.accountId}`,\r\n  undefined,\r\n  {\r\n    values_only: true,\r\n  }\r\n);\r\n\r\nconst inverseEdge = Social.keys(\r\n  `${props.accountId}/graph/follow/${context.accountId}`,\r\n  undefined,\r\n  {\r\n    values_only: true,\r\n  }\r\n);\r\n\r\nconst loading = followEdge === null || inverseEdge === null;\r\nconst follow = followEdge && Object.keys(followEdge).length;\r\nconst inverse = inverseEdge && Object.keys(inverseEdge).length;\r\n\r\nconst type = follow ? \"unfollow\" : \"follow\";\r\n\r\nconst data = {\r\n  graph: { follow: { [props.accountId]: follow ? null : \"\" } },\r\n  index: {\r\n    graph: JSON.stringify({\r\n      key: \"follow\",\r\n      value: {\r\n        type,\r\n        accountId: props.accountId,\r\n      },\r\n    }),\r\n    notify: JSON.stringify({\r\n      key: props.accountId,\r\n      value: {\r\n        type,\r\n      },\r\n    }),\r\n  },\r\n};\r\n\r\nreturn (\r\n  <CommitButton\r\n    disabled={loading}\r\n    style={\r\n      state.hoveringElement == \"followButton\"\r\n        ? hoveringButtonStyles\r\n        : standardButtonStyles\r\n    }\r\n    disabled={loading || follow}\r\n    data={data}\r\n    onMouseEnter={() => {\r\n      State.update({ hoveringElement: \"followButton\" });\r\n    }}\r\n    onMouseLeave={() => {\r\n      State.update({ hoveringElement: \"\" });\r\n    }}\r\n  >\r\n    {loading\r\n      ? \"Loading\"\r\n      : follow\r\n      ? \"Following\"\r\n      : inverse\r\n      ? \"Follow back\"\r\n      : \"Follow\"}\r\n  </CommitButton>\r\n);\r\n", "metadata": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/FollowButton", "branch.draft.": NaN, "branch.draft.metadata": NaN, "branch": NaN}