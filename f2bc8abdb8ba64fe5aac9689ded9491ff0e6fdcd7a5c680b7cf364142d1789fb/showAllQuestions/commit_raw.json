{"tx_hash": "3jswkisSP9hVMJfyPD6JaXkHZDWQA2K9mYR5FYSsKLf4", "action_id_social": "2kC47YwJ5BXz3SLsnUzqVecgyqKWbH4Wzc8jPuifKEsi-0-widget", "block_id": 79762393, "block_timestamp": "2022-12-02 17:34:23.848", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "showAllQuestions", "source_code": "const data = Social.index(\"poll_question\", \"question-v2.2.3\");\n\nif (!data) {\n  return \"Loading\";\n}\n\nconst processData = (data) => {\n  const allQuestions = data.reverse().map((questionData) => {\n    const accountId = questionData.accountId;\n    const question = questionData.value.question;\n    const questionTimestamp = questionData.value.timestamp;\n    const questionBlockHeight = questionData.blockHeight;\n    const questionType = questionData.questionType;\n    const choicesOptions = questionData.value.choicesOptions;\n\n    return {\n      accountId,\n      question,\n      questionTimestamp,\n      questionBlockHeight,\n      questionType,\n      choicesOptions,\n    };\n  });\n  return allQuestions;\n};\n\nconst questionToWidget = (a) => (\n  <div key={JSON.stringify(a)} style={{ minHeight: \"200px\" }}>\n    <Widget\n      src=\"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/answer_poll\"\n      props={a}\n    />\n  </div>\n);\n\nState.init({\n  widgets: [],\n});\n\nif (JSON.stringify(data) !== JSON.stringify(state.data || {})) {\n  State.update({\n    data,\n    allQuestions: processData(data),\n  });\n}\n\nconst makeMoreQuestions = () => {\n  const newQuestions = state.allQuestions\n    .slice(state.widgets.length, state.widgets.length + 10)\n    .map(questionToWidget);\n  newQuestions.forEach((question) => state.widgets.push(question));\n  State.update();\n};\n\nreturn (\n  <div\n    className=\"px-2 mx-auto\"\n    style={{ background: \"#fff\", maxWidth: \"42em\" }}\n  >\n    {context.accountId && (\n      <Widget src=\"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/PollQuestion\" />\n    )}\n\n    <InfiniteScroll\n      pageStart={0}\n      loadMore={makeMoreQuestions}\n      hasMore={state.widgets.length < state.allQuestions.length}\n      loader={<div className=\"loader\">Loading ...</div>}\n    >\n      {state.widgets}\n    </InfiniteScroll>\n  </div>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/showAllQuestions", "metadata.name": NaN, "metadata": NaN}