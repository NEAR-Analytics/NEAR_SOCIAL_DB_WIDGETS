{"tx_hash": "7rc2nu3zjRjKqbXU6EW2fu6QfWCpzz6ZY8i1xjGnaio1", "action_id_social": "8BKMGsMgNMkmJqbGuALighsFrJNF5AwqiSs9xvaq97Gi-0-widget", "block_id": 91051567, "block_timestamp": "2023-05-04 03:57:37.802", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "shareWidget", "source_code": "let blockHeightToShare = props.blockHeight;\r\nlet shareingWidget = props.shareingWidget ?? \"pollQuestionMasterHandler\";\r\nlet propName = props.propName ?? \"sharedBlockHeight\";\r\n\r\nlet popUpDescription =\r\n  props.popUpDescription ??\r\n  \"Use this link to share the poll with your participants\";\r\n\r\nlet widgetOwner =\r\n  props.widgetOwner ??\r\n  \"f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb\";\r\n\r\nlet thisWidgetInlineStyles = props.allWidgetsInlineStyles.shareWidget ?? {\r\n  i: { cursor: \"pointer\" },\r\n  showShareOptionsContainer: {\r\n    position: \"absolute\",\r\n    left: \"1rem\",\r\n    backgroundColor: \"#FFFFFF\",\r\n    border: \"1.5px solid #F0F4F7\",\r\n    boxShadow: \"0px 8px 28px rgba(43, 68, 106, 0.05)\",\r\n    borderRadius: \"28px\",\r\n    zIndex: \"1\",\r\n    width: \"40vw\",\r\n    maxWidth: \"100%\",\r\n    minWidth: \"240px\",\r\n    padding: \"1rem\",\r\n    border: \"1.5px solid #F0F4F7\",\r\n  },\r\n  closeIcon: { cursor: \"pointer\" },\r\n  popUpDescription: {\r\n    color: \"#474D55\",\r\n    letterSpacing: \"-0.01em\",\r\n  },\r\n  showLinkShared: {\r\n    backgroundColor: \"#F2F6FA\",\r\n    padding: \"1rem 2rem\",\r\n    borderRadius: \"17px\",\r\n  },\r\n  linkShared: { color: \"#0065FF\", wordWrap: \"anywhere\" },\r\n  clipboardContainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"column\",\r\n    alignItems: \"center\",\r\n    marginLeft: \"0.5rem\",\r\n    minWidth: \"2.5rem\",\r\n  },\r\n  clipBoardIconCopied: {\r\n    color: \"#0065FF\",\r\n    transition: \"color 0.3s linear\",\r\n    cursor: \"pointer\",\r\n  },\r\n  clipBoardIconNotCopied: {\r\n    transition: \"color 0.3s linear\",\r\n    cursor: \"pointer\",\r\n    color: \"black\",\r\n  },\r\n  copiedFeedback: { fontSize: \"0.7rem\" },\r\n};\r\n\r\nconst thisWidgetClassNames = props.allWidgetsClassNames.shareWidget ?? {\r\n  i: \"bi bi-share\",\r\n  closePopUpContainer: \"d-flex flex-row-reverse\",\r\n  closeIcon: \"bi bi-x\",\r\n  showLinkShared: \"d-flex justify-content-between align-items-center\",\r\n  clipboardIcon: \"bi-clipboard\",\r\n  copiedFeedback: \"text-secondary\",\r\n};\r\n\r\nState.init({\r\n  showShareOptions: false,\r\n  linkCopied: false,\r\n});\r\n\r\nfunction getLink() {\r\n  if (Number.isNaN(blockHeightToShare) || blockHeightToShare.length == 1) {\r\n    return `https://near.social/#/${widgetOwner}/widget/${shareingWidget}?${propName}=${blockHeightToShare}`;\r\n  } else {\r\n    let link = `https://near.social/#/${widgetOwner}/widget/${shareingWidget}?`;\r\n    for (let i = 0; i < blockHeightToShare.length; i++) {\r\n      if (i != 0) {\r\n        link += \"&\";\r\n      }\r\n      link += `${propName[i]}=${blockHeightToShare}`;\r\n    }\r\n    return link;\r\n  }\r\n}\r\n\r\nreturn (\r\n  <>\r\n    <i\r\n      style={thisWidgetInlineStyles.i}\r\n      className={thisWidgetClassNames.i}\r\n      onClick={() => {\r\n        State.update({ showShareOptions: !state.showShareOptions });\r\n      }}\r\n    ></i>\r\n    {state.showShareOptions && (\r\n      <div style={thisWidgetInlineStyles.showShareOptionsContainer}>\r\n        <div className={thisWidgetClassNames.closePopUpContainer}>\r\n          <i\r\n            className={thisWidgetClassNames.closeIcon}\r\n            style={thisWidgetInlineStyles.closeIcon}\r\n            onClick={() =>\r\n              State.update({ showShareOptions: false, linkCopied: false })\r\n            }\r\n          ></i>\r\n        </div>\r\n        <h3>Share</h3>\r\n        <p style={thisWidgetInlineStyles.popUpDescription}>\r\n          {popUpDescription}\r\n        </p>\r\n        <div\r\n          className={thisWidgetClassNames.showLinkShared}\r\n          style={thisWidgetInlineStyles.showLinkShared}\r\n        >\r\n          <span style={thisWidgetInlineStyles.linkShared}>{getLink()}</span>\r\n          <div style={thisWidgetInlineStyles.clipboardContainer}>\r\n            <i\r\n              className={thisWidgetClassNames.clipboardIcon}\r\n              style={\r\n                state.linkCopied\r\n                  ? thisWidgetInlineStyles.clipBoardIconCopied\r\n                  : thisWidgetInlineStyles.clipBoardIconNotCopied\r\n              }\r\n              onClick={() => {\r\n                clipboard.writeText(getLink());\r\n                State.update({ linkCopied: true });\r\n              }}\r\n            ></i>\r\n            {state.linkCopied && (\r\n              <span\r\n                className={thisWidgetClassNames.copiedFeedback}\r\n                style={thisWidgetInlineStyles.copiedFeedback}\r\n              >\r\n                Copied!\r\n              </span>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </div>\r\n    )}\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/shareWidget"}