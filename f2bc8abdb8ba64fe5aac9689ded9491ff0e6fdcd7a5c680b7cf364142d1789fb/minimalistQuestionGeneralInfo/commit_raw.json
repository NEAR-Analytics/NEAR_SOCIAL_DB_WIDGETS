{"tx_hash": "BDYs5X6ihJgQQjvuowjb12kGPFafLjydj35GoFrWKUka", "action_id_social": "AR7yDA3invkE4SZvXenWsmg3pKdSqBKur6VCkhcZq5T1-0-widget", "block_id": 81760259, "block_timestamp": "2022-12-30 00:01:53.776", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "minimalistQuestionGeneralInfo", "source_code": "let question = props;\r\n\r\nlet options = {\r\n  month: \"short\",\r\n  day: \"numeric\",\r\n  year: \"numeric\",\r\n  hour: \"numeric\",\r\n  minute: \"numeric\",\r\n  hour12: \"false\",\r\n};\r\n\r\nif (!question) {\r\n  return \"Prop passed wrongly to minimalistQuestionHeader\";\r\n}\r\n\r\nfunction makeAccountIdShorter(accountId) {\r\n  if (accountId.length > 12) {\r\n    return accountId.slice(0, 12) + \"...\";\r\n  }\r\n  return accountId;\r\n}\r\n\r\nfunction getValidAnswersQtyFromQuestion() {\r\n  let questionBlockHeight = question.blockHeight;\r\n\r\n  const answers = Social.index(\"poll_question\", \"answer-v3.0.1\");\r\n  if (!answers) {\r\n    return \"Loading...\";\r\n  }\r\n  const answersFromThisQuestion = answers.filter(\r\n    (a) => a.value.questionBlockHeight == questionBlockHeight\r\n  );\r\n  const usersWithAnswers = answersFromThisQuestion.map((a) => a.accountId);\r\n  const usersWithAnswersWithoutDuplicates = usersWithAnswers.filter(\r\n    (u, index) => usersWithAnswers.indexOf(u) == index\r\n  );\r\n  return usersWithAnswersWithoutDuplicates.length;\r\n}\r\n\r\nfunction isQuestionActive(question) {\r\n  return (\r\n    question.value.startTimestamp < Date.now() &&\r\n    Date.now() < question.value.endTimestamp\r\n  );\r\n}\r\n\r\nreturn (\r\n  <div className=\"mt-2\">\r\n    <div\r\n      className=\"d-flex justify-content-around\"\r\n      style={{\r\n        border: \"1.5px solid #F2F6FA\",\r\n        borderRadius: \"16px\",\r\n      }}\r\n    >\r\n      <div className=\"px-2 my-2\">\r\n        <p style={{ margin: \"0\" }}>Created by</p>\r\n        <p\r\n          style={{\r\n            fontWeight: \"600\",\r\n            color: \"#4B516A\",\r\n            margin: \"0\",\r\n          }}\r\n        >\r\n          {makeAccountIdShorter(question.accountId)}\r\n        </p>\r\n      </div>\r\n\r\n      <div\r\n        className=\"px-2 my-2\"\r\n        style={{\r\n          borderLeft: \"1.5px solid #F2F6FA\",\r\n          borderRight: \"1.5px solid #F2F6FA\",\r\n        }}\r\n      >\r\n        <p style={{ margin: \"0\" }}>Started</p>\r\n        <p\r\n          style={{\r\n            fontWeight: \"600\",\r\n            color: \"#4B516A\",\r\n            margin: \"0\",\r\n          }}\r\n        >\r\n          {new Date(question.value.startTimestamp).toLocaleDateString(\r\n            [],\r\n            options\r\n          )}\r\n        </p>\r\n      </div>\r\n\r\n      <div className=\"px-2 my-2\">\r\n        <p style={{ margin: \"0\" }}>Ends</p>\r\n        <p\r\n          style={{\r\n            fontWeight: \"600\",\r\n            letterSpacing: \"-0.1em\",\r\n            color: \"#4B516A\",\r\n            margin: \"0\",\r\n          }}\r\n        >\r\n          {new Date(question.value.endTimestamp).toLocaleDateString(\r\n            [],\r\n            options\r\n          )}\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <div className=\"d-flex justify-content-between mt-3\">\r\n      <div className=\"d-flex\">\r\n        <i className=\"bi bi-people\"></i>\r\n        <span>\r\n          {getValidAnswersQtyFromQuestion(question.blockHeight)} votes\r\n        </span>\r\n      </div>\r\n      <span\r\n        style={{\r\n          backgroundColor: isQuestionActive(question) ? \"#D9FCEF\" : \"#FFE5E5\",\r\n\r\n          height: \"1.5rem\",\r\n          width: \"4rem\",\r\n          textAlign: \"center\",\r\n          borderRadius: \"16px\",\r\n          marginRight: \"1rem\",\r\n          lineHeight: \"1.5rem\",\r\n          fontSize: \"0.8rem\",\r\n          letterSpacing: \"-0.025rem\",\r\n          color: isQuestionActive(question) ? \"#00B37D\" : \"#FF4747\",\r\n          fontWeight: \"500\",\r\n        }}\r\n      >\r\n        {isQuestionActive(question) ? \"Active\" : \"Closed\"}\r\n      </span>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/minimalistQuestionGeneralInfo"}