{"tx_hash": "BNzzJyMm8LkmqY7mK6w1US6XyvaaAEQV61tmfUzsBpg7", "action_id_social": "E7zJJnTb3g6SjZPHH3cH44T5tjwntjQetMZtxF3CaAEL-0-widget", "block_id": 81682506, "block_timestamp": "2022-12-28 23:21:00.104", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "minimalistQuestionGeneralInfo", "source_code": "let question = props;\n\nif (!question) {\n  return \"Prop passed wrongly to minimalistQuestionHeader\";\n}\n\nfunction makeAccountIdShorter(accountId) {\n  if (accountId.length > 12) {\n    return accountId.slice(0, 12) + \"...\";\n  }\n  return accountId;\n}\n\nfunction getValidAnswersQtyFromQuestion() {\n  let questionBlockHeight = question.blockHeight;\n\n  const answers = Social.index(\"poll_question\", \"answer-v3.0.1\");\n  if (!answers) {\n    return \"Loading\";\n  }\n  const answersFromThisQuestion = answers.filter(\n    (a) => a.value.questionBlockHeight == questionBlockHeight\n  );\n  const usersWithAnswers = answersFromThisQuestion.map((a) => a.accountId);\n  const usersWithAnswersWithoutDuplicates = usersWithAnswers.filter(\n    (u, index) => usersWithAnswers.indexOf(u) == index\n  );\n  return usersWithAnswersWithoutDuplicates.length;\n}\n\nfunction isQuestionActive(question) {\n  return (\n    question.value.startTimestamp < Date.now() &&\n    Date.now() < question.value.endTimestamp\n  );\n}\n\nreturn (\n  <div>\n    <div\n      className=\"d-flex justify-content-around\"\n      style={{\n        border: \"1.5px solid #F2F6FA\",\n        borderRadius: \"16px\",\n      }}\n    >\n      <div className=\"px-2 my-2\">\n        <p style={{ margin: \"0\" }}>Created by</p>\n        <p\n          style={{\n            fontWeight: \"500\",\n            color: \"#4B516A\",\n            margin: \"0\",\n          }}\n        >\n          {makeAccountIdShorter(question.accountId)}\n        </p>\n      </div>\n\n      <div\n        className=\"px-2 my-2\"\n        style={{\n          borderLeft: \"1.5px solid #F2F6FA\",\n          borderRight: \"1.5px solid #F2F6FA\",\n        }}\n      >\n        <p style={{ margin: \"0\" }}>Started</p>\n        <p\n          style={{\n            fontWeight: \"500\",\n            color: \"#4B516A\",\n            margin: \"0\",\n          }}\n        >\n          {new Date(question.value.startTimestamp).toLocaleDateString()}\n        </p>\n      </div>\n\n      <div className=\"px-2 my-2\">\n        <p style={{ margin: \"0\" }}>Ends</p>\n        <p\n          style={{\n            fontWeight: \"500\",\n            letterSpacing: \"-0.1em\",\n            color: \"#4B516A\",\n            margin: \"0\",\n          }}\n        >\n          {new Date(question.value.endTimestamp).toLocaleDateString()}\n        </p>\n      </div>\n    </div>\n    <div className=\"d-flex justify-content-between mt-3\">\n      <div className=\"d-flex\">\n        <i className=\"bi bi-people\"></i>\n        <span>\n          {getValidAnswersQtyFromQuestion(question.blockHeight)} votes\n        </span>\n      </div>\n      <span\n        style={{\n          backgroundColor: isQuestionActive(question) ? \"#D9FCEF\" : \"#FFE5E5\",\n\n          height: \"1.5rem\",\n          width: \"4rem\",\n          textAlign: \"center\",\n          borderRadius: \"16px\",\n          marginRight: \"1rem\",\n          lineHeight: \"1.5rem\",\n          fontSize: \"0.8rem\",\n          letterSpacing: \"-0.025rem\",\n          color: isQuestionActive(question) ? \"#00B37D\" : \"#FF4747\",\n          fontWeight: \"500\",\n        }}\n      >\n        {isQuestionActive(question) ? \"Active\" : \"Closed\"}\n      </span>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/minimalistQuestionGeneralInfo"}