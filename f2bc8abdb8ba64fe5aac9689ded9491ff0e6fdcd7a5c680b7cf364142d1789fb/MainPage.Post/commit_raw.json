{"tx_hash": "GjPQC9zwuQofdXshg6EiAJKKMkWCiEGJLjcVC124ePTk", "action_id_social": "EUExC8W5wmcL5zPNJVyED9VzW6axxTHjEscTPrnX2kSc-0-widget", "block_id": 87891866, "block_timestamp": "2023-03-22 19:50:01.239", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "MainPage.Post", "source_code": "const updateGeneralState = props.updateGeneralState;\nconst thisWidgetInlineStyles = props.allWidgetsInlineStyles.mainPage_post;\nconst thisWidgetClassNames = props.allWidgetsClassNames.mainPage_post;\n\nconst content = props.content;\nconst accountId = content.accountId;\nconst blockHeight = parseInt(content.blockHeight);\n\nState.init({\n  displayCommentBox: false,\n  answer: \"\",\n});\n\nconst notifyAccountId = accountId;\nconst item = {\n  type: \"social\",\n  path: `${accountId}/post/main`,\n  blockHeight,\n};\n\nconst link = `#/mob.near/widget/MainPage.Post.Page?accountId=${accountId}&blockHeight=${blockHeight}`;\n\nconst startCommentTo = () => {\n  State.update({ displayCommentBox: true });\n};\n\nconst RenderCommentInput = (blockHeight) => {\n  return state.displayCommentBox ? (\n    <div style={thisWidgetInlineStyles.commentInput.container}>\n      <textarea\n        style={thisWidgetInlineStyles.commentInput.textArea}\n        rows=\"2\"\n        value={state.commentTextMap[blockHeight]}\n        onChange={(e) => {\n          State.update({ answer: e.target.value });\n        }}\n      />\n      <CommitButton\n        style={thisWidgetInlineStyles.commentInput.commitButton}\n        data={{\n          index: {\n            kudo: JSON.stringify(\n              {\n                key: \"commentAnswers\",\n                value: {\n                  commentAnswer: state.answer,\n                  blockHeight,\n                },\n              },\n              undefined,\n              0\n            ),\n          },\n        }}\n        onCommit={() => {\n          let ctm = state.commentTextMap;\n          ctm[blockHeight] = \"\";\n          State.update({\n            commentTextMap: ctm,\n            reloadData: true,\n          });\n        }}\n        onMouseEnter={() => {\n          updateGeneralState({ hoveringElement: \"commitCommentButton\" });\n        }}\n        onMouseLeave={() => {\n          updateGeneralState({ hoveringElement: \"\" });\n        }}\n      >\n        Comment\n      </CommitButton>\n    </div>\n  ) : (\n    \"\"\n  );\n};\n\n/* START KudoBox */\nconst RenderKudoBox = (d) => {\n  const text = `From @${d.accountId} Kudos ${d.value.answer} `;\n  const content = { text };\n  return (\n    <>\n      <div style={thisWidgetInlineStyles.cardContainer}>\n        <div style={thisWidgetInlineStyles.headerStyles}>\n          <Widget\n            src=\"mob.near/widget/MainPage.Post.Header\"\n            props={{\n              accountId,\n              blockHeight,\n              link,\n              postType: \"post\",\n              flagItem: item,\n            }}\n          />\n          <Widget\n            src={`${widgetOwner}/widget/FollowButton`}\n            props={{ accountId: d.accountId }}\n          />\n        </div>\n        <div\n          className={thisWidgetClassNames.cardContent}\n          style={thisWidgetInlineStyles.cardContent}\n        >\n          <Widget\n            src=\"mob.near/widget/MainPage.Post.Content\"\n            props={{ content, raw }}\n          />\n          <a href={`${urlPrefix}${d.value.url}`} target=\"_blank\">\n            {d.value.url}\n          </a>\n          <div>\n            <Widget\n              src=\"mob.near/widget/CommentButton\"\n              props={{\n                onClick: startCommentTo,\n              }}\n            />\n          </div>\n        </div>\n        <div>\n          <CommitButton\n            data={{\n              index: {\n                kudo: JSON.stringify(\n                  {\n                    key: \"upvote\",\n                    value: {\n                      blockHeight: d.blockHeight,\n                    },\n                  },\n                  undefined,\n                  0\n                ),\n              },\n            }}\n          >\n            Upvote\n          </CommitButton>\n          <span>\n            {d.value.upvotes} {d.value.upvotes == 1 ? \"upvote\" : \"upvotes\"}\n          </span>\n        </div>\n        {RenderCommentInput(Number(d.blockHeight))}\n      </div>\n\n      {\n        //RenderAllCommentAnswerBox(d)\n      }\n    </>\n  );\n};\n/* END KudoBox  */\n\nreturn <>{RenderKudoBox(props.content)}</>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/MainPage.Post"}