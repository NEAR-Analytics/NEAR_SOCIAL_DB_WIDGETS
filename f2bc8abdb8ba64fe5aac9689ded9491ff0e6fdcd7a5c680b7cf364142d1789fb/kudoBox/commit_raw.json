{"tx_hash": "C581v98hF8C2UPMAnc3ZusRndK23oSThLerAPgaiktmj", "action_id_social": "Aw3CQELHv4EGqT7StEEvseGTKMUXDvDZBZCE2Aaj2t6V-0-widget", "block_id": 88037279, "block_timestamp": "2023-03-24 20:39:44.204", "signer_id": "f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb", "widget_name": "kudoBox", "source_code": "const d = props.d;\r\nconst index = props.index;\r\nconst thisWidgetInlineStyles = props.allWidgetsInlineStyles.kudos;\r\nconst thisWidgetClassNames = props.allWidgetsClassNameskudos;\r\nconst updateGeneralState = props.updateGeneralState;\r\nconst upvotes = props.upvotes;\r\n\r\nState.init({\r\n  hoveringElement: \"\",\r\n  showComments: false,\r\n});\r\n\r\nconst widgetOwner = props.widgetOwner;\r\n\r\nfunction getShowCommentsButtonContainerStyles() {\r\n  return state.hoveringElement == \"showCommentsButtonContainer\"\r\n    ? thisWidgetInlineStyles.renderKudoBox.hoveringShowCommentsButtonContainer\r\n    : thisWidgetInlineStyles.renderKudoBox.showCommentsButtonContainer;\r\n}\r\n\r\nfunction getCaretDirection() {\r\n  return state.showComments\r\n    ? thisWidgetInlineStyles.renderKudoBox.flipButton\r\n    : { transition: \"transform 1s\" };\r\n}\r\n\r\nfunction getAnswersContainerStyles() {\r\n  let styles = thisWidgetInlineStyles.allCommentAnswerBox.cardsContainer;\r\n\r\n  //I use 1070 because it's the z-index the current popus have. Might be good idea to review this in a future.\r\n  styles[\"zIndex\"] = `${1070 - index}`;\r\n  return styles;\r\n}\r\n\r\nconst RenderAllCommentAnswerBox = (d) => {\r\n  return (\r\n    <>\r\n      {state.showComments && (\r\n        <div style={getAnswersContainerStyles()}>\r\n          {d.value.comments.map((c) => {\r\n            return (\r\n              <>\r\n                <div\r\n                  style={\r\n                    thisWidgetInlineStyles.allCommentAnswerBox.cardContainer\r\n                  }\r\n                >\r\n                  <Widget\r\n                    src=\"mob.near/widget/ProfileImage\"\r\n                    props={{\r\n                      accountId: c.accountId,\r\n                      className: \"d-inline-block\",\r\n                      style:\r\n                        thisWidgetInlineStyles.allCommentAnswerBox\r\n                          .profileImageStyles,\r\n                    }}\r\n                  />\r\n                  <a\r\n                    href={`#/mob.near/widget/ProfilePage?accountId=${c.accountId}`}\r\n                  >\r\n                    {c.accountId}\r\n                  </a>\r\n                  I BuiDL... <b>{c.value.commentAnswer}&nbsp;&nbsp;&nbsp;</b>\r\n                  <Widget\r\n                    src=\"mob.near/widget/FollowButton\"\r\n                    props={{ accountId: c.accountId }}\r\n                  />\r\n                </div>\r\n              </>\r\n            );\r\n          })}\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nfunction getKudoBoxContainerStyles() {\r\n  let styles = thisWidgetInlineStyles.renderKudoBox.cardContainer;\r\n\r\n  //I use 1070 because it's the z-index the current popus have. Might be good idea to review this in a future.\r\n  styles[\"zIndex\"] = `${1070 - index}`;\r\n  return styles;\r\n}\r\n\r\nreturn (\r\n  <div\r\n    style={getKudoBoxContainerStyles()}\r\n    className={thisWidgetClassNames.renderKudoBox.cardContainer}\r\n  >\r\n    <Widget\r\n      src={`${widgetOwner}/widget/MainPage.Post`}\r\n      props={{\r\n        content: d,\r\n        upvotes,\r\n        updateGeneralState,\r\n        allWidgetsInlineStyles: props.allWidgetsInlineStyles,\r\n        allWidgetsClassNames: props.allWidgetsClassNames,\r\n      }}\r\n    />\r\n\r\n    <div\r\n      className={thisWidgetClassNames.showCommentsButtonContainer}\r\n      style={getShowCommentsButtonContainerStyles()}\r\n      onMouseEnter={() => {\r\n        d.value.comments.length > 0 &&\r\n          State.update({ hoveringElement: \"showCommentsButtonContainer\" });\r\n      }}\r\n      onMouseLeave={() => {\r\n        d.value.comments.length > 0 && State.update({ hoveringElement: \"\" });\r\n      }}\r\n      onClick={() => {\r\n        d.value.comments.length > 0 &&\r\n          State.update({ showComments: !state.showComments });\r\n      }}\r\n    >\r\n      <p style={thisWidgetInlineStyles.renderKudoBox.textShowComment}>\r\n        {d.value.comments.length > 0 ? \"Show comments\" : \"No comments\"}\r\n      </p>\r\n      {d.value.comments.length > 0 && (\r\n        <div style={getCaretDirection()}>\r\n          <i className=\"bi bi-caret-down\"></i>\r\n        </div>\r\n      )}\r\n    </div>\r\n\r\n    {RenderAllCommentAnswerBox(d)}\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/kudoBox"}