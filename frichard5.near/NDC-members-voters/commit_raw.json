{"tx_hash": "2taKx3VcxZByWft63KMAk374VT8eDdqSgSD8j6yUYjm6", "action_id_social": "GRA7q97zNHdBhRdPgkQYTXQuFYXrtmaeEYASuV7VCwZk-0-widget", "block_id": 90024370, "block_timestamp": "2023-04-20 14:44:15.218", "signer_id": "frichard5.near", "widget_name": "NDC-members-voters", "source_code": "const widgetProvider = props.widgetProvider;\nconst account = props.account || \"marketing.sputnik-dao.near\";\nconst apiUrl = `https://api.pikespeak.ai/daos/votes/${account}`;\nconst publicApiKey = \"36f2b87a-7ee6-40d8-80b9-5e68e587a5b5\";\n\nconst councilSvg = (\n  <svg\n    class=\"MuiSvgIcon-root MuiSvgIcon-fontSizeMedium MuiBox-root css-1om0hkc\"\n    focusable=\"false\"\n    aria-hidden=\"true\"\n    viewBox=\"0 0 24 24\"\n    data-testid=\"DoneIcon\"\n    height=\"20\"\n    fill=\"#13a36e\"\n  >\n    <path d=\"M9 16.2 4.8 12l-1.4 1.4L9 19 21 7l-1.4-1.4L9 16.2z\"></path>\n  </svg>\n);\n\nconst columns = [\n  {\n    id: \"account\",\n    label: \"Account\",\n    formatter: (d) => {\n      return (\n        <a\n          href={`https://explorer.near.org/accounts/${d.account}`}\n          target=\"_blank\"\n        >\n          {d.account}\n        </a>\n      );\n    },\n  },\n  {\n    id: \"isCouncil\",\n    label: \"Council member\",\n    formatter: (d) => (d.isCouncil ? councilSvg : \"\"),\n  },\n  {\n    id: \"approve\",\n    label: \"Approved\",\n    formatter: (d) => <span className=\"approved\">{d.approve}</span>,\n  },\n  {\n    id: \"rejected\",\n    label: \"Rejected\",\n    formatter: (d) => <span className=\"rejected\">{d.rejected}</span>,\n  },\n];\n\nconst fetchVotersByProposal = () => {\n  const voters = fetch(apiUrl, {\n    mode: \"cors\",\n    headers: {\n      \"x-api-key\": publicApiKey,\n    },\n  });\n  voters.body &&\n    State.update({\n      voters: voters.body,\n    });\n};\n!state.voters && fetchVotersByProposal();\n\nreturn (\n  <div>\n    {state.voters &&\n      state.voters.map((v) => {\n        return (\n          <Widget\n            src={`${widgetProvider}/widget/generic_table`}\n            props={{\n              title: `${v.type}`,\n              columns,\n              data: v.voters,\n            }}\n          />\n        );\n      })}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/frichard5.near/widget/NDC-members-voters"}