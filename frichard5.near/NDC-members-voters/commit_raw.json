{"tx_hash": "CtsMing7QJRcJLBv28t7juxNedB6n3xBrXircEFdrsf", "action_id_social": "Dqg7YC9NhoWTsLA1phq7jfYusfvUFH8CeMMzbG1wmnbN-0-widget", "block_id": 90023823, "block_timestamp": "2023-04-20 14:33:51.056", "signer_id": "frichard5.near", "widget_name": "NDC-members-voters", "source_code": "const widgetProvider = props.widgetProvider;\nconst account = props.account || \"marketing.sputnik-dao.near\";\nconst apiUrl = `https://api.pikespeak.ai/daos/votes/${account}`;\nconst publicApiKey = \"36f2b87a-7ee6-40d8-80b9-5e68e587a5b5\";\n\nconst columns = [\n  {\n    id: \"account\",\n    label: \"Account\",\n    formatter: (d) => {\n      return (\n        <a\n          href={`https://explorer.near.org/accounts/${d.account}`}\n          target=\"_blank\"\n        >\n          {d.account}\n        </a>\n      );\n    },\n  },\n  {\n    id: \"isCouncil\",\n    label: \"Council member\",\n    formatter: (d) => (d.isCouncil ? \"yes\" : \"no\"),\n  },\n  {\n    id: \"approve\",\n    label: \"Approved\",\n    formatter: (d) => <span className=\"approved\">{d.approve}</span>,\n  },\n  {\n    id: \"rejected\",\n    label: \"Rejected\",\n    formatter: (d) => <span className=\"rejected\">{d.approve}</span>,\n  },\n];\n\nconst fetchVotersByProposal = () => {\n  const voters = fetch(apiUrl, {\n    mode: \"cors\",\n    headers: {\n      \"x-api-key\": publicApiKey,\n    },\n  });\n  voters.body &&\n    State.update({\n      voters: voters.body,\n    });\n};\n!state.voters && fetchVotersByProposal();\n\nreturn (\n  <div>\n    {state.voters &&\n      state.voters.map((v) => {\n        return (\n          <Widget\n            src={`${widgetProvider}/widget/generic_table`}\n            props={{\n              title: `${v.type}`,\n              columns,\n              data: v.voters,\n            }}\n          />\n        );\n      })}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/frichard5.near/widget/NDC-members-voters"}