{"tx_hash": "HGCnyqrRkaYaU3HM2Ym47QaKxyceprRw4TNrbJMbuSyk", "action_id_social": "97ytQAG1d2r4jkwkVueyiz2CspHHp8kvKBj2qpWCUqYa-0-widget", "block_id": 91682919, "block_timestamp": "2023-05-12T12:31:14.974Z", "signer_id": "frichard5.near", "widget_name": "NDC-Dashboard", "source_code": "// Constants\nconst widgetProvider = props.widgetProvider;\nconst refUrl = \"https://api.stats.ref.finance/api/ft\";\nconst tab = props.tab || \"overview\";\nconst proposal_id = props.proposal_id;\nconst selectedDao = props.selectedDao || \"marketing.sputnik-dao.near\";\n\n// Initial state\nState.init({\n  selectedDao,\n});\n\nconst WidgetsContainer = styled.div`\n    \n`;\n\n// Fetch\nconst ftList = fetch(refUrl);\n\n// Components\n\nconst Balances = (\n  <Widget\n    src={`${widgetProvider}/widget/account_balance`}\n    props={{\n      account: state.selectedDao,\n      ftList: ftList.body && ftList.body,\n      widgetProvider,\n    }}\n  />\n);\n\nconst NearTransfers = (\n  <Widget\n    src={`${widgetProvider}/widget/near_transfers`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst FTransfers = (\n  <Widget\n    src={`${widgetProvider}/widget/ft_transfers`}\n    props={{\n      account: state.selectedDao,\n      ftList: ftList.body && ftList.body,\n      widgetProvider,\n    }}\n  />\n);\n\nconst ContractMetrics = (\n  <Widget\n    src={`${widgetProvider}/widget/contract_metrics`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst ProposalStatus = (\n  <Widget\n    src={`${widgetProvider}/widget/proposals-status`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst ProposalsByMonth = (\n  <Widget\n    src={`${widgetProvider}/widget/proposal-by-month`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst Proposals = (\n  <Widget\n    src={`${widgetProvider}/widget/proposals`}\n    props={{\n      account: state.selectedDao,\n      ftList: ftList.body && ftList.body,\n      widgetProvider,\n    }}\n  />\n);\n\nconst Policy = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-policy`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst VotersByProposal = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-members-voters`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst VoteHistory = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-vote-history`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst TransfersOverview = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-transfers-overview`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst TransfersByAccount = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-transfers-by-account`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n      ftList: ftList.body && ftList.body,\n    }}\n  />\n);\n\nconst ProposalCountByAccount = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-proposals-count-by-account`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst Search = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-search`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n      ftList: ftList.body && ftList.body,\n      proposal_id,\n    }}\n  />\n);\n\nconst AddProposal = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-add-proposal`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst Bounties = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-bounty-list`}\n    props={{\n      account: state.selectedDao,\n      widgetProvider,\n    }}\n  />\n);\n\nconst Tabs = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-Tabs`}\n    props={{\n      widgetProvider,\n      tabs: [\n        {\n          value: \"overview\",\n          label: \"Overview\",\n          selected: tab === \"overview\",\n          components: (\n            <WidgetsContainer>\n              {ProposalsByMonth}\n              {TransfersOverview}\n              {TransfersByAccount}\n              {ProposalStatus}\n            </WidgetsContainer>\n          ),\n        },\n        {\n          value: \"proposals\",\n          label: \"Proposals\",\n          selected: tab === \"proposals\",\n          components: <WidgetsContainer>{Proposals}</WidgetsContainer>,\n        },\n        {\n          value: \"treasury\",\n          label: \"Treasury\",\n          selected: tab === \"treasury\",\n          components: (\n            <WidgetsContainer>\n              {Balances}\n              {NearTransfers}\n              {FTransfers}\n            </WidgetsContainer>\n          ),\n        },\n        {\n          value: \"members\",\n          label: \"Members\",\n          selected: tab === \"members\",\n          components: (\n            <WidgetsContainer>\n              {ProposalCountByAccount}\n              {VoteHistory}\n              {VotersByProposal}\n            </WidgetsContainer>\n          ),\n        },\n        {\n          value: \"policy\",\n          label: \"Policy\",\n          selected: tab === \"policy\",\n          components: <WidgetsContainer>{Policy}</WidgetsContainer>,\n        },\n        {\n          value: \"proposal\",\n          label: \"Proposal search\",\n          selected: tab === \"proposal\",\n          components: <WidgetsContainer>{Search}</WidgetsContainer>,\n        },\n        {\n          value: \"addProposal\",\n          label: \"Add proposal\",\n          selected: tab === \"addProposal\",\n          components: <WidgetsContainer>{AddProposal}</WidgetsContainer>,\n        },\n        {\n          value: \"bounties\",\n          label: \"Bounties\",\n          selected: tab === \"bounties\",\n          components: <WidgetsContainer>{Bounties}</WidgetsContainer>,\n        },\n      ],\n      widgetProvider,\n    }}\n  />\n);\n\nconst selectDao = ({ target: { value } }) => {\n  State.update({ selectedDao: value });\n};\n\nconst Select = (\n  <Widget\n    src={`${widgetProvider}/widget/NDC-select`}\n    props={{\n      options: [\n        { value: \"marketing.sputnik-dao.near\", label: \"Marketing DAO\" },\n        { value: \"creativesdao.sputnik-dao.near\", label: \"Creative DAO\" },\n        { value: \"neardevgov.sputnik-dao.near\", label: \"Gov DAO\" },\n      ],\n      selectedOption: state.selectedDao,\n      onChange: selectDao,\n      top: 29,\n    }}\n  />\n);\n\nreturn (\n  <>\n    {Select}\n    {Tabs}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/frichard5.near/widget/NDC-Dashboard", "__row_index": 8}