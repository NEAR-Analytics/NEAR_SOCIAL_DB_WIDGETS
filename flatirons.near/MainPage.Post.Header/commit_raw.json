{"tx_hash": "24TZVEDNmUa2Ghuum4rHtaJEK2oyTt94aCoKNZ8559pK", "action_id_social": "13vXBdFhGNj2nbiVfVFhoa9Rzg7oe8KzWFaQqZpj8xdt-0-widget", "block_id": 86252223, "block_timestamp": "2023-02-28 16:38:28.320", "signer_id": "flatirons.near", "widget_name": "MainPage.Post.Header", "source_code": "const accountId = props.accountId;\nconst blockHeight = props.blockHeight;\nconst postType = props.postType ?? \"post\";\nconst link = props.link;\n\nconst ButtonLink = styled.a`\n  padding: 8px;\n  height: 32px;\n  border: 1px solid #d7dbdf;\n  border-radius: 6px;\n  font-weight: 600;\n  font-size: 12px;\n  line-height: 15px;\n  text-align: center;\n  cursor: pointer;\n  color: ${(p) => (p.primary ? \"#006ADC\" : \"#11181C\")} !important;\n  background: #fbfcfd;\n\n  &:hover,\n  &:focus {\n    background: #ecedee;\n    text-decoration: none;\n    outline: none;\n  }\n`;\n\nState.init({\n  graphqlMessage: \"\",\n});\n\nfunction hideUser() {\n  const query =\n    `mutation HideUser { insert_user_centric_user_reputation(\n    objects: {base_account_id: \"` +\n    context.accountId +\n    `\", target_account_id: \"` +\n    accountId +\n    `\", hide: \"true\"}\n  ) {\n    returning {\n      base_account_id\n      hide\n      target_account_id\n    }\n  }\n}`;\n  let userReputationResponse;\n  try {\n    userReputationResponse = fetch(\n      \"https://query-api-hasura-vcqilefdcq-uc.a.run.app/v1/graphql\",\n      {\n        method: \"POST\",\n        headers: {\n          Accept: \"application/json\",\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ query: query }),\n      }\n    );\n  } catch (e) {\n    State.update({ graphqlMessage: \"Unable to hide user\" });\n  }\n\n  if (\n    userReputationResponse?.status == 200 &&\n    !userReputationResponse.body.errors\n  ) {\n    console.log(\"Hid user\");\n    State.update({ graphqlMessage: \"User Hidden, reload page.\" });\n  } else {\n    console.log(\n      \"error\",\n      userReputationResponse?.status,\n      userReputationResponse.body.errors\n    );\n    State.update({ graphqlMessage: userReputationResponse.body.errors });\n  }\n}\n\nreturn (\n  <div className=\"d-flex flex-row align-items-center\">\n    <div className=\"flex-grow-1 text-truncate\">\n      <a\n        className=\"text-dark text-decoration-none text-truncate\"\n        href={`#/mob.near/widget/ProfilePage?accountId=${accountId}`}\n      >\n        <Widget\n          src=\"mob.near/widget/Profile.ShortInlineBlock\"\n          props={{ accountId, tooltip: true }}\n        />\n      </a>\n      <span>{state.graphqlMessage}</span>\n    </div>\n    <span className=\"text-nowrap text-muted\">\n      <small>\n        {blockHeight === \"now\" ? (\n          \"now\"\n        ) : (\n          <a className=\"text-muted\" href={link}>\n            <Widget src=\"mob.near/widget/TimeAgo\" props={{ blockHeight }} />\n          </a>\n        )}\n      </small>\n      {blockHeight !== \"now\" && (\n        <span>\n          <a\n            href=\"javascript:void\"\n            className=\"link-secondary ms-2\"\n            data-bs-toggle=\"dropdown\"\n            aria-expanded=\"false\"\n          >\n            <i className=\"fs-6 bi bi-three-dots\" />\n          </a>\n          <ul className=\"dropdown-menu\">\n            <li>\n              <Widget\n                src=\"mob.near/widget/CopyButton\"\n                props={{\n                  text: `https://near.social/${link}`,\n                  className: \"btn btn-outline-dark dropdown-item\",\n                  label: `Copy link to ${postType}`,\n                }}\n              />\n            </li>\n            <li className=\"dropdown-item\">\n              <a\n                className=\"link-dark text-decoration-none\"\n                href={`${link}&raw=true`}\n              >\n                View raw markdown source\n              </a>\n            </li>\n            <li className=\"dropdown-item\" disabled>\n              Hide {postType}\n            </li>\n\n            <li className=\"dropdown-item\">\n              <ButtonLink onClick={hideUser}>Hide User</ButtonLink>\n            </li>\n          </ul>\n        </span>\n      )}\n    </span>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/flatirons.near/widget/MainPage.Post.Header"}