{"tx_hash": "6cfz16HwTWymz8eT55TWPPrM5LfEEd5WLfGXQBhwzRzC", "action_id_social": "2AMcHyUphHFf9tozU8PMvc3RwesA9fuEUUYPiy5LcN9p-0-widget", "block_id": 82605862, "block_timestamp": "2023-01-10 03:52:54.817", "signer_id": "bo.near", "widget_name": "NotificationFeed", "source_code": "const accountId = context.accountId;\n\nif (context.loading) {\n  return \"Loading\";\n}\n\nif (!accountId) {\n  return \"Sign in with NEAR Wallet\";\n}\n\nconst notifications = Social.index(\"notify\", accountId, {\n  order: \"desc\",\n  limit: 100,\n  subscribe: true,\n});\n\nif (notifications === null) {\n  return \"Loading\";\n}\n\nif (notifications.length === 0) {\n  return \"No notifications\";\n}\n\nStorage.set(\"lastBlockHeight\", notifications[0].blockHeight);\n\nreturn (\n  <>\n    {notifications.map(({ accountId, blockHeight, value }, i) => (\n      <div key={i} className=\"d-flex justify-content-between mb-3\">\n        <div className=\"me-2 text-truncate\">\n          <div className=\"text-truncate\">\n            <Widget src=\"mob.near/widget/ProfileLine\" props={{ accountId }} />\n          </div>\n          <div\n            className=\"text-truncate text-muted\"\n            style={{ paddingLeft: \"1.8em\" }}\n          >\n            {value.type === \"follow\" ? (\n              \"followed you\"\n            ) : value.type === \"unfollow\" ? (\n              \"unfollowed you\"\n            ) : value.type === \"poke\" ? (\n              \"poked you\"\n            ) : value.type === \"like\" ? (\n              <>\n                liked your\n                {value.item.path === `${context.accountId}/post/main` ? (\n                  <a\n                    className=\"fw-bold text-muted\"\n                    href={`#/mob.near/widget/MainPage.Post.Page?accountId=${context.accountId}&blockHeight=${value.item.blockHeight}`}\n                  >\n                    post\n                  </a>\n                ) : value.item.path === `${context.accountId}/post/comment` ? (\n                  <a\n                    className=\"fw-bold text-muted\"\n                    href={`#/mob.near/widget/MainPage.Comment.Page?accountId=${context.accountId}&blockHeight=${value.item.blockHeight}`}\n                  >\n                    comment\n                  </a>\n                ) : (\n                  \"item???\"\n                )}\n              </>\n            ) : value.type === \"comment\" ? (\n              <>\n                <a\n                  className=\"fw-bold text-muted\"\n                  href={`#/mob.near/widget/MainPage.Comment.Page?accountId=${accountId}&blockHeight=${blockHeight}`}\n                >\n                  replied\n                </a>{\" \"}\n                to your\n                {value.item.path === `${context.accountId}/post/main` ? (\n                  <a\n                    className=\"fw-bold text-muted\"\n                    href={`#/mob.near/widget/MainPage.Post.Page?accountId=${context.accountId}&blockHeight=${value.item.blockHeight}`}\n                  >\n                    post\n                  </a>\n                ) : (\n                  \"item???\"\n                )}\n              </>\n            ) : value.type === \"devgovgigs/like\" ? (\n              <>\n                liked your\n                <a\n                  className=\"fw-bold text-muted\"\n                  href={`#/devgovgigs.near/widget/Ideas?postId=${value.post}`}\n                >\n                  Developer Gigs Post\n                </a>\n              </>\n            ) : (\n              \"???\"\n            )}\n            <Widget src=\"mob.near/widget/TimeAgo\" props={{ blockHeight }} />\n          </div>\n        </div>\n        <div className=\"text-nowrap\">\n          {value.type === \"follow\" || value.type === \"unfollow\" ? (\n            <Widget src=\"mob.near/widget/FollowButton\" props={{ accountId }} />\n          ) : value.type === \"poke\" ? (\n            <Widget\n              src=\"mob.near/widget/PokeButton\"\n              props={{ accountId, back: true }}\n            />\n          ) : value.type === \"like\" ? (\n            value.item.path === `${context.accountId}/post/main` ? (\n              <a\n                className=\"btn btn-outline-dark\"\n                href={`#/mob.near/widget/MainPage.Post.Page?accountId=${context.accountId}&blockHeight=${value.item.blockHeight}`}\n              >\n                View post\n              </a>\n            ) : value.item.path === `${context.accountId}/post/comment` ? (\n              <a\n                className=\"btn btn-outline-dark\"\n                href={`#/mob.near/widget/MainPage.Comment.Page?accountId=${context.accountId}&blockHeight=${value.item.blockHeight}`}\n              >\n                View comment\n              </a>\n            ) : (\n              \"\"\n            )\n          ) : value.type === \"comment\" ? (\n            <>\n              <a\n                className=\"btn btn-outline-dark\"\n                href={`#/mob.near/widget/MainPage.Comment.Page?accountId=${accountId}&blockHeight=${blockHeight}`}\n              >\n                View comment\n              </a>\n              {value.item.path === `${context.accountId}/post/main` && (\n                <a\n                  className=\"btn btn-outline-dark d-none d-md-inline-block\"\n                  href={`#/mob.near/widget/MainPage.Post.Page?accountId=${context.accountId}&blockHeight=${value.item.blockHeight}`}\n                >\n                  View post\n                </a>\n              )}\n            </>\n          ) : (\n            \"\"\n          )}\n        </div>\n      </div>\n    ))}\n  </>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bo.near/widget/NotificationFeed", "metadata.name": NaN}