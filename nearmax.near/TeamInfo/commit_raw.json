{"tx_hash": "G8teBLhYY6aTvRT5dWKTzNegvfJpic5Ks1RBs4Q6hUxY", "action_id_social": "CvXHdXxU2wUrRcFeJEooQ4YQHHoaeuSUtgYzbwZXCSKx-0-widget", "block_id": 84798496, "block_timestamp": "2023-02-08 22:57:17.463", "signer_id": "nearmax.near", "widget_name": "TeamInfo", "source_code": "const ownerId = \"nearmax.near\";\n\nconst Card = styled.div`\n  &:hover {\n    box-shadow: rgba(3, 102, 214, 0.3) 0px 0px 0px 3px;\n  }\n\n`;\n\nconst metadata = props.members_list[props.member];\nconst isTeam = props.member.startsWith(\"team:\");\nconst memberBadge = isTeam ? \"bi-people-fill\" : \"person-fill\";\nconst header = isTeam ? (\n  <div class=\"d-flex\">\n    <i class=\"bi bi-people-fill me-1\"></i>\n    {props.member}\n  </div>\n) : (\n  <Widget\n    src={`neardevgov.near/widget/ProfileLine`}\n    props={{ accountId: props.member }}\n  />\n);\n\nconst permissionDesc = {\n  \"edit-post\": \"Can edit posts with these labels\",\n  \"use-labels\": \"Can assign and unassign these labels\",\n};\n\nconst permissionExplainer = (permission) => {\n  if (permission.startsWith(\"starts-with:\")) {\n    let s = permission.substring(\"starts-with:\".length);\n    if (s == \"\") {\n      return \"Any label\";\n    } else {\n      return `Labels that start with ${s}`;\n    }\n  } else {\n    return permission;\n  }\n};\n\nconst permissionsFilter = (permissionType) => {\n  let res = [];\n  for (const [pattern, permissions] of Object.entries(metadata.permissions)) {\n    if (permissions.includes(permissionType)) {\n      res.push(pattern);\n    }\n  }\n  return res;\n};\n\nconst permissionsRenderer = (permissionType) => {\n  let permissions = permissionsFilter(permissionType);\n  if (permissions.length > 0) {\n    return (\n      <p class=\"card-text\" key={`${permissionType}-permissions`}>\n        {permissionDesc[permissionType]}:\n        {permissions.map((permission) => (\n          <span class=\"badge text-bg-primary\" key={`${permission}-permission`}>\n            {permissionExplainer(permission)}\n          </span>\n        ))}\n      </p>\n    );\n  } else {\n    return <div></div>;\n  }\n};\n\nconst childrenRenderer = () => {\n  let children = metadata.children;\n  if (children) {\n    return (\n      <div class=\"vstack\">\n        {children.map((child) => (\n          <Widget\n            src={`${ownerId}/widget/TeamInfo`}\n            props={{ member: child, members_list: props.members_list }}\n            key={`subpost-${child}-of-${props.member}`}\n          />\n        ))}\n      </div>\n    );\n  } else {\n    return <div></div>;\n  }\n};\n\nreturn (\n  <Card className=\"card my-2 border-secondary\" key={`member-${props.member}`}>\n    <div className=\"card-header\">\n      <small class=\"text-muted\">{header}</small>\n    </div>\n    <div className=\"card-body\">\n      <p class=\"card-text\" key=\"description\">\n        <Markdown class=\"card-text\" text={metadata.description}></Markdown>\n      </p>\n      {permissionsRenderer(\"edit-post\")}\n      {permissionsRenderer(\"use-labels\")}\n      {childrenRenderer()}\n    </div>\n  </Card>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearmax.near/widget/TeamInfo"}