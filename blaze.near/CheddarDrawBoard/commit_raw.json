{"tx_hash": "2uJ3uEtk1oGXFzTiWAth8MQYj7Eo6sQibQEd61sQpPee", "action_id_social": "CQ1gw6BZPmn3jEYN64DWgEU1g9xXGj8UVmXGYLZaKjjH-0-widget", "block_id": 80003192, "block_timestamp": "2022-12-05 23:59:33.953", "signer_id": "blaze.near", "widget_name": "CheddarDrawBoard", "source_code": "const blockHeight = props.blockHeight\n  ? parseInt(props.blockHeight)\n  : \"optimistic\";\n\nconst BoardHeight = 80;\nconst BoardWidth = 80;\nconst ExpectedLineLength = 4 + 8 * BoardWidth;\n\nconst cellSize = `${100 / BoardHeight}%`;\n\nconst Cell = styled.div`\n  padding: 0px;\n  margin: 0px;\n  flex-grow: 1;\n`;\n\nconst Line = styled.div`\n  flex-wrap: nowrap;\n  align-items: stretch;\n  align-content: stretch;\n  flex-grow: 1;\n  width: 100%;\n  padding: 0px;\n  margin: 0px;\n  display: flex;\n`;\n\nconst lines = [];\nfor (let i = 0; i < BoardHeight; ++i) {\n  lines.push(i);\n}\n\nconst args = { lines };\nconst encodedLines = Near.view(\n  \"farm-draw.cheddar.near\",\n  \"get_lines\",\n  args,\n  blockHeight\n);\n\nif (encodedLines === null) {\n  return \"Loading\";\n}\n\nif (!encodedLines) {\n  return \"Block not found\";\n}\n\nconst intToColor = (c) => `#${c.toString(16).padStart(6, \"0\")}`;\n\nconst decodeLine = (line) => {\n  let buf = Buffer.from(line, \"base64\");\n  let pixels = [];\n  for (let i = 4; i < buf.length; i += 8) {\n    let color = buf.readUInt32LE(i);\n    pixels.push(<Cell style={{ backgroundColor: intToColor(color) }} />);\n  }\n  return pixels;\n};\n\nreturn (\n  <div\n    className=\"mw-100 d-flex align-items-stretch flex-column align-content-stretch\"\n    style={{ maxHeight: \"min(100%, 80vh)\", aspectRatio: \"1 / 1\" }}\n  >\n    <h1>Cheddar Draw</h1>\n    <a href=\"https://draw.cheddar.farm/\">\n      <span>Buy Milk\ud83e\udd5b, Draw\ud83c\udfa8, Farm Cheddar\ud83e\uddc0</span>,\n    </a>\n    {encodedLines.map((line) => (\n      <Line>{decodeLine(line)}</Line>\n    ))}\n    <p>\n      Cheddar Draw is a fun game that lets you paint pixels with milk and farm\n      Cheddar.\n    </p>\n    <p>Be careful it's WAR\ud83d\udee1\ufe0f\u2694\ufe0f. Other players can overwrite your pixels.</p>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/blaze.near/widget/CheddarDrawBoard"}