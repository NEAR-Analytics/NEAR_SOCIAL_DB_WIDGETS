{"tx_hash": "ALvPS8gYZtMh5DqoLncr2XFX8dp62z7RoeVS2uNGLM4", "action_id_social": "DMbHHU985wjhMpWWE1q7beD6nr1ed4KGVoqQuKUhGGwK-0-widget", "block_id": 86601754, "block_timestamp": "2023-03-05 09:08:31.931", "signer_id": "zahidulislam.near", "widget_name": "Profile.Contributions", "source_code": "const accountId = props.accountId || context.accountId;\n\nif (!accountId) return \"Login or send accountId in the props\";\n\nconst profile = Social.getr(`${accountId}/profile`);\n\nconst allWidgetsHistoryChangesBlocks = Social.keys(\n  `${accountId}/widget/*`,\n  \"final\",\n  {\n    return_type: \"History\",\n  }\n);\n\nif (allWidgetsHistoryChangesBlocks === null) return \"Loading...\";\n\nconst widget = allWidgetsHistoryChangesBlocks[accountId].widget;\n\nconst totalCommits = Object.keys(widget)\n  .map((key) => widget[key])\n  .flat()\n  .map((blockHeight) => {\n    const xs = Near.block(blockHeight);\n\n    const timeMs = parseFloat(xs.header.timestamp_nanosec) / 1e6;\n\n    return new Date(timeMs).toLocaleDateString();\n  });\n\nconst checkOccurrence = (array, element) => {\n  let counter = 0;\n  for (let i = 0; i <= array.length; i++) {\n    if (array[i] == element) {\n      counter++;\n    }\n  }\n  return counter;\n};\n\nconst generate = () => {\n  // Create an empty array to hold the objects\n  const dataArray = [] || [{ empty: true }];\n\n  // Loop through each day of 2023\n  for (let i = 0; i < 365; i++) {\n    // Create a new date object for the current day\n    const date = new Date(2023, 0, i + 1);\n\n    const value = checkOccurrence(totalCommits, date.toLocaleDateString());\n\n    // Create a new object with the date and value and add it to the array\n    dataArray.push({ date: date.toLocaleDateString(), value });\n  }\n\n  console.log(\"====\", dataArray);\n  return dataArray;\n};\n\nconst array = generate();\n\nreturn (\n  <div className=\"contributions\">\n    <div className=\"header\">\n      <div className=\"headerContent\">\n        <p>Jan</p>\n        <p>Feb</p>\n        <p>Mar</p>\n        <p>Apr</p>\n        <p>May</p>\n        <p>Jun</p>\n        <p>Jul</p>\n        <p>Aug</p>\n        <p>Sep</p>\n        <p>Oct</p>\n        <p>Nov</p>\n        <p>Dec</p>\n      </div>\n    </div>\n\n    <div className=\"contributionsContainer\">\n      <div className=\"weekdays\">\n        <p className=\"weekday\" />\n        <p className=\"weekday\">Mon</p>\n        <p className=\"weekday\" />\n        <p className=\"weekday\">Wed</p>\n        <p className=\"weekday\" />\n        <p className=\"weekday\">Fir</p>\n        <p className=\"weekday\" />\n      </div>\n      <div className=\"contributionsContent\">\n        {array?.map((item, index) => {\n          let color;\n\n          if (item?.value === 0)\n            color = props.theme === \"light\" ? \"#ebedf0\" : \"#161b22\";\n          else if (item?.value === 1)\n            color = props.theme === \"light\" ? \"#9be9a8\" : \"#0e4429\";\n          else if (item?.value === 2)\n            color = props.theme === \"light\" ? \"#40c463\" : \"#26a641\";\n          else if (item?.value === 3)\n            color = props.theme === \"light\" ? \"#30a14e\" : \"#26a641\";\n          else color = props.theme === \"light\" ? \"#216e39\" : \"#39d353\";\n\n          const date = new Date(item.date);\n          const options = {\n            day: \"2-digit\",\n            month: \"short\",\n            year: \"numeric\",\n          };\n          const formattedDate = date.toLocaleDateString(\"en-GB\", options);\n\n          return (\n            <Widget\n              src=\"zahidulislam.near/widget/Profile.Contributions.Item\"\n              props={{\n                color: color,\n                date: formattedDate,\n                item,\n                theme: props.theme,\n              }}\n            />\n          );\n        })}\n      </div>\n    </div>\n\n    <div className=\"footer\">\n      <p className=\"footerText\">Less</p>\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#ebedf0\" : \"#161b22\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#9be9a8\" : \"#0e4429\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#40c463\" : \"#26a641\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#30a14e\" : \"#26a641\",\n        }}\n      />\n      <div\n        style={{\n          backgroundColor: props.theme === \"light\" ? \"#216e39\" : \"#39d353\",\n        }}\n      />\n      <p className=\"footerText\">More</p>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zahidulislam.near/widget/Profile.Contributions"}