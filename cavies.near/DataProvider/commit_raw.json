{"tx_hash": "GntY77z8J6Zq1XPEm5aYSFveGYHkwL8PSinKbC9i14Z2", "action_id_social": "Brdm3vdovs9W9GwqPhbkwhfxpkD6p85v4fcHHhwtB5vo-0-widget", "block_id": 95061598, "block_timestamp": "2023-06-26T08:33:07.566Z", "signer_id": "cavies.near", "widget_name": "DataProvider", "source_code": "// onLoad\nconst { onLoad, targetState, updateState } = props;\n\n// Define constants value\nconst API = \"https://prod-pocket-api.hamsterbox.xyz/api\";\nconst POCKET_ABI_URL =\n  \"https://raw.githubusercontent.com/CaviesLabs/hamsterpocket-assets/main/pocketchef.json\";\nconst WHITELIST_ENDPOINT = `${API}/whitelist`;\nconst LIST_POCKET_ENDPOINT = `${API}/pool/decimals-formatted?limit=&offset=0&chainId=bnb&statuses=POOL_STATUS%3A%3AACTIVE&statuses=POOL_STATUS%3A%3ACLOSED&sortBy=DATE_START_DESC`;\n\n// Define state reducer\nconst context = {\n  useState: (stateName, defaultValue) => {\n    console.log(\"here\");\n    if (!targetState[stateName]) {\n      updateState({\n        [stateName]: defaultValue,\n      });\n    }\n\n    console.log(\"here\");\n    return [\n      targetState[stateName] || defaultValue,\n      (value) => {\n        updateState({\n          [stateName]: value,\n        });\n      },\n    ];\n  },\n\n  // Define methods to be exposed\n  fetchPockets: (ownerAddress) => {\n    const [, setPocket] = useState(\"pockets\", []);\n\n    return new Promise((resolve) => {\n      asyncFetch(`${LIST_POCKET_ENDPOINT}&ownerAddress=${ownerAddress}`).then(\n        (result) => {\n          setPocket(result.body);\n          return resolve(result.body);\n        }\n      );\n    });\n  },\n};\n// emit data to parents component\nonLoad(context);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/cavies.near/widget/DataProvider", "__row_index": 28}