{"tx_hash": "GwxY24fYmc2xdLNSaJUMjY4UJ3gNd1w2DAr8M7k56ob3", "action_id_social": "BUfj8xL1UxuzirtNx8Dcxqyv1Et9FneZcAtSa8kyAVQf-0-widget", "block_id": 95071089, "block_timestamp": "2023-06-26T11:31:12.531Z", "signer_id": "cavies.near", "widget_name": "DataProvider", "source_code": "// onLoad\nconst { onLoad, targetState, updateState } = props;\n\n// Define constants value\nconst API = \"https://prod-pocket-api.hamsterbox.xyz/api\";\nconst POCKET_ABI_URL =\n  \"https://raw.githubusercontent.com/CaviesLabs/hamsterpocket-assets/main/pocketchef.json\";\nconst WHITELIST_ENDPOINT = `${API}/whitelist`;\nconst LIST_POCKET_ENDPOINT = `${API}/pool/decimals-formatted?limit=1000&offset=0&chainId=bnb&statuses=POOL_STATUS%3A%3AACTIVE&statuses=POOL_STATUS%3A%3ACLOSED&sortBy=DATE_START_DESC`;\n\n// Define state reducer\nconst context = {\n  useState: (stateName, defaultValue) => {\n    if (!targetState[stateName]) {\n      updateState({\n        [stateName]: defaultValue,\n      });\n    }\n\n    return [\n      targetState[stateName] || defaultValue,\n      (value) => {\n        updateState({\n          [stateName]: value,\n        });\n      },\n    ];\n  },\n\n  // Define methods to be exposed\n  fetchPockets: (ownerAddress) => {\n    const res = context.useState(\"pockets\", []);\n\n    return asyncFetch(\n      `${LIST_POCKET_ENDPOINT}&ownerAddress=${ownerAddress}`\n    ).then((result) => {\n      res[1](result.body);\n      return result.body;\n    });\n  },\n};\n\n// emit data to parents component\nonLoad(context);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/cavies.near/widget/DataProvider", "__row_index": 30}