{"tx_hash": "JXw3WnCrWVHSjBna9aDL7wdbjsuSptecd7siKcCesQB", "action_id_social": "FnMfL74KfamjktQkZmTUTG3fUn28AmpsTcqtYYecEbsT-0-widget", "block_id": 94963081, "block_timestamp": "2023-06-25T01:50:09.028Z", "signer_id": "vicbaporu.near", "widget_name": "Paramedic", "source_code": "const contract = \"0x903E3288BEC17bEC4b64028F93730c93a27BC1D1\";\n\nconst CONTRACT_ABI =\n  \"https://raw.githubusercontent.com/slashweb/me-emergency-scan/main/emergency-app/src/abi/gnosis.json\";\n\nconst DEFAULT_CHAIN_ID = 5;\n\nconst abi = fetch(CONTRACT_ABI);\nconst abiData = new ethers.utils.Interface(abi.body);\n\nconst getData = () => {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n\n  const contractObject = new ethers.Contract(\n    contract,\n    abi.body,\n    Ethers.provider().getSigner()\n  );\n  contractObject.getUserHistory(props.patien).then((res) => {\n    State.update({ tryData: JSON.stringify(res) });\n  });\n};\n\nconst storeData = () => {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n\n  const contractObject = new ethers.Contract(\n    contract,\n    abi.body,\n    Ethers.provider().getSigner()\n  );\n\n  contractObject\n    .createNewParamedicData(\n      props.patien,\n      state.name,\n      state.date,\n      state.vitalSigns,\n      state.status,\n      state.drugs,\n      state.procedures,\n      state.lastMeal\n    )\n    .then((res) => {\n      console.log(\"res hgere\", res);\n    })\n    .catch((err) => {\n      console.log(\"err\", err);\n    });\n};\n\nState.init({\n  name: \"\",\n  date: \"\",\n  vitalSigns: \"\",\n  status: \"\",\n  drugs: [],\n  procedures: [],\n  lastMeal: \"\",\n  tryData: null,\n});\n\nreturn (\n  <div class=\"p-4\">\n    <Web3Connect class=\"mx-auto text-center\" />\n    <div class=\"mt-4\">\n      <div class=\"form-group\">\n        <label for=\"exampleInputEmail1\">Paramedic Name</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          onChange={(e) => State.update({ name: e.target.value })}\n        />\n      </div>\n\n      <div class=\"form-group mt-4\">\n        <label for=\"exampleInputEmail1\">Date of the intervention</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          onChange={(e) => State.update({ date: e.target.value })}\n        />\n      </div>\n\n      <div class=\"form-group mt-4\">\n        <label for=\"exampleInputEmail1\">Vital Signs</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          onChange={(e) => State.update({ vitalSigns: e.target.value })}\n        />\n      </div>\n\n      <div class=\"form-group mt-4\">\n        <label for=\"exampleInputEmail1\">Status</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          onChange={(e) => State.update({ status: e.target.value })}\n        />\n      </div>\n\n      <div class=\"form-group mt-4\">\n        <label for=\"exampleInputEmail1\">Drugs</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          onChange={(e) => State.update({ drugs: e.target.value.split(\",\") })}\n        />\n      </div>\n\n      <div class=\"form-group mt-4\">\n        <label for=\"exampleInputEmail1\">Procedures</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          onChange={(e) =>\n            State.update({ procedures: e.target.value.split(\",\") })\n          }\n        />\n      </div>\n\n      <div class=\"form-group mt-4\">\n        <label for=\"exampleInputEmail1\">Last Meal</label>\n        <input\n          type=\"text\"\n          class=\"form-control\"\n          onChange={(e) => State.update({ lastMeal: e.target.value })}\n        />\n      </div>\n\n      <button\n        type=\"submit\"\n        onClick={() => storeData()}\n        class=\"btn btn-primary mt-4\"\n      >\n        Save\n      </button>\n\n      <button onClick={() => getData()} class=\"btn btn-danger mt-4\">\n        Try get data\n      </button>\n\n      <pre class=\"w-full p-2 mt-4\">{JSON.parse(state.tryData)}</pre>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/vicbaporu.near/widget/Paramedic", "__row_index": 5}