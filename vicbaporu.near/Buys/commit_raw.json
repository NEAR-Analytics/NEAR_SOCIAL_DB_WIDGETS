{"tx_hash": "8YmDpCCup96qbGvQ4X5AoqtUmfDtaruVRESdgNg85pP9", "action_id_social": "8VnV5Qwfufj4UDYLXUSNx8RDMM8UBRKxstCXtBqNuhwf-0-widget", "block_id": 92778608, "block_timestamp": "2023-05-26T20:56:21.660Z", "signer_id": "vicbaporu.near", "widget_name": "Buys", "source_code": "const nftContract = props.nftContract;\nconst contractName = props.contract;\n\nconst mintedNfts = Near.view(nftContract, \"get_minted_tokens\", \"{}\");\nconst userInvestments = Near.view(contractName, \"get_all_investors\", \"{}\");\n\nconst getNft = (investment) => {\n  console.log(\"invesment\", investment);\n\n  let media = \"\";\n\n  if (investment.quantity <= 5) {\n    media =\n      \"https://res.cloudinary.com/dgcxcqu6p/image/upload/v1685126252/5_iisdn0.jpg\";\n  } else if (investment.quantity > 5 && investment.quantity <= 10) {\n    media =\n      \"https://res.cloudinary.com/dgcxcqu6p/image/upload/v1685126252/10_qztoia.jpg\";\n  } else {\n    media =\n      \"https://res.cloudinary.com/dgcxcqu6p/image/upload/v1685079723/image_b2kktg.jpg\";\n  }\n\n  const params = {\n    token_id: investment.id.toString(),\n    metadata: {\n      title: `Milestone Point - ${investment.id}`,\n      description:\n        \"Tu llave a un futuro descentralizado, bloques adquiridos: \" +\n        investment.quantity,\n      media,\n    },\n    receiver_id: investment.wallet,\n  };\n\n  const result = Near.call(\n    nftContract,\n    \"nft_mint\",\n    params,\n    300000000000000,\n    50000000000000000000000\n  );\n};\n\nreturn (\n  <>\n    <table class=\"table align-middle mb-0 bg-white\">\n      <thead class=\"bg-light\">\n        <tr>\n          <th>Proyecto</th>\n          <th>Tipo de pago</th>\n          <th>Estatus</th>\n          <th>Bloques adquiridos</th>\n          <th>Hash</th>\n        </tr>\n      </thead>\n      <tbody>\n        {userInvestments.map((investment) => {\n          return (\n            <tr>\n              <td>\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"ms-3\">\n                    <p class=\"fw-bold mb-1\">Milestone</p>\n                  </div>\n                </div>\n              </td>\n              <td>\n                <p class=\"fw-normal mb-1\">NEAR</p>\n              </td>\n              <td>\n                <span class=\"btn btn-primary btn-sm rounded-pill d-inline\">\n                  Completado\n                </span>\n              </td>\n              <td>{investment.quantity}</td>\n              {mintedNfts ? (\n                <td>\n                  {mintedNfts.filter(\n                    (minted) => investment.id.toString() === minted.toString()\n                  ).length === 0 && (\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-primary btn-sm btn-rounded\"\n                      onClick={() => getNft(investment)}\n                    >\n                      Obtener NFT\n                    </button>\n                  )}\n                </td>\n              ) : (\n                <button\n                  type=\"button\"\n                  class=\"btn btn-primary btn-sm\"\n                  onClick={() => getNft(investment)}\n                >\n                  <span class=\"text-primary hover:text-white\">Obtener NFT</span>\n                </button>\n              )}\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/vicbaporu.near/widget/Buys", "__row_index": 1}