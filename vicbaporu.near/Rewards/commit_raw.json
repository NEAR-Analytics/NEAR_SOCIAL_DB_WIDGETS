{"tx_hash": "Deya3FY1BQW7bvq29p7wCbtaBvyGCy3HtpwjmVf32e9T", "action_id_social": "3Ttp9fKpbP1c65aNWwwxhFYPQme6s7ERU9rZ7B7o2NKU-0-widget", "block_id": 92780708, "block_timestamp": "2023-05-26T21:36:02.122Z", "signer_id": "vicbaporu.near", "widget_name": "Rewards", "source_code": "const nftContract = props.nftContract;\nconst contractName = props.contract;\n\nconst mintedNfts = Near.view(nftContract, \"get_minted_tokens\", \"{}\");\nlet userInvestments = Near.view(contractName, \"get_all_investors\", \"{}\");\n\nif (userInvestments?.length > 0) {\n  userInvestments = userInvestments.filter((investment) => {\n    return investment.wallet.toString() === context.accountId.toString();\n  });\n}\n\nconst balance = Near.view(contractName, \"get_investor_balance\", {\n  wallet: context.accountId,\n});\n\nconst monthlyRevenue = 0.012;\n\nconst getNft = (investment) => {\n  console.log(\"invesment\", investment);\n\n  const params = {\n    token_id: investment.id.toString(),\n    metadata: {\n      title: `Milestone Point - ${investment.id}`,\n      description:\n        \"Tu llave a un futuro descentralizado, bloques adquiridos: \" +\n        investment.quantity,\n      media:\n        \"https://res.cloudinary.com/dgcxcqu6p/image/upload/v1685079723/image_b2kktg.jpg\",\n    },\n    receiver_id: investment.wallet,\n  };\n\n  const result = Near.call(\n    nftContract,\n    \"nft_mint\",\n    params,\n    300000000000000,\n    50000000000000000000000\n  );\n};\n\nreturn (\n  <>\n    <table class=\"table align-middle mb-0 bg-white\">\n      <thead class=\"bg-light\">\n        <tr>\n          <th>Proyecto</th>\n          <th>Tipo de pago</th>\n          <th>Estatus</th>\n          <th>Bloques adquiridos</th>\n          <th>Pago mensual estimado</th>\n        </tr>\n      </thead>\n      <tbody>\n        {userInvestments.map((investment) => {\n          return (\n            <tr>\n              <td>\n                <div class=\"d-flex align-items-center\">\n                  <div class=\"ms-3\">\n                    <p class=\"fw-bold mb-1\">Milestone</p>\n                  </div>\n                </div>\n              </td>\n              <td>\n                <p class=\"fw-normal mb-1\">NEAR</p>\n              </td>\n              <td>\n                <span class=\"btn btn-warning btn-sm rounded-pill d-inline\">\n                  Pendiente\n                </span>\n              </td>\n              <td>{investment.quantity}</td>\n              <td>\n                $\u00a0{investment.quantity * balance.blockCost * monthlyRevenue}\n              </td>\n            </tr>\n          );\n        })}\n      </tbody>\n    </table>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/vicbaporu.near/widget/Rewards", "__row_index": 1}