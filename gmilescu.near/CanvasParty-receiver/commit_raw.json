{"tx_hash": "7Tf8F8GFAVsNSiq24KM3nXzjNtrif7gN3JChT2RYMy45", "action_id_social": "JDDUFiasa9TRHKX1LcZD9ApctcPBRdTqimocQ8GJemvu-0-widget", "block_id": 80654812, "block_timestamp": "2022-12-14 20:21:52.405", "signer_id": "gmilescu.near", "widget_name": "CanvasParty-receiver", "source_code": "const accountId = context.accountId;\n\nif (context.loading) {\n  return \"Loading\";\n}\n\nif (!accountId) {\n  return \"Sign in with NEAR Wallet\";\n}\n\nconst notifications = Social.index(\"notify\", accountId, {\n  order: \"desc\",\n  limit: 100,\n});\n\nif (notifications === null) {\n  return \"Loading\";\n}\n\nif (notifications.length === 0) {\n  return \"No notifications\";\n}\n\nStorage.set(\"lastBlockHeight\", notifications[0].blockHeight);\n\nreturn (\n  <>\n    {notifications.map(({ accountId, blockHeight, value }, i) => (\n      <div key={i} className=\"d-flex justify-content-between mb-3\">\n        <div className=\"me-4 text-truncate\">\n          <div className=\"text-truncate\">\n            <Widget src=\"mob.near/widget/ProfileLine\" props={{ accountId }} />\n          </div>\n          <div\n            className=\"text-truncate text-muted\"\n            style={{ paddingLeft: \"1.8em\" }}\n          >\n            {value.type === \"follow\"\n              ? \"followed you\"\n              : value.type === \"unfollow\"\n              ? \"unfollowed you\"\n              : value.type === \"poke\"\n              ? \"poked you\"\n              : value.type === \"state-transition\"\n              ? \"state transition\"\n              : \"???\"}\n            <Widget src=\"mob.near/widget/TimeAgo\" props={{ blockHeight }} />\n          </div>\n        </div>\n        <div className=\"text-nowrap\">\n          {value.type === \"follow\" || value.type === \"unfollow\" ? (\n            <Widget src=\"mob.near/widget/FollowButton\" props={{ accountId }} />\n          ) : (\n            <Widget\n              src=\"mob.near/widget/PokeButton\"\n              props={{ accountId, back: true }}\n            />\n          )}\n        </div>\n      </div>\n    ))}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/gmilescu.near/widget/CanvasParty-receiver"}