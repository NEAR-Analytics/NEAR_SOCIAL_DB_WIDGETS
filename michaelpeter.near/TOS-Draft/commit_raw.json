{"tx_hash": "6tDSSke5DmE8xrBTd9DdnHxUoJiuc1ystBmCeityeGzh", "action_id_social": "jqShBwy7SZJXWj27v6gWotNziSmaW3nEhf8oaEiFah4-0-widget", "block_id": 85736521, "block_timestamp": "2023-02-21 18:35:48.284", "signer_id": "michaelpeter.near", "widget_name": "TOS-Draft", "source_code": "const { tosName, targetComponent, targetProps } = props;\nconst acceptanceKey = `${context.accountId}/${tosName}`;\n\n// find all instances of the user agreeing to some version of the desired TOS\nconst agreementsForUser = Social.index(\"tosAccept\", acceptanceKey);\n\nconst modal = styled.div`\n  \n`;\nreturn (\n  <div>\n    {agreementsForUser.map((a) => (\n      <span key={a}>{JSON.stringify(a)}</span>\n    ))}\n    <button\n      type=\"button\"\n      class=\"btn btn-primary\"\n      data-bs-toggle=\"modal\"\n      data-bs-target=\"#exampleModal\"\n    >\n      Launch demo modal\n    </button>\n\n    <div\n      class=\"modal fade\"\n      id=\"exampleModal\"\n      tabindex=\"-1\"\n      aria-labelledby=\"exampleModalLabel\"\n      aria-hidden=\"true\"\n    >\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h1 class=\"modal-title fs-5\" id=\"exampleModalLabel\">\n              Modal title\n            </h1>\n            <button\n              type=\"button\"\n              class=\"btn-close\"\n              data-bs-dismiss=\"modal\"\n              aria-label=\"Close\"\n            ></button>\n          </div>\n          <div class=\"modal-body\">\n            <Widget src=\"michaelpeter.near/widget/TosContentDraft\" />\n          </div>\n          <div class=\"modal-footer\">\n            <CommitButton\n              data={{\n                tosAccept: {\n                  genie: JSON.stringify({\n                    key: acceptanceKey,\n                    value: 1, // TODO blockheight of tos version\n                  }),\n                },\n              }}\n            >\n              Agreed\n            </CommitButton>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/michaelpeter.near/widget/TOS-Draft"}