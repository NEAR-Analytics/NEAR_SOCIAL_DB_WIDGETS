{"tx_hash": "AJ2HTJndUj51vo9HipoKtooZ9xUsVhmrDfeYW7LTtBPt", "action_id_social": "3eoDaaw9bfoi4SqhXC18885JHrEKiTgMKTorPFd6mWpC-0-widget", "block_id": 85735694, "block_timestamp": "2023-02-21 18:19:47.446", "signer_id": "michaelpeter.near", "widget_name": "TOS-Draft", "source_code": "const { tosName, targetComponent, targetProps } = props;\nconst acceptanceKey = `${context.accountId}/${tosName}`;\n\n// find all instances of the user agreeing to some version of the desired TOS\nconst agreementsForUser = Social.index(\"tosAccept\", acceptanceKey);\n\nreturn (\n  <div>\n    {agreementsForUser.map((a) => (\n      <span key={a}>{JSON.stringify(a)}</span>\n    ))}\n    <Widget src=\"michaelpeter.near/widget/TosContentDraft\" />\n    <CommitButton\n      data={{\n        tosAccept: {\n          genie: JSON.stringify({\n            key: acceptanceKey,\n            value: 1, // TODO blockheight of tos version\n          }),\n        },\n      }}\n    >\n      Agree\n    </CommitButton>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/michaelpeter.near/widget/TOS-Draft"}