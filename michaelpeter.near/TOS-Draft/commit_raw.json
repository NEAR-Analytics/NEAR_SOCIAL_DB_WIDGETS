{"tx_hash": "ENMLg4n3oyvgisvotV4fR7L9VYwrnWPLJM4s9X4XhAhv", "action_id_social": "4cjXCWaMNYHMXRo7WDcJoQPNS5oZVTa8nk4LedepvkUD-0-widget", "block_id": 85454096, "block_timestamp": "2023-02-17 21:09:31.457", "signer_id": "michaelpeter.near", "widget_name": "TOS-Draft", "source_code": "const tos = `\n## Terms of Service\nYou agree not to post illicit content.\n`;\n\nconst { tosName, targetComponent, targetProps } = props;\nconst acceptanceKey = `${context.accountId}/${tosName}`;\n\n// find all instances of the user agreeing to some version of the desired TOS\nconst agreementsForUser = Social.index(\"tosAccept\", acceptanceKey);\n\nreturn (\n  <div>\n    {agreementsForUser.map((a) => (\n      <span key={a}>{JSON.stringify(a)}</span>\n    ))}\n    <Markdown text={tos} />\n    <CommitButton\n      data={{\n        tosAccept: {\n          genie: JSON.stringify({\n            key: acceptanceKey,\n            value: 1, // TODO blockheight of tos version\n          }),\n        },\n      }}\n    >\n      Agree\n    </CommitButton>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/michaelpeter.near/widget/TOS-Draft"}