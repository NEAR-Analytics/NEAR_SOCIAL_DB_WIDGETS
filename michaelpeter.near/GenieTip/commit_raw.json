{"tx_hash": "82HcaqrAYhCRpcSbaqF8rjHey9bbV244kynVdzY1Hn9y", "action_id_social": "6eZHgt5GisH7gygaMeob2g1e8KB3T4o8LDZR44epK24K-0-widget", "block_id": 80733865, "block_timestamp": "2022-12-15 22:07:57.154", "signer_id": "michaelpeter.near", "widget_name": "GenieTip", "source_code": "const { answeredBy, questionRef } = props;\n\nif (!answeredBy || !questionRef) {\n  return \"Missing prop\";\n}\n\nState.init({ tipAmount: null });\n\nconst tips = Social.index(\"genie\", `tip/${answeredBy}`);\nconst tipAmount = tips.reduce((acc, v) => acc + parseInt(v.value), 0);\n// console.log(tipAmount);\nconst questionSpecificTip = Social.index(\n  \"genie\",\n  `tip/${questionRef}/${answeredBy}`\n);\nconsole.log(questionSpecificTip);\n\nconst onSubmitClick = () => {\n  const gas = 300 * 100000000000;\n  const deposit = parseInt(state.tipAmount) + \"000000000000000000000000\";\n  //   const deposit = parseInt(state.tipAmount) + \"000000000000000000000\";\n  Near.call(\n    \"passthrough.near\",\n    \"transfer\",\n    { receiver_id: answeredBy },\n    gas,\n    deposit\n  );\n};\n\nreturn (\n  <div class=\"mb-4\">\n    <h1> Giving a Tip </h1>\n    <p>\n      Receiver:{\" \"}\n      <input\n        value={answeredBy}\n        placeholder=\"bowen.near\"\n        onChange={(e) => State.update({ receiverID: e.target.value })}\n      />\n    </p>\n    <p>\n      Amount:{\" \"}\n      <input\n        value={state.tipAmount}\n        placeholder=\"1\"\n        onChange={(e) => State.update({ tipAmount: e.target.value })}\n      />\n    </p>\n    <CommitButton\n      disabled={\n        context.loading ||\n        !(answeredBy && state.tipAmount) ||\n        !parseInt(state.tipAmount)\n      }\n      data={{\n        index: {\n          genie: JSON.stringify([\n            {\n              key: `tip/${answeredBy}`,\n              value: state.tipAmount,\n            },\n            {\n              key: `tip/${questionRef}/${answeredBy}`,\n              value: state.tipAmount,\n            },\n          ]),\n        },\n      }}\n      className={`btn ${context.loading ? \"btn-outline-dark\" : \"btn-primary\"}`}\n      onCommit={onSubmitClick}\n    >\n      Submit\n    </CommitButton>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/michaelpeter.near/widget/GenieTip"}