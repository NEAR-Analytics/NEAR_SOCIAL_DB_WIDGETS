{"tx_hash": "EDPLus5jyL75oxcEvgZzWcEsrWa8L4C4qJNGTootd9GE", "action_id_social": "8B852xp8aP1saRriqCcM6Ai3T7AAvE3MNB3W8MRbcNos-0-widget", "block_id": 88952069, "block_timestamp": "2023-04-06 12:22:44.299", "signer_id": "ciocan.near", "widget_name": "burrow-list", "source_code": "const toAPY = (v) => Math.round(v * 100) / 100;\n\nconst NEAR_LOGO = `data:image/svg+xml,%3Csvg width='35' height='35' fill='none' xmlns='http://www.w3.org/2000/svg' class='MuiSvgIcon-root MuiSvgIcon-fontSizeMedium css-vubbuv' focusable='false' aria-hidden='true' viewBox='0 0 35 35' style='width: 35px; height: 35px; filter: invert(100%25);'%3E%3Ccircle cx='17.5' cy='17.5' r='17.5' fill='%23fff'%3E%3C/circle%3E%3Cpath d='m24.027 9.022-4.174 6.2c-.288.422.267.934.666.578l4.107-3.578c.111-.089.266-.022.266.134v11.177c0 .156-.2.223-.288.111L12.174 8.756A2.053 2.053 0 0 0 10.552 8h-.444C8.954 8 8 8.956 8 10.133v15.734C8 27.044 8.954 28 10.131 28a2.14 2.14 0 0 0 1.82-1.022l4.173-6.2c.289-.422-.266-.934-.666-.578l-4.106 3.556c-.111.088-.267.022-.267-.134V12.467c0-.156.2-.223.289-.111l12.43 14.888c.4.49 1 .756 1.621.756h.444A2.133 2.133 0 0 0 28 25.867V10.133A2.133 2.133 0 0 0 25.869 8a2.15 2.15 0 0 0-1.842 1.022Z' fill='%23000'%3E%3C/path%3E%3C/svg%3E`;\n\nconst nFormat = (num, digits) => {\n  const lookup = [\n    { value: 1, symbol: \"\" },\n    { value: 1e3, symbol: \"k\" },\n    { value: 1e6, symbol: \"M\" },\n  ];\n  const rx = /\\.0+$|(\\.[0-9]*[1-9])0+$/;\n  var item = lookup\n    .slice()\n    .reverse()\n    .find((item) => num >= item.value);\n  return item\n    ? (num / item.value).toFixed(digits).replace(rx, \"$1\") + item.symbol\n    : \"0\";\n};\n\nconst { assets, rewards } = state;\n\nconst hasData = assets.length > 0 && rewards.length > 0;\n\nconst onLoad = (data) => {\n  State.update(data);\n};\n\nconst allAssets = hasData\n  ? assets.map((asset) => {\n      const r = rewards.find((a) => a.token_id === asset.token_id);\n      const depositApy = r.apyBase + r.apyRewardTvl + r.apyReward;\n      const borrowApy = r.apyBaseBorrow;\n      const liquidity = nFormat(asset.availableLiquidity, 2);\n      const icon = asset.metadata.icon || NEAR_LOGO;\n\n      return (\n        <tr>\n          <td>\n            <img src={icon} style={{ width: 24, marginRight: 10 }} />\n            <span>{asset.metadata.symbol}</span>\n          </td>\n          <td class=\"text-end\">{toAPY(depositApy)}%</td>\n          <td class=\"text-end\">{toAPY(borrowApy)}%</td>\n          <td class=\"text-end\">{liquidity}</td>\n        </tr>\n      );\n    })\n  : undefined;\n\nreturn (\n  <div>\n    {!hasData && (\n      <Widget src=\"ciocan.near/widget/burrow-data\" props={{ onLoad }} />\n    )}\n    <table class=\"table\">\n      <thead>\n        <tr\n          style={{\n            color: \"rgba(0, 0, 0, 0.4)\",\n          }}\n        >\n          <th scope=\"col\">Asset</th>\n          <th scope=\"col\" class=\"text-end\">\n            APY\n          </th>\n          <th scope=\"col\" class=\"text-end\">\n            APY (borrow)\n          </th>\n          <th scope=\"col\" class=\"text-end\">\n            Liquidity\n          </th>\n        </tr>\n      </thead>\n      <tbody>{allAssets}</tbody>\n    </table>\n  </div>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ciocan.near/widget/burrow-list", "metadata.image.ipfs_cid": NaN, "metadata.linktree.website": NaN, "metadata.name": NaN, "metadata.tags.burrow": NaN, "metadata.tags.widget": NaN}