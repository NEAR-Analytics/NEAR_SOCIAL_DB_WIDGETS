{"tx_hash": "6sfwFv6goHYKHCm2o5K2nkcLiYY2MpR299vU8nc322Ne", "action_id_social": "CrPDo4vnoyjM7S1zUQQtWY6LjuhHLaTbvEhUmt1dEbZf-0-widget", "block_id": 93498157, "block_timestamp": "2023-06-05T08:22:55.605Z", "signer_id": "ciocan.near", "widget_name": "zkevm-bridge-transactions", "source_code": "const Layout = styled.div`\n    position: relative;\n    font-family: 'Inter';\n    font-style: normal;\n    font-weight: 600;\n    font-size: 12px;\n    line-height: 14px;\n    padding: 8px 16px;\n    background-color: #151718;\n    border-radius: 12px;\n    max-width: 240px;\n    display: flex;\n    flex-direction: column;\n    gap: 4px;\n\n    h3 {\n        font-size: 14px;\n    }\n\n    .refresh {\n        border: none;\n        background: rgba(255, 255, 255, 0.6);\n    }\n\n    ul {\n        list-style: none;\n        margin-top: 16px;\n        padding: 0;\n        margin: 0;\n        display: flex;\n        flex-direction: column;\n        gap: 8px;\n\n        li {\n            background: #2d2f30;\n            padding: 4px 8px;\n            display: flex;\n            justify-content: space-between;\n            gap: 4px;\n\n            .info {\n                display: flex;\n                flex-direction: column;\n                gap: 4px;\n\n                .token {\n                    font-weight: bold;\n                }\n\n                a{ \n                    color: lightblue;\n                }\n\n                .date {\n                    font-size: 10px;\n                    color: rgba(255, 255, 255, 0.6);\n                }\n            }\n\n            button {\n                font-size: 12px;\n                color: #fff;\n                background: #8247E5;\n                border: none;\n            }\n        }\n    }\n`;\n\nconst sender = Ethers.send(\"eth_requestAccounts\", [])[0];\n\nconst tokens = props.tokens ?? [];\n\nif (sender) {\n  Ethers.provider()\n    .getNetwork()\n    .then(({ chainId }) => {\n      State.update({ chainId });\n    });\n}\n\nState.init({\n  deposits: [],\n  withdrawls: [],\n});\n\nconst { chainId, withdrawls, deposits } = state;\n\nconst isMainnet = chainId === 1 || chainId === 1101;\n\nconst getDeposits = () => {};\n\nconst getWithdrawals = () => {\n  if (!sender) return;\n\n  const list = fetch(\n    `https://open-api-v2-staging.polygon.technology/zkevm-${\n      isMainnet ? \"mainnet\" : \"testnet\"\n    }/withdraw/address?userAddress=${sender}`\n  );\n\n  if (!list.body.success) {\n    return;\n  }\n\n  State.update({\n    withdrawls: list.body.result.filter(\n      (tx) => tx.status === \"READY_TO_CLAIM\" || tx.status === \"CLAIMING\"\n    ),\n  });\n};\n\ngetWithdrawals();\n\nconst refreshList = () => {\n  getWithdrawals();\n};\n\nconst claimTransaction = (tx) => {\n  console.log(\"claimTransaction\", tx);\n};\n\nreturn (\n  <Layout>\n    <h3>Pending transactions:</h3>\n    <button class=\"refresh\" onClick={refreshList}>\n      refresh list\n    </button>\n    <ul>\n      {withdrawls.map((t) => {\n        const txUrl = `https://${\n          isMainnet ? \"\" : \"testnet-\"\n        }zkevm.polygonscan.com/tx/${t.transactionHash}`;\n\n        const token = tokens.find(\n          (token) =>\n            t.childToken.toLowerCase() === token.address.toLowerCase() &&\n            token.chainId === chainId\n        );\n\n        const amount = ethers.utils.formatUnits(\n          t.amounts[0],\n          token?.decimals || 18\n        );\n\n        return (\n          <li>\n            <div class=\"info\">\n              <span class=\"token\">\n                {amount} {token?.symbol}\n              </span>\n              <a href={txUrl} target=\"_blank\">\n                Tx info\n              </a>\n              <span class=\"date\">{t.timestamp.slice(0, -8)}</span>\n            </div>\n            <button onClick={() => claimTransaction(t)}>Claim</button>\n          </li>\n        );\n      })}\n    </ul>\n  </Layout>\n);\n", "metadata": {"tags": {"ethdenver2023": null}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ciocan.near/widget/zkevm-bridge-transactions", "__row_index": 3}