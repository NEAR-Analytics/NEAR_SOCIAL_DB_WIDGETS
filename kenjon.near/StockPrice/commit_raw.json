{"tx_hash": "K2LMRSLrppMF3kj2sRAp5Towpon2e45iLjKonJuhJug", "action_id_social": "6cKK39G6gVqjRQDZWLZH8V4zBrgMYKgFQxEhwqDEGxA1-0-widget", "block_id": 88913413, "block_timestamp": "2023-04-06 00:11:46.552", "signer_id": "kenjon.near", "widget_name": "StockPrice", "source_code": "const symbols = [\"AAPL\", \"AMZN\", \"NVDA\", \"MSFT\", \"TSLA\", \"META\", \"JPM\"];\n\ninitState({\n  ticker: \"AAPL\",\n  d: \"\",\n  price: \"\",\n});\n\nconst url = \"https://yh-finance-complete.p.rapidapi.com/yhf?ticker=AAPL\";\n\nconst options = {\n  method: \"GET\",\n  headers: {\n    \"X-RapidAPI-Key\": \"df979192a6msh4028d1ba5d1badep1d8782jsn10bf08062867\",\n    \"X-RapidAPI-Host\": \"yh-finance-complete.p.rapidapi.com\",\n  },\n};\n\nconst handleProposal = () => {\n  if (!state.ticker) {\n    return;\n  }\n  let new_url =\n    \"https://yh-finance-complete.p.rapidapi.com/yhf?ticker=\" + state.ticker;\n  let new_data = fetch(new_url, options);\n  console.log(new_data);\n};\n\nconst data = fetch(url, options);\n\nconsole.log(data);\n\nconst onChangeSymbol = (ticker) => {\n  State.update({\n    ticker,\n  });\n};\n\nif (data !== null && data.ok === false) {\n  return (\n    <div className=\"text-bg-light rounded-4 p-3 mb-3\">\n      <p>\n        It seems like our pricing data provider, Yahoo Finance (), is\n        experiencing some issues at the moment. Apologies.\n      </p>\n      <p>\n        Thanks for your patience, and we hope they'll resolve the issue soon.\n      </p>\n    </div>\n  );\n} else {\n  return (\n    <div className=\"text-bg-light rounded-4 p-3 mb-3\">\n      {data !== null ? (\n        <p>\n          <div class=\"d-flex clearfix flex-wrap flex-column flex-sm-row\">\n            <div class=\"p-2\">\n              <div style={{ \"font-size\": \"30px\" }}>AAPL/USD</div>\n              <h1>\n                ${data.body.price.regularMarketPrice}\n                <small\n                  class={\n                    data.body.price.regularMarketChange < 0\n                      ? \"text-danger\"\n                      : \"text-success\"\n                  }\n                  style={{ \"font-size\": \"20px\" }}\n                >\n                  {data.body.price.regularMarketChangePercent.toFixed(2) + \"%\"}\n                </small>\n              </h1>\n            </div>\n          </div>\n          <div>\n            <h3>Stock Symbol</h3>\n            <input\n              type=\"text\"\n              onChange={(e) => onChangeSymbol(e.target.value)}\n            />\n          </div>\n          <div>\n            <button onClick={handleProposal}>Get Price</button>\n          </div>\n        </p>\n      ) : (\n        <div>Loading ...</div>\n      )}\n    </div>\n  );\n}\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kenjon.near/widget/StockPrice"}