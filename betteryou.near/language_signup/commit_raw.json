{"tx_hash": "BLHykns9syFb89zWr7sR1HeMz1f1ZPc2AAEAEtVrQAY6", "action_id_social": "Ein3gqkioGtdGkS6cVFZ4tjsTPDpc9ANPG8P7BGmSjZd-0-widget", "block_id": 81884243, "block_timestamp": "2022-12-31 15:14:10.493", "signer_id": "betteryou.near", "widget_name": "language_signup", "source_code": "///\n/// CSS\n///\n\nconst signUp = {\n  fontFamily: \"Inter\",\n  background: \"#F7F7F7\",\n  // width: \"800px\",\n  borderRadius: \"10px\",\n  textAlign: \"center\",\n  padding: \"20px\",\n  alignItems: \"center\",\n};\n\nconst challengeTitle = {\n  padding: \"20px\",\n  fontFamily: \"Roboto\",\n  fontStyle: \"normal\",\n  fontWeight: \"400\",\n  fontSize: \"44px\",\n  lineHeight: \"32px\",\n};\n\nconst challengeSubTitle = {\n  fontFamily: \"Roboto\",\n  fontStyle: \"normal\",\n  fontWeight: \"400\",\n  fontSize: \"20px\",\n  lineHeight: \"130%\",\n};\n\nconst howItWorks = {\n  width: \"50%\",\n  marginLeft: \"25%\",\n  marginTop: \"30px\",\n  background: \"#F4FEFF\",\n  borderRadius: \"6px\",\n  fontFamily: \"Roboto\",\n  fontWeight: \"400\",\n  fontSize: \"16px\",\n  lineHeight: \"130%\",\n  color: \"#49454F\",\n  paddingLeft: \"18px\",\n  paddingRight: \"18px\",\n  paddingTop: \"5px\",\n  paddingBottom: \"5px\",\n};\n\nconst howItWorksSpan = {\n  fontFamily: \"Inter\",\n  fontWeight: \"700\",\n};\n\nconst inputBox = {\n  padding: \"10px\",\n  border: \"1px solid black\",\n  width: \"30%\",\n  marginLeft: \"35%\",\n  borderRadius: \"10px\",\n  marginTop: \"10px\",\n  marginBottom: \"10px\",\n};\n\nconst inputBoxInput = {\n  width: \"80%\",\n  height: \"30px\",\n  marginLeft: \"10%\",\n};\n\nconst inputBoxSelect = {\n  width: \"80%\",\n  height: \"30px\",\n};\n\nconst inputBoxTitle = {\n  display: \"block\",\n  paddingBottom: \"5px\",\n  fontSize: \"12px\",\n  textAlign: \"left\",\n  paddingLeft: \"10%\",\n};\n\nconst commitButton = {\n  backgroundColor: \"#2D949A\",\n  color: \"white\",\n  borderRadius: \"100px\",\n  border: \"0px\",\n  paddingLeft: \"24px\",\n  paddingRight: \"24px\",\n  paddingTop: \"10px\",\n  paddingBottom: \"10px\",\n};\n\n///\n/// JS\n///\n\nconst contractId = \"language.betteryou.near\";\nconst accountId = context.accountId;\n\nif (!accountId) {\n  return \"Please log in to view your own challenge or specify account id to view in props.\";\n}\n\nconst challenge_state = Near.view(contractId, \"get_challenge\", {\n  account_id: accountId,\n});\n\nconsole.log(\"challenge state\", challenge_state);\n\nif (challenge_state) {\n  return \"Challenge in progress please go to the main challenge page.\";\n}\n\n// I can't properly handle inputs so here we go, global variables.\n// Make sure the defaults here are the same as in the html. Sorry.\nlet languageInputValue = \"French\";\nlet usernameInputValue = \"\";\nlet quotaPerDayInputValue = 5;\nlet totalDaysInputValue = 30;\nlet totalLivesInputValue = 4; // TODO are lives = skips + 1 ?\nlet depositInputValue = 0.0;\n\nfunction create_challenge() {\n  Near.call(\n    contractId,\n    \"create_challenge\",\n    {\n      language: languageInputValue,\n      duolingo_username: usernameInputValue,\n      quota_per_day: quotaPerDayInputValue,\n      total_days: totalDaysInputValue,\n      total_lives: totalLivesInputValue,\n    },\n    None, // default gas\n    parseFloat(depositInputValue) * Math.pow(10, 24) // yocto for the win\n  );\n}\n\nfunction onChangeLanguage(change) {\n  languageInputValue = change.target.value;\n  console.log(languageInputValue);\n}\n\nfunction onChangeUsername(change) {\n  usernameInputValue = change.target.value;\n  console.log(usernameInputValue);\n}\n\nfunction onChangeQuotaPerDay(change) {\n  quotaPerDayInputValue = parseInt(change.target.value);\n  console.log(quotaPerDayInputValue);\n}\n\nfunction onChangeTotalDays(change) {\n  totalDaysInputValue = parseInt(change.target.value);\n  console.log(totalDaysInputValue);\n}\n\nfunction onChangeTotalLives(change) {\n  totalLivesInputValue = parseInt(change.target.value);\n  console.log(totalLivesInputValue);\n}\n\nfunction onChangeDeposit(change) {\n  depositInputValue = parseFloat(change.target.value);\n  console.log(\"on_change_deposit\", depositInputValue);\n}\n\nreturn (\n  <div style={signUp}>\n    <div style={challengeTitle}>Learn a new language</div>\n    <div style={challengeSubTitle}>\n      Commit to learning your selected language on Duolingo every day.\n    </div>\n    <div style={howItWorks}>\n      <span>How it works:</span>\n      Once you commit to the challenge, you need to gain Duolingo experience in\n      your selected language every day. Get your money back if you succeed!\n    </div>\n    <div style={inputBox}>\n      <span style={inputBoxTitle}>Duration</span>\n      <select style={inputBoxSelect} onChange={onChangeTotalDays}>\n        <option value=\"10\">10 days</option>\n        <option value=\"20\">20 days</option>\n        <option value=\"30\" selected>\n          30 days\n        </option>\n      </select>\n    </div>\n    <div style={inputBox}>\n      <span style={inputBoxTitle}>Permitted Skip Days</span>\n      <select style={inputBoxSelect} onChange={onChangeTotalLives}>\n        <option value=\"0\">0 days - hardcore option</option>\n        <option value=\"3\" selected>\n          3 days\n        </option>\n        <option value=\"6\">6 days</option>\n      </select>\n    </div>\n    <div style={inputBox}>\n      <span style={inputBoxTitle}>Duolingo username</span>\n      <input style={inputBoxInput} onChange={onChangeUsername} />\n    </div>\n    <div style={inputBox}>\n      <span style={inputBoxTitle}>Language</span>\n      <select style={inputBoxSelect} onChange={onChangeLanguage}>\n        <option value=\"French\" selected>\n          French\n        </option>\n        <option value=\"German\">German</option>\n        <option value=\"English\">English</option>\n        <option value=\"Polish\">Polish</option>\n        <option value=\"Italian\">Italian</option>\n      </select>\n    </div>\n    <div style={inputBox}>\n      <span style={inputBoxTitle}>Daily Duolingo Quota</span>\n      <select style={inputBoxSelect} onChange={onChangeQuotaPerDay}>\n        <option value=\"5\" selected>\n          5\n        </option>\n        <option value=\"10\">10</option>\n        <option value=\"15\">15</option>\n      </select>\n    </div>\n    <div style={inputBox}>\n      <span style={inputBoxTitle}>NEAR to stake</span>\n      <input style={inputBoxInput} onChange={onChangeDeposit} />\n    </div>\n    <button style={commitButton} onClick={create_challenge}>\n      COMMIT TO CHALLENGE\n    </button>\n    <br /> <br />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/betteryou.near/widget/language_signup"}