{"tx_hash": "4rMBBbTA5uoCZjdiupordLSnztUnYanRQXKi4srGcvVV", "action_id_social": "8SVjYRgQ1hqFznwEiANwkLAqDjKgLzG42sFnNo2EJU3z-1-widget", "block_id": 82438875, "block_timestamp": "2023-01-07 23:07:14.604", "signer_id": "deepcrunch.near", "widget_name": "2048-Coop-WithStyle", "source_code": "if (context.loading) {\n  return \"Loading\";\n}\n\nconst userAccountId = context.accountId;\nconst gameAccountId = \"test-2048-coop.deepcrunch.near\";\n\nfunction capitalize(text) {\n  return text[0].toUpperCase() + text.slice(1).toLowerCase();\n}\n\nfunction proposeMove(dir) {\n  let direction = capitalize(dir);\n  Near.call(gameAccountId, \"propose_action\", {\n    action: direction,\n  });\n}\n\nconst arrow = (direction, scale) => {\n  const s = scale || 0.5;\n  return (\n    <svg\n      onClick={() => proposeMove(direction)}\n      xmlns=\"http://www.w3.org/2000/svg\"\n      version=\"1.1\"\n      class={`button triangle ${direction}`}\n      width={100 * s}\n      height={100 * s}\n    >\n      <path\n        stroke-width={10 * s}\n        stroke-linejoin=\"round\"\n        fill=\"#f3b27a\"\n        stroke=\"#8f7a66\"\n        d={`M ${50 * s},${10 * s} ${90 * s},${90 * s} ${10 * s},${90 * s} z`}\n      />\n    </svg>\n  );\n};\n\nlet Style = styled.div`\n.button {\n  cursor: pointer;\n}\n.container {\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n  background-color: #BBADA0;\n  width: fit-content;\n  row-gap: 10px;\n  padding: 10px;\n  border-radius: 6px;\n}\n\n.row {\n  width: 285px;\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  column-gap: 10px;\n}\n\n.box {\n  width: 58px;\n  height: 58px;\n  border-radius: 3px;\n  border: 0;\n  font-family: \"Clear Sans\", \"Helvetica Neue\", Arial, sans-serif;\n\n  font-weight: 700;\n\n  background: #eee4da59;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  color: #776e65;\n  padding: 0;\n}\n\n/* One digit */\n.box.num-2,\n.box.num-4,\n.box.num-8 {\n  font-size: 35px;\n}\n\n/* Two digits */\n.box.num-16,\n.box.num-32,\n.box.num-64 {\n  font-size: 30px;\n}\n\n/* Three digits */\n.box.num-128,\n.box.num-256,\n.box.num-512 {\n  font-size: 25px;\n}\n\n/* Four digits */\n.box.num-1024,\n.box.num-2048,\n.box.num-4096,\n.box.num-8192 {\n  font-size: 20px;\n}\n\n/* Five digits */\n.box.num-16384,\n.box.num-32768,\n.box.num-65536 {\n  font-size: 15px;\n}\n\n/* Big numbers (bigger than 2048) */\n.box.num-4096,\n.box.num-8192,\n.box.num-16384,\n.box.num-32768,\n.box.num-65536 {\n  background-color: #3c3a33;\n  color: #f9f6f2;\n}\n\n.box.num-2 {\n  color: #776e65;\n  background-color: #eee4da;\n}\n\n.box.num-4 {\n  color: #776e65;\n  background-color: #eee1c9;\n}\n\n.box.num-8 {\n  color: #f9f6f2;\n  background-color: #f3b27a;\n}\n\n.box.num-16 {\n  background-color: #f69664;\n  color: #f9f6f2;\n}\n\n.box.num-32 {\n  background-color: #f77c5f;\n  color: #f9f6f2;\n}\n\n.box.num-64 {\n  background-color: #f75f3b;\n  color: #f9f6f2;\n}\n\n.box.num-128 {\n  background-color: #edd073;\n  color: #f9f6f2;\n}\n\n.box.num-256 {\n  background-color: #eddc62;\n  color: #f9f6f2;\n}\n\n.box.num-512 {\n  background-color: #edc950;\n  color: #f9f6f2;\n}\n\n.box.num-1024 {\n  background-color: #edc53f;\n  color: #f9f6f2;\n}\n\n.box.num-2048 {\n  background-color: #edc22e;\n  color: #f9f6f2;\n}\n\n.v-container {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n\n.h-container {\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n}\n\n// .triangle path {\n//   stroke-width: 1;\n//   stroke: black;\n//   stroke-linejoin: round;\n// }\n\n.triangle.right {\n  transform: rotate(90deg);\n}\n\n.triangle.down {\n  transform: rotate(180deg);\n}\n\n.triangle.left {\n  transform: rotate(-90deg);\n}\n`;\n\nfunction boardUI(board) {\n  return (\n    <div class=\"container\">\n      {board.map((row, rowId) => (\n        <div class=\"row\" key={rowId}>\n          {row.map((tile, tileId) => {\n            if (tile === 0) {\n              return <div class=\"box\" key={tileId}></div>;\n            } else {\n              let className = `box num-${tile}`;\n              return (\n                <div class={className} key={tileId}>\n                  {tile}\n                </div>\n              );\n            }\n          })}\n        </div>\n      ))}\n    </div>\n  );\n}\n\nlet board = [\n  [2, 2, 0, 0],\n  [4, 8, 16, 32],\n  [64, 128, 256, 512],\n  [1024, 2048, 4096, 65536],\n];\n\nboard = Near.view(gameAccountId, \"get_board\");\n\nreturn (\n  <>\n    <Style>\n      <div class=\"v-container\">\n        <div class=\"top-container\">{arrow(\"up\")}</div>\n        <div class=\"h-container\">\n          <div class=\"left-container\">{arrow(\"left\")}</div>\n          {boardUI(board)}\n          <div class=\"right-container\">{arrow(\"right\")}</div>\n        </div>\n        <div class=\"bottom-container\">{arrow(\"down\")}</div>\n      </div>\n    </Style>\n  </>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/deepcrunch.near/widget/2048-Coop-WithStyle", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.name": NaN}