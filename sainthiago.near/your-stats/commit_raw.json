{"tx_hash": "4sc7aRApR99VcVuT6Ymd3Q2DAHZKbbkgWbA99qThH3eB", "action_id_social": "5iARvtcUALrsQafrdDZpNR2V6sCY2UUQbtmza55nrTb-0-widget", "block_id": 86904127, "block_timestamp": "2023-03-09 12:10:24.565", "signer_id": "sainthiago.near", "widget_name": "your-stats", "source_code": null, "metadata": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sainthiago.near/widget/your-stats", "branch.draft": NaN, "branch": NaN, "branch.draft.": "const accountId = context.accountId;\n\nif (context.loading) {\n  return \"Loading\";\n}\n\nif (!accountId) {\n  return \"Sign in with NEAR Wallet\";\n}\n\nconst stats = Social.index(\"notify\", accountId, { order: \"desc\" });\n\nconst following = Social.keys(`${accountId}/graph/follow/*`, \"final\", {\n  return_type: \"BlockHeight\",\n  values_only: true,\n});\n\nconst followers = Social.keys(`*/graph/follow/${accountId}`, \"final\", {\n  return_type: \"BlockHeight\",\n  values_only: true,\n});\n\nconst numFollowing = following\n  ? Object.keys(following[accountId].graph.follow || {}).length\n  : 0;\n\nconst numFollowers = followers ? Object.keys(followers || {}).length : 0;\n\nconst nfts = fetch(\n  `https://api.kitwallet.app/account/${accountId}/likelyNFTsFromBlock`\n);\n\nconst numNfts = nfts?.body?.list?.length || 0;\n\nconst widgets = Social.keys(`${accountId ?? \"*\"}/widget/*`, \"final\");\n\nconst numWidgets = widgets[accountId]?.widget\n  ? Object.keys(widgets[accountId].widget).length\n  : 0;\n\nif (!nfts.ok) {\n  return \"Loading\";\n}\n\nif (stats == null) {\n  return \"Loading\";\n}\n\nif (stats.length == 0) {\n  return \"No stats for your account\";\n}\n\nreturn (\n  <div class=\"d-flex flex-column\">\n    <h5>your-stats:</h5>{\" \"}\n    <p class=\"mb-0\">\n      - you own\n      {numNfts}\n      nfts.\n    </p>\n    <p class=\"mb-0\">\n      - you created\n      {numWidgets}\n      widgets so far.\n    </p>\n    <p class=\"mb-0\">\n      - you follow\n      {numFollowing}\n      humans.\n    </p>\n    <p class=\"mb-0\">\n      - {numFollowers}\n      humans followed you.\n    </p>\n    <p class=\"mb-0\">\n      -{\" \"}\n      {\n        stats.filter((notification) => notification.value.type === \"unfollow\")\n          .length\n      }{\" \"}\n      humans unfollowed you.\n    </p>\n    <p class=\"mb-0\">\n      -{\" \"}\n      {\n        stats.filter((notification) => notification.value.type === \"mention\")\n          .length\n      }{\" \"}\n      mentions.\n    </p>\n    <p class=\"mb-0\">\n      -{\" \"}\n      {\n        stats.filter((notification) => notification.value.type === \"like\")\n          .length\n      }{\" \"}\n      likes on your content so far.\n    </p>\n    <p class=\"mb-0\">\n      -{\" \"}\n      {\n        stats.filter((notification) => notification.value.type === \"comment\")\n          .length\n      }{\" \"}\n      comments on something you wrote.\n    </p>\n  </div>\n);\n"}