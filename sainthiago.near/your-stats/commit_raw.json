{"tx_hash": "HXZw8U2xFQx2xeXq7Dp8384RjuD9yorZHgMpyU5TMh4B", "action_id_social": "ANytY5w45RrdteC3GJbqUoRkkQiKxvtiiLpbpj14Xqg2-0-widget", "block_id": 86905163, "block_timestamp": "2023-03-09 12:29:50.669", "signer_id": "sainthiago.near", "widget_name": "your-stats", "source_code": "const accountId = props.accountId || context.accountId;\n\nif (!accountId) {\n  return <></>;\n}\n\nconst stats = Social.index(\"notify\", accountId, { order: \"desc\" });\n\nconst following = Social.keys(`${accountId}/graph/follow/*`, \"final\", {\n  return_type: \"BlockHeight\",\n  values_only: true,\n});\n\nconst followers = Social.keys(`*/graph/follow/${accountId}`, \"final\", {\n  return_type: \"BlockHeight\",\n  values_only: true,\n});\n\nconst numFollowing = following\n  ? Object.keys(following[accountId].graph.follow || {}).length\n  : 0;\n\nconst numFollowers = followers ? Object.keys(followers || {}).length : 0;\n\nconst nfts = fetch(\n  `https://api.kitwallet.app/account/${accountId}/likelyNFTsFromBlock`\n);\n\nconst numNfts = nfts?.body?.list?.length || 0;\n\nconst widgets = Social.keys(`${accountId ?? \"*\"}/widget/*`, \"final\");\n\nconst numWidgets = widgets[accountId]?.widget\n  ? Object.keys(widgets[accountId].widget).length\n  : 0;\n\nif (!nfts.ok || stats === null) {\n  return \"Loading\";\n}\n\nreturn (\n  <div class=\"d-flex flex-wrap gap-2 justify-content-center\">\n    <div class=\"col col-md-2\">\n      <div class=\"card card-stats mb-4 mb-xl-0\">\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <h6 class=\"text-uppercase text-muted mb-0\">Owned Nfts</h6>\n              <span class=\"h3 font-weight-bold mb-0\">{numNfts}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col col-md-2\">\n      <div class=\"card card-stats mb-4 mb-xl-0\">\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <h6 class=\"card-title text-uppercase text-muted mb-0\">\n                Created Widgets\n              </h6>\n              <span class=\"h3 font-weight-bold mb-0\">{numWidgets}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col col-md-2\">\n      <div class=\"card card-stats mb-4 mb-xl-0\">\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <h6 class=\"card-title text-uppercase text-muted mb-0\">\n                Following\n              </h6>\n              <span class=\"h3 font-weight-bold mb-0\">{numFollowing}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col col-md-2\">\n      <div class=\"card card-stats mb-4 mb-xl-0\">\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <h6 class=\"card-title text-uppercase text-muted mb-0\">\n                Followers\n              </h6>\n              <span class=\"h3 font-weight-bold mb-0\">{numFollowers}</span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col col-md-2\">\n      <div class=\"card card-stats mb-4 mb-xl-0\">\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <h6 class=\"card-title text-uppercase text-muted mb-0\">\n                Unfollowers\n              </h6>\n              <span class=\"h3 font-weight-bold mb-0\">\n                {\" \"}\n                {\n                  stats.filter(\n                    (notification) => notification.value.type === \"unfollow\"\n                  ).length\n                }\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col col-md-2\">\n      <div class=\"card card-stats mb-4 mb-xl-0\">\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <h6 class=\"card-title text-uppercase text-muted mb-0\">\n                Mentions\n              </h6>\n              <span class=\"h3 font-weight-bold mb-0\">\n                {\n                  stats.filter(\n                    (notification) => notification.value.type === \"mention\"\n                  ).length\n                }\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col col-md-2\">\n      <div class=\"card card-stats mb-4 mb-xl-0\">\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <h6 class=\"card-title text-uppercase text-muted mb-0\">\n                Likes given to you\n              </h6>\n              <span class=\"h3 font-weight-bold mb-0\">\n                {\n                  stats.filter(\n                    (notification) => notification.value.type === \"like\"\n                  ).length\n                }\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"col col-md-2\">\n      <div class=\"card card-stats mb-4 mb-xl-0\">\n        <div class=\"card-body\">\n          <div class=\"row\">\n            <div class=\"col\">\n              <h6 class=\"card-title text-uppercase text-muted mb-0\">\n                Comments to you\n              </h6>\n              <span class=\"h3 font-weight-bold mb-0\">\n                {\n                  stats.filter(\n                    (notification) => notification.value.type === \"comment\"\n                  ).length\n                }\n              </span>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "widget_modules_used": null, "widget_url": "https://near.social/#/sainthiago.near/widget/your-stats", "branch.draft": NaN, "branch": NaN, "branch.draft.": NaN}