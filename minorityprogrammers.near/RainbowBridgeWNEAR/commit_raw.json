{"tx_hash": "FRk2TKoggi4mfCCLMnZZgng8Kjdwrg2z7KZ6QsU2UZpv", "action_id_social": "HxAbesJgdY2uySLGcdacYdBhB3i95KhpFTbDwns3YsG7-0-widget", "block_id": 87542568, "block_timestamp": "2023-03-18 03:55:48.707", "signer_id": "minorityprogrammers.near", "widget_name": "RainbowBridgeWNEAR", "source_code": "// Define the NEAR account and amount to bridge\nconst amount = \"10000000000000000000000\"; // 0.01 NEAR // maybe off\n// Define the Aurora address to receive the bridged NEAR\nconst accountId = context.accountId; // add check for context it\n\nconst method_name = \"ft_transfer_call\";\nconst receiver_id = \"aurora\";\n\nconst contract_name = \"wrap.near\";\n\nconst auroraAddress = \"0x97B882530830a10f07A9f9A733cB7d0491F808Dc\"; // minority programmersEth address\n\ninitState({\n  amount: amount,\n  ethereum_receiver: auroraAddress,\n});\n// Define the Rainbow Bridge API endpoint\nconst bridgeEndpoint = \"https://bridge-api.mainnet.near.org\";\n\nconst onChangeAddress = (ethereum_receiver) => {\n  State.update({\n    ethereum_receiver,\n  });\n}; // add helper function for proper ethereum addresses\n\nconst onChangeAmount = (amount) => {\n  State.update({\n    amount,\n  });\n};\n\n// improve this so it shows in same transaction\n\nconst bridge = () => {\n  if (!(accountId && state.amount && state.ethereum_receiver)) {\n    return;\n  }\n\n  const gas = 200000000000000;\n  const deposit = 1; // exactly 1 yocto\n  Near.call([\n    {\n      contractName: \"wrap.near\",\n      methodName: \"near_deposit\",\n      args: {},\n      gas,\n      deposit: state.amount,\n    },\n    {\n      contractName: contract_name,\n      // need to wrap first with near_deposit\n      methodName: \"ft_transfer_call\",\n      args: {\n        receiver_id: \"aurora\",\n        amount: state.amount,\n        memo: null,\n        msg: state.ethereum_receiver,\n        //   msg: \"0x97B882530830a10f07A9f9A733cB7d0491F808Dc\",\n      },\n      gas: gas,\n      deposit: 1, // may take this out\n    },\n  ]);\n};\n\n// add function call hear\n\nreturn (\n  <div>\n    <h1>\ud83c\udf08 Send NEAR to Aurora Address </h1>\n    <div className=\" mb-2\">\n      Aurora Address Your Want to Bridge\n      <input\n        type=\"text\"\n        placeholder={state.ethereum_receiver}\n        onChange={(e) => onChangeAddress(e.target.value)}\n      />\n    </div>\n    <div className=\" mb-2\">\n      Enter Amount of NEAR to Bridge\n      <input\n        type=\"number\"\n        placeholder={state.amount / 1e24}\n        onChange={(e) => onChangeAmount(e.target.value * 1e24)} // maybe 1e24 degen match\n      />\n      <p>\n        * You will pay some extra gas in \u24c3 to bridge and the asset will be\n        wrapped NEAR on Aurora\n      </p>\n    </div>\n    <button className=\"btn btn-primary mt-3\" onClick={bridge}>\n      Bridge\n    </button>\n  </div>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/minorityprogrammers.near/widget/RainbowBridgeWNEAR", "metadata.description": "Widget the Wraps your NEAR and then sends to desired Aurora address ", "metadata.image.ipfs_cid": "bafkreicrbktxmimex6w34smzb3zauc2bovn3qq2pgpdvcaolpiflqr74pm", "metadata.linktree.website": "rainbowbridge.app", "metadata.name": "Rainbow Bridge (NEAR to Aurora)", "metadata.tags.app": "", "metadata.tags.aurora": "", "metadata.tags.bridge": "", "metadata.tags.ethereum": "", "metadata.tags.rainbow": "", "metadata.tags.rainbow-bridge": "", "metadata.tags.wnear": "", "metadata.tags.wrap-near": ""}