{"tx_hash": "6iLig22LyKSpdWg8hzYBoUZF2YqT254csZ51YEqEYcFk", "action_id_social": "4FYBVadECGDV8AXDkCbJ44wWoKs5wTpX1MzeTaHE1cx3-0-widget", "block_id": 92817943, "block_timestamp": "2023-05-27T09:22:09.727Z", "signer_id": "theprimeai.near", "widget_name": "votacion", "source_code": "const contract = \"theprimeai.near\";\r\nconst messages = Near.view(contract, \"get_topics\", {\r\n  from_index: 0,\r\n  limit: 10,\r\n}).reverse();\r\n\r\nconsole.log(messages);\r\n// Use and manipulate state\r\nState.init({ new_message: \"\" });\r\n\r\nconst onInputChange = ({ target }) => {\r\n  State.update({ new_message: target.value });\r\n};\r\n\r\nconst onBtnClick = () => {\r\n  if (!state.new_message) {\r\n    return;\r\n  }\r\n\r\n  Near.call(contract, \"add_message\", {\r\n    text: state.new_message,\r\n  });\r\n\r\n  Near.call(contract, \"vote_topic\", {\r\n    topicToUpdate: state.new_message,\r\n  });\r\n};\r\n\r\n// Define components\r\nconst messageEnviar = (\r\n  <>\r\n    <div class=\"border border-black p-3\">\r\n      <button class=\"btn btn-primary m-0 p-1\" onClick={onBtnClick}>\r\n        enviar\r\n      </button>\r\n    </div>\r\n  </>\r\n);\r\n\r\nconst notLoggedInWarning = (\r\n  <p class=\"text-center py-2\">Inicia sesion para poder enviar tu mensaje</p>\r\n);\r\n\r\n// Render\r\nreturn (\r\n  <>\r\n    <div class=\"img-fluid  text-center\">\r\n      <div class=\"col-lg-12\">\r\n        <img\r\n          class=\"float-center\"\r\n          src=\"https://ipfs.near.social/ipfs/bafkreiha52l7x24ynagm37a2kcw62g6h76upfwhred65dvokrjujp6x7ty\"\r\n          width=\"600\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div class=\"container border border-info p-3\">\r\n      <h3 class=\"text-center\"></h3>\r\n      <div class=\"border border-black p-3\">\r\n        <h3>Lista de t\u00f3picos</h3>\r\n        <table className=\"table table-hover table-sm\">\r\n          <thead>\r\n            <tr>\r\n              <th>Usuario</th>\r\n              <th>Topic</th>\r\n              <th>Seleccionar</th>\r\n              <th>Selecci\u00f3n</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {messages.map((data, key) => {\r\n              return (\r\n                <>\r\n                  <tr>\r\n                    <td>{data.creator}</td>\r\n                    <td>{data.topic}</td>\r\n                    <td>\r\n                      {\" \"}\r\n                      <select name=\"select\" onChange={onInputChange}>\r\n                        <option value=\"\">Escoge</option>\r\n                        <option value=\"yes\">Si</option>\r\n                        <option value=\"no\">No</option>\r\n                      </select>\r\n                    </td>\r\n                    <td>\r\n                      {context.accountId ? messageEnviar : notLoggedInWarning}\r\n                    </td>\r\n                  </tr>\r\n                </>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n    <div class=\"border border-black p-3\">\r\n      <h3>RESULTADOS</h3>\r\n      <table className=\"table table-hover table-sm\">\r\n        <thead>\r\n          <tr>\r\n            <th>Topic</th>\r\n            <th>VOTO POSITIVO</th>\r\n            <th>VOTO NEGATIVO</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {messages.map((data, key) => {\r\n            return (\r\n              <>\r\n                <tr>\r\n                  <td>{data.topic}</td>\r\n                  <td>5</td>\r\n                  <td>1</td>\r\n                </tr>\r\n              </>\r\n            );\r\n          })}\r\n        </tbody>\r\n      </table>\r\n    </div>{\" \"}\r\n    <button class=\"btn btn-primary mt-2 bg-white\" onClick={onBtnClick}>\r\n      <a href=\"#/theprimeai.near/widget/MenuOpciones\">\r\n        REGRESAR AL MEN\u00da PRINCIPAL\r\n      </a>\r\n    </button>\r\n  </>\r\n);\r\n", "metadata": {"description": "Seleccionas un t\u00f3pico y opinas respecto a la Verdad, si tu respuesta es la acertada ser\u00e1s recompensado", "image": {"url": "https://ipfs.near.social/ipfs/bafkreiake5a4pmpiuu3qk6yddw4kn5lw7wluyqqlrxyw7545uqwyn7drda"}, "name": "Votaci\u00f3n"}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/theprimeai.near/widget/votacion", "__row_index": 1}