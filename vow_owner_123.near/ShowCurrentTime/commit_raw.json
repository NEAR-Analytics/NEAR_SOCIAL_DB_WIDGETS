{"tx_hash": "EYPaYz9SSyYTuR2FzHHqJ1t5qAg4Jz2Prnc3oykK6Z3n", "action_id_social": "7Uo9YzgsXasUjbipKiV3LPN9GNQhJPa5bYbBEPCvEB4X-0-widget", "block_id": 85805516, "block_timestamp": "2023-02-22 17:03:23.165", "signer_id": "vow_owner_123.near", "widget_name": "ShowCurrentTime", "source_code": "State.init({\n  current_time: null,\n  world_time: null,\n});\n\nconst code = `\n<script>\n    window.addEventListener(\"message\", (event) => {\n        setInterval(() => event.source.postMessage(\"ping\", \"*\"), event.data.timeout);\n    });\n</script>\n`;\n\nfunction onInterval() {\n  var today = new Date();\n  var month = today.getMonth() + 1;\n  var day = today.getDate();\n  var year = today.getFullYear();\n  var hour = today.getHours() > 12 ? today.getHours() - 12 : today.getHours();\n  var minute = today.getMinutes();\n  var seconds = today.getSeconds();\n\n  var utc_year = today.getUTCFullYear();\n  var utc_day = today.getUTCDate();\n  var utc_month = today.getUTCMonth() + 1;\n  var utc_hour = today.getUTCHours();\n  var utc_minute = today.getUTCMinutes();\n\n  const day_converted = day == 0 ? 6 : new Date().getDay() - 1;\n  const hours = new Date().getHours();\n  const now = hours + minute / 60;\n  var is_on = false;\n  var temp = finalData.value._data[day_converted];\n  if (temp.on_off == \"on\") {\n    for (var j = 0; j < temp.data.length; j++) {\n      if (now >= temp.data[j]._from && now < temp.data[j]._to) {\n        is_on = true;\n      }\n    }\n  }\n  State.update({\n    is_on: is_on,\n    current_time:\n      month +\n      \"/\" +\n      day +\n      \"/\" +\n      year +\n      \" - \" +\n      hour +\n      \":\" +\n      minute +\n      \":\" +\n      seconds,\n    world_time:\n      utc_month +\n      \"/\" +\n      utc_day +\n      \"/\" +\n      utc_year +\n      \" - \" +\n      utc_hour +\n      \":\" +\n      utc_minute +\n      \":\" +\n      seconds,\n  });\n}\n\nreturn (\n  <div>\n    <iframe\n      style={{ height: \"0px\" }}\n      srcDoc={code}\n      message={{ timeout: 1000 }}\n      onMessage={onInterval}\n    />\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\n      {state.current_time && (\n        <div\n          style={{\n            fontSize: font_big,\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n          }}\n        >{`UTC Time: ${state.world_time}`}</div>\n      )}\n      {state.world_time && (\n        <div\n          style={{\n            fontSize: font_big,\n            display: \"flex\",\n            justifyContent: \"flex-end\",\n          }}\n        >{`Locale Time: ${state.current_time}`}</div>\n      )}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/vow_owner_123.near/widget/ShowCurrentTime"}