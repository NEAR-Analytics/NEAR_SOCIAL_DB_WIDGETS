{"tx_hash": "GoU8vnYwFHPhELN6qzVzyJrZAvpdDTyqoLs5oM6ZihtX", "action_id_social": "BBXcvR9uqhgmwajwS5WEmsaPoEqo1fYVkmnL7DGXVc3i-0-widget", "block_id": 83784170, "block_timestamp": "2023-01-25 19:50:34.033", "signer_id": "vow_owner_123.near", "widget_name": "Instance_time", "source_code": "const data = Social.index(\"Instance_time\", \"data\");\r\nif (!data) {\r\n  return \"Loading datas\";\r\n}\r\nvar sortedData = data.sort((d1, d2) => d1.blockHeight - d2.blockHeight);\r\nvar accountIds = [\"All\"];\r\nvar final = {};\r\n\r\nfor (let i = 0; i < sortedData.length; i++) {\r\n  if (accountIds.indexOf(sortedData[i].accountId) < 0) {\r\n    accountIds.push(sortedData[i].accountId);\r\n    if (sortedData[i].accountId == context.accountId) {\r\n      final = sortedData[i];\r\n    }\r\n  }\r\n}\r\nconst tabs = {\r\n  ALL_SCHEDULE: { id: 0, text: \"Create Schedule\" },\r\n  NEW_SCHEDULE: { id: 1, text: \"View All Schedules\" },\r\n};\r\nconst time_zones = [\r\n  \"(UTC-11:00) Samoa\",\r\n  \"(UTC-10:00) Hawaii\",\r\n  \"(UTC-09:00) Alaska\",\r\n  \"(UTC-08:00) Pacific Time\",\r\n  \"(UTC-07:00) Arizona\",\r\n  \"(UTC-06:00) Central America\",\r\n  \"(UTC-06:00) Saskatchewan\",\r\n  \"(UTC-05:00) Eastern Time\",\r\n  \"(UTC-04:00) Atlantic Time\",\r\n  \"(UTC-04:30) Caracas\",\r\n  \"(UTC-04:00) Santiago\",\r\n  \"(UTC-03:30) Newfoundland\",\r\n  \"(UTC-03:00) Brasilia\",\r\n  \"(UTC-02:00) Mid-Atlantic\",\r\n  \"(UTC-01:00) Azores\",\r\n  \"(UTC+00:00) UTC\",\r\n  \"(UTC+01:00) Amsterdam\",\r\n  \"(UTC+02:00) Athens\",\r\n  \"(UTC+03:00) Baghdad\",\r\n  \"(UTC+04:00) Abu Dhabi\",\r\n  \"(UTC+04:30) Kabul\",\r\n  \"(UTC+05:00) Islamabad\",\r\n  \"(UTC+05:30) Chennai\",\r\n  \"(UTC+05:45) Kathmandu\",\r\n  \"(UTC+06:00) Almaty\",\r\n  \"(UTC+06:30) Rangoon\",\r\n  \"(UTC+07:00) Bangkok\",\r\n  \"(UTC+08:00) Beijing\",\r\n  \"(UTC+09:00) Irkutsk\",\r\n  \"(UTC+09:00) Seoul\",\r\n  \"(UTC+09:00) Tokyo\",\r\n  \"(UTC+09:30) Adelaide\",\r\n  \"(UTC+10:00) Guam\",\r\n  \"(UTC+11:00) Vladivostok\",\r\n  \"(UTC+12:00) Auckland\",\r\n  \"(UTC+13:00) Nuku'alofa\",\r\n];\r\nState.init({\r\n  tab: tabs.ALL_SCHEDULE.id,\r\n  hoveringElement: \"\",\r\n  _account: \"All\",\r\n  _time_zone: final._time_zone ?? \"(UTC+00:00) UTC\",\r\n});\r\n\r\nconst profile = Social.getr(`${context.accountId}/profile`);\r\nconst flex_column = {\r\n  display: \"flex\",\r\n  flexDirection: \"column\",\r\n};\r\nconst comboBox = {\r\n  background: \"rgb(230, 230, 230)\",\r\n  color: \"black\",\r\n  borderRadius: \"1rem\",\r\n  padding: \"1rem\",\r\n  fontWeight: \"500\",\r\n  fontSize: \"1rem\",\r\n};\r\nconst set_schedule = () => {\r\n  if (state.tab == tabs.ALL_SCHEDULE.id) {\r\n    State.update({ tab: tabs.NEW_SCHEDULE.id });\r\n  } else {\r\n    State.update({ tab: tabs.ALL_SCHEDULE.id });\r\n  }\r\n};\r\nreturn (\r\n  <div>\r\n    <div className=\"d-flex flex-column\">\r\n      <div className=\"d-flex justify-content-between\">\r\n        <div\r\n          style={{\r\n            display: \"flex\",\r\n            justifyContent: \"center\",\r\n            marginBottom: \"1rem\",\r\n            color: \"black\",\r\n            borderRadius: \"2rem\",\r\n            fontWeight: 600,\r\n            fontSize: \"x-large\",\r\n          }}\r\n        >\r\n          Weekly Schedule\r\n        </div>\r\n        <div class=\"d-flex flex-column\">\r\n          <div>{profile.name}</div>\r\n          <div>@{context.accountId}</div>\r\n        </div>\r\n      </div>\r\n      <div className=\"w-100 d-flex flex-row justify-content-between align-items-center\">\r\n        <div>\r\n          {state.tab == tabs.ALL_SCHEDULE.id ? (\r\n            <select\r\n              style={comboBox}\r\n              name=\"accounts\"\r\n              id=\"accounts\"\r\n              value={state._account}\r\n              onChange={(e) => {\r\n                State.update({ _account: e.target.value });\r\n              }}\r\n            >\r\n              {accountIds.map((account) => (\r\n                <option value={account}>{account}</option>\r\n              ))}\r\n            </select>\r\n          ) : (\r\n            <select\r\n              style={comboBox}\r\n              name=\"zones\"\r\n              id=\"zones\"\r\n              value={state._time_zone}\r\n              onChange={(e) => {\r\n                State.update({ _time_zone: e.target.value });\r\n              }}\r\n            >\r\n              {time_zones.map((zone) => (\r\n                <option value={zone}>{zone}</option>\r\n              ))}\r\n            </select>\r\n          )}\r\n        </div>\r\n        <div>\r\n          <button\r\n            onMouseEnter={() => {\r\n              State.update({ hoveringElement: \"create\" });\r\n            }}\r\n            onMouseLeave={() => {\r\n              State.update({ hoveringElement: \"\" });\r\n            }}\r\n            onClick={set_schedule}\r\n            style={\r\n              state.hoveringElement == \"create\"\r\n                ? {\r\n                    border: \"2px solid transparent\",\r\n                    fontWeight: \"500\",\r\n                    fontSize: \"1rem\",\r\n                    padding: \"0.3rem 1.5rem\",\r\n                    backgroundColor: \"#010A2D\",\r\n                    borderRadius: \"12px\",\r\n                    color: \"white\",\r\n                  }\r\n                : {\r\n                    border: \"2px solid black\",\r\n                    color: \"black\",\r\n                    backgroundColor: \"white\",\r\n                    fontWeight: \"500\",\r\n                    fontSize: \"1rem\",\r\n                    padding: \"0.3rem 1.5rem\",\r\n                    borderRadius: \"12px\",\r\n                  }\r\n            }\r\n          >\r\n            {state.tab == tabs.ALL_SCHEDULE.id\r\n              ? tabs.ALL_SCHEDULE.text\r\n              : tabs.NEW_SCHEDULE.text}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div className=\"align-items-center pt-3\">\r\n      {state.tab == tabs.ALL_SCHEDULE.id ? (\r\n        <Widget\r\n          src={`vow_owner_123.near/widget/Instance_time_review`}\r\n          props={{\r\n            accountId: state._account,\r\n            className: \"d-inline-block\",\r\n            style: { width: \"100%\", height: \"1.5em\" },\r\n          }}\r\n        />\r\n      ) : (\r\n        <Widget\r\n          src={`vow_owner_123.near/widget/Instance_time_setting`}\r\n          props={{\r\n            time_zone: state._time_zone,\r\n            style: { width: \"100%\", height: \"1.5em\" },\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/vow_owner_123.near/widget/Instance_time"}