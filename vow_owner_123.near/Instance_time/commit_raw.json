{"tx_hash": "4DrcsA1zadd9YSW2mJCLi9pYJKb2nyJ85QuVveRtBecg", "action_id_social": "3bCv2NkhSt9PqCMehf1ujf51y9vejgJGMQbrAK5Li5dH-0-widget", "block_id": 82191943, "block_timestamp": "2023-01-04 16:27:16.749", "signer_id": "vow_owner_123.near", "widget_name": "Instance_time", "source_code": "State.init({\r\n  on_off: \"on\",\r\n  _from: 1,\r\n  _to: 1,\r\n});\r\n\r\nconst widgetName = \"Instance_time\";\r\nconst widgetPath = `vow_owner_123.near/widget/${widgetName}`;\r\nconst metadata = props.metadata ?? Social.getr(`${widgetPath}/metadata`);\r\n\r\nconst card = {\r\n  background: \"linear-gradient(to right, #4deeea, #f000ff)\",\r\n  border: \"1px solid black\",\r\n  borderRadius: \"5px\",\r\n  textAlign: \"center\",\r\n  color: \"white\",\r\n  padding: \"10px\",\r\n};\r\n\r\nconst button = {\r\n  borderRadius: \"5px\",\r\n  margin: \"5px 0\",\r\n  padding: \"8px\",\r\n  textAlign: \"center\",\r\n  background: \"linear-gradient(to right, #4deeea, #f000ff)\",\r\n  border: \"2px solid black\",\r\n  fontWeight: \"bold\",\r\n};\r\n\r\nconst imgWH = {\r\n  width: \"25px\",\r\n  height: \"25px\",\r\n};\r\nconst hours = [\r\n  \"1\",\r\n  \"2\",\r\n  \"3\",\r\n  \"4\",\r\n  \"5\",\r\n  \"6\",\r\n  \"7\",\r\n  \"8\",\r\n  \"9\",\r\n  \"10\",\r\n  \"11\",\r\n  \"12\",\r\n  \"13\",\r\n  \"14\",\r\n  \"15\",\r\n  \"16\",\r\n  \"17\",\r\n  \"18\",\r\n  \"19\",\r\n  \"20\",\r\n  \"21\",\r\n  \"22\",\r\n  \"23\",\r\n  \"24\",\r\n];\r\nconst urlPrefix = \"https://\";\r\nconst accountId = props.accountId ?? \"*\";\r\n\r\nconst data = Social.index(\"Instance_time\", \"monday\");\r\nif (!data) {\r\n  return \"Loading answers\";\r\n}\r\n\r\nconst sortedData = data.sort((d1, d2) => d2.blockHeight - d1.blockHeight);\r\nvar finalData = [];\r\nvar accountIds = [];\r\nfor (let i = 0; i < sortedData.length; i++) {\r\n  if (accountIds.indexOf(sortedData[i].accountId) < 0) {\r\n    accountIds.push(sortedData[i].accountId);\r\n    finalData.push(sortedData[i]);\r\n  }\r\n}\r\n\r\nreturn (\r\n  <div>\r\n    <br />\r\n    <br />\r\n    <p>Select Instance Time</p>\r\n    <div className=\"d-flex flex-column w-75 justify-content-around\">\r\n      <p>Monday</p>\r\n      <div className=\"d-flex justify-content-around\">\r\n        <p>On or Off</p>\r\n        <select\r\n          name=\"times\"\r\n          id=\"time\"\r\n          value={state.on_off}\r\n          onChange={(e) => {\r\n            State.update({ on_off: e.target.value });\r\n            if (e.target.value == \"off\") {\r\n              State.update({ _from: \"1\", _to: \"1\" });\r\n            }\r\n          }}\r\n        >\r\n          <option value=\"on\">on</option>\r\n          <option value=\"off\">off</option>\r\n        </select>\r\n        <p>From</p>\r\n        <select\r\n          name=\"times\"\r\n          id=\"time\"\r\n          value={state._from}\r\n          onChange={(e) => {\r\n            State.update({ _from: e.target.value });\r\n          }}\r\n        >\r\n          {hours.map((hour) => (\r\n            <option value={hour}>{hour}</option>\r\n          ))}\r\n        </select>\r\n        <p>To</p>\r\n        <select\r\n          name=\"times\"\r\n          id=\"time\"\r\n          value={state._to}\r\n          onChange={(e) => {\r\n            State.update({ _to: e.target.value });\r\n          }}\r\n        >\r\n          {hours.map((hour) => (\r\n            <option value={hour}>{hour}</option>\r\n          ))}\r\n        </select>\r\n      </div>\r\n    </div>\r\n    <CommitButton\r\n      style={button}\r\n      data={{\r\n        index: {\r\n          Instance_time: JSON.stringify(\r\n            {\r\n              key: \"monday\",\r\n              value: {\r\n                on_of: state.on_of,\r\n                _from: state._from,\r\n                _to: state._to,\r\n              },\r\n            },\r\n            undefined,\r\n            0\r\n          ),\r\n        },\r\n      }}\r\n      onCommit={() => {\r\n        State.update({\r\n          reloadData: true,\r\n        });\r\n      }}\r\n    >\r\n      Send It!\r\n    </CommitButton>\r\n    <br />\r\n    <br />\r\n    <div>\r\n      {finalData\r\n        ? finalData.map((d) => (\r\n            <div style={card}>\r\n              <Widget\r\n                src=\"mob.near/widget/ProfileImage\"\r\n                props={{\r\n                  accountId: d.accountId,\r\n                  className: \"d-inline-block\",\r\n                  style: { width: \"1.5em\", height: \"1.5em\" },\r\n                }}\r\n              />\r\n              <a\r\n                href={`#/mob.near/widget/ProfilePage?accountId=${d.accountId}`}\r\n              >\r\n                {d.accountId}\r\n              </a>\r\n              Monday: <b>{d.value.answer}&nbsp;&nbsp;&nbsp;</b>\r\n              <b>\r\n                {d.value.on_off == \"on\"\r\n                  ? `${d.value._from}~${d.value._to}`\r\n                  : \"off\"}\r\n                &nbsp;&nbsp;&nbsp;\r\n              </b>\r\n            </div>\r\n          ))\r\n        : \"Loading...\"}\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/vow_owner_123.near/widget/Instance_time"}