{"tx_hash": "G2RP18mRwVcV54Dq2oHNjFovyfYjo61nai8QQQuj1GSc", "action_id_social": "EhN3U3fLyuQe2aaR2nCorSnz4r6rFhounEQPkM4cQRq7-0-widget", "block_id": 92982060, "block_timestamp": "2023-05-29T12:54:47.631Z", "signer_id": "ncd-cn.near", "widget_name": "EmojiSearch", "source_code": "// MIT License: https://github.com/openwebbuild/bos-emoji-search/blob/main/LICENSE\n\nconst ROW_LIMIT = 10;\n\n// App Config\nfunction getConfig(network) {\n  switch (network) {\n    case \"mainnet\":\n      return {\n        ownerId: \"ncd-cn.near\",\n        nodeUrl: \"https://rpc.mainnet.near.org\",\n      };\n    case \"testnet\":\n      return {\n        ownerId: \"emoji-search.testnet\",\n        nodeUrl: \"https://rpc.testnet.near.org\",\n      };\n    default:\n      throw Error(`Unconfigured environment '${network}'.`);\n  }\n}\nconst config = getConfig(context.networkId);\n\n// Emoji helper functions\nfunction loadEmojis() {\n  const res = fetch(\n    \"https://raw.githubusercontent.com/openwebbuild/bos-emoji-search/master/src/emojiList.json\"\n  );\n  return res.body && JSON.parse(res.body);\n}\n\nfunction filterEmoji(searchText, maxResults) {\n  return emojiList\n    .filter((emoji) => {\n      if (emoji.title.toLowerCase().includes(searchText.toLowerCase())) {\n        return true;\n      }\n      if (emoji.keywords.includes(searchText)) {\n        return true;\n      }\n      return false;\n    })\n    .slice(0, maxResults);\n}\n\n// Load Emojis\nconst emojiList = loadEmojis();\nif (!emojiList) {\n  return \"Loading Emojis...\";\n}\n\nState.init({\n  filteredEmoji: filterEmoji(\"\", ROW_LIMIT),\n});\n\nconst handleSearchChange = (event) => {\n  State.update({\n    filteredEmoji: filterEmoji(event.target.value, ROW_LIMIT),\n  });\n};\n\nreturn (\n  <div>\n    <Widget src={`${config.ownerId}/widget/EmojiSearch.Header`} />\n    <Widget\n      src={`${config.ownerId}/widget/EmojiSearch.SearchInput`}\n      props={{ textChange: handleSearchChange }}\n    />\n    <div>\n      {state.filteredEmoji.map(({ symbol, title }) => (\n        <Widget\n          src={`${config.ownerId}/widget/EmojiSearch.ResultRow`}\n          props={{\n            symbol,\n            title,\n          }}\n        />\n      ))}\n    </div>\n  </div>\n);\n", "metadata": {"description": "Example Emoji Search App: https://github.com/openwebbuild/bos-emoji-search", "image": {"ipfs_cid": "bafkreidojyvjaompcpmuvvlf7xnof77n7flhagusquyog3ozzy6rg6uyfm"}, "name": "Emoji Search", "tags": {"app": "", "emoji": "", "search": ""}}, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ncd-cn.near/widget/EmojiSearch", "__row_index": 0}