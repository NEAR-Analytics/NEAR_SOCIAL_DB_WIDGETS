{"tx_hash": "EXTubJC2LvTWF1kLkw3pY3ZWtu3rae4EKuHxat6QuN8V", "action_id_social": "7fy2px3cmnauHCMBPXQCBnbHH6iwnFYMnw1anR2fgGJn-0-widget", "block_id": 85238175, "block_timestamp": "2023-02-14 21:26:22.405", "signer_id": "eugenewolf507.near", "widget_name": "Draft_CheckStructureCommentsIndex", "source_code": "const accountId = props.accountId ?? context.accountId;\n// ========= HANDLER SET =========\nconst getPublicationParamsAllArticles = () => ({\n  index: {\n    wiki_test: JSON.stringify({\n      key: \"wikitest-v0.0.0\",\n      value: {\n        articleId: \"articleA\",\n        body: \"body A (index)\",\n      },\n    }),\n  },\n});\n// ========= HANDLER GET =========\nconst clickHandlerGetStructure = () => {\n  const accountId = \"mob.near\";\n\n  console.log(\" ========== GET ONE POST ========== \");\n  const post = Social.get(`${accountId}/post/main`, 84722911);\n  //84445357 - blockHeight put into post inside social get\n  console.log(\"postGet\", post);\n  //   const postData = Social.get(`${accountId}/post/**`, \"final\");\n  //   console.log(\"postData\", postData);\n  //   console.log(\" ========== GET INDEX ARRAY FOR POSTS ========== \");\n  const postsIndex = Social.index(\"post\", \"main\", {\n    limit: 10,\n    order: \"desc\",\n    accountId,\n  });\n  console.log(postsIndex);\n  //   console.log(\" ========== GET 10 POSTS ========== \");\n  //   postsIndex.forEach(({ accountId, blockHeight }) => {\n  //     const postData = Social.get(`${accountId}/post/main`, blockHeight);\n  //     console.log(postData);\n  //   });\n\n  console.log(\" ========== GET SOME COMMENTS ========== \");\n  const item = {\n    type: \"social\",\n    path: `${accountId}/post/main`,\n    blockHeight: 84722911,\n  };\n  const index = {\n    action: \"comment\",\n    key: item,\n    options: {\n      limit: 3,\n      order: \"desc\",\n      accountId: \"bosco.near\",\n      subscribe: false,\n    },\n  };\n  const indexComments = Social.index(index.action, index.key, index.options);\n  console.log(\"indexComments\", indexComments);\n  const comment1 = Social.get(`bosco.near/post/comment`, \"final\");\n  console.log(comment1);\n\n  const comment2 = Social.get(`bosco.near/post/comment`, 84723425);\n  console.log(comment2);\n  const comment3 = Social.get(`bosco.near/post/comment`, 84723113);\n  console.log(comment3);\n};\n\n// ========= RETURN =========\nreturn (\n  <div>\n    <p>Press button and check log in browser</p>\n    <CommitButton data={getPublicationParamsAllArticles()}>\n      SET Data\n    </CommitButton>\n    <button onClick={clickHandlerGetStructure}>GET Data</button>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/eugenewolf507.near/widget/Draft_CheckStructureCommentsIndex"}