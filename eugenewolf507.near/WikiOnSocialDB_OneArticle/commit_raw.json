{"tx_hash": "C96Ew7D51hxCtwsiAQq7og67h1BeXRCZHNF3w3Ps4zTA", "action_id_social": "9j4WCcsHvmoTDqdeifZRrAfbJgVS3iZ3129zCZDUkFaH-0-widget", "block_id": 84626936, "block_timestamp": "2023-02-06 12:36:00.029", "signer_id": "eugenewolf507.near", "widget_name": "WikiOnSocialDB_OneArticle", "source_code": "const { getDate, article, addressForArticles } = props;\n\nState.init({\n  article,\n});\n\nconst saveArticle = (args) => {\n  const newArticleData = {\n    ...state.article,\n    body: state.note,\n    lastEditor: accountId,\n    timeLastEdit: Date.now(),\n    version: Number(state.article.version) + 1,\n  };\n  Social.set({\n    [addressForArticles]: {\n      articles: { [state.article.articleId]: { ...newArticleData } },\n    },\n  });\n};\n\nreturn (\n  <div>\n    <h4>Article: {state.article.articleId}</h4>\n    <button\n      onClick={() => {\n        State.update({ ...state, editArticle: true });\n      }}\n    >\n      Edit Article{\" \"}\n    </button>\n    {/* === EDIT ARTICLE === */}\n    {state.editArticle && (\n      <>\n        <button\n          type=\"button\"\n          className=\"btn btn-success\"\n          onClick={() => {\n            if (!state.note || article.body === state.note) return;\n\n            const args = {\n              article_id: state?.articleId,\n              body: state.note,\n              navigation_id: null,\n            };\n\n            saveArticle(args);\n          }}\n        >\n          Save Article{\" \"}\n        </button>\n\n        <button\n          type=\"button\"\n          className=\"btn btn-danger\"\n          onClick={() => {\n            State.update({\n              ...state,\n              editArticle: false,\n              note: undefined,\n            });\n          }}\n        >\n          Cancel{\" \"}\n        </button>\n\n        <textarea\n          id=\"textarea1\"\n          type=\"text\"\n          rows={10}\n          className=\"form-control mt-2\"\n          value={state.note || state.article.body}\n          onChange={(e) => {\n            State.update({ ...state, note: e.target.value });\n          }}\n        />\n      </>\n    )}\n    <Markdown text={state.note || state.article.body} />\n    <div className=\"mt-5 alert alert-secondary\">\n      <div>\n        Created by{\" \"}\n        <a\n          href={`https://near.social/#/mob.near/widget/ProfilePage?accountId=${state.article.author}`}\n          style={{ textDecoration: \"underline\" }}\n        >\n          {state.article.author}\n        </a>\n        <br />\n        Last edit by{\" \"}\n        <a\n          href={`https://near.social/#/mob.near/widget/ProfilePage?accountId=${state.article.lastEditor}`}\n          style={{ textDecoration: \"underline\" }}\n        >\n          {state.article.lastEditor}\n        </a>\n        <br />\n        Edited on {getDate(state.article.timeLastEdit)}\n        <br />\n        Edit versions: {state.article.version}\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/eugenewolf507.near/widget/WikiOnSocialDB_OneArticle"}