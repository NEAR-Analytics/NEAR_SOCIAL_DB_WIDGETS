{"tx_hash": "DArFkte7WFdTsoRPDnAphuXkYPRKkbahCwzpRU4bvWZ5", "action_id_social": "EHxqfddxLAnUTEnzgFmW1iWtF7v12GFQXWGvi49QR4eX-0-widget", "block_id": 83380003, "block_timestamp": "2023-01-20 11:26:20.914", "signer_id": "eugenewolf507.near", "widget_name": "TestWiki_Authors", "source_code": "State.init({});\n\nconst wikiTestData = Social.keys(\"*/wikiTest/articles/*\", \"final\");\nconsole.log(wikiTestData);\nconst accountsSocialDB = Object.keys(wikiTestData);\nconsole.log(accountsSocialDB);\n\nconst accountsNum = Near.view(\"testwiki.near\", \"get_num_accounts\");\n\nconst accounts = Near.view(\"testwiki.near\", \"get_accounts_paged\");\n\n// const getAuthorArticles = (authorId) => {\n//   if (authorId) {\n//     return Near.view(\"testwiki.near\", \"get_account\", {\n//       account_id: authorId,\n//     });\n//   }\n//   return [];\n// };\n\n// const handleArticle = (e, articleId) => {\n//   State.update({ ...state, articleId: articleId, authorId: undefined });\n// };\n\n// const handleAuthor = (e, authorId) => {\n//   State.update({ ...state, articleId: undefined, authorId });\n//   console.log(\"handleAuthor\");\n// };\n// use link for author to get author's articles\n// <a\n//   href=\"\"\n//   style={{ textDecoration: \"underline\" }}\n//   onClick={(e) => handleAuthor(e, accountId)}\n// >\n// </a>\n\nreturn (\n  <div>\n    <h1>Authors</h1>\n    <div>Total: {accountsNum} authors</div>\n    <ul>\n      {accountsSocialDB &&\n        accountsSocialDB.map((accountId) => (\n          <li key={accountId}>\n            <span>{accountId} -</span>\n          </li>\n        ))}\n    </ul>\n    <ul>\n      {accounts &&\n        accounts.map(([accountId, account]) => (\n          <li key={accountId}>\n            <span>\n              {accountId} -\n              {account.articles.length > 0 && (\n                <span>\n                  {\" \"}\n                  {account.articles.length} article\n                  {account.articles.length > 1 ? \"s\" : \"\"}\n                </span>\n              )}\n            </span>\n          </li>\n        ))}\n    </ul>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/eugenewolf507.near/widget/TestWiki_Authors"}