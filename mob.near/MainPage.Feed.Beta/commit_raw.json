{"tx_hash": "BDAU5RKrStdDfbeu6kvdiZRfKfRaiLER7Awqu9ZuHSnd", "action_id_social": "DkaFVjWPoiEhfMbdx3NufhZ54Q4kPY7fuseUQpJDJdkd-0-widget", "block_id": 88389744, "block_timestamp": "2023-03-29 20:08:10.424", "signer_id": "mob.near", "widget_name": "MainPage.Feed.Beta", "source_code": "const index = [\n  {\n    action: \"post\",\n    key: \"main\",\n    options: {\n      limit: 10,\n      order: \"desc\",\n      accountId: props.accounts,\n    },\n  },\n  {\n    action: \"repost\",\n    key: \"main\",\n    options: {\n      limit: 10,\n      order: \"desc\",\n      accountId: props.accounts,\n    },\n  },\n];\n\nconst renderedPosts = {};\n\nconst makePostItem = (a) => ({\n  type: \"social\",\n  path: `${a.accountId}/post/main`,\n  blockHeight: a.blockHeight,\n});\n\nconst renderPost = (a) => {\n  if (a.value.type !== \"md\") {\n    return false;\n  }\n  const item = JSON.stringify(makePostItem(a));\n  if (item in renderedPosts) {\n    return false;\n  }\n  renderedPosts[item] = true;\n\n  return (\n    <div key={JSON.stringify(a)} className=\"mb-3\">\n      <Widget\n        src=\"mob.near/widget/MainPage.Post\"\n        props={{ accountId: a.accountId, blockHeight: a.blockHeight }}\n      />\n    </div>\n  );\n};\n\nconst extractParentPost = (item) => {\n  if (!item || item.type !== \"social\" || !item.path || !item.blockHeight) {\n    return undefined;\n  }\n  const accountId = item.path.split(\"/\")[0];\n  return `${accountId}/post/main` === item.path\n    ? { accountId, blockHeight: item.blockHeight }\n    : undefined;\n};\n\nconst renderRepost = (a) => {\n  if (a.value.type !== \"repost\") {\n    return false;\n  }\n  const post = extractParentPost(a.value.item);\n  if (!post) {\n    return false;\n  }\n  const item = JSON.stringify(post);\n  if (item in renderedPosts) {\n    return false;\n  }\n  renderedPosts[item] = true;\n\n  return (\n    <div key={JSON.stringify(a)} className=\"mb-3\">\n      <div className=\"text-muted\">\n        Reposted by{\" \"}\n        <Widget\n          src=\"mob.near/widget/ProfileLine\"\n          props={{\n            accountId: a.accountId,\n            hideImage: true,\n            hideAccountId: true,\n            tooltip: true,\n          }}\n        />\n      </div>\n      <Widget\n        src=\"mob.near/widget/MainPage.Post\"\n        props={{ accountId: post.accountId, blockHeight: post.blockHeight }}\n      />\n    </div>\n  );\n};\n\nconst renderItem = (item) =>\n  item.key === \"post\" ? renderPost(item) : renderRepost(item);\n\nreturn (\n  <div>\n    <Widget\n      src=\"mob.near/widget/MergedIndexFeed\"\n      props={{ index, renderItem }}\n    />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/MainPage.Feed.Beta"}