{"tx_hash": "6JgarUuHRXxUmTJW9fcxDnjtDr7MwXUYqRpuw3Y9Czr5", "action_id_social": "5cvKsCzfdf2zZUMd2K4NPMdisHVbVsvhizdqKC7dihe-0-widget", "block_id": 83794750, "block_timestamp": "2023-01-25 23:12:37.039", "signer_id": "mob.near", "widget_name": "Common.Compose", "source_code": "State.init({\n  image: {},\n  text: \"\",\n});\n\nconst content = (state.text || state.image.cid) && {\n  type: \"md\",\n  text: state.text,\n  image: state.image.cid ? { ipfs_cid: state.image.cid } : undefined,\n};\n\nconst onChange = (text) => {\n  State.update({\n    text,\n  });\n};\n\nconst jContent = JSON.stringify(content);\nif (props.onChange && jContent !== state.jContent) {\n  State.update({\n    jContent,\n  });\n  props.onChange({ content });\n}\n\nreturn (\n  <div className=\"text-bg-light rounded-4\">\n    <div className=\"p-2\">\n      <textarea\n        className=\"form-control border-0 text-bg-light w-100\"\n        value={state.text || \"\"}\n        onChange={(e) => onChange(e.target.value)}\n        placeholder={props.placeholder ?? \"What's happening?\"}\n      />\n    </div>\n    <div className=\"d-flex flex-row p-2 border-top\">\n      <div className=\"flex-grow-1\">\n        <IpfsImageUpload\n          image={state.image}\n          className=\"btn btn-outline-secondary border-0 rounded-3\"\n        />\n      </div>\n      <div>\n        <CommitButton\n          disabled={!content}\n          force\n          className=\"btn btn-dark rounded-3\"\n          data={() => props.composeData({ content })}\n          onCommit={() => {\n            State.update({\n              image: {},\n              text: \"\",\n            });\n            props?.onCompose();\n          }}\n        >\n          {props.composeText || \"Compose\"}\n        </CommitButton>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/Common.Compose"}