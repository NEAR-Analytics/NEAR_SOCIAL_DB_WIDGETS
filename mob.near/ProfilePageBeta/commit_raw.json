{"tx_hash": "B6kUcEr97c5ZvaVmnDnrdPj8QQNPp2psG7VFy8iKhbAj", "action_id_social": "2JJQJ7Vp3JHuv6F6jF4BoTH8eh3ZgSsHPtHejqZjbEt5-0-widget", "block_id": 79106670, "block_timestamp": "2022-11-23 19:13:46.734", "signer_id": "mob.near", "widget_name": "ProfilePageBeta", "source_code": "const accountId = props.accountId ?? context.accountId;\nif (!accountId) {\n  return \"No account ID\";\n}\n\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\n\nif (profile === null) {\n  return \"Loading\";\n}\n\nconst showEditButton =\n  profile !== undefined &&\n  !props.profile &&\n  accountId &&\n  accountId === context.accountId;\n\nconst name = profile.name || \"No-name profile\";\nconst description = profile.description;\nconst image = profile.image;\nconst backgroundImage = profile.backgroundImage;\nconst tags = Object.keys(profile.tags ?? {});\n\nconst linktree = Object.entries(profile.linktree ?? {});\nconst linktreeElements = {\n  website: {\n    prefix: \"https://\",\n    icon: \"bi-globe2\",\n  },\n  github: {\n    prefix: \"https://github.com/\",\n    icon: \"bi-github\",\n  },\n  twitter: {\n    prefix: \"https://twitter.com/\",\n    icon: \"bi-twitter\",\n  },\n  telegram: {\n    prefix: \"https://t.me/\",\n    icon: \"bi-telegram\",\n  },\n};\n\nconst linktreeObjects = linktree.map((o) => {\n  const key = o[0];\n  let value = o[1];\n  if (!value) {\n    return null;\n  }\n  const e = linktreeElements[key];\n  if (e.prefix) {\n    value = value && value.replace(e.prefix, \"\");\n  }\n  const icon = e.icon ? (\n    <i className={`bi ${e.icon ?? \"\"} text-secondary me-1`}></i>\n  ) : (\n    \"\"\n  );\n  return e.prefix ? (\n    <div>\n      <a href={`${e.prefix}${value}`}>\n        {icon}\n        {value}\n      </a>\n    </div>\n  ) : (\n    <div>\n      {key}: {icon}\n      {value}\n    </div>\n  );\n});\n\nState.init({\n  loadNFT: false,\n  loadWidgets: false,\n});\n\nreturn (\n  <div className=\"py-1 px-1\">\n    <div className=\"mx-auto\">\n      <div className=\"bg-white shadow rounded overflow-hidden\">\n        <div className=\"px-4 pt-0 pb-5 bg-dark position-relative\">\n          {backgroundImage && (\n            <Widget\n              src=\"mob.near/widget/Image\"\n              props={{\n                image: backgroundImage,\n                alt: \"profile background\",\n                className: \"position-absolute w-100 h-100\",\n                style: { objectFit: \"cover\", left: 0, top: 0 },\n                fallbackUrl:\n                  \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\n              }}\n            />\n          )}\n          {showEditButton && (\n            <a\n              href=\"#/mob.near/widget/ProfileEditor\"\n              className=\"btn mt-4 btn-outline-light float-end position-relative\"\n              style={{ zIndex: 1 }}\n            >\n              Edit profile\n            </a>\n          )}\n          <div\n            className=\"profile-picture d-inline-block\"\n            style={{ transform: \"translateY(7rem)\" }}\n          >\n            <Widget\n              src=\"mob.near/widget/ProfileImage\"\n              props={{\n                profile,\n                accountId,\n                style: { width: \"10rem\", height: \"10rem\" },\n                className: \"mb-2\",\n                imageClassName:\n                  \"rounded-circle w-100 h-100 img-thumbnail d-block\",\n                thumbnail: false,\n              }}\n            />\n          </div>\n        </div>\n        <div className=\"bg-light px-4 pb-4\">\n          <div className=\"d-md-flex justify-content-between pt-3\">\n            <div style={{ paddingTop: \"3rem\" }}>\n              <div className=\"me-2 d-sm-flex gap-1 flex-row align-items-center\">\n                <div className=\"me-2\">\n                  <h4 className=\"mt-0 mb-0\">{name}</h4>\n                  <div className=\"small text-trancate\">\n                    <i className=\"bi bi-person-fill text-secondary me-1\"></i>\n                    {accountId}\n                    <Widget\n                      src=\"mob.near/widget/FollowsYouBadge\"\n                      props={{ accountId }}\n                    />\n                  </div>\n                </div>\n\n                <div>\n                  <Widget\n                    src=\"mob.near/widget/FollowButton\"\n                    props={{ accountId }}\n                  />\n                </div>\n              </div>\n            </div>\n            <div style={{ minWidth: \"12rem\" }}>{linktreeObjects}</div>\n          </div>\n          <div className=\"mb-2\">\n            <Widget src=\"mob.near/widget/FollowStats\" props={{ accountId }} />\n          </div>\n          {tags.length > 0 && (\n            <div>\n              {tags.map((tag) => (\n                <span className=\"me-1 mb-1 badge bg-secondary\">#{tag}</span>\n              ))}\n            </div>\n          )}\n\n          <div>\n            <div className=\"public-tags collapse show\">\n              <button\n                className=\"btn btn-sm btn-outline-secondary border-0\"\n                data-bs-toggle=\"collapse\"\n                data-bs-target={`.public-tags`}\n                aria-expanded=\"false\"\n                aria-controls={\"public-tags\"}\n              >\n                <i className=\"bi bi-arrows-angle-expand me-1\"></i>Show public\n                tags\n              </button>\n            </div>\n            <div className=\"collapse public-tags\">\n              <Widget\n                src=\"zavodil.near/widget/PublicTags\"\n                props={{ accountId }}\n              />\n            </div>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"mt-3\">\n        <ul class=\"nav nav-pills nav-fill mb-4\" id=\"pills-tab\" role=\"tablist\">\n          <li class=\"nav-item\" role=\"presentation\">\n            <button\n              class=\"nav-link active\"\n              id=\"pills-bio-tab\"\n              data-bs-toggle=\"pill\"\n              data-bs-target=\"#pills-bio\"\n              type=\"button\"\n              role=\"tab\"\n              aria-controls=\"pills-bio\"\n              aria-selected=\"true\"\n            >\n              Bio\n            </button>\n          </li>\n          <li class=\"nav-item\" role=\"presentation\">\n            <button\n              class=\"nav-link\"\n              id=\"pills-nft-tab\"\n              data-bs-toggle=\"pill\"\n              data-bs-target=\"#pills-nft\"\n              type=\"button\"\n              role=\"tab\"\n              aria-controls=\"pills-nft\"\n              aria-selected=\"false\"\n              onClick={() => {\n                !state.loadNFT && State.update({ loadNFT: true });\n              }}\n            >\n              NFTs\n            </button>\n          </li>\n          <li class=\"nav-item\" role=\"presentation\">\n            <button\n              class=\"nav-link\"\n              id=\"pills-widget-tab\"\n              data-bs-toggle=\"pill\"\n              data-bs-target=\"#pills-widget\"\n              type=\"button\"\n              role=\"tab\"\n              aria-controls=\"pills-widget\"\n              aria-selected=\"false\"\n              onClick={() => {\n                !state.loadWidgets && State.update({ loadWidgets: true });\n              }}\n            >\n              Widgets\n            </button>\n          </li>\n        </ul>\n        <div class=\"tab-content\" id=\"pills-tabContent\">\n          <div\n            class=\"tab-pane fade in show active\"\n            id=\"pills-bio\"\n            role=\"tabpanel\"\n            aria-labelledby=\"pills-bio-tab\"\n          >\n            <Markdown text={description} />\n          </div>\n          <div\n            class=\"tab-pane fade nft\"\n            id=\"pills-nft\"\n            role=\"tabpanel\"\n            aria-labelledby=\"pills-nft-tab\"\n          >\n            {state.loadNFT && (\n              <Widget src=\"mob.near/widget/YourNFTs\" props={{ accountId }} />\n            )}\n          </div>\n          <div\n            class=\"tab-pane fade widget\"\n            id=\"pills-widget\"\n            role=\"tabpanel\"\n            aria-labelledby=\"pills-widget-tab\"\n          >\n            {state.loadWidgets && (\n              <Widget src=\"mob.near/widget/LastWidgets\" props={{ accountId }} />\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/ProfilePageBeta"}