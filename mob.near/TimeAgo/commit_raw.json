{"tx_hash": "ASvxLuPNuCXWxSkbMM35g24GECUzSHUSk1GTCJv17zKw", "action_id_social": "AihVzAQcg6puE9TXhsqUQapGWbp4g5itcYcS8AuyzUPh-0-widget", "block_id": 77958867, "block_timestamp": "2022-11-08 01:48:55.837", "signer_id": "mob.near", "widget_name": "TimeAgo", "source_code": "let keyPath = props.keyPath;\nlet blockHeight = props.blockHeight ? parseInt(props.blockHeight) : undefined;\n\nif (blockHeight === undefined && keyPath) {\n  let blockHeight = Social.keys(keyPath, undefined, {\n    return_type: \"BlockHeight\",\n  });\n  if (blockHeight === null) {\n    return \"Loading\";\n  }\n  keyPath.split(\"/\").forEach((key) => {\n    blockHeight = blockHeight[key];\n  });\n}\n\nif (!blockHeight) {\n  return \"unknown\";\n}\n\nconst block = Near.block(blockHeight);\n\nif (block === null) {\n  return \"Loading\";\n}\n\nconst timeMs = parseFloat(block.header.timestamp_nanosec) / 1e6;\n\nconst timeAgo = (diffSec) =>\n  diffSec < 60000\n    ? `${(diffSec / 1000) | 0} seconds ago`\n    : diffSec < 3600000\n    ? `${(diffSec / 60000) | 0} minutes ago`\n    : diffSec < 86400000\n    ? `${(diffSec / 3600000) | 0} hours ago`\n    : `${(diffSec / 86400000) | 0} days ago`;\n\nreturn timeAgo(Date.now() - timeMs);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/TimeAgo", "metadata.description": "Props:\n- `blockHeight`\n- `keyPath` if the block height is unknown", "metadata.image.ipfs_cid": "bafkreidzayy6guk3rsunyj3fz4ramzqk7ut32akag3py42lerkbc74yudq", "metadata.name": "Time Ago", "metadata.tags.inline": "", "metadata.tags.time": "", "metadata": NaN}