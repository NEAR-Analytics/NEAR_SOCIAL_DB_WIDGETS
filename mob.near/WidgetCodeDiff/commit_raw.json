{"tx_hash": "CMHQVQVVzzFsSYuwvAiS3Mqk87AvqyqyV5HBNnCpVEP9", "action_id_social": "8MAEW9ocoLd1sCkEhA5imaKMRNfUAEQR4wNhqubemCSE-0-widget", "block_id": 86698884, "block_timestamp": "2023-03-06 16:53:12.926", "signer_id": "mob.near", "widget_name": "WidgetCodeDiff", "source_code": "/*\r\n---props---\r\n\r\nprops.a: string (\"bozon.near/widget/PrivateMailBox@86202305\")\r\n\r\nprops.b: string (\"bozon.near/widget/PrivateMailBox@76092781\")\r\n\r\nprops.findUniqueResult(\r\n  lineCountDeleted: number, \r\n  lineCountInserted: inserted,\r\n  lineCountCurrentCode: number,\r\n  lineCountPrevCode: number,\r\n  allLineCount: number\r\n)?: function\r\n\r\nprops.showLineNumber?: bool\r\n\r\n*/\r\nlet { a, b } = props;\r\n\r\nif (!a || !b) return \"require props.a and props.b\";\r\n\r\nfunction split(src) {\r\n  const parts = src.split(\"@\");\r\n  return { src: parts[0], blockHeight: parseInt(parts[1]) || \"final\" };\r\n}\r\n\r\na = split(a);\r\nb = split(b);\r\nconsole.log(a, b);\r\n\r\na.code = Social.get(a.src, a.blockHeight);\r\nb.code = Social.get(b.src, b.blockHeight);\r\n\r\nif (a.code === null || b.code === null) {\r\n  return \"Loading\";\r\n}\r\n\r\nreturn (\r\n  <Widget\r\n    src=\"bozon.near/widget/CodeDiff\"\r\n    props={{ currentCode: b.code, prevCode: a.code, ...props }}\r\n  />\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/WidgetCodeDiff"}