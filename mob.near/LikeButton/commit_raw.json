{"tx_hash": "9P6fqPKUS2wvKzZhk5oHeVG9iEE4MqYWWAvBJSjQ9dJV", "action_id_social": "Dvz14XJpYeVKgtvDyMTt1nshWVaRXCfdD7GPsiW8e3wL-0-widget", "block_id": 81247683, "block_timestamp": "2022-12-22 23:02:21.015", "signer_id": "mob.near", "widget_name": "LikeButton", "source_code": "const item = props.item;\n\nif (!item) {\n  return \"\";\n}\n\nconst likes = Social.index(\"like\", item);\n\nconst loading = likes === null;\n\nconst likesByUsers = {};\n\n(likes || []).forEach((like) => {\n  if (like.value.type === \"like\") {\n    likesByUsers[like.accountId] = like;\n  } else if (like.value.type === \"unlike\") {\n    delete likesByUsers[like.accountId];\n  }\n});\n\nconst numLikes = Object.keys(likesByUsers).length;\nconst hasLike =\n  context.accountId && (state.hasLike || !!likesByUsers[context.accountId]);\n\nconst data = {\n  index: {\n    like: JSON.stringify({\n      key: item,\n      value: {\n        type: hasLike ? \"unlike\" : \"like\",\n      },\n    }),\n  },\n};\n\nif (!hasLike && props.notifyAccountId) {\n  data.notify = JSON.stringify({\n    key: props.notifyAccountId,\n    value: {\n      type: \"like\",\n      item,\n    },\n  });\n}\n\nconst LikeButton = styled.CommitButton`\n  &:hover {\n    color: red;\n    background: pink;\n  }\n`;\n\nreturn (\n  <LikeButton\n    disabled={loading || !context.accountId}\n    className={`btn border-0 rounded-circle`}\n    data={data}\n    onCommit={() => State.update({ hasLike: !hasLike })}\n    title={hasLike ? \"Unlike\" : \"Like\"}\n  >\n    {loading ? (\n      \"Loading\"\n    ) : hasLike ? (\n      <i className=\"bi bi-heart-fill\"></i>\n    ) : (\n      <i className=\"bi bi-heart\"></i>\n    )}\n    {numLikes > 0 ? numLikes : \"\"}\n  </LikeButton>\n);\n", "metadata": null, "branch": NaN, "widget_modules_used": null, "widget_url": "https://near.social/#/mob.near/widget/LikeButton", "branch.draft.": NaN, "branch.draft.metadata": NaN}