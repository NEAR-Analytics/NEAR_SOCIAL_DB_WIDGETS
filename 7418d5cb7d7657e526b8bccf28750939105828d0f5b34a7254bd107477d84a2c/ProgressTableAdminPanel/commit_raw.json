{"tx_hash": "AqFuCQqjKXHwkZNFGGykjXuZFxbUWhyPuPWXwcei9ZpP", "action_id_social": "FssUYSzfjgmkW6TW5a4rfzvnngi6KYe15crjFyG9Hheb-0-widget", "block_id": 92366615, "block_timestamp": "2023-05-21T10:28:00.350Z", "signer_id": "7418d5cb7d7657e526b8bccf28750939105828d0f5b34a7254bd107477d84a2c", "widget_name": "ProgressTableAdminPanel", "source_code": "const DashboardWrapper = styled.div`\nmargin: 50px auto;\nmax-width: 90%; \n\n`;\nconst FormWrapper = styled.div`\ndisplay: flex;\nflex-flow: column;\n`;\n\nconst ItemsListWrapper = styled.div`\n\n`;\nconst SingleItem = styled.div`\nposition: relative;\ndisplay: flex;\np {\n  margin-right: 20px;\n}\n\n`;\n\nconst RemoveItemBtn = styled.div`\n  position: relative;\n  color: red;\n  margin-top: 2px;\n  width: 22px;\n  height: 22px;\n  font-size: 22px;\n  transform: rotate(45deg);\n  cursor: pointer;\n \n`;\nconst accountId = context.accountId;\n\nif (!accountId) {\n  return \"Please sign in with NEAR wallet\";\n}\n\nlet items = Social.get(`${accountId}/testWidget/**`);\nif (items !== null || items !== undefined) {\n  items;\n}\n\nconst myState = State.init({\n  key: \"\",\n  value: \"\",\n  allItems: items ? items : {},\n});\n\nfunction addItem() {\n  let currItems = myState.allItems;\n  //If key has space\n  let key = myState.key.replace(/ /g, \"-\");\n  currItems[key] = myState.value;\n\n  State.update({\n    key: \"\",\n    value: \"\",\n    allItems: currItems,\n  });\n}\n\nfunction removeItemFromState(key) {\n  console.log(\"KEY\", key);\n  let newObjState = { ...myState.allItems };\n  delete newObjState[key];\n\n  State.update({\n    allItems: newObjState,\n  });\n\n  console.log(\"After delete\", myState.allItems);\n}\n\nreturn (\n  <DashboardWrapper>\n    <h1>Existing Items</h1>\n    <ItemsListWrapper>\n      {Object.entries(myState.allItems).map((item, index) => (\n        <SingleItem>\n          <p>\n            {item[0]} : {item[1]}\n          </p>\n          <RemoveItemBtn onClick={() => removeItemFromState(item[0])}>\n            +\n          </RemoveItemBtn>\n        </SingleItem>\n      ))}\n    </ItemsListWrapper>\n\n    <FormWrapper>\n      <h1>Add new item: </h1>\n      <label for=\"key\">Key: </label>\n      <input\n        type=\"text\"\n        onChange={(e) => State.update({ key: e.target.value })}\n        value={myState.key}\n        id=\"key\"\n      />\n      <label for=\"value\">Value: </label>\n      <input\n        type=\"number\"\n        id=\"value\"\n        value={myState.value}\n        onChange={(e) => State.update({ value: e.target.value })}\n      />\n      <div>\n        <button onClick={addItem}>Add item</button>\n        <CommitButton data={{ testWidget: myState.allItems }}>\n          Upload data\n        </CommitButton>\n      </div>\n    </FormWrapper>\n  </DashboardWrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/7418d5cb7d7657e526b8bccf28750939105828d0f5b34a7254bd107477d84a2c/widget/ProgressTableAdminPanel", "__row_index": 25}