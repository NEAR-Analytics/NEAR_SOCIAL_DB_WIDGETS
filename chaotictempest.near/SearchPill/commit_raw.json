{"tx_hash": "AQ8LN1qFEamcvm843dJpyHq8D2T437v3r5dEQ3jcpVTi", "action_id_social": "49tQ6uFgw2EHeq1A65h3PdU83K16dsgf1TarNPvQi48n-0-widget", "block_id": 86490366, "block_timestamp": "2023-03-03 21:23:31.713", "signer_id": "chaotictempest.near", "widget_name": "SearchPill", "source_code": "const SEARCH_API_KEY = props.searchApiKey ?? \"57ad1944e94432510f067a6e3d13f022\";\nconst APPLICATION_ID = props.appId ?? \"B6PI9UKKJT\";\nconst INDEX = props.index ?? \"test_near-social-feed\";\nconst API_URL =\n  props.apiUrl ??\n  `https://${APPLICATION_ID}-dsn.algolia.net/1/indexes/${INDEX}/query?`;\n\nconst fetchSearchHits =\n  props.fetchSearchHits ??\n  ((query, { pageNumber, optionalFilters }) => {\n    let body = {\n      query,\n      page: pageNumber ?? 0,\n      optionalFilters: optionalFilters ?? [\n        \"categories:profile<score=3>\",\n        \"categories:widget<score=2>\",\n        \"categories:post<score=1>\",\n        \"categories:comment<score=0>\",\n      ],\n    };\n\n    return asyncFetch(API_URL, {\n      body: JSON.stringify(body),\n      headers: {\n        \"Content-Type\": \"application/json; charset=UTF-8\",\n        \"X-Algolia-Api-Key\": SEARCH_API_KEY,\n        \"X-Algolia-Application-Id\": APPLICATION_ID,\n      },\n      method: \"POST\",\n    });\n  });\n\nconst computeResults = (term) => {\n  State.update({\n    term,\n  });\n\n  fetchSearchHits(term, 0).then((result) => {\n    State.update({\n      result,\n    });\n\n    if (props.onChange) {\n      props.onChange({ term, result });\n    }\n  });\n};\n\nconst Wrapper = styled.div`\n  width: 100%;\n  height: 40px;\n  position: relative;\n\n  .bi-search {\n      position: absolute;\n      top: 0;\n      left: 18px;\n      z-index: 100;\n      font-size: 14px;\n      line-height: 40px;\n      color: #687076;\n  }\n\n  .input-group {\n      height: 100%;\n  }\n\n  input {\n      padding: 0 14px 0 42px;\n      border: 1px solid #D0D5DD !important;\n      background: #FFFFFF;\n      border-radius: 100px;\n  }\n\n  button {\n      border-color: #D0D5DD !important;\n      border-radius: 0 100px 100px 0 !important;\n      border-left: none !important;\n      background: #fff !important;\n      color: #687076 !important;\n\n      &:hover, &:focus {\n          color: #000 !important;\n      }\n  }\n\n  @media (max-width: 500px) {\n      width: 100%;\n  }\n`;\n\nreturn (\n  <Wrapper>\n    <i className=\"bi bi-search\"></i>\n    <div className=\"input-group\">\n      <input\n        type=\"text\"\n        className={`form-control ${state.term ? \"border-end-0\" : \"\"}`}\n        value={state.term ?? \"\"}\n        onChange={(e) => computeResults(e.target.value)}\n        placeholder={props.placeholder ?? `Search`}\n      />\n\n      {state.term && (\n        <button\n          className=\"btn btn-outline-secondary border border-start-0\"\n          type=\"button\"\n          onClick={() => computeResults(\"\")}\n        >\n          <i className=\"bi bi-x\"></i>\n        </button>\n      )}\n    </div>\n\n    {props.debug && <pre>{JSON.stringify(state.result, undefined, 2)}</pre>}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chaotictempest.near/widget/SearchPill"}