{"tx_hash": "2W4BobqBx8jem5Ki9VSuENExVmc2Gd7pDmL4TpUh9Mqn", "action_id_social": "8SxLpJF94nAuNFwzVBjXd6LpqEtVHFS8s5QNDFFJFPqa-0-widget", "block_id": 78114304, "block_timestamp": "2022-11-10 06:28:48.132", "signer_id": "kasodon.near", "widget_name": "Meme", "source_code": "const accountId = props.accountId ?? context.accountId;\nlet blockHeight = props.blockHeight ? parseInt(props.blockHeight) : undefined;\nconst profile = Social.getr(`${accountId}/profile`);\nconst meme = props.meme ?? Social.getr(`${accountId}/post/meme`, blockHeight);\n\nif (!meme) {\n  return \"Loading\";\n}\n\nif (!props.meme && !blockHeight) {\n  blockHeight = Social.keys(`${accountId}/post/meme`, undefined, {\n    return_type: \"BlockHeight\",\n  })[accountId].post.meme;\n  if (!blockHeight) {\n    return \"Loading\";\n  }\n}\n\nconst memeTimeMs = props.meme\n  ? Date.now()\n  : parseFloat(Near.block(blockHeight).header.timestamp_nanosec) / 1e6;\n\nconst url = meme.image.ipfs_cid\n  ? `https://ipfs.near.social/ipfs/${meme.image.ipfs_cid}`\n  : null;\n\nconst profileLink = (c) => (\n  <a\n    className=\"text-decoration-none link-dark\"\n    href={`#/mob.near/widget/ProfilePage?accountId=${accountId}`}\n  >\n    {c}\n  </a>\n);\n\nconst timeAgo = (diffSec) =>\n  diffSec < 60000\n    ? `${(diffSec / 1000) | 0} seconds ago`\n    : diffSec < 3600000\n    ? `${(diffSec / 60000) | 0} minutes ago`\n    : diffSec < 86400000\n    ? `${(diffSec / 3600000) | 0} hours ago`\n    : `${(diffSec / 86400000) | 0} days ago`;\n\nreturn (\n  <div\n    style={{\n      backgroundColor: \"#FAF8D4\",\n      maxWidth: \"37.5rem\",\n      maxHeight: \"31.25rem\",\n      borderRadius: \"40px\",\n      padding: \"10px\",\n      border: \"3px solid #FEFFFE\",\n    }}\n    className=\"meme-single d-flex flex-column justify-content-between hover-shadow\"\n  >\n    <div\n      style={{ marginLeft: \"20px\", height: \"7%\" }}\n      className=\"profile d-flex align-items-center\"\n    >\n      <div style={{}}>\n        {profileLink(\n          <Widget\n            src=\"kasodon.near/widget/MemeProfileImage\"\n            props={{ accountId }}\n          />\n        )}\n      </div>\n      <div className=\"profile-text\">\n        <h4\n          style={{\n            fontSize: \"16px\",\n            marginBottom: \"2px\",\n            fontFamily: \"Tahoma, sans-serif\",\n            fontWeight: \"bold\",\n          }}\n          className=\"m-0 text-capitalize\"\n        >\n          {profile.name.length > 20\n            ? `${profile.name.substring(0, 20)}...`\n            : profile.name}\n        </h4>\n        <p\n          style={{ fontSize: \"14px\", fontFamily: \"Tahoma, sans-serif\" }}\n          className=\"m-0 text-lowercase\"\n        >\n          {accountId.length > 30\n            ? `@${accountId.substring(0, 30)}...`\n            : `@${accountId}`}\n        </p>\n      </div>\n    </div>\n    <div\n      style={{\n        height: \"68%\",\n        width: \"100%\",\n        background: \"#060d19\",\n        borderRadius: \"30px\",\n      }}\n      className=\"meme-img hover-zoom\"\n    >\n      <img\n        style={{\n          height: \"100%\",\n          width: \"100%\",\n          objectFit: \"contain\",\n          borderRadius: \"30px\",\n          backgroundSize: \"contain\",\n        }}\n        src={url}\n        alt={meme.title}\n      />\n    </div>\n    <div\n      style={{ width: \"100%\", marginLeft: \"20px\", marginBottom: \"15px\" }}\n      className=\"meme-detail\"\n    >\n      <div className=\"meme-detail-text\" style={{}}>\n        {meme.title && (\n          <h4\n            style={{\n              margin: \"0\",\n              fontSize: \"18px\",\n              textTransform: \"capitalize\",\n              fontFamily: \"Tahoma, sans-serif\",\n              fontWeight: \"bold\",\n            }}\n          >\n            {meme.title.length > 25\n              ? `${meme.title.substring(0, 25)}...`\n              : meme.title}\n          </h4>\n        )}\n        {meme.description && (\n          <p\n            style={{\n              margin: \"0\",\n              fontSize: \"15px\",\n              textTransform: \"lowercase\",\n            }}\n          >\n            {meme.description}\n            {meme.description.length > 40\n              ? `${meme.description.substring(0, 40)}...`\n              : meme.description}\n          </p>\n        )}\n      </div>\n      <div\n        style={{\n          width: \"90%\",\n          display: \"flex\",\n          justifyContent: \"space-between\",\n          alignItems: \"center\",\n          marginTop: \"5px\",\n        }}\n        classNmae=\"meme-detail-note\"\n      >\n        <div className=\"icons\" style={{}}>\n          <span style={{ marginRight: \"7px\" }} className=\"\">\n            <i className=\"bi bi-star me-1\"></i>4\n          </span>\n          <span style={{ marginRight: \"7px\" }} className=\"\">\n            <i className=\"bi bi-chat-square me-1\"></i>20\n          </span>\n          <span style={{ marginRight: \"7px\" }} className=\"\">\n            <i className=\"bi bi-reply me-1\"></i>1\n          </span>\n        </div>\n        <div className=\"timestamp\" style={{}}>\n          <span className=\"\">\n            <i className=\"bi bi-clock me-1\"></i>\n            {timeAgo(Date.now() - memeTimeMs)}\n          </span>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kasodon.near/widget/Meme", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.name": NaN, "metadata.tags.item": NaN, "metadata.tags.meme": NaN, "metadata.tags.post": NaN}