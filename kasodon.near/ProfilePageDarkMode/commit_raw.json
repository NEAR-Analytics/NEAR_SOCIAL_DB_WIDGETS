{"tx_hash": "35sRJ9tBiBaYXgGa5uKVFuo8tv1DtNrET7G1YWkrk5M3", "action_id_social": "5jPhBtVET8vMyei75seGnqPhpSarrWPvbUXrfnsfV8PY-0-widget", "block_id": 78308722, "block_timestamp": "2022-11-12 23:12:58.496", "signer_id": "kasodon.near", "widget_name": "ProfilePageDarkMode", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\n\nconst showEditButton =\n  !props.profile && accountId && accountId === context.accountId;\n\nconst name = profile.name;\nconst description = profile.description;\nconst image = profile.image;\nconst backgroundImage = profile.backgroundImage;\nconst tags = Object.keys(profile.tags ?? {});\n\nconst nfts = Near.view(contractId, \"nft_tokens_for_owner\", {\n  account_id: accountId,\n  from_index: \"0\",\n  limit: 200,\n});\n\nconsole.log(\"NFTs:\", nfts);\n\nconst f = fetch(\n  `https://api.kitwallet.app/account/${accountId}/likelyNFTsFromBlock`\n);\n\nif (!f.ok) {\n  return \"Loading\";\n}\n\nconst allNfts = f.body.list;\n\nconst url =\n  (image.ipfs_cid\n    ? `https://ipfs.near.social/ipfs/${image.ipfs_cid}`\n    : image.url) ||\n  \"https://images.unsplash.com/photo-1528731708534-816fe59f90cb?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80\";\n\nconst bg =\n  (backgroundImage.ipfs_cid\n    ? `https://ipfs.near.social/ipfs/${backgroundImage.ipfs_cid}`\n    : backgroundImag.url) ||\n  \"https://images.unsplash.com/photo-1451187580459-43490279c0fa?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2072&q=80\";\n\nconst linktree = Object.entries(profile.linktree ?? {});\nconst linktreeElements = {\n  website: {\n    prefix: \"https://\",\n    icon: \"bi-globe2\",\n  },\n  github: {\n    prefix: \"https://github.com/\",\n    icon: \"bi-github\",\n  },\n  twitter: {\n    prefix: \"https://twitter.com/\",\n    icon: \"bi-twitter\",\n  },\n  telegram: {\n    prefix: \"https://t.me/\",\n    icon: \"bi-telegram\",\n  },\n};\n\nconst linktreeObjects = linktree.map((o) => {\n  const key = o[0];\n  let value = o[1];\n  if (!value) {\n    return null;\n  }\n  const e = linktreeElements[key];\n  if (e.prefix) {\n    value = value && value.replace(e.prefix, \"\");\n  }\n  const icon = e.icon ? <i className={`bi ${e.icon ?? \"\"}`}> </i> : \"\";\n  return e.prefix ? (\n    <a href={`${e.prefix}${value}`}>\n      {icon}\n      {value}\n    </a>\n  ) : (\n    <div>\n      {key}: {icon}\n      {value}\n    </div>\n  );\n});\n\nconst Profile = styled.div`\n    margin: 0;\n    z-index: 1;\n    padding: 40px;\n    background: #111315;\n    font-family: Tahoma, sans-serif;\n    color: #FEFFFE;\n    `;\nconst Header = styled.div`\n    margin-bottom: 32px;\n    `;\nconst HeaderText = styled.h2`\n    margin: 0;\n    font-weight: 700;\n    `;\nconst Detail = styled.div`\n    width: 100%;\n    background: #1A1D1F;\n    border-radius: 10px;\n    margin-bottom: 3rem;\n    `;\nconst Cover = styled.div`\n    height: 180px;\n    width: 100%;\n    position: relative;\n    `;\nconst Edit = styled.a`\n    position: absolute;\n                top: 15px;\n                right: 15px;\n                text-transform: capitalize;\n                border-radius: 6px;\n                padding: 7px 20px;\n                color: #FEFFFE;\n                font-weight: 500;\n                background: hsla(0,0%,100%,.30) border-box;\n                text-shadow: 0 1px 1px hsla(0,0%,100%,.3);\n\t            overflow: hidden;\n                border: none;\n                text-decoration: none;\n                @media only screen and (max-width: 540px) {\n                    font-size: 14px;\n                    padding: 5px 14px;\n                }\n                &::before {\n                    content: '';\n\t                position: absolute;\n\t                top: 0; right: 0; bottom: 0; left: 0;\n\t                margin: -30px;\n\t                z-index: -1;\n\t                -webkit-filter: blur(20px);\n\t                filter: blur(20px);\n                }\n    `;\nconst CoverImage = styled.img`\n    object-fit: cover;\n    background-size: cover;\n                height: 180px;\n                width: 100%;\n                border-top-left-radius: 10px;\n                border-top-right-radius: 10px;\n    `;\nconst Prop = styled.div`\n    width: 100%;\n            display: flex;\n            flex-direction: column;\n            padding: 24px;\n    `;\nconst Media = styled.div`\n    display: flex;\n                flex-direction: row;\n                justify-content: space-between;\n                width: 23%;\n                @media only screen and (max-width: 1100px) {\n                    width: 32%;\n                }\n                @media only screen and (max-width: 940px) {\n                    width: 38%;\n                }\n                @media only screen and (max-width: 780px) {\n                    width: 45%;\n                }\n                @media only screen and (max-width: 640px) {\n                    width: 58%;\n                }\n                @media only screen and (max-width: 540px) {\n                    width: 100%;\n                    flex-direction: column;\n                    align-items: center;\n                    align-content: center;\n                }\n    `;\nconst ProfileImage = styled.img`\n    width: 160px;\n                    height: 160px;\n                    border-radius: 100%;\n                    z-index: 100;\n                    margin-top: -100px;\n                    border: 5px solid #060d19;\n                    object-fit: cover;\n    background-size: cover;\n                    @media only screen and (max-width: 540px) {\n                        margin-bottom: 10px;\n                    }\n    `;\nconst PropText = styled.div`\n    @media only screen and (max-width: 540px) {\n        text-align: center;\n    }\n    h4 {\n        font-weight: 700;\n        text-transform: capitalize;\n    }\n    p {\n        font-weight: 500;\n        text-transform: lowercase;\n    }\n    `;\nconst Socials = styled.div`\n    margin-top: 30px;\n                display: flex;\n                flex-direction: column;\n    `;\nconst Tags = styled.div`\n    display: inline-flex;\n                    @media only screen and (max-width: 540px) {\n                        display: flex;\n                        justify-content: space-between;\n                        flex-wrap: wrap;\n                    }\n                    p {\n                        margin: 0;\n                        margin-right: 10px;\n                        background-color: #11151C;\n                        color: #a4a5a5;\n                        padding: 5px 10px;\n                        font-weight: 600;\n                        border-radius: 15px;\n                        @media only screen and (max-width: 540px) {\n                            width: 32%;\n                            margin-bottom: 2%;\n                            margin-right: 0;\n                            padding: 4px;\n                            text-align: center;\n                        }\n                        @media only screen and (max-width: 420px) {\n                            font-size: 12px;\n                        }\n                    }\n    `;\nconst Links = styled.div`\n    display: inline-flex;\n                    margin-bottom: 25px;\n                    @media only screen and (max-width: 640px) {\n                        display: flex;\n                        justify-content: space-between;\n                        flex-wrap: wrap;\n                    }\n                    a {\n                        text-decoration: none;\n                        margin-right: 15px;\n                        font-size: 15px;\n                        font-weight: 500;\n                        text-transform: lowercase;\n                        background: transparent;\n                        color: #3D7EFF;\n                        padding: 7px 20px;\n                        border: 1px solid #3D7EFF;\n                        border-radius: 6px;\n                        @media only screen and (max-width: 640px) {\n                            width: 46%;\n                            margin-bottom: 2%;\n                            margin-right: 0;\n                        }\n                    }\n    `;\nconst Data = styled.div`\n    width: 100%;\n        background: #1A1D1F;\n        border-radius: 10px;\n        margin-bottom: 3rem;\n        padding: 24px;\n        .nav {\n            .nav-item {\n                .nav-link {\n                    color: #535557;\n                    background: #111315;\n                    margin-right: 15px;\n                    padding: 10px 20px;\n                    @media only screen and (max-width: 420px) {\n                        margin-right: 8px;\n                        padding: 10px 20px;\n                    }\n                    &.active {\n                        color: #FEFFFE;\n                        background-color: #3D7EFF;\n                    }\n                }\n            }\n        }\n        .tab-content {\n            .tab-pane {\n                &.nft {\n                    display: none;\n                    &.active {\n                        display: flex;\n                        flex-wrap: wrap;\n                        justify-content: space-between;\n                    }\n                    .nft-single {\n                        width: 32%;\n                        padding-bottom: 18%;\n                        margin-bottom: 2%;\n                        background: #111315;\n                        border-radius: 12px;\n                        height: 300px;\n                        padding: 15px;\n                        display: flex;\n                        flex-direction: column;\n                        justify-content: space-between;\n                        @media only screen and (max-width: 780px) {\n                            width: 48%;\n                        }\n                        @media only screen and (max-width: 540px) {\n                            width: 100%;\n                            margin-bottom: 5%;\n                        }\n                        img {\n                            width: 100%;\n                            height: 70%;\n                            object-fit: cover;\n                            border-radius: 6px;\n                        }\n                        a {\n                            width: 100%;\n                            text-align: center;\n                            font-size: 20px;\n                        font-weight: 600;\n                        text-transform: capitalize;\n                        text-decoration: none;\n                        background: #3d7eff;\n                        color: #c5d8ff;\n                        padding: 12px 0;\n                        border-radius: 6px;\n                        @media only screen and (max-width: 940px) {\n                            font-size: 18px;\n                            padding: 10px 0;\n                        }\n                        @media only screen and (max-width: 540px) {\n                            padding: 12px 0;\n                            font-size: 20px;\n                        }\n                        @media only screen and (max-width: 420px) {\n                            font-size: 18px;\n                            padding: 10px 0;\n                        }\n                        }\n                    }\n                }\n            }\n        }\n    `;\n\nreturn (\n  <Profile>\n    <Header>\n      <HeaderText>My Profile</HeaderText>\n    </Header>\n    <Detail>\n      <Cover>\n        {showEditButton && (\n          <Edit href=\"#/mob.near/widget/ProfileEditor\">Edit Profile</Edit>\n        )}\n        {backgroundImage && <CoverImage src={bg} />}\n      </Cover>\n      <Prop>\n        <Media>\n          <ProfileImage src={url} />\n          <PropText>\n            <h4>{name}</h4>\n            <p>@{accountId}</p>\n          </PropText>\n        </Media>\n        <Socials>\n          <Links>{linktreeObjects}</Links>\n          {tags.length > 0 && (\n            <Tags>\n              {tags.map((tag) => (\n                <p>#{tag}</p>\n              ))}\n            </Tags>\n          )}\n        </Socials>\n      </Prop>\n    </Detail>\n    <Data>\n      <ul class=\"nav nav-pills mb-4\" id=\"pills-tab\" role=\"tablist\">\n        <li class=\"nav-item\" role=\"presentation\">\n          <button\n            class=\"nav-link active\"\n            id=\"pills-bio-tab\"\n            data-bs-toggle=\"pill\"\n            data-bs-target=\"#pills-bio\"\n            type=\"button\"\n            role=\"tab\"\n            aria-controls=\"pills-bio\"\n            aria-selected=\"true\"\n          >\n            Bio\n          </button>\n        </li>\n        <li class=\"nav-item\" role=\"presentation\">\n          <button\n            class=\"nav-link\"\n            id=\"pills-nft-tab\"\n            data-bs-toggle=\"pill\"\n            data-bs-target=\"#pills-nft\"\n            type=\"button\"\n            role=\"tab\"\n            aria-controls=\"pills-nft\"\n            aria-selected=\"false\"\n          >\n            NFTs\n          </button>\n        </li>\n        <li class=\"nav-item\" role=\"presentation\">\n          <button\n            class=\"nav-link\"\n            id=\"pills-widget-tab\"\n            data-bs-toggle=\"pill\"\n            data-bs-target=\"#pills-widget\"\n            type=\"button\"\n            role=\"tab\"\n            aria-controls=\"pills-widget\"\n            aria-selected=\"false\"\n          >\n            Widgets\n          </button>\n        </li>\n      </ul>\n      <div class=\"tab-content\" id=\"pills-tabContent\">\n        <div\n          class=\"tab-pane fade in show active\"\n          id=\"pills-bio\"\n          role=\"tabpanel\"\n          aria-labelledby=\"pills-bio-tab\"\n        >\n          <p>\n            <Markdown text={description} />\n          </p>\n        </div>\n        <div\n          class=\"tab-pane fade nft\"\n          id=\"pills-nft\"\n          role=\"tabpanel\"\n          aria-labelledby=\"pills-nft-tab\"\n        >\n          <div className=\"nft-single\">\n            <img src=\"https://images.unsplash.com/photo-1642525027649-00d7397a6d4a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80\" />\n            <a href=\"#\">View Details</a>\n          </div>\n          <div className=\"nft-single\">\n            <img src=\"https://images.unsplash.com/photo-1642525027649-00d7397a6d4a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80\" />\n            <a href=\"#\">View Details</a>\n          </div>\n          <div className=\"nft-single\">\n            <img src=\"https://images.unsplash.com/photo-1642525027649-00d7397a6d4a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80\" />\n            <a href=\"#\">View Details</a>\n          </div>\n          <div className=\"nft-single\">\n            <img src=\"https://images.unsplash.com/photo-1642525027649-00d7397a6d4a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80\" />\n            <a href=\"#\">View Details</a>\n          </div>\n          <div className=\"nft-single\">\n            <img src=\"https://images.unsplash.com/photo-1642525027649-00d7397a6d4a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=2070&q=80\" />\n            <a href=\"#\">View Details</a>\n          </div>\n        </div>\n        <div\n          class=\"tab-pane fade\"\n          id=\"pills-widget\"\n          role=\"tabpanel\"\n          aria-labelledby=\"pills-widget-tab\"\n        >\n          ...\n        </div>\n      </div>\n    </Data>\n  </Profile>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kasodon.near/widget/ProfilePageDarkMode"}