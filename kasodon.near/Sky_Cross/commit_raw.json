{"tx_hash": "Gca9QnMJmFZRoxyBfVN827jufaZBw1JSmm367vMjqVWQ", "action_id_social": "3TxQ9WHG7FJP9EdnZuWqpacSJnpdbe51Z6Eyq2h1DRyc-0-widget", "block_id": 85995109, "block_timestamp": "2023-02-25 06:34:04.062", "signer_id": "kasodon.near", "widget_name": "Sky_Cross", "source_code": "/* Created by duocelot and kasodon */\n/* Sky Cross Project */\n\nconst accountId = props.accountId ?? context.accountId;\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\nconst image = profile.image;\n\nconst fonty = fetch(\n  \"https://fonts.googleapis.com/css2?family=Orbitron:wght@500&family=Press+Start+2P&display=swap\"\n).body;\n\nif (!fonty) {\n  return;\n}\n\nconst Theme = styled.div`\n* {\n   font-family: 'Orbitron', sans-serif;\nfont-family: 'Press Start 2P', cursive;\n}\n  ${fonty}\n`;\n\nconst App = styled.div`\n  margin: 0;\n  padding: 1rem;\n  width: 100%;\n  height: 80vh;\n  background-color: #1E1E1E;\n  background-image: url('https://ik.imagekit.io/duOCELOT/assets/bgthemev3?ik-sdk-version=javascript-1.4.3&updatedAt=1677258431670');\n  background-size: cover;\n  background-position: center;\n  color: #ffffff;\n  display: flex;\n  flex-direction: column;\n  justify-content: flex-start;\n`;\n\nconst Nav = styled.ul`\nposition: absolute;\n  bottom: 3rem;\n  height: 6rem;\n  align-items: center !important;\n  width: 47% !important;\n  border-radius: 0px;\n  backdrop-filter: blur(10px);\n  background-color: rgba(9,5,19,.4);\n  margin-bottom: 3rem !important;\n  margin-top: 3rem !important;\n  --bs-nav-pills-border-radius: 0.375rem;\n  --bs-nav-pills-link-active-color: #f2f2f2;\n  --bs-nav-pills-link-active-bg: #2D2672 !important;\n`;\n\nconst NavLink = styled.button`\n  font-size: 1.7rem !important;\n  font-weight: 900 !important;\n  color: #f2f2f2 !important;\n  text-decoration: none !important;\n  `;\n\nconst Stat = styled.div`\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width: 44vw;\n  height: 44vh;\n  border-radius: 12px;\n  backdrop-filter: blur(10px);\n  background-color: rgba(9, 5, 19, 0.5);\n`;\n\nconst StatRow = styled.div`\n  display: flex !important;\n  justify-content: center !important;\n  height: 100% !important;\n`;\n\nconst PlayerIcon = styled.div`\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  .player-image {\n   width: 300px;\n   height: 300px;\n   border-radius: 30px;\n  }\n`;\n\nconst PlayerIconImg = styled.img`\n  width: 300px;\n  height: 300px;\n  border-radius: 30px;\n`;\n\nconst PlayerDetail = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: flex-start;\n  padding: 12rem 4rem;\n`;\n\nconst PlayerStatPara = styled.p`\n  font-size: 2rem;\n  `;\n\nconst PlayerStatParaSpan = styled.span`\n  color: #FFD852;\n  `;\n\nconst PlayerActions = styled.div`\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  width: 70%;\n`;\n\nconst PlayerActionsFilledButton = styled.button`\n\n  background: #2a2a2a;\n  color: #FFD852;\n  border: none;\n  font-size: 1.2rem;\n  padding: 1.2rem 3rem;\n  border-radius: 12px;\n`;\n\nconst PlayerActionsOutlineButton = styled.button`\n  background: #2a2a2a;\n  color: #FFD852;\n  border: none;\n  font-size: 1.2rem;\n  padding: 1.2rem 3rem;\n  border-radius: 12px;\n`;\n\nconst KeysPara = styled.p`\nposition: absolute;\n  bottom: 3rem;\n  right: 3rem;\n  height: 6rem;\n  font-size: 1.4rem;\n`;\n\nconst KeysParaSpan = styled.span`\n  background-color: #FFD852;\n  color: #121212;\n  padding: .5rem 1rem;\n  font-weight: 900;\n  border-radius: 8px;\n  margin-right: .2rem;\n`;\n\nconst Leaderboard = styled.div`\n  width: 100%;\n`;\n\nconst LeaderboardScore = styled.div`\n  width: 100%;\n  margin-bottom: .7rem;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background-color: #121212;\n  font-size: 1.3rem;\n  height: 5rem;\n  padding: 2rem;\n  border-radius: 12px;\n`;\n\nconst Points = styled.p`\n  color: #FFD852;\n`;\n\nconst NoAuth = styled.div`\n  width: 100%;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  height: 70vh;\n  background-color: #1E1E1E;\n  color: #FFD852;\n`;\n\nconst NoAuthPara = styled.p`\nfont-size: 1.7rem;\ncolor: #FFD852;\nfont-weight: 600;\ntext-transform: capitalize\n`;\n\nconst scriptSrc = `\n<style>\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n#canvas1 {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  width:  82vw;\n  height: 82vh;\n  z-index: 100;\n  border: 4px solid white;\n  border-radius: 20px;\n  background: black;\n }\nimg {\n  display: none;\n}\n</style>\n<canvas id=\"canvas1\"></canvas>\n    <img id=\"playerImage\" src=\"https://ik.imagekit.io/onyedika/skycross/player_BIG_mq9uKo5ll.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939877107\" alt=\"\" />\n    <img id=\"layer1Image\" src=\"https://ik.imagekit.io/onyedika/skycross/1_JZI4rwmIY9.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939858101\" alt=\"\" />\n    <img id=\"layer2Image\" src=\"https://ik.imagekit.io/onyedika/skycross/2_nnjLeWkZZ.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676993058655\" alt=\"\" />\n    <img id=\"layer3Image\" src=\"https://ik.imagekit.io/onyedika/skycross/3_bfIr7gkw-1.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939859797\" alt=\"\" />\n    <img id=\"layer4Image\" src=\"https://ik.imagekit.io/onyedika/skycross/4_Gx3192487.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939859766\" alt=\"\" />\n    <img id=\"layer5Image\" src=\"https://ik.imagekit.io/onyedika/skycross/7_-0OacUA6m.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676993162515\" alt=\"\" />\n    <img id=\"flyImage\" src=\"https://ik.imagekit.io/onyedika/skycross/bomb_iG_K37qGR.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939859611\" alt=\"\"/>\n    <img id=\"plantImage\" src=\"https://ik.imagekit.io/duOCELOT/assets/cherry.png?ik-sdk-version=javascript-1.4.3&updatedAt=1677029658824\" alt=\"\"/>\n    <img id=\"spiderImage\" src=\"https://ik.imagekit.io/onyedika/skycross/enemy_spider_big_n3r4HKyjV.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939861559\" alt=\"\"/>\n    <img id=\"spiderBigImage\" src=\"https://ik.imagekit.io/onyedika/skycross/enemy_spider_big_n3r4HKyjV.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939861559\" alt=\"\"/>\n    <img id=\"fireTexture\" src=\"https://ik.imagekit.io/onyedika/skycross/fire_bwpPPyGYv.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939863595\" alt=\"\"/>\n    <img id=\"boomImage\" src=\"https://ik.imagekit.io/duOCELOT/assets/blast.png?ik-sdk-version=javascript-1.4.3&updatedAt=1677030038390\" alt=\"\"/>\n    <img id=\"liveImage\" src=\"https://ik.imagekit.io/duOCELOT/assets/apple.png?ik-sdk-version=javascript-1.4.3&updatedAt=1677036870013\" alt=\"\"/>\n    <img id=\"fireBallImage\" src=\"https://ik.imagekit.io/onyedika/skycross/projectile_8OBktN6_A.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939866264\" alt=\"\"/>\n    <img id=\"blastImage\" src=\"https://ik.imagekit.io/onyedika/skycross/blast_ilksOODqF.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939858435\" alt=\"\"/>\n    <img id=\"fruityImage\" src=\"https://ik.imagekit.io/onyedika/skycross/fruity_nBAzOrsrS.png?ik-sdk-version=javascript-1.4.3&updatedAt=1676939862429\" alt=\"\"/>\n    <script src=\"https://cdn.jsdelivr.net/gh/kasodon/Sky-cross@master/src/components/end.js\" type=\"module\">\n</script>\n    <script type=\"module\">\n    window.addEventListener(\"load\", function () {\n  const canvas = this.document.getElementById(\"canvas1\");\n  const ctx = canvas.getContext(\"2d\");\n  canvas.width = window.innerWidth;\n  canvas.height = window.innerHeight;\n  class Game {\n            constructor(width, height) {\n                this.width = width;\n                this.height = height;\n            }\n            start() {\n                this.background = new Background(this);\n                this.groundMargin = 10 * this.background.scaleFactor;\n                this.player = new Player(this);\n                this.projectile = new Projectile(this);\n                this.input = new InputHandler(this);\n                this.speed = 0.9;\n                this.maxSpeed = 3;\n                this.enemies = [];\n                this.particles = [];\n                this.maxParticles = 1130;\n                this.collisions = [];\n                this.floatingMessages = [];\n                this.enemyTimer = 0;\n                this.enemyInterval = 1000 + Math.random() * 2.1;\n                this.debug = false;\n                this.score = 0;\n                this.fontFamily = \"Press Start 2P', cursive\"\n                this.fontColor = \"black\";\n                this.ui = new UI(this);\n                this.time = 0;\n                this.maxTime = 100000000;\n                this.lives = 20;\n                this.gameOver = false;\n                this.player.currentState = this.player.states[0];\n                this.player.currentState.enter();\n              \n            }\n            draw(context) {\n                this.background.draw(context);\n                this.player.draw(context);\n                this.enemies.forEach((e) => {\n                    e.draw(context);\n                });\n                // handle particles\n                this.particles.forEach((p) => {\n                    p.draw(context);\n                });\n                // handle collisions\n                this.collisions.forEach((c) => {\n                    c.draw(context);\n                });\n                // handle floating messages\n                this.floatingMessages.forEach((m, index) => {\n                    m.draw(context);\n                });\n                this.ui.draw(context);\n            }\n            update(delta) {\n                this.time += delta;\n                if (this.time > this.maxTime) {\n                    this.gameOver = true;\n                }\n                this.background.update();\n                this.player.update(this.input.keys, delta);\n                // this.projectile.update();\n                // handle enemies\n                if (this.enemyTimer > this.enemyInterval) {\n                    this.addEnemy();\n                    this.enemyTimer = 0;\n                } else {\n                    this.enemyTimer += delta;\n                }\n                this.enemies.forEach((e) => {\n                    e.update(delta);\n                });\n                this.enemies = this.enemies.filter((e) => !e.markForDeletion);\n                // handle particles\n                this.particles.forEach((p) => {\n                    p.update();\n                });\n                if (this.particles.length > this.maxParticles) {\n                    this.particles = this.particles.slice(0, this.maxParticles);\n                }\n                this.particles = this.particles.filter((p) => !p.markForDeletion);\n                // handle collisions\n                this.collisions.forEach((c) => {\n                    c.update(delta);\n                });\n                this.collisions = this.collisions.filter((c) => !c.markForDeletion);\n                // handle floating messages\n                this.floatingMessages.forEach((m) => {\n                    m.update();\n                });\n                this.floatingMessages = this.floatingMessages.filter((m) => !m.markForDeletion);\n            }\n            addEnemy() {\n                if (this.speed >= 1.9 && Math.random() < 0.05) {\n                    if (Math.random() > 0.9) {\n                        this.enemies.push(new GroundEnemy(this));\n                    } else {\n                        this.enemies.push(new ClimbingEnemy(this));\n                    }\n                } else if (this.speed > 0.6) {\n                    this.enemies.push(new FlyingEnemy(this));\n                }\n                const random = Math.random();\n                const flyingEnemyProbability = 0.1 + 0.05 * (this.time / 1000);\n                const groundEnemyProbability = 0.03 + 0.02 * (this.time / 1000);\n                const climbingEnemyProbability = 0.03 + 0.02 * (this.time / 1000);\n              \n                if (random < flyingEnemyProbability) {\n                  this.enemies.push(new FlyingEnemy(this));\n                } else if (random < flyingEnemyProbability + groundEnemyProbability && this.speed > 1.5) {\n                  this.enemies.push(new GroundEnemy(this));\n                } else if (random < flyingEnemyProbability + groundEnemyProbability + climbingEnemyProbability && this.speed > 1.2) {\n                  this.enemies.push(new ClimbingEnemy(this));\n                }\n              }\n              \n            \n        }\n        const game = new Game(canvas.width, canvas.height);\n        game.start();\n        function restartGame() {\n            game.start();\n            animate(0);\n        }\n        let lastTime = 0;\n        function animate(timestamp) {\n            const delta = timestamp - lastTime;\n            lastTime = timestamp;\n            ctx.clearRect(0, 0, canvas.width, canvas.height);\n            game.update(delta);\n            game.draw(ctx);\n            if (!game.gameOver) {\n                requestAnimationFrame(animate);\n            }\n        }\n        animate(0);\n        window.addEventListener(\"keydown\", (e) => {\n            if (e.key === \"r\" && game.gameOver) {\n                restartGame();\n            }\n        });\n    });\n    </script>\n`;\n\nreturn (\n  <Theme>\n    {accountId ? (\n      <App className=\"App\">\n        <Nav className=\"nav nav-pills\" id=\"pills-tab\" role=\"tablist\">\n          <li className=\"nav-item\" role=\"presentation\">\n            <NavLink\n              className=\"nav-link\"\n              id=\"pills-home-tab\"\n              data-bs-toggle=\"pill\"\n              data-bs-target=\"#pills-home\"\n              type=\"button\"\n              role=\"tab\"\n              aria-controls=\"pills-home\"\n              aria-selected=\"true\"\n            >\n              Start\n            </NavLink>\n          </li>\n          <li className=\"nav-item\" role=\"presentation\">\n            <NavLink\n              className=\"nav-link active\"\n              id=\"pills-profile-tab\"\n              data-bs-toggle=\"pill\"\n              data-bs-target=\"#pills-profile\"\n              type=\"button\"\n              role=\"tab\"\n              aria-controls=\"pills-profile\"\n              aria-selected=\"false\"\n            >\n              Game\n            </NavLink>\n          </li>\n          <li className=\"nav-item\" role=\"presentation\">\n            <NavLink\n              className=\"nav-link\"\n              id=\"pills-contact-tab\"\n              data-bs-toggle=\"pill\"\n              data-bs-target=\"#pills-contact\"\n              type=\"button\"\n              role=\"tab\"\n              aria-controls=\"pills-contact\"\n              aria-selected=\"false\"\n            >\n              Score\n            </NavLink>\n          </li>\n        </Nav>\n        <div className=\"tab-content\" id=\"pills-tabContent\">\n          <div\n            className=\"tab-pane fade\"\n            id=\"pills-home\"\n            role=\"tabpanel\"\n            aria-labelledby=\"pills-home-tab\"\n            tabindex=\"0\"\n          >\n            <Stat className=\"container-fluid stat\">\n              <StatRow className=\"row\">\n                <PlayerIcon className=\"player-icon col-4\">\n                  <Widget\n                    src=\"kasodon.near/widget/ProfileImageDarkMode\"\n                    props={{\n                      profile,\n                      accountId,\n                      imageClassName: \"player-image\",\n                      thumbnail: false,\n                    }}\n                  />\n                </PlayerIcon>\n                <PlayerDetail className=\"player-detail col-8\">\n                  <div className=\"player-stat\">\n                    <PlayerStatPara>\n                      <PlayerStatParaSpan>CAPTAIN:</PlayerStatParaSpan>\n                      {accountId}\n                    </PlayerStatPara>\n                    <PlayerStatPara>\n                      <PlayerStatParaSpan>Last Score:</PlayerStatParaSpan> 4221\n                    </PlayerStatPara>\n                  </div>\n                </PlayerDetail>\n              </StatRow>\n            </Stat>{\" \"}\n            <div>\n              <div className=\"controls\">\n                <div className=\"keys\">\n                  <KeysPara className=\"mb-3\">\n                    <KeysParaSpan>S</KeysParaSpan> hold to shoot\n                    <KeysParaSpan>\u2b06</KeysParaSpan>{\" \"}\n                    <KeysParaSpan>\u2b07</KeysParaSpan>{\" \"}\n                    <KeysParaSpan>\u2b05</KeysParaSpan>{\" \"}\n                    <KeysParaSpan>\u27a1</KeysParaSpan>{\" \"}\n                  </KeysPara>\n                </div>\n              </div>\n            </div>\n          </div>\n          <div\n            className=\"tab-pane fade show active\"\n            id=\"pills-profile\"\n            role=\"tabpanel\"\n            aria-labelledby=\"pills-profile-tab\"\n            tabindex=\"0\"\n          >\n            <iframe\n              srcDoc={scriptSrc}\n              style={{ height: \"740px\", width: \"100%\" }}\n            />\n          </div>\n          <div\n            className=\"tab-pane fade\"\n            id=\"pills-contact\"\n            role=\"tabpanel\"\n            aria-labelledby=\"pills-contact-tab\"\n            tabindex=\"0\"\n          >\n            <Leaderboard className=\"leaderboard\">\n              <LeaderboardScore className=\"score\">\n                <p className=\"num\">1</p>\n                <p className=\"name\">duocelot.near</p>\n                <Points className=\"points\">1234</Points>\n              </LeaderboardScore>\n              <LeaderboardScore className=\"score\">\n                <p className=\"num\">1</p>\n                <p className=\"name\">Kasodon.near</p>\n                <Points className=\"points\">1234</Points>\n              </LeaderboardScore>\n              <LeaderboardScore className=\"score\">\n                <p className=\"num\">1</p>\n                <p className=\"name\">duocelot.near</p>\n                <Points className=\"points\">1234</Points>\n              </LeaderboardScore>\n              <LeaderboardScore className=\"score\">\n                <p className=\"num\">1</p>\n                <p className=\"name\">Kasodon.near</p>\n                <Points className=\"points\">1234</Points>\n              </LeaderboardScore>\n              <LeaderboardScore className=\"score\">\n                <p className=\"num\">1</p>\n                <p className=\"name\">duocelot.near</p>\n                <Points className=\"points\">1234</Points>\n              </LeaderboardScore>\n              <LeaderboardScore className=\"score\">\n                <p className=\"num\">1</p>\n                <p className=\"name\">Kasodon.near</p>\n                <Points className=\"points\">1234</Points>\n              </LeaderboardScore>\n              <LeaderboardScore className=\"score\">\n                <p className=\"num\">1</p>\n                <p className=\"name\">duocelot.near</p>\n                <Points className=\"points\">1234</Points>\n              </LeaderboardScore>\n              <LeaderboardScore className=\"score\">\n                <p className=\"num\">1</p>\n                <p className=\"name\">Kasodon.near</p>\n                <Points className=\"points\">1234</Points>\n              </LeaderboardScore>\n            </Leaderboard>\n          </div>\n        </div>\n      </App>\n    ) : (\n      <NoAuth>\n        <NoAuthPara>\n          <div\n            style={{\n              width: \"512px\",\n              height: \"512px\",\n              backgroundSize: \"100%\",\n              backgroundPosition: \"center\",\n              backgroundRepeat: \"no-repeat\",\n              backgroundColor: \"white\",\n              position: \"flex\",\n              fontFamily: '\"Press Start 2P\", sans-serif',\n              alignItems: \"center\",\n              justifyContent: \"center\",\n            }}\n          >\n            <img\n              src=\"https://ik.imagekit.io/duOCELOT/assets/noship?ik-sdk-version=javascript-1.4.3&updatedAt=1677226846709\"\n              alt=\"ERROR 001\"\n              style={{\n                width: \"340px\",\n                margin: \"50px 40px 10px 80px\",\n                position: \"flex\",\n              }}\n            />\n            <h2\n              style={{\n                fontFamily: \"Press Start 2P\",\n                fontSize: \"14px\",\n                color: \"black\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n            >\n              ERROR 001: NO NEAR WALLET CONNECTED.{\" \"}\n            </h2>{\" \"}\n            <h3\n              style={{\n                fontFamily: \"Press Start 2P\",\n                fontSize: \"12px\",\n                color: \"black\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n            >\n              {\" \"}\n              Please connect with your near wallet or create one for free\n            </h3>\n            <a\n              href=\"https://shard.dog/go?url=https://near.social/#/duocelot.near/widget/Sky_Cross\"\n              style={{\n                fontFamily: \"Press Start 2P\",\n                fontSize: \"14px\",\n                color: \"black\",\n                display: \"flex\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n              }}\n            >\n              HERE\n            </a>\n          </div>\n        </NoAuthPara>\n      </NoAuth>\n    )}\n  </Theme>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/kasodon.near/widget/Sky_Cross", "metadata.description": NaN, "metadata.name": NaN, "metadata.image.ipfs_cid": NaN, "metadata.linktree.website": NaN, "metadata.tags.app": NaN, "metadata.tags.game": NaN, "metadata.tags.nft": NaN, "metadata.tags.hackathon": NaN}