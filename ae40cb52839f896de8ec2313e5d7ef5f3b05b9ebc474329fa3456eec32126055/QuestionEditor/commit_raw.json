{"tx_hash": "FAJ8MuppbzsBcw8dHb9QmbimVd8gHC2crTzhkShk78sF", "action_id_social": "7PTtAAomXuKsaWHNvM4GzFjhNM7GLJQ87UBjwpyy89Mq-0-widget", "block_id": 84207199, "block_timestamp": "2023-01-31 13:22:42.320", "signer_id": "ae40cb52839f896de8ec2313e5d7ef5f3b05b9ebc474329fa3456eec32126055", "widget_name": "QuestionEditor", "source_code": "const qId = props.qId ?? null;\nconst mode = \"Create\";\n\nconst labelStrings = props.labels ?? [];\nconst labels = labelStrings.map((s) => {\n  return { name: s };\n});\n\ninitState({\n  author_id: context.accountId,\n  labels,\n  title: props.title ?? \"\",\n  content: props.content ?? \"\",\n});\n\nconst setLabels = (labels) => {\n  let labelStrings = labels.map((o) => {\n    return o.name;\n  });\n  State.update({ labels, labelStrings });\n};\n\nconst existingLabelStrings = props.existingLabels;\nconst existingLabels = existingLabelStrings.map((s) => {\n  return { name: s };\n});\n\nconst labelEditor = (\n  <div className=\"col-lg-12  mb-2\">\n    Labels (multiple):\n    <Typeahead\n      multiple\n      labelKey=\"name\"\n      onChange={setLabels}\n      options={existingLabels}\n      placeholder=\"Frontend, NFT, Rust\"\n      selected={state.labels}\n      positionFixed\n      allowNew={false}\n    />\n  </div>\n);\n\nconst nameDiv = (\n  <div className=\"col-lg-12  mb-2\">\n    Title:\n    <input\n      type=\"text\"\n      value={state.title}\n      onChange={(event) => State.update({ title: event.target.value })}\n    />\n  </div>\n);\n\nconst contentDiv = (\n  <div className=\"col-lg-12  mb-2\">\n    {\" \"}\n    Content:\n    <Widget\n      src=\"mob.near/widget/Common.Compose\"\n      props={{\n        placeholder: \"\",\n        initialText: props.initialText,\n        onChange: ({ content }) => State.update({ content: content }),\n      }}\n    />\n  </div>\n);\n\nconst commitButton = (\n  <CommitButton\n    force\n    className=\"btn btn-primary\"\n    data={{\n      question: {\n        main: JSON.stringify({\n          title: state.title,\n          labels: state.labelStrings,\n          content: state.content,\n        }),\n      },\n      index: {\n        question: JSON.stringify({\n          key: \"main\",\n          value: { type: \"md\" },\n        }),\n      },\n    }}\n  >\n    Post\n  </CommitButton>\n);\n\nreturn (\n  <div className=\"card\">\n    <div class=\"card-body\">\n      <div className=\"row\">\n        {nameDiv}\n        {labelEditor}\n        {contentDiv}\n      </div>\n      {commitButton}\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/ae40cb52839f896de8ec2313e5d7ef5f3b05b9ebc474329fa3456eec32126055/widget/QuestionEditor"}