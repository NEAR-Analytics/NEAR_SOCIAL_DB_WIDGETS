{"tx_hash": "C3wcwtt7FxzQHet5izVXjb86q9j1AKvEiYEf5vZxq1mn", "action_id_social": "9qokgCM5WXVbqeVs29A6HYBxgwZ46jE51TU7VdLk3BKq-0-widget", "block_id": 94853585, "block_timestamp": "2023-06-23T15:44:54.363Z", "signer_id": "achildhoodhero.near", "widget_name": "chat-gpt.bos", "source_code": "// handle only ask once\n// handle waiting process to display\n\nconst queryURI = \"https://api.openai.com/v1/chat/completions\";\nconst token = \"Bearer <<API_KEY>>\";\nconst data = {\n  model: \"gpt-3.5-turbo\",\n  messages: [\n    {\n      role: \"user\",\n      content: \"plan a 30days trip to usa\",\n    },\n  ],\n  temperature: 1,\n  top_p: 1,\n  n: 1,\n  stream: false,\n  max_tokens: 100,\n  presence_penalty: 0,\n  frequency_penalty: 0,\n};\nconst fetchAskChatGPT = (queryURI) => {\n  return asyncFetch(queryURI, {\n    method: \"POST\",\n    headers: {\n      Authorization: token,\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify(data),\n  });\n};\n\nconst handleAskChatGPT = () => {\n  fetchAskChatGPT(queryURI).then((res) => {\n    // console.log(res);\n    console.log(res.body.choices[0].message.content);\n  });\n};\n\nconst allNumbers = Array.from(Array(1000).keys());\n\nState.init({\n  displayNums: [],\n  lastNumber: 0,\n});\n\nconst loadNumbers = (page) => {\n  allNumbers\n    .slice(state.lastNumber, state.lastNumber + 10)\n    .map((n) => numberToElem(n))\n    .forEach((i) => state.displayNums.push(i));\n  state.lastNumber += 10;\n  State.update();\n  console.log(\"loading more ...\");\n};\n\nconst numberToElem = (number) => <div> {number} </div>;\n\nreturn (\n  <div>\n    <button class=\"btn btn-success\" onClick={handleAskChatGPT} disabled={false}>\n      Ask ChatGPT\n    </button>\n    <InfiniteScroll\n      loadMore={loadNumbers}\n      hasMore={state.displayNums.length < allNumbers.length}\n    >\n      {state.displayNums}\n    </InfiniteScroll>\n  </div>\n);\n", "metadata": {"image": {"ipfs_cid": "bafkreifavimioebvrnilvp4bhsnxnw7vajgut26bxt2vam4ppadgpv2bce"}, "name": "chat-gpt.bos", "tags": {"bosweek": "", "chat-gpt": "", "open-ai": ""}}, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/achildhoodhero.near/widget/chat-gpt.bos", "__row_index": 3}