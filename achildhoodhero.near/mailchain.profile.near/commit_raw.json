{"tx_hash": "EEPXMAkNgKhgYfXrXzMYys13td52G38DACRAo6YKK8fY", "action_id_social": "5PFcT16dbzrC5VD6Ru2pAeHyqTdM4KhxvCWCGRZK1sPG-0-widget", "block_id": 92840428, "block_timestamp": "2023-05-27T16:28:34.094Z", "signer_id": "achildhoodhero.near", "widget_name": "mailchain.profile.near", "source_code": "const accountId = props.accountId ?? context.accountId;\r\nif (!accountId) {\r\n  return \"No account ID\";\r\n}\r\n\r\nconst link =\r\n  props.link &&\r\n  (props.link === true\r\n    ? `https://social.near.page/u/${accountId}`\r\n    : props.link);\r\n\r\nconst profile = props.profile ?? Social.getr(`${accountId}/profile`);\r\n\r\nif (profile === null) {\r\n  return \"Loading\";\r\n}\r\n\r\nconst showEditButton =\r\n  profile !== undefined &&\r\n  (!props.profile || props.showEditButton) &&\r\n  accountId &&\r\n  accountId === context.accountId;\r\n\r\nconst name = profile.name || \"No-name profile\";\r\nconst image = profile.image;\r\nconst backgroundImage = profile.backgroundImage;\r\nconst tags = Object.keys(profile.tags ?? {});\r\n\r\nconst nameHeader = <h4 className=\"mt-0 mb-0 text-truncate\">{name}</h4>;\r\n\r\nreturn (\r\n  <div className=\"bg-white shadow rounded overflow-hidden\">\r\n    <div className=\"px-4 pt-0 pb-5 bg-dark position-relative\">\r\n      {backgroundImage && (\r\n        <Widget\r\n          src=\"mob.near/widget/Image\"\r\n          props={{\r\n            image: backgroundImage,\r\n            alt: \"profile background\",\r\n            className: \"position-absolute w-100 h-100\",\r\n            style: { objectFit: \"cover\", left: 0, top: 0 },\r\n            fallbackUrl:\r\n              \"https://ipfs.near.social/ipfs/bafkreibmiy4ozblcgv3fm3gc6q62s55em33vconbavfd2ekkuliznaq3zm\",\r\n          }}\r\n        />\r\n      )}\r\n      {showEditButton && (\r\n        <a\r\n          href=\"#/mob.near/widget/ProfileEditor\"\r\n          className=\"btn mt-4 btn-outline-light float-end position-relative\"\r\n          style={{ zIndex: 1 }}\r\n        >\r\n          Edit profile\r\n        </a>\r\n      )}\r\n      <div\r\n        className=\"profile-picture d-inline-block\"\r\n        style={{ transform: \"translateY(7rem)\" }}\r\n      >\r\n        <Widget\r\n          src=\"mob.near/widget/ProfileImage\"\r\n          props={{\r\n            profile,\r\n            accountId,\r\n            style: { width: \"10rem\", height: \"10rem\" },\r\n            className: \"mb-2\",\r\n            imageClassName: \"rounded-circle w-100 h-100 img-thumbnail d-block\",\r\n            thumbnail: false,\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n    <div className=\"bg-light px-4 pb-4\">\r\n      <div className=\"d-md-flex justify-content-between pt-3 mb-2\">\r\n        <div style={{ paddingTop: \"3rem\" }}>\r\n          <div className=\"me-2 d-sm-flex gap-1 flex-row align-items-center\">\r\n            <div className=\"me-2 position-relative\">\r\n              {link ? (\r\n                <a className=\"text-truncate text-dark\" href={link}>\r\n                  {nameHeader}\r\n                </a>\r\n              ) : (\r\n                nameHeader\r\n              )}\r\n              <div className=\"small text-truncate flex flex-row\">\r\n                <i className=\"bi bi-person-fill text-secondary\"></i>\r\n                {accountId}\r\n                <Widget\r\n                  src=\"mob.near/widget/CopyButton\"\r\n                  props={{\r\n                    text: accountId,\r\n                    className: \"btn btn-sm btn-outline-dark border-0\",\r\n                  }}\r\n                />\r\n                <div>\r\n                  <Widget\r\n                    src=\"components-mailchain.near/widget/MailchainWidget\"\r\n                    props={{\r\n                      symbol: \"icon\",\r\n                      profileId,\r\n                      margin: \"0 0 0 -7px\",\r\n                    }}\r\n                  />{\" \"}\r\n                </div>\r\n                <Widget\r\n                  src=\"mob.near/widget/FollowsYouBadge\"\r\n                  props={{ accountId }}\r\n                />\r\n              </div>\r\n            </div>\r\n\r\n            <div>\r\n              <Widget\r\n                src=\"mob.near/widget/FollowButton\"\r\n                props={{ accountId }}\r\n              />\r\n              <Widget src=\"mob.near/widget/PokeButton\" props={{ accountId }} />\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <Widget src=\"mob.near/widget/FollowStats\" props={{ accountId }} />\r\n          </div>\r\n        </div>\r\n        <div style={{ minWidth: \"12rem\" }}>\r\n          <Widget\r\n            src=\"mob.near/widget/LinkTree\"\r\n            props={{ linktree: profile.linktree }}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {tags.length > 0 && (\r\n        <div>\r\n          {tags.map((tag, i) => (\r\n            <span\r\n              key={i}\r\n              className=\"me-1 mb-1 fw-light badge border border-secondary text-bg-light\"\r\n            >\r\n              #{tag}\r\n            </span>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <div>\r\n        <div className=\"float-end\">\r\n          <Widget\r\n            src=\"mob.near/widget/CopyButton\"\r\n            props={{\r\n              text: link,\r\n              label: \"Share\",\r\n              clipboardIcon: <i className=\"bi bi-share\" />,\r\n            }}\r\n          />\r\n        </div>{\" \"}\r\n        <div className=\"public-tags collapse show\">\r\n          <button\r\n            className=\"btn btn-sm btn-outline-secondary border-0\"\r\n            data-bs-toggle=\"collapse\"\r\n            data-bs-target={`.public-tags`}\r\n            aria-expanded=\"false\"\r\n            aria-controls={\"public-tags\"}\r\n          >\r\n            <i className=\"bi bi-arrows-angle-expand me-1\"></i>Show public tags\r\n          </button>\r\n        </div>\r\n        <div className=\"collapse public-tags\">\r\n          <Widget src=\"mob.near/widget/PublicTags\" props={{ accountId }} />\r\n        </div>\r\n        <div className=\"mt-3\">\r\n          <Widget\r\n            src=\"mob.near/widget/ProfileTabs\"\r\n            props={{ accountId, profile }}\r\n          />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/achildhoodhero.near/widget/mailchain.profile.near", "__row_index": 0}