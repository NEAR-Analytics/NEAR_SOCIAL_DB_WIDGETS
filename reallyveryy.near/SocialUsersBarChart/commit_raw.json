{"tx_hash": "9RHUFsctPiTPaMSYYvRsFZMoQs4eBoHkePuf1jzExyx1", "action_id_social": "3WPrBZxGa6xZ9kud4NbCQpAsi6uG9brxqXAynMXdVE6A-0-widget", "block_id": 87353660, "block_timestamp": "2023-03-15 13:36:59.775", "signer_id": "reallyveryy.near", "widget_name": "SocialUsersBarChart", "source_code": "let { appendSql, start_date, end_date, title, rowValue, columnValue } = props;\r\n\r\nlet baseSql = `-- forked from 69856e79-1d53-4ae5-9f4f-0a9e4514d888  \r\n\r\nwith \r\nsocial_inits as (\r\n  select * from near.core.fact_actions_events_addkey\r\n    where receiver_id = 'social.near'\r\n),\r\nadd_signer as (\r\n  select\r\n    k.tx_hash,\r\n    k.block_id,\r\n    k.block_timestamp,\r\n    t.tx_signer,\r\n    k.allowance,\r\n    t.tx_signer = t.tx_receiver\r\n  from social_inits k\r\n    left join near.core.fact_transactions t using (tx_hash)\r\n),\r\nde_dupe_resigners as (\r\n  select\r\n    block_timestamp,\r\n    tx_signer\r\n  from add_signer\r\n  -- ignore subsequent authorizations by the same signer\r\n  qualify ROW_NUMBER() over (\r\n  PARTITION BY tx_signer\r\n  ORDER BY\r\n    block_timestamp ASC\r\n) = 1\r\n  \r\n)`;\r\n\r\nlet sql = baseSql + appendSql;\r\n\r\nsql = sql.replace(\r\n  \"{{date_filter}}\",\r\n  `where block_timestamp >= '${start_date}' and block_timestamp <= '${end_date}'`\r\n);\r\n\r\nconst chartProps = {\r\n  query: sql,\r\n  title,\r\n  chartWidth: 500,\r\n  chartHeight: 400,\r\n  rowValue,\r\n  columnValue,\r\n};\r\n\r\nreturn (\r\n  <div style={{ height: 800, width: 1000 }}>\r\n    <Widget\r\n      src=\"reallyveryy.near/widget/Flipside-BarChart-V2.1\"\r\n      props={chartProps}\r\n    />\r\n  </div>\r\n);\r\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/reallyveryy.near/widget/SocialUsersBarChart", "metadata.name": "SocialUserBarChart"}