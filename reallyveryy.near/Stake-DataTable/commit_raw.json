{"tx_hash": "6ojpDCF4ijgtVYcRMCEHQWFnRZP7ZpfXwPpmQBWKnGAT", "action_id_social": "4H6gMk1Lw1ovBLp7iyx7zrqx96BaXPdUWeuJJhLEFojB-0-widget", "block_id": 86632047, "block_timestamp": "2023-03-05 19:04:52.710", "signer_id": "reallyveryy.near", "widget_name": "Stake-DataTable", "source_code": "const { is_stake_loading, stake_data } = props;\r\n\r\nconst ellipsizeThis = (x, leftCharLength, rightCharLength) => {\r\n  let totalLength = leftCharLength + rightCharLength;\r\n\r\n  if (totalLength >= x.length) {\r\n    return x;\r\n  }\r\n\r\n  return x.substring(0, leftCharLength) + \"...\" + x.substr(-rightCharLength);\r\n};\r\n\r\nfunction toTwoDecimals(x) {\r\n  if (!x) {\r\n    return \"\";\r\n  }\r\n  if (typeof x === \"string\") {\r\n    x = parseFloat(x);\r\n  }\r\n  return x.toLocaleString(\"en\", {\r\n    maximumFractionDigits: 2,\r\n    minimumFractionDigits: 2,\r\n  });\r\n}\r\n\r\nreturn (\r\n  <div>\r\n    <h2 class=\"text-lg mt-5\">Stakes</h2>\r\n    <div class=\"row\">\r\n      <div class=\"col-6 row\">\r\n        <strong class=\"col-6\">Number of Stake Tx:</strong>\r\n        <span class=\"col-6\">\r\n          {is_stake_loading ? (\r\n            <i class=\"spinner-grow spinner-grow-sm\"></i>\r\n          ) : (\r\n            stake_data.length\r\n          )}\r\n        </span>\r\n      </div>\r\n      <div class=\"col-6 row\"></div>\r\n      <div class=\"col-6 row\">\r\n        <strong class=\"col-6\">Total Staked:</strong>\r\n        <span class=\"col-6\">\r\n          {is_stake_loading ? (\r\n            <i class=\"spinner-grow spinner-grow-sm\"></i>\r\n          ) : stake_data.length > 0 ? (\r\n            toTwoDecimals(\r\n              stake_data\r\n                .filter((x) => x.action == \"Stake\")\r\n                .map((x) => x.deposit_amount)\r\n                .reduce((a, b) => a + b)\r\n            )\r\n          ) : (\r\n            \"0.00\"\r\n          )}{\" \"}\r\n          $NEAR\r\n        </span>\r\n      </div>\r\n      <div class=\"col-6 row\">\r\n        <strong class=\"col-6\">Total Unstaked:</strong>\r\n        <span class=\"col-6\">\r\n          {is_stake_loading ? (\r\n            <i class=\"spinner-grow spinner-grow-sm\"></i>\r\n          ) : stake_data.length > 0 ? (\r\n            toTwoDecimals(\r\n              stake_data\r\n                .filter((x) => x.action == \"Unstake\")\r\n                .map((x) => x.deposit_amount)\r\n                .reduce((a, b) => a + b)\r\n            )\r\n          ) : (\r\n            \"0.00\"\r\n          )}{\" \"}\r\n          $NEAR\r\n        </span>\r\n      </div>\r\n    </div>\r\n    <div class=\"table-responsive mt-3\">\r\n      <table class=\"table-striped table\" style={{ minHeight: 100 }}>\r\n        <thead>\r\n          <tr>\r\n            <th>Block Timestamp</th>\r\n            <th>Tx Hash</th>\r\n            <th>Action</th>\r\n            <th>Amount</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {stake_data.map((x) => (\r\n            <tr>\r\n              <td>{x.block_timestamp}</td>\r\n              <td>\r\n                <a\r\n                  href={`https://explorer.near.org/transactions/${x.tx_hash}`}\r\n                  target=\"_blank\"\r\n                  rel=\"noopener noreferrer\"\r\n                >\r\n                  {ellipsizeThis(x.tx_hash ?? \"N/A\", 6, 6)}\r\n                </a>\r\n              </td>\r\n              <td>{x.action}</td>\r\n              <td>{toTwoDecimals(x.deposit_amount)}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/reallyveryy.near/widget/Stake-DataTable"}