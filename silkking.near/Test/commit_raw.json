{"tx_hash": "GP8eKPWwXmaHLcUX6s92hNPVmsCChk473To5Wjpb4jrv", "action_id_social": "EuDKHDaBb3PpJuJkNbNcRxeFWgA2d4ajdbj4bhsGgMV5-0-widget", "block_id": 78446323, "block_timestamp": "2022-11-14 20:02:49.005", "signer_id": "silkking.near", "widget_name": "Test", "source_code": "// Returns the account Id from the logged person\nconst accountId = context.accountId;\n\n// Returns JSON with profile data from the accountId\nconst profile = Social.getr(`${accountId}/profile`);\n\n// Returns the widgets contents (not committed data) from the user in accountId\nconst widgets = Social.get(`${accountId}/widget/*`);\n\n// Returns the Test widget contents (not committed data) from the user in accountId\nconst testWidget = Social.getr(`${accountId}/widget/Test`);\n\n// Returns a JSON object with only one key that is accountId\n// After that, contains many keys, containing an array of blockHeights. Examples for silkking.near are \"widgets\", \"post\", \"profile\", \"test\"\nconst allBlockHeights = Social.keys(`${accountId}/*`, \"final\", {\n  return_type: \"History\",\n});\n\n// Returns a JSON object with only one key that is accountId\n// That key will only contain one key names test and the blockHeights associated\nconst testBlockHeights = Social.keys(`${accountId}/post/test`, \"final\", {\n  return_type: \"History\",\n});\n\n//Returns Object with user account containing only the key post. At the same time post contains the key test.\n//test value is boolean\nconst existentObjectsFromAccountId = Social.keys(`${accountId}/post/test`);\n\n//Returns the text you have posted with the commitButton. Documentation says\n//that it will return the lastest blockheigt of that key\nconst valueFromGivenKeys = Social.get(`${accountId}/post/test`);\n\nconst blockHeight = testBlockHeights[accountId].post.test;\n\n// Brings the value from key accountId, then post and finally test that is located in the blockHeight provided\nconst valueFromGivenKeysInGivenBlockHeight = Social.get(\n  `${accountId}/post/test`,\n  blockHeight[1]\n);\n\n//You can access to all post/test blockheights of all users\nconst blockHeightsInGivenKeys = Social.keys(`*/post/test`, \"final\", {\n  return_type: \"History\",\n});\n\nlet mapped = Object.keys(blockHeightsInGivenKeys).map((key) => {\n  return {\n    accountId: key,\n    blockHeightArray: blockHeightsInGivenKeys[key].post.test[0],\n  };\n});\nmapped.reduce(\n  (acc, curr) => {\n    let answer = Social.get(\n      `${curr.accountId}/post/test`,\n      curr.blockHeightArray\n    );\n    return answer == 1 ? [acc[0] + 1, acc[1]] : [acc[0], acc[1] + 1];\n  },\n  [0, 0]\n);\n\nreturn (\n  <div>\n    {JSON.stringify(mapped)}\n    <CommitButton data={{ post: { test: \"probando2\" } }}>\n      Post this\n    </CommitButton>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/silkking.near/widget/Test"}