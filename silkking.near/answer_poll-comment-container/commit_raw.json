{"tx_hash": "Berzm2fGkyMh9UrZFGQBmdVde3cz2Cd3oSi8YERWi1iN", "action_id_social": "6jZHtEDtARB5ZvRdft5AkvCdf8Vk6tr6XjCjwLSNFnZB-0-widget", "block_id": 80666205, "block_timestamp": "2022-12-15 00:03:09.857", "signer_id": "silkking.near", "widget_name": "answer_poll-comment-container", "source_code": "if (!props.blockHeight) {\n  return \"Prop blockHeight not set\";\n}\n\n// Utility function. Consider moving it to an utility widget\nfunction getBlockTimestamp(blockHeight) {\n  // It is stored in nanoseconds which is 1e-6 miliseconds\n  return Near.block(blockHeight).header.timestamp / 1e6;\n}\n\nconst answerBlockHeight = props.blockHeight;\nconst answers = Social.index(\"poll_question\", \"answer-v3.0.1\");\nif (!answers) {\n  return \"Loading\";\n}\nconst answerParams = answers.find((a) => a.blockHeight == answerBlockHeight);\n\nconsole.log(1, answers);\nconst comment = answerParams.value.answer;\nconst answerTimeStamp = getBlockTimestamp(answerBlockHeight);\nconst accountId = answerParams.accountId;\n\nconst profile = Social.getr(`${accountId}/profile`);\n// if (!profile) {\n//   return \"Loading\";\n// }\n\nconst timeAgo = (diffSec) =>\n  diffSec < 60000\n    ? `${(diffSec / 1000) | 0} seconds ago`\n    : diffSec < 3600000\n    ? `${(diffSec / 60000) | 0} minutes ago`\n    : diffSec < 86400000\n    ? `${(diffSec / 3600000) | 0} hours ago`\n    : `${(diffSec / 86400000) | 0} days ago`;\n\nconst profileLink = (c) => (\n  <a\n    className=\"text-decoration-none link-dark\"\n    href={`#/mob.near/widget/ProfilePage?accountId=${accountId}`}\n  >\n    {c}\n  </a>\n);\n\nreturn (\n  <div className=\"flex-column my-2 border border-primary p-2\">\n    <small className=\"ps-1 text-nowrap text-muted ms-auto\">\n      <i className=\"bi bi-clock me-1\"></i>\n      {timeAgo(Date.now() - answerTimeStamp)}\n    </small>\n    <div className=\"flex-row\">\n      {profileLink(\n        <div className=\"d-flex align-items-center\">\n          <Widget src=\"mob.near/widget/ProfileImage\" props={{ accountId }} />\n          <div>\n            <span className=\"fw-bold\">{profile.name}</span>\n            <span className=\"text-secondary\">@{accountId}</span>\n          </div>\n        </div>\n      )}\n    </div>\n    <p className=\"m-3\">{comment}</p>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/silkking.near/widget/answer_poll-comment-container"}