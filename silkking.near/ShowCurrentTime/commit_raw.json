{"tx_hash": "H9ZXL8A4VtsyyxLe43ei6cocnVwbM76Xuk6Dsz2t8vLJ", "action_id_social": "Asf6CxHPHRGY6PQeATfMzrCJo6MKiC4oUeEtnG62zEaX-0-widget", "block_id": 86983787, "block_timestamp": "2023-03-10 14:02:45.456", "signer_id": "silkking.near", "widget_name": "ShowCurrentTime", "source_code": "const time_zone = props.time_zone ?? \"(UTC-04:00) UTC\";\r\nState.init({\r\n  user_time: null,\r\n  local_time: null,\r\n});\r\n\r\nconst code = `\r\n<script>\r\n    window.addEventListener(\"message\", (event) => {\r\n        setInterval(() => event.source.postMessage(\"ping\", \"*\"), event.data.timeout);\r\n    });\r\n</script>\r\n`;\r\n\r\nvar zone = time_zone.split(\" \")[0].split(\"UTC\")[1].split(\":\");\r\nvar offset = parseInt(zone[0]);\r\n\r\nfunction onInterval() {\r\n  var today = new Date();\r\n  var month = today.getMonth() + 1;\r\n  var day = today.getDate();\r\n  var year = today.getFullYear();\r\n  var hour = today.getHours();\r\n  var minute = today.getMinutes();\r\n  var local_time = new Date(\r\n    today.getTime() + today.getTimezoneOffset() * 60000 + offset * 3600000\r\n  );\r\n  var local_month = local_time.getMonth() + 1;\r\n  var local_day = local_time.getDate();\r\n  var local_year = local_time.getFullYear();\r\n  var local_hour = local_time.getHours();\r\n  var local_minute = local_time.getMinutes();\r\n  State.update({\r\n    user_time: month + \"/\" + day + \"/\" + year + \" - \" + hour + \":\" + minute,\r\n    local_time:\r\n      local_month +\r\n      \"/\" +\r\n      local_day +\r\n      \"/\" +\r\n      local_year +\r\n      \" - \" +\r\n      local_hour +\r\n      \":\" +\r\n      local_minute,\r\n  });\r\n}\r\n\r\nreturn (\r\n  <div>\r\n    <div style={{ display: \"flex\", flexDirection: \"column\" }}>\r\n      {state.local_time && (\r\n        <div\r\n          style={{\r\n            fontSize: font_big,\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n          }}\r\n        >{`Local Time: ${state.local_time}`}</div>\r\n      )}\r\n      {state.user_time && (\r\n        <div\r\n          style={{\r\n            fontSize: font_big,\r\n            display: \"flex\",\r\n            justifyContent: \"flex-end\",\r\n          }}\r\n        >{`Your Time: ${state.user_time}`}</div>\r\n      )}\r\n    </div>\r\n\r\n    <iframe\r\n      style={{ height: \"0px\" }}\r\n      srcDoc={code}\r\n      message={{ timeout: 1000 }}\r\n      onMessage={onInterval}\r\n    />\r\n  </div>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/silkking.near/widget/ShowCurrentTime"}