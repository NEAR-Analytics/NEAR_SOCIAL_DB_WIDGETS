{"tx_hash": "CHt9zmCopViw1SAZny93ThrTxFJhBCFMb5C1hgCEpwfB", "action_id_social": "X7eWyohCKPRn5ry2r5xTBtWu6QHR3DSPkLMT757oNGA-0-widget", "block_id": 80709132, "block_timestamp": "2022-12-15 13:59:50.524", "signer_id": "silkking.near", "widget_name": "answersHeader", "source_code": "if (!props.blockHeight) {\n  return \"Prop blockHeight is not set\";\n}\n\nconst questionBlockHeight = props.blockHeight;\nlet questions = Social.index(\"poll_question\", \"question-v3.0.1\");\nif (!questions) {\n  return \"Loading\";\n}\nlet questionParams = questions.find(\n  (q) => q.blockHeight == questionBlockHeight\n);\n\nfunction isActive() {\n  return (\n    questionParams.value.startTimestamp < Date.now() &&\n    Date.now() < questionParams.value.endTimestamp\n  );\n}\n\nfunction isUpcoming() {\n  return questionParams.value.startTimestamp > Date.now();\n}\n\nlet profile = Social.getr(`${props.accountId}/profile`);\n// if (!profile) {\n//   return \"Loading\";\n// }\n\nreturn (\n  <div className=\"my-2\">\n    <div className=\"d-flex no-wrap justify-content-between\">\n      <Widget\n        src={`f2bc8abdb8ba64fe5aac9689ded9491ff0e6fdcd7a5c680b7cf364142d1789fb/widget/Profile`}\n        props={{ userMakingQuestion: props.accountId, profile }}\n      />\n\n      <div className=\"d-flex\">\n        <span className=\"mx-2\" style={{ fontWeight: \"500\" }}>\n          End date:{\" \"}\n          {new Date(questionParams.value.endTimestamp).toLocaleDateString()}\n        </span>\n        <span\n          style={{\n            backgroundColor: isUpcoming()\n              ? \"rgb(255, 255, 128)\"\n              : isActive()\n              ? \"rgb(153, 255, 153)\"\n              : \"rgb(255, 128, 128)\",\n\n            height: \"max-content\",\n            width: \"6rem\",\n            border: \"1px solid rgb(0, 82, 204)\",\n            textAlign: \"center\",\n            borderRadius: \"80px\",\n          }}\n        >\n          {isUpcoming() ? \"Upcoming\" : isActive() ? \"Active\" : \"Closed\"}\n        </span>\n      </div>\n    </div>\n    <h5 className=\"mt-3\">{questionParams.value.title}</h5>\n    <p>{questionParams.value.description}</p>\n    <p>{questionParams.value.question}</p>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/silkking.near/widget/answersHeader"}