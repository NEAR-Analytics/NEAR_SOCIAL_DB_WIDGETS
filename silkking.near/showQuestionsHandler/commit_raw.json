{"tx_hash": "DWBaP4VELmGwZobcnGkWYmTyBinwMVku6k5gV5gGFjnS", "action_id_social": "3VvswxFuLkLt7xqDgZzvcqxuc5S74MQiWigpuUE7ph4p-0-widget", "block_id": 80607346, "block_timestamp": "2022-12-14 04:47:34.371", "signer_id": "silkking.near", "widget_name": "showQuestionsHandler", "source_code": "State.init({ showQuestion: false, modalBlockHeight: 0 });\n\nconst displayAnswerWidgetNames = [\n  \"newTextAnswerInterface\",\n  \"newMiniMultipleChoiceInterface\",\n];\n\nlet questions = Social.index(\"poll_question\", \"question-v3.0.1\", {\n  accountId: props.accountId,\n});\n\nfunction closeModalClickingOnTransparent() {\n  return (e) => {\n    e.target.id == \"modal\" && State.update({ showQuestion: false });\n  };\n}\n\nconst renderModal = () => {\n  return (\n    <div\n      className=\"modal\"\n      id=\"modal\"\n      style={\n        state.showQuestion && { display: \"block\", backgroundColor: \"#7e7e7e70\" }\n      }\n      tabindex=\"-1\"\n      role=\"dialog\"\n      onClick={closeModalClickingOnTransparent()}\n    >\n      <div className=\"modal-dialog\" style={{ maxWidth: \"95%\" }} role=\"document\">\n        <div\n          className=\"modal-content\"\n          style={{ backgroundColor: \"rgb(230, 230, 230)\" }}\n        >\n          <div className=\"modal-header flex-row-reverse\">\n            <button\n              type=\"button\"\n              className=\"close\"\n              dataDismiss=\"modal\"\n              ariaLabel=\"Close\"\n              onClick={() => State.update({ showQuestion: false })}\n            >\n              <span ariaHidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <div\n            className=\"modal-body\"\n            style={{\n              width: \"90%\",\n              borderRadius: \"1rem\",\n              backgroundColor: \"white\",\n              margin: \"0 auto\",\n            }}\n          >\n            <Widget\n              src={`${context.accountId}/widget/newVotingInterface`}\n              props={{\n                blockHeight: state.modalBlockHeight,\n                shouldDisplayViewAll: props.accountId == undefined,\n              }}\n            />\n          </div>\n          <div className=\"modal-footer\">\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary\"\n              data-dismiss=\"modal\"\n              onClick={() => State.update({ showQuestion: false })}\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst renderQuestions = () => {\n  return questions.map((question) => {\n    return (\n      <div\n        className=\"my-5 py-3 px-4\"\n        style={{\n          backgroundColor: \"white\",\n          borderRadius: \"1rem\",\n          cursor: \"pointer\",\n        }}\n        onClick={() => {\n          State.update({\n            showQuestion: true,\n            modalBlockHeight: question.blockHeight,\n          });\n        }}\n      >\n        <Widget\n          src={`${context.accountId}/widget/answersHeader`}\n          props={{ ...question }}\n        />\n        <Widget\n          src={`${context.accountId}/widget/${\n            displayAnswerWidgetNames[question.value.questionType]\n          }`}\n          props={{ ...question }}\n        />\n      </div>\n    );\n  });\n};\n\nreturn (\n  <div\n    style={{\n      borderRadius: \"3px\",\n      padding: \"0px 2%\",\n      backgroundColor: \"rgb(230, 230, 230)\",\n    }}\n  >\n    {renderQuestions()}\n    {state.showQuestion && renderModal()}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/silkking.near/widget/showQuestionsHandler"}