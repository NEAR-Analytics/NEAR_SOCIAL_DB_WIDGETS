{"tx_hash": "4nfsNL3XxWKCumYT8VjByFmhP8HqTFT1nBuFpgqhswTa", "action_id_social": "6eYRGNQCCaa2CwKsiHifxA7DumnHgvTR7XqeGfEhcFhY-0-widget", "block_id": 80574741, "block_timestamp": "2022-12-13 18:17:02.288", "signer_id": "urbanite.near", "widget_name": "BerryclubHistory", "source_code": "const currentBlock = Near.block(\"final\");\n\nif (!currentBlock) {\n  return \"Loading\";\n}\n\nconst Contract = {\n  Berryclub: \"berryclub.ek.near\",\n  Dacha: \"v1.dacha-finance.near\",\n  Cheddar: \"farm-draw.cheddar.near\",\n};\n\nconst finetunes = [\n  [-10000, -1000, -100, -10, -1],\n  [1, 10, 100, 1000, 10000],\n];\n\nconst contract = state.contract ?? props.contract ?? \"berryclub.ek.near\";\n\nconst currentBlockHeight = currentBlock.header.height;\nconst minBlockHeight =\n  contract === Contract.Dacha\n    ? 54570186\n    : contract === Contract.Cheddar\n    ? 55198877\n    : 21793900;\n\nconst intoRange = (blockHeight) =>\n  Math.min(currentBlockHeight, Math.max(minBlockHeight, parseInt(blockHeight)));\n\nconst numBlocks = currentBlockHeight - minBlockHeight;\nconst randomBlockHeight = () =>\n  minBlockHeight + Math.floor(Math.random() * numBlocks);\n\nState.init({\n  contract,\n  blockHeight: props.blockHeight\n    ? parseInt(props.blockHeight)\n    : randomBlockHeight(),\n});\n\nreturn (\n  <div>\n    <div className=\"btn-group\" role=\"group\" aria-label=\"Contract selector\">\n      <input\n        type=\"radio\"\n        className=\"btn-check\"\n        name=\"contract-radio\"\n        id=\"contract-berryclub\"\n        autoComplete=\"off\"\n        checked={state.contract === Contract.Berryclub}\n        onChange={() => State.update({ contract: Contract.Berryclub })}\n        value={Contract.Berryclub}\n        title={\"Set contract to Berryclub\"}\n      />\n      <label\n        className=\"btn btn-outline-success fs-2\"\n        htmlFor=\"contract-berryclub\"\n      >\n        \ud83e\udd51\n      </label>\n\n      <input\n        type=\"radio\"\n        className=\"btn-check\"\n        name=\"contract-radio\"\n        id=\"contract-dacha\"\n        autoComplete=\"off\"\n        checked={state.contract === Contract.Dacha}\n        onChange={() => State.update({ contract: Contract.Dacha })}\n        value={Contract.Dacha}\n        title={\"Set contract to Dacha Finance\"}\n      />\n      <label className=\"btn btn-outline-success fs-2\" htmlFor=\"contract-dacha\">\n        \ud83e\udd54\n      </label>\n\n      <input\n        type=\"radio\"\n        className=\"btn-check\"\n        name=\"contract-radio\"\n        id=\"contract-cheddar\"\n        autoComplete=\"off\"\n        checked={state.contract === Contract.Cheddar}\n        onChange={() => State.update({ contract: Contract.Cheddar })}\n        value={Contract.Cheddar}\n        title={\"Set contract to Cheddar DraW\"}\n      />\n      <label\n        className=\"btn btn-outline-success fs-2\"\n        htmlFor=\"contract-cheddar\"\n      >\n        \ud83e\uddc0\n      </label>\n    </div>\n    <Widget\n      src=\"mob.near/widget/Range\"\n      props={{\n        min: minBlockHeight,\n        max: currentBlockHeight,\n        value: intoRange(state.blockHeight),\n        onPointerUp: (blockHeight) => State.update({ blockHeight }),\n        title: \"Block Height\",\n      }}\n    />\n    <div className=\"mb-2 d-flex gap-2 flex-wrap\">\n      <CommitButton\n        className=\"btn btn-primary\"\n        data={{\n          index: {\n            post: JSON.stringify({\n              key: \"berryclub\",\n              value: {\n                blockHeight: state.blockHeight,\n                contract: state.contract,\n              },\n            }),\n          },\n        }}\n      >\n        Share Board #{state.blockHeight}\n      </CommitButton>\n      <button\n        className=\"btn btn-secondary\"\n        onClick={() => {\n          State.update({\n            blockHeight: randomBlockHeight(),\n          });\n        }}\n      >\n        Random Board\n      </button>\n      {finetunes.map((finetune, i) => (\n        <div key={i} className=\"btn-group\" role=\"group\" aria-label=\"finetuning\">\n          {finetune.map((value, i) => (\n            <button\n              type=\"button\"\n              key={i}\n              className=\"btn btn-outline-secondary\"\n              onClick={() => {\n                State.update({\n                  blockHeight: intoRange(parseInt(state.blockHeight) + value),\n                });\n              }}\n            >\n              {value > 0 ? `+${value}` : value}\n            </button>\n          ))}\n        </div>\n      ))}\n    </div>\n    <div style={{ height: \"min(50vh, 95vw)\" }}>\n      <Widget\n        src=\"mob.near/widget/BerryclubBoard\"\n        props={{ blockHeight: state.blockHeight, contract: state.contract }}\n      />\n    </div>\n    <hr />\n    <div>\n      <Widget src=\"mob.near/widget/BerryclubFeed\" />\n    </div>\n  </div>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/urbanite.near/widget/BerryclubHistory", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.linktree.website": NaN, "metadata.name": NaN, "metadata.tags.app": NaN, "metadata.tags.berryclub": NaN, "metadata.tags.history": NaN, "metadata": NaN}