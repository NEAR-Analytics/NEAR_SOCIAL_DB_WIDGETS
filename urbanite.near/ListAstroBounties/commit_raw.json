{"tx_hash": "3z74QnRgdBAiSaRVWwcS9zHqjVNXqSzXVutT9dHJW2ML", "action_id_social": "DkPGKu6ucAw5pYP3MfaRS9G4YMmNqUneUSzE1ixkn9gG-0-widget", "block_id": 80688255, "block_timestamp": "2022-12-15 07:13:45.582", "signer_id": "urbanite.near", "widget_name": "ListAstroBounties", "source_code": "const term = props.searchTerm ? props.searchTerm + \"*\" : \"*\";\n\nState.init({\n  index: 0,\n});\n\nconst makeMoreItems = () => {\n  State.update({\n    index: state.index + 19,\n  });\n};\n\nconst bounties = fetch(\n  `https://search.testnet.app.astrodao.com/bounty/_search?size=20&from=${state.index}`,\n  {\n    method: \"POST\",\n    headers: {\n      Accept: \"application/json\",\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query: {\n        query_string: {\n          query: term,\n          default_field: \"description\",\n          type: \"best_fields\",\n          fuzziness: \"AUTO\",\n          fuzzy_transpositions: true,\n          fuzzy_max_expansions: 50,\n          fuzzy_prefix_length: 0,\n          minimum_should_match: 1,\n          default_operator: \"or\",\n          analyzer: \"standard\",\n          lenient: false,\n          boost: 1,\n          allow_leading_wildcard: true,\n          enable_position_increments: true,\n          phrase_slop: 3,\n          quote_field_suffix: \"\",\n          quote_analyzer: \"standard\",\n          analyze_wildcard: false,\n          auto_generate_synonyms_phrase_query: true,\n        },\n      },\n      sort: [\n        {\n          createTimestamp: {\n            order: \"desc\",\n          },\n        },\n      ],\n    }),\n  }\n);\n\nconsole.log(bounties.body.hits);\nif (!bounties) {\n  return \"Loading...\";\n}\nif (bounties.body.hits.total.value == 0) {\n  return \"No search results\";\n}\n\nreturn (\n  <ol>\n    <InfiniteScroll\n      pageStart={0}\n      loadMore={makeMoreItems}\n      hasMore={bounties.body.hits.hits.length !== 0}\n      loader={<div className=\"loader\">Loading ...</div>}\n    >\n      {bounties\n        ? bounties.body.hits.hits.map((bounty) => {\n            const bountyId = bounty._source.id;\n            return (\n              <li>\n                <div>\n                  <h3>\n                    <b>DAO:</b> {bounty._source.daoId}\n                  </h3>\n                  <p>\n                    <b>Summary:</b> {bounty._source.description}\n                  </p>\n                  <p>\n                    <b>Amount:</b>{\" \"}\n                    <Widget\n                      src=\"urbanite.near/widget/YoctoNEARConverter\"\n                      props={{ amount: bounty._source.amount }}\n                    />\n                  </p>\n                  <Widget\n                    src=\"edwardkcyu.near/widget/AstroBountiesCommentEditor\"\n                    props={{ bountyId }}\n                  />\n                </div>\n              </li>\n            );\n          })\n        : \"\"}\n    </InfiniteScroll>\n  </ol>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/urbanite.near/widget/ListAstroBounties"}