{"tx_hash": "9e3gR1Et7PdNH14rihqNTUHLfSw7xV4XsfRmY6pEshVX", "action_id_social": "EqstMkByoZG8kZzrJUDZGxQBiAnZVDSLGagC7Rg5qohC-0-widget", "block_id": 80722719, "block_timestamp": "2022-12-15 18:29:47.634", "signer_id": "minz.near", "widget_name": "CreateActivity", "source_code": "const accountId = context.accountId;\nconst CONTRACT = \"event_org.near\";\nif (!accountId) {\n  return \"Please connect your NEAR wallet to create an activity\";\n}\n\nfunction callContract(data) {\n  Near.call(CONTRACT, \"start_event\", {\n    account_id: accountId,\n    event_spec: {\n      max_num: Number(data.participants_hi),\n      min_num: Number(data.participants_lo),\n      price: Number(data.cost) * 1000,\n      deadline: 1671122423 * 1000000000,\n      // deadline: data.deadline.getMilliseconds() * 1000000,\n      beneficiary: accountId,\n    },\n  });\n}\n\nreturn (\n  <div className=\"row mb-3\">\n    <div>\n      <h4>Plan a group activity on Near Social!</h4>\n    </div>\n    <div className=\"mb-2\">\n      Event Name <span className=\"text-secondary\"></span>\n      <input\n        type=\"text\"\n        value={state.name}\n        onChange={(e) => {\n          State.update({ name: e.target.value });\n        }}\n      />\n    </div>\n    <div className=\"mb-2\">\n      Description <span className=\"text-secondary\"></span>\n      <input\n        type=\"text\"\n        value={state.description}\n        onChange={(e) => {\n          State.update({ description: e.target.value });\n        }}\n      />\n    </div>\n    <div className=\"mb-2\">\n      Cost per participant <span className=\"text-secondary\"></span>\n      <input\n        type=\"number\"\n        value={state.cost}\n        onChange={(e) => {\n          State.update({ cost: e.target.value });\n        }}\n      />\n    </div>\n    <div className=\"mb-2\">\n      Min participants <span className=\"text-secondary\"></span>\n      <input\n        type=\"number\"\n        value={state.participants_lo}\n        onChange={(e) => {\n          State.update({ participants_lo: e.target.value });\n        }}\n      />\n    </div>\n    <div className=\"mb-2\">\n      Max participants <span className=\"text-secondary\"></span>\n      <input\n        type=\"number\"\n        value={state.participants_hi}\n        onChange={(e) => {\n          State.update({ participants_hi: e.target.value });\n        }}\n      />\n    </div>\n    <div className=\"mb-2\">\n      Joinable until <span className=\"text-secondary\"></span>\n      <input\n        type=\"date\"\n        value={state.deadline}\n        onChange={(e) => {\n          State.update({ deadline: e.target.value });\n        }}\n      />\n    </div>\n\n    <div className=\"mb-2\">\n      <CommitButton\n        data={{\n          event: {\n            name: state.name,\n            description: state.description,\n            cost: state.cost,\n            participants_lo: state.participants_lo,\n            participants_hi: state.participants_hi,\n            deadline: state.deadline,\n          },\n        }}\n        onCommit={() => {\n          callContract(state);\n        }}\n      >\n        Create\n      </CommitButton>\n    </div>\n    <hr />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/minz.near/widget/CreateActivity"}