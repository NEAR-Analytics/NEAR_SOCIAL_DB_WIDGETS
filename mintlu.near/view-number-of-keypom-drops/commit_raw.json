{"tx_hash": "232s7mF8GP4W2sR2nYxBRNFaC2iwLzcSeE1jLZEwu7cS", "action_id_social": "2bLYu3zrmmHmjDKkCRxFcJN3eQnpkz6FqgGUPcvneAfL-0-widget", "block_id": 92250929, "block_timestamp": "2023-05-19T22:04:07.307Z", "signer_id": "mintlu.near", "widget_name": "view-number-of-keypom-drops", "source_code": "const keypom_contract = \"v2.keypom.near\";\nconst userNum = Near.view(keypom_contract, \"get_drop_supply_for_owner\", {\n  account_id: state.user,\n});\n\n// Init state\nState.init({\n  num_drops: 0,\n  user: context.accountId,\n});\n\n// Do not update state.num_drops until BtnClick\nconst onInputChange = ({ target }) => {\n  State.update({\n    user: target.value,\n    num_drops: 0,\n  });\n};\n\nconst onBtnClick = () => {\n  State.update({\n    num_drops: userNum,\n  });\n};\n\nconst get_user_form = (\n  <>\n    <div class=\"border border-black p-3\">\n      <label>User Account ID</label>\n      <input placeholder=\"benji.near\" onChange={onInputChange} />\n      <button class=\"btn btn-primary mt-2\" onClick={onBtnClick}>\n        Update\n      </button>\n    </div>\n  </>\n);\n\n// Render\nreturn (\n  <>\n    <div class=\"container border border-info p-3\">\n      <h3 class=\"text-center\">\n        The number of drops for {state.user}:\n        <span class=\"text-decoration-underline\"> {state.num_drops} </span>\n      </h3>\n\n      {get_user_form}\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mintlu.near/widget/view-number-of-keypom-drops", "__row_index": 0}