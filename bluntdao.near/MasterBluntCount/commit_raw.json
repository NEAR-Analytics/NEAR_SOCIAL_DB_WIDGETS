{"tx_hash": "9nbxp2uNHxfvudU1LxLPssNNM8ZWzQTunTbdTDTNe7Rt", "action_id_social": "9EF2L1BpjYYAFpFaiXiaiUU3wMRKkYecQQSazdNqpVPa-0-widget", "block_id": 79007105, "block_timestamp": "2022-11-22 10:37:46.225", "signer_id": "bluntdao.near", "widget_name": "MasterBluntCount", "source_code": "const blunts = Social.index(\"blunt\", \"blunt-click\");\nconst counter = {};\nconst uniqueBlunts = {};\n\nif (blunts) {\n  blunts.reverse().forEach(({ accountId, value }) => {\n    const key = JSON.stringify({ accountId, value });\n    if (key in uniqueBlunts) {\n      return;\n    }\n    counter[accountId] = (counter[accountId] || 0) + 1;\n    uniqueBlunts[key] = true;\n  });\n}\n\nconst top = Object.entries(counter);\ntop.sort((a, b) => b[1] - a[1]);\n\nfunction renderBlunts(accountIds) {\n  return (\n    <div className=\"d-flex flex-wrap gap-3\">\n      {accountIds &&\n        accountIds.map((accountId) => {\n          return (\n            <div className=\"position-relative\">\n              <a\n                href={`#/mob.near/widget/ProfilePage?accountId=${accountId}`}\n                className=\"text-decoration-none\"\n              >\n                <Widget\n                  src=\"mob.near/widget/ProfileImage\"\n                  props={{\n                    accountId,\n                    className: \"d-inline-block overflow-hidden\",\n                  }}\n                />\n              </a>\n              <span\n                className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success\"\n                style={{ zIndex: 1, border: \"1px solid rgb(15,81,51)\" }}\n              >\n                {counter[accountId]}\n              </span>\n            </div>\n          );\n        })}\n    </div>\n  );\n}\n\nreturn (\n  <div>\n    <div className=\"mb-4\">\n      <CommitButton\n        className=\"btn btn-lg btn-success\"\n        data={{\n          index: {\n            blunt: JSON.stringify(\n              {\n                key: \"blunt-click\",\n                value: Date.now(),\n              },\n              undefined,\n              0\n            ),\n          },\n        }}\n      >\n        Hit the Blunt \ud83c\udf43\ud83d\udca8\n      </CommitButton>\n    </div>\n    <div className=\"mb-4\">\n      <h4>Top 10 People To Hit the Blunt</h4>\n      <div>{renderBlunts(top.slice(0, 10).map((a) => a[0]))}</div>\n    </div>\n    <div className=\"mb-4\">\n      <h4>Last 30 People to Hit the Blunt</h4>\n      <div>\n        {blunts && renderBlunts(blunts.slice(0, 30).map((a) => a.accountId))}\n      </div>\n    </div>\n  </div>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/bluntdao.near/widget/MasterBluntCount", "metadata.description": NaN, "metadata.image.nft.contractId": NaN, "metadata.image.nft.tokenId": NaN, "metadata.linktree.website": NaN, "metadata.name": NaN, "metadata.tags.blunt": NaN, "metadata.tags.blunt-dao": NaN, "metadata.tags.blunts": NaN, "metadata.tags.blutdao": NaN, "metadata.tags.counter": NaN, "metadata.tags.dao": NaN, "metadata.tags.joints": NaN, "metadata.tags.nft": NaN, "metadata.tags.proof-of-sesh": NaN, "metadata.tags.spliff": NaN, "metadata.tags.sybil-resistance": NaN, "metadata.tags.widget": NaN, "metadata": NaN}