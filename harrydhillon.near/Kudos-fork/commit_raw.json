{"tx_hash": "5WauKiUWc8392QU9dRsHPKqrUXnLsFCJv8aBeViKqKng", "action_id_social": "EeYGdPrsh6i41hMXnLM6uRMvRv3ognyAQMDTikk4itDn-1-widget", "block_id": 90955505, "block_timestamp": "2023-05-02 21:08:52.024", "signer_id": "harrydhillon.near", "widget_name": "Kudos-fork", "source_code": "State.init({\n  input: \"\",\n  url: \"\",\n});\n\nconst widgetName = \"Kudos\";\nconst widgetPath = `webuidl.near/widget/${widgetName}`;\nconst metadata = props.metadata ?? Social.getr(`${widgetPath}/metadata`);\n\nconst card = {\n  background:\n    \"linear-gradient(90deg, rgba(0,62,163,1) 0%, rgba(0,85,223,1) 100%)\",\n  borderRadius: \"3px\",\n  color: \"white\",\n  padding: \"10px\",\n  marginBottom: 10,\n};\n\nconst button = {\n  borderRadius: \"5px\",\n  margin: \"5px 0\",\n  padding: \"8px\",\n  textAlign: \"center\",\n  background: \"linear-gradient(to left, #FFD50D, #4498E0)\",\n  border: \"2px solid black\",\n  fontWeight: \"bold\",\n};\n\nconst imgWH = {\n  width: \"25px\",\n  height: \"25px\",\n};\n\nconst urlPrefix = \"https://\";\nconst accountId = props.accountId ?? \"*\";\n\nconst data = Social.index(\"kudo\", \"answer\");\nif (!data) {\n  return \"Loading answers\";\n}\nconst upvotes = Social.index(\"kudo\", \"upvote\");\nif (!upvotes) {\n  return \"Loading upvotes\";\n}\nconst blackList = [\"webuidl.near\"];\nconst whiteListData = data.filter((d) => !blackList.includes(d.accountId));\nconst sortedData = whiteListData.sort(\n  (d1, d2) => d2.blockHeight - d1.blockHeight\n);\n\nlet upvotesMap = {};\nfor (let i = 0; i < upvotes.length; i++) {\n  const vote = upvotes[i];\n  const upvoteBlockHeight = vote.value.blockHeight;\n  if (!upvotesMap[upvoteBlockHeight]) {\n    upvotesMap[upvoteBlockHeight] = 0;\n  }\n  upvotesMap[upvoteBlockHeight] += 1;\n}\nconsole.log(upvotesMap);\n\nconst finalData = sortedData;\n\nreturn (\n  <div style={{ padding: 10 }}>\n    <div className=\"d-inline-block\" style={{ width: \"10em\", height: \"10em\" }}>\n      <Widget\n        src=\"mob.near/widget/Image\"\n        props={{\n          image: metadata.image,\n          className: \"w-100 h-100 shadow\",\n          style: { objectFit: \"cover\", borderRadius: \"2em\" },\n          thumbnail: false,\n          fallbackUrl:\n            \"https://ipfs.near.social/ipfs/bafkreido7gsk4dlb63z3s5yirkkgrjs2nmyar5bxyet66chakt2h5jve6e\",\n          alt: widgetName,\n        }}\n      />\n    </div>\n    <br />\n    <br />\n    <p>An accolade, a Thank You, a Job Well Done. Give em a Kudo!\ud83d\udc4f </p>\n    <div className=\"d-flex flex-column w-75 justify-content-around\">\n      <textarea\n        style={{\n          backgroundColor: \"rgb(230, 230, 230)\",\n          border: \"1px solid #ced4da\",\n          borderRadius: \"0.375rem\",\n        }}\n        rows=\"2\"\n        value={state.input}\n        onChange={(e) => {\n          State.update({ input: e.target.value });\n        }}\n      />\n      <p>Url:</p>\n      <textarea\n        style={{\n          backgroundColor: \"rgb(230, 230, 230)\",\n          border: \"1px solid #ced4da\",\n          borderRadius: \"0.375rem\",\n        }}\n        rows=\"1\"\n        value={state.url}\n        onChange={(e) => {\n          State.update({ url: e.target.value });\n        }}\n      />\n    </div>\n    <CommitButton\n      style={button}\n      data={{\n        index: {\n          kudo: JSON.stringify(\n            {\n              key: \"answer\",\n              value: {\n                answer: state.input,\n                url: state.url,\n              },\n            },\n            undefined,\n            0\n          ),\n        },\n      }}\n      onCommit={() => {\n        State.update({\n          reloadData: true,\n        });\n      }}\n    >\n      Kudos!\n    </CommitButton>\n    <br />\n    <br />\n    <div className=\"\">\n      {sortedData\n        ? sortedData.map((d) => (\n            <div style={card}>\n              <Widget\n                src=\"mob.near/widget/ProfileImage\"\n                props={{\n                  accountId: d.accountId,\n                  className: \"d-inline-block\",\n                  style: { width: \"1.5em\", height: \"1.5em\" },\n                }}\n              />\n              <a\n                href={`#/mob.near/widget/ProfilePage?accountId=${d.accountId}`}\n                style={{ color: \"white\", fontWeight: \"bold\" }}\n              >\n                {d.accountId}\n              </a>\n              I BuiDL... <b>{d.value.answer}&nbsp;&nbsp;&nbsp;</b>\n              <b>\n                <a href={`${urlPrefix}${d.value.url}`} target=\"_blank\">\n                  {d.value.url}\n                </a>\n                &nbsp;&nbsp;&nbsp;\n              </b>\n              <Widget\n                src=\"mob.near/widget/FollowButton\"\n                props={{ accountId: d.accountId }}\n              />\n              <div style={{ marginTop: 8 }}>\n                <CommitButton\n                  data={{\n                    index: {\n                      kudo: JSON.stringify(\n                        {\n                          key: \"upvote\",\n                          value: {\n                            blockHeight: d.blockHeight,\n                          },\n                        },\n                        undefined,\n                        0\n                      ),\n                    },\n                  }}\n                >\n                  Upvote\n                </CommitButton>\n                <span style={{ marginLeft: 5 }}>\n                  {upvotesMap[d.blockHeight] ? upvotesMap[d.blockHeight] : 0}\n                </span>\n              </div>\n            </div>\n          ))\n        : \"Loading...\"}\n    </div>\n  </div>\n);\n", "metadata": null, "widget_modules_used": null, "widget_url": "https://near.social/#/harrydhillon.near/widget/Kudos-fork", "branch.draft": null}