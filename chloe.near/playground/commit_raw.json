{"tx_hash": "D6qK5eejswNjvLxGjnEbx5myw5CBBy6t6JL9tUK4ddbN", "action_id_social": "FwkmHckg52BZLGu9W8XhX4gxA9ssfugUb42d1oneNSNY-0-widget", "block_id": 94257516, "block_timestamp": "2023-06-15T18:49:58.489Z", "signer_id": "chloe.near", "widget_name": "playground", "source_code": "// Your styled Button component\nconst Button = styled.button`\n  background: ${(props) => (props.primary ? \"palevioletred\" : \"white\")};\n  color: ${(props) => (props.primary ? \"white\" : \"palevioletred\")};\n  border: 2px solid palevioletred;\n  border-radius: 5px;\n  padding: 8px 14px;\n  cursor: pointer;\n  outline: 0;\n  font-weight: 600;\n  text-transform: uppercase;\n  :hover {\n    background: palevioletred;\n    color: white;\n    opacity: 0.8;\n    text-decoration: none;\n  }\n`;\n\n// Initialize the state\nState.init({\n  blockHeight: Near.block(\"final\").header.height,\n  buttonClickCount: 0,\n});\n\n// Get the account ID from the props or the context\nconst accountId = props.accountId ?? context.accountId;\n\n// Display the login message if the account ID is not available\nif (!accountId) {\n  return (\n    <div>\n      <p>Please connect your NEAR wallet or create a new one:</p>\n      <a href=\"https://near.org/signup\" target=\"_blank\" rel=\"noreferrer\">\n        <button>Create NEAR Account</button>\n      </a>\n    </div>\n  );\n}\n\n// Function to retrieve block height and store it in state\nconst getBlockHeight = () => {\n  try {\n    const blockData = Near.block(\"final\");\n    const blockHeight = blockData.header.height;\n    State.update({\n      blockHeight,\n      buttonClickCount: state.buttonClickCount + 1,\n    });\n  } catch (error) {\n    console.error(\"Failed to fetch block height:\", error);\n  }\n};\n\n// Define components\nconst blockHeightForm = (\n  <div class=\"border border-black p-3\">\n    <Button class=\"btn btn-primary mt-2\" onClick={getBlockHeight}>\n      Fetch Block Height\n    </Button>\n  </div>\n);\n\nconst notLoggedInWarning = <p>Please login to fetch the block height.</p>;\n\n// Render\nreturn (\n  <div class=\"container border border-info p-3\">\n    <h3 class=\"text-center\">\n      The current block height is:\n      <span class=\"text-decoration-underline\"> {state.blockHeight} </span>\n    </h3>\n    {context.accountId ? blockHeightForm : notLoggedInWarning}\n    <p class=\"text-center py-2\">\n      You clicked the button {state.buttonClickCount} times.\n    </p>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chloe.near/widget/playground", "__row_index": 2}