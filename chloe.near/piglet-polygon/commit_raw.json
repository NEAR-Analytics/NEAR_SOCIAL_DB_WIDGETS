{"tx_hash": "ANFHYGyY2rgWRp6H1vUkBFtCbFUr2WhgbDGWjfXpuCMW", "action_id_social": "8LfCv8bamfzHzzLQKFiNXGFKaFNSULsTS8sGDUwSjnkH-0-widget", "block_id": 94959611, "block_timestamp": "2023-06-25T00:45:44.715Z", "signer_id": "chloe.near", "widget_name": "piglet-polygon", "source_code": "// Styling components\nconst Button = styled.button`\n  background: palevioletred;\n  color: white;\n  font-size: 1em;\n  margin: 10px;\n  padding: 0.5em 1em;\n  border: 2px solid palevioletred;\n  border-radius: 10px;\n  &:hover {\n    background: white;\n    color: palevioletred;\n  }\n`;\n\nconst Table = styled.table`\n  width: 100%;\n  margin-top: 20px;\n  th, td {\n    border: 1px solid black;\n    padding: 10px;\n  }\n`;\n\nconst Header = styled.p`\n  text-align: left;\n  font-size: 0.8em;\n  margin-top: 10px;\n`;\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  min-height: 100vh;\n  background: #ffc0cb; /* Update background color to a lighter pink */\n  color: white;\n  font-size: calc(10px + 2vmin);\n  padding: 20px;\n  box-sizing: border-box;\n`;\n\nconst Title = styled.h1`\n  font-weight: bold;\n  margin-top: 20px;\n`;\n\nconst Info = styled.p`\n  margin-top: 10px;\n`;\n\nconst PiggyImage = styled.img`\n  width: 200px;\n  height: auto;\n  margin-bottom: 20px;\n`;\n\n// check network and make sure poly\n\nif (\n  state.chainId === undefined &&\n  ethers !== undefined &&\n  Ethers.send(\"eth_requestAccounts\", [])[0]\n) {\n  Ethers.provider()\n    .getNetwork()\n    .then((chainIdData) => {\n      if (chainIdData?.chainId) {\n        State.update({ chainId: chainIdData.chainId });\n      }\n    });\n}\nif (state.chainId !== undefined && state.chainId !== 137) {\n  return <p>Switch to Polygon Mainnet</p>;\n}\n\n// FETCH Gnosis ABI and set decimals for DAI (do shETH + sDAI have different decimals, prolly not)\n\nconst GnosisContract = \"0xDcece7aAEF7B2F825Ee749605B59B5E5dcf173CC\";\nconst tokenDecimals = 18;\n\nconst GnosisAbi = fetch(\n  \"https://raw.githubusercontent.com/gnosis/gnosis-abi-decoder/master/src/abi/safe-contracts/build/contracts/GnosisSafe.json\"\n);\nif (!GnosisAbi.ok) {\n  return \"Loading\";\n}\n\nconst iface = new ethers.utils.Interface(lidoAbi.body);\n\n// HELPER FUNCTIONS\n\nconst getStakedBalance = (receiver) => {\n  const encodedData = iface.encodeFunctionData(\"balanceOf\", [receiver]);\n\n  return Ethers.provider()\n    .call({\n      to: lidoContract,\n      data: encodedData,\n    })\n    .then((rawBalance) => {\n      const receiverBalanceHex = iface.decodeFunctionResult(\n        \"balanceOf\",\n        rawBalance\n      );\n\n      return Big(receiverBalanceHex.toString())\n        .div(Big(10).pow(tokenDecimals))\n        .toFixed(2)\n        .replace(/\\d(?=(\\d{3})+\\.)/g, \"$&,\");\n    });\n};\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chloe.near/widget/piglet-polygon", "__row_index": 0}