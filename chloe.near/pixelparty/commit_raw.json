{"tx_hash": "ActvdFq1taxuPp579fSVVxTkJ38FGAwVP2ahJYr2J2d4", "action_id_social": "69kt8noVtcNyrxxjoux7sEEFvCPWHRET7rbKg4prMAe9-0-widget", "block_id": 87545879, "block_timestamp": "2023-03-18 04:59:46.700", "signer_id": "chloe.near", "widget_name": "pixelparty", "source_code": "const contract = \"pixelparty.near\";\nconst start = 0;\nconst end = 599;\nconst frames = [];\n\nfor (let index = start; index <= end; index++) {\n  const base64Data = Near.view(contract, \"load_frame_data\", {\n    start: index,\n    end: index,\n  })[0];\n\n  if (base64Data) {\n    const buffer = new Buffer(base64Data, \"base64\");\n    const byteData = [];\n\n    // Convert buffer to array of bytes, including 0 values\n    for (let i = 0; i < buffer.length; i++) {\n      const byte = buffer[i];\n      byteData.push(byte);\n      if (byte === 0) {\n        // check for 0 value and add it to array\n        byteData.push(0);\n        byteData.push(0);\n      }\n    }\n\n    // Set undefined values to 255\n    for (let i = 0; i < byteData.length; i++) {\n      if (byteData[i] === undefined || byteData[i] === null) {\n        byteData[i] = 255;\n      }\n    }\n\n    // Convert byte array to array of color objects\n    const colors = [];\n    for (let i = 0; i < byteData.length; i += 3) {\n      const r = byteData[i];\n      const g = byteData[i + 1];\n      const b = byteData[i + 2];\n      colors.push({ r, g, b });\n    }\n\n    frames.push(colors);\n  } else {\n    // handle empty or null data\n    const colors = Array(400).fill({ r: 255, g: 255, b: 255 });\n    frames.push(colors);\n  }\n}\n\nconst grid = frames.map((frame, frameIndex) => {\n  const rows = [];\n  for (let i = 0; i < 20; i++) {\n    const row = [];\n    for (let j = 0; j < 20; j++) {\n      const index = i * 20 + j;\n      const color = frame[index];\n      row.push(\n        <div\n          key={index}\n          style={{\n            width: \"10px\",\n            height: \"10px\",\n            backgroundColor: `rgb(${color.r}, ${color.g}, ${color.b})`,\n          }}\n        />\n      );\n    }\n    rows.push(<div style={{ display: \"flex\" }}>{row}</div>);\n  }\n  return (\n    <div key={frameIndex}>\n      <p>Frame {frameIndex + 1}:</p>\n      {rows}\n    </div>\n  );\n});\n\nreturn <div>{grid}</div>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/chloe.near/widget/pixelparty"}