{"tx_hash": "Aa1G2JQkyVR71jn5A17TtTBZ9EGEJLLCGfJHtjMoDGh3", "action_id_social": "3RJHWQfLoH6WrG9iZZyrLhB3Lw4BKj3BEboKw83sYLNu-0-widget", "block_id": 80301264, "block_timestamp": "2022-12-10 01:51:55.881", "signer_id": "duocelot.near", "widget_name": "AddImage_gpux", "source_code": "const accountId = context.accountId;\n\nif (!accountId) {\n  return \"Please sign in with NEAR wallet to add a new image\";\n}\n\ninitState({\n  meme: { title: \"\", description: \"\" },\n  img: {},\n  rollImg: \"https://via.placeholder.com/512x512\",\n});\n\nconst meme = {\n  title: state.meme.title,\n  description: state.meme.description,\n  image: {},\n};\n\nif (state.img.cid) {\n  meme.image.ipfs_cid = state.img.cid;\n}\n\nconst hasMeme = meme.image.ipfs_cid || meme.title;\n\nfunction rollImage() {\n  state.rollImg =\n    \"https://explorer.gpux.ai/api/inference/gpux/sd15?return_grid=true&image_count=2&steps=10&prompt=an illustration of a samurai battle sunshine, oriental watercolor themed, sun rising \";\n}\n\nreturn (\n  <div className=\"row mb-3\">\n    <div>\n      <h4>Add an image</h4>\n    </div>\n\n    <div className=\"mb-2\">\n      Image:\n      <br />\n      <IpfsImageUpload image={state.img} />\n    </div>\n    {meme.image.ipfs_cid && (\n      <div className=\"mb-2\">\n        Title <span className=\"text-secondary\">(optional)</span>\n        <input type=\"text\" value={state.meme.title} />\n      </div>\n    )}\n    {state.meme.title && (\n      <div className=\"mb-2\">\n        Description <span className=\"text-secondary\">(optional)</span>\n        <input type=\"text\" value={state.meme.description} />\n      </div>\n    )}\n    <div className=\"mb-2\">\n      {hasMeme ? (\n        <CommitButton data={{ post: { meme } }}>Post image</CommitButton>\n      ) : (\n        !props.noPrevMeme && (\n          <a className=\"btn btn-outline-primary\" onClick={(e) => rollImage()}>\n            \ud83c\udfb2 Generate an Image\n          </a>\n        )\n      )}\n    </div>\n    <hr />\n    <img id=\"rollImg\" src={state.rollImg} style={{ filter: \"blur(0px)\" }} />\n    {(hasMeme || !props.noPrevMeme) && (\n      <Widget\n        src=\"duocelot.near/widget/AddImage_gpux\"\n        props={{ meme: hasMeme ? meme : undefined }}\n      />\n    )}\n  </div>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/duocelot.near/widget/AddImage_gpux", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.name": NaN, "metadata.tags.ai": NaN, "metadata.tags.app": NaN, "metadata.tags.art": NaN, "metadata.tags.generator": NaN, "metadata.tags.image": NaN, "metadata.tags.prompt": NaN}