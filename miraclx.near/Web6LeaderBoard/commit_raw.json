{"tx_hash": "FkRUPEKukvLbRX9Qgn84FVGgAZQjJWpCoFeRQxvU2NPi", "action_id_social": "3Aya3HLK3UVN5HXkFWmPjHRj937DMiCjYe3rDTbkpBiy-0-widget", "block_id": 81028931, "block_timestamp": "2022-12-19 20:55:05.592", "signer_id": "miraclx.near", "widget_name": "Web6LeaderBoard", "source_code": "let index = state.index ?? Storage.get(\"index\");\nif (index !== null) {\n  index = index || [];\n\n  const lastBlockHeight = index[0].blockHeight || 0;\n\n  const newIndex = Social.index(\"web6\", \"web6-idx\", {\n    order: \"asc\",\n    from: lastBlockHeight + 1,\n    subscribe: true,\n  });\n\n  if (newIndex !== null && newIndex.length > 0) {\n    index = [...newIndex.reverse(), ...index];\n    Storage.set(\"index\", index);\n  }\n\n  console.log(index);\n\n  if ((state.index.length || 0) < (index.length || 0)) {\n    State.update({\n      index,\n    });\n  }\n}\n\nif (moos) {\n  moos.forEach(({ accountId, value }) => {\n    const key = JSON.stringify({ accountId, value });\n    if (key in uniqueMoos) {\n      return;\n    }\n    counter[accountId] = (counter[accountId] || 0) + 1;\n    uniqueMoos[key] = true;\n  });\n}\n\nfunction timelineView() {\n  return <>Timeline</>;\n}\n\nfunction leaderboardView() {\n  return <>Leaderboard</>;\n}\n\nreturn (\n  <>\n    <ul class=\"nav nav-tabs justify-content-center\" id=\"myTab\" role=\"tablist\">\n      <li class=\"nav-item\" role=\"presentation\">\n        <button\n          class=\"nav-link text-dark active\"\n          id=\"timeline-tab\"\n          data-bs-toggle=\"tab\"\n          data-bs-target=\"#timeline\"\n          type=\"button\"\n          role=\"tab\"\n          aria-controls=\"timeline\"\n          aria-selected={state.view == \"timeline\"}\n          onClick={() => (state.view = \"timeline\")}\n        >\n          Timeline\n        </button>\n      </li>\n      <li class=\"nav-item\" role=\"presentation\">\n        <button\n          class=\"nav-link text-dark\"\n          id=\"leaderboard-tab\"\n          data-bs-toggle=\"tab\"\n          data-bs-target=\"#leaderboard\"\n          type=\"button\"\n          role=\"tab\"\n          aria-controls=\"leaderboard\"\n          aria-selected={state.view == \"leaderboard\"}\n          onClick={() => (state.view = \"leaderboard\")}\n        >\n          Leaderboard\n        </button>\n      </li>\n    </ul>\n    <div class=\"tab-content\" id=\"myTabContent\">\n      <div\n        class=\"tab-pane fade show active\"\n        id=\"timeline\"\n        role=\"tabpanel\"\n        aria-labelledby=\"timeline-tab\"\n      >\n        {timelineView()}\n      </div>\n      <div\n        class=\"tab-pane fade\"\n        id=\"leaderboard\"\n        role=\"tabpanel\"\n        aria-labelledby=\"leaderboard-tab\"\n      >\n        {leaderboardView()}\n      </div>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/miraclx.near/widget/Web6LeaderBoard"}