{"tx_hash": "AJ4hs4SsG4ML6SjxQbsZJgeZ8JjeocMxFokeuJwK9Nvc", "action_id_social": "GZXqNR4MihU4KY9wx2f2XZFTKwTKNMXrZXLGiUvnVSMB-0-widget", "block_id": 94968217, "block_timestamp": "2023-06-25T03:26:12.278Z", "signer_id": "a_liutiev.near", "widget_name": "ETHWaterloo", "source_code": "State.init({\n  value: \"submit\",\n  inputSubmitLabel: \"Type Message\",\n  web3connectLabel: \"Connect Wallet\",\n  emptyMessage: \"start the thread pussy...\",\n\n  messageCount: 0,\n  inputValue: \"\",\n  submitMessage: \"\",\n  messageArray: [],\n});\n\n//API https://us-central1-ethglobal-wat23-ai-hack.cloudfunctions.net/helloWorld?q=tell+me+a+joke+about+BOS\n\nconst API_URL =\n  \"https://us-central1-ethglobal-wat23-ai-hack.cloudfunctions.net/helloWorld\";\n\nconst value = state.value || \"n/a\";\nconst web3connectLabel = state.web3connectLabel || \"n/a\";\nconst inputSubmitLabel = state.inputSubmitLabel || \"n/a\";\nconst messageCount = state.messageCount || 0;\nconst messageArray = state.messageArray || [];\nconst emptyMessage = state.emptyMessage || \"\";\n\n// message counter submit\nconst handleButtonClick = () => {\n  if (state.submitMessage !== \"\") {\n    State.update({\n      messageCount: state.messageCount + 1,\n      messageArray: [\n        ...state.messageArray,\n        {\n          id: state.messageCount,\n          sender: \"Alex 0x00\",\n          date: new Date().toLocaleTimeString(),\n          payload: state.submitMessage,\n        },\n      ],\n    });\n    fetchData();\n  } else return;\n};\n\nconst fetchData = () => {\n  console.log(state.messageArray[messageCount]);\n\n  let data = state.messageArray[messageCount];\n  data = JSON.stringify(data);\n\n  console.log(\"SENT JSON object:\", data);\n\n  asyncFetch(API_URL, {\n    body: data,\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    method: \"POST\",\n  });\n};\n\n// message hander\nconst handleInputChange = (e) => {\n  State.update({\n    submitMessage: e.target.value,\n  });\n};\n\nfunction messageAI() {}\n\nreturn (\n  <div class=\"card\">\n    <div class=\"card-header d-flex justify-content-between align-items-center p-3\">\n      <h5 className=\"mb-0\">Chat messages</h5>\n      <div className=\"d-flex flex-row align-items-center\">\n        <span className=\"badge bg-secondary me-3 p-2\">\n          {state.messageCount}\n        </span>\n        <Widget\n          src=\"a_liutiev.near/widget/button_web3connect\"\n          props={{ web3connectLabel }}\n        />\n      </div>\n    </div>\n\n    <Widget\n      src=\"a_liutiev.near/widget/display_messages\"\n      props={{ emptyMessage, messageArray }}\n    />\n    <br />\n    <div class=\"card-footer text-muted justify-content-start align-items-center p-3\">\n      <Widget\n        src=\"a_liutiev.near/widget/input_submit\"\n        props={{\n          value,\n          inputSubmitLabel,\n          handleButtonClick,\n          handleInputChange,\n        }}\n      />\n    </div>\n    <div></div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/a_liutiev.near/widget/ETHWaterloo", "__row_index": 1}