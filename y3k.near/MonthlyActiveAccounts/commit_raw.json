{"tx_hash": "3q7CGsBKjFDGFfLQJtGTuVngFdiTaADc27E6H467N1UQ", "action_id_social": "4ZjhQ4Npr6yzkyWyLUWSCQH4h8zjV6X36zBx16MpvQvw-0-widget", "block_id": 84872941, "block_timestamp": "2023-02-09 23:11:40.462", "signer_id": "y3k.near", "widget_name": "MonthlyActiveAccounts", "source_code": "// Monthly Active Accounts Example\nlet data = fetch(\n  \"https://api.flipsidecrypto.com/api/v2/queries/da1fb143-e325-43ea-a07d-8fcf750eea16/data/latest\",\n  {\n    subscribe: true,\n    method: \"GET\",\n    headers: {\n      Accept: \"*/*\",\n    },\n  }\n);\n\ndata.body = data.body.sort((a, b) => new Date(a.MONTH) - new Date(b.MONTH));\nconst METRIC_NAME = \"Monthly Active Accounts\";\n\nfunction formatNumberWithCommas(number) {\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction formatDate(dateStr) {\n  const date = new Date(dateStr);\n  const year = date.getFullYear().toString().slice(-2);\n  const months = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n  const month = months[date.getMonth()];\n  return `${year} - ${month}`;\n}\n\nlet Style = styled.div`\n\n      .barTextH{\n        transition: fill 0.2s;\n\n      }\n    .barTextH:hover{\n        fill: #ad610a;\n\n      }\n      .bar {\n        transition: fill 0.2s;\n      }\n\n      .bar:hover {\n        fill: #ffa726;\n      }\n\n      .bar-chart {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n        svg {\n          width: 80%;\n        }\n\n        rect {\n          shape-rendering: crispEdges;\n          fill: #61dafb;\n          stroke: #333;\n          stroke-width: 1;\n        }\n\n\n        `;\n\nconst width = 800;\nconst height = 500;\nconst maxValue = Math.max(...data.body.map((d) => d.ACTIVE_WALLETS)) * 1.1;\n\nreturn (\n  <Style>\n    <div className=\"text-bg-light rounded-4 p-3 mb-4\">\n      {data !== null ? (\n        <p>\n          <div class=\"d-flex clearfix flex-wrap flex-column flex-sm-row\">\n            <div class=\"p-2\">\n              <div>\n                <h2>Metric: {METRIC_NAME}</h2>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <hr />\n            <div className=\"bar-chart\">\n              <svg\n                width={width}\n                height={height}\n                viewBox={`0 0 ${width} ${height + 200} `}\n                preserveAspectRatio=\"xMidYMid meet\"\n              >\n                {data.body.map((d, i) => (\n                  <g key={i} className=\"barTextH\">\n                    <rect\n                      className=\"bar\"\n                      x={i * (width / data.body.length)}\n                      y={height - (d.ACTIVE_WALLETS / maxValue) * height}\n                      width={width / data.body.length - 2}\n                      height={(d.ACTIVE_WALLETS / maxValue) * height}\n                      fill=\"#61dafb\"\n                    />\n                    <text\n                      className=\"text-primary-emphasis\"\n                      x={\n                        i * (width / data.body.length) +\n                        width / data.body.length / 2\n                      }\n                      y={height + 40}\n                      transform={`rotate(-75 ${\n                        i * (width / data.body.length) +\n                        width / data.body.length / 2\n                      } ${height + 40})`}\n                      textAnchor=\"middle\"\n                    >\n                      / {formatDate(d.MONTH)}\n                    </text>\n                    <text\n                      className=\"text-primary-emphasis\"\n                      x={\n                        i * (width / data.body.length) +\n                        width / data.body.length / 2\n                      }\n                      y={height + 90}\n                      transform={`rotate(-75 ${\n                        i * (width / data.body.length) +\n                        width / data.body.length / 2\n                      } ${height + 110})`}\n                      textAnchor=\"middle\"\n                    >\n                      {formatNumberWithCommas(d.ACTIVE_WALLETS)}\n                    </text>\n                  </g>\n                ))}\n              </svg>\n            </div>\n          </div>\n          <div>\n            <hr />\n            <small className=\"fw-bold\">\n              Data is provided by{\" \"}\n              <a\n                target=\"_blank\"\n                style={{ color: \"inherit\" }}\n                variant=\"caption\"\n                rel=\"nofollow\"\n                href=\"https://www.flipsidecrypto.com/\"\n              >\n                Flipside Crypto\n              </a>\n            </small>\n          </div>\n        </p>\n      ) : (\n        <div>Loading ...</div>\n      )}\n    </div>\n  </Style>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/y3k.near/widget/MonthlyActiveAccounts", "metadata.description": "This widget shows monthly active accounts on NEAR. \nCheckout the source for more information on how to replicate and build similar charts.\n\nCreated by NEAR Foundation Analytics.", "metadata.image.ipfs_cid": "bafkreigoqeet3nfsinawm4fmhqg4cryh5jmnbvus3g7xlkcxuaapu6724q", "metadata.linktree.website": "https://github.com/0bserver07/NearSocialWidgets", "metadata.name": "Monthly Active Accounts", "metadata.tags.chart": "", "metadata.tags.data": "", "metadata.tags.visualization": ""}