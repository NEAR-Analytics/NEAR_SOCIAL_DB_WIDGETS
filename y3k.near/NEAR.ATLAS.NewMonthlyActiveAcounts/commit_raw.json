{"tx_hash": "4AaDb1Tsgzury2M7zEc25qbMEkUCMNSjvasxSB7fRwSg", "action_id_social": "B1iwE5Qmxty6bYrNqQWSXY9S2B76zi3DVZttpoNiVoLv-0-widget", "block_id": 87951826, "block_timestamp": "2023-03-23 15:46:28.753", "signer_id": "y3k.near", "widget_name": "NEAR.ATLAS.NewMonthlyActiveAcounts", "source_code": "let static_file_param = \"NEAR-ATLAS-DATA-New MAAs.csv\";\n// Monthly Active Accounts Example\nlet rawData = fetch(\n  \"https://github-near-data-api.vercel.app/api/static_file_param?filename=\" +\n    static_file_param,\n  {\n    subscribe: true,\n    method: \"GET\",\n    headers: {\n      Accept: \"*/*\",\n    },\n  }\n);\n\nconst METRIC_NAME = \"NEAR Monthly New Active Accounts\";\n\nlet Style = styled.div`\n        \n        \n              .bar {\n                transition: fill 0.2s;\n              }\n        \n              .bar:hover {\n                fill: #ffa726;\n              }\n        \n              .bar-chart {\n                display: flex;\n                align-items: center;\n                justify-content: center;\n              }\n        \n                svg {\n                  width: 80%;\n                }\n        \n                rect {\n                  shape-rendering: crispEdges;\n                  fill: #61dafb;\n                  stroke: #333;\n                  stroke-width: 1;\n                }\n        \n        \n                `;\n\nconst colorGenerator = () => {\n  const colors = [\n    \"rgb(255, 99, 132)\",\n    \"rgb(75, 192, 192)\",\n    \"rgb(153, 102, 255)\",\n    \"rgb(255, 159, 64)\",\n    \"rgb(54, 162, 235)\",\n    \"rgb(201, 203, 207)\",\n    \"rgb(255, 205, 86)\",\n    \"rgb(255, 99, 71)\",\n    \"rgb(147, 112, 219)\",\n    \"rgb(0, 128, 128)\",\n    \"rgb(100, 149, 237)\",\n    \"rgb(127, 255, 0)\",\n  ];\n\n  let index = 0;\n\n  return () => {\n    if (index >= colors.length) {\n      index = 0;\n    }\n\n    return colors[index++];\n  };\n};\n\nconst months = [\n  \"January\",\n  \"February\",\n  \"March\",\n  \"April\",\n  \"May\",\n  \"June\",\n  \"July\",\n  \"August\",\n  \"September\",\n  \"October\",\n  \"November\",\n  \"December\",\n];\n\n// logic start\n\nfunction parseUTCDate(dateString) {\n  const [month, day, year] = dateString\n    .split(\"/\")\n    .map((str) => parseInt(str, 10));\n  // Subtract 1 from the month, as JavaScript months are zero-based\n  const utcTimestamp = Date.UTC(year, month - 1, day);\n  return new Date(utcTimestamp);\n}\n\nconst getBackgroundColor = colorGenerator();\n\nlet processedData = [];\nlet labels_of_weeks = [];\nlet weeklyData = [];\n\ntry {\n  rawData.body.forEach((datum) => {\n    if (!datum[\"Weekly_Date\"]) {\n      return;\n    }\n\n    const activity_date = parseUTCDate(datum[\"Weekly_Date\"]);\n\n    const weeklyString = datum.Weekly.replace(\",\", \"\").replace(\",\", \"\") || \"0\"; // default to \"0\" if Weekly is empty or not defined\n    const weeklyValue = parseFloat(weeklyString);\n\n    // append to labels_of_weeks\n    if (!labels_of_weeks.includes(datum[\"Weekly_Date\"])) {\n      labels_of_weeks.push(datum[\"Weekly_Date\"]);\n      weeklyData.push(weeklyValue);\n    }\n  });\n} catch (err) {\n  console.log(err);\n}\n\n// console.log(processedData);\n\n// logic part-2\n\nconst data = {\n  labels: labels_of_weeks,\n  datasets: [\n    {\n      label: \"New MAAs\",\n      data: weeklyData,\n      backgroundColor: [\"rgba(54, 162, 235, 0.2)\"],\n      borderColor: [\"rgba(54, 162, 235, 1)\"],\n      borderWidth: 1,\n    },\n  ],\n};\n\n// config\nconst config = {\n  type: \"bar\",\n  data,\n  options: {\n    scales: {\n      y: {\n        beginAtZero: true,\n      },\n    },\n  },\n};\n\nreturn (\n  <Style>\n    <div className=\"text-bg-light rounded-4 p-3 mb-4\">\n      {data !== null ? (\n        <p>\n          <div class=\"\">\n            <div class=\"\">\n              <div>\n                <h3>{METRIC_NAME}</h3>\n                <BarEl options={config} data={data} />\n              </div>\n            </div>\n          </div>\n\n          <div></div>\n        </p>\n      ) : (\n        <div>Loading ...</div>\n      )}\n    </div>\n  </Style>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/y3k.near/widget/NEAR.ATLAS.NewMonthlyActiveAcounts"}