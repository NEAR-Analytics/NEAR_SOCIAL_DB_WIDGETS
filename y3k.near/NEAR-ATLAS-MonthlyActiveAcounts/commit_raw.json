{"tx_hash": "7BEQriScxcNRtybNTqSyfve5B28BN71XdVzjGkeA8Utq", "action_id_social": "FMBBXyjEi7L8zYyjziE9VRkkH7AcqwGUuDXVbwTjuuj4-0-widget", "block_id": 88478727, "block_timestamp": "2023-03-31 03:18:38.434", "signer_id": "y3k.near", "widget_name": "NEAR-ATLAS-MonthlyActiveAcounts", "source_code": "let static_file_param = \"NEAR-ATLAS-DATA-MAAs.csv\";\n// Monthly Active Accounts Example\n// Monthly Active Accounts Example\nlet raw_data = fetch(\n  \"https://api.flipsidecrypto.com/api/v2/queries/c493c7b1-cfcc-4aee-ad79-869b4ed8ca90/data/latest\",\n  {\n    subscribe: true,\n    method: \"GET\",\n    headers: {\n      Accept: \"*/*\",\n    },\n  }\n);\n\nconst data = raw_data.body || [];\n\nlet Style = styled.div`\n                `;\n\n// logic start\n\nconst sortedData = data.sort((a, b) => {\n  return new Date(a[\"DAY\"]) - new Date(b[\"DAY\"]);\n});\n\nconst NEW_MAAS = {};\nconst RETURNING_MAAS = {};\n\ndata.map((entry) => {\n  NEW_MAAS[entry[\"DAY\"]] = entry[\"NEW_MAAS\"];\n  RETURNING_MAAS[entry[\"DAY\"]] = entry[\"RETURNING_MAAS\"];\n});\n\n// console.log(data);\n// console.log(RETURNING_MAAS);\n\nconst dates = data.map((entry) => entry[\"DAY\"]);\n\n// console.log(processedData);\n\n// logic part-2\n\nconst stacked_options = {\n  plugins: {\n    title: {\n      display: true,\n      text: \"Monthly Active Accounts\",\n    },\n  },\n  responsive: true,\n  maintainAspectRatio: true,\n  scales: {\n    x: {\n      stacked: true,\n    },\n    y: {\n      stacked: true,\n    },\n  },\n};\n\nconst stacked_bar_data = {\n  dates,\n  datasets: [\n    {\n      label: \"New MAAs\",\n      data: NEW_MAAS,\n      backgroundColor: \"rgb(75, 192, 192)\",\n    },\n    {\n      label: \"Returning MAAs\",\n      data: RETURNING_MAAS,\n      backgroundColor: \"rgb(255, 99, 132)\",\n    },\n  ],\n};\n\nreturn (\n  <Style>\n    <div className=\"text-bg-dark container\">\n      {data !== null ? (\n        <div className=\"row\">\n          <div className=\"col-12\">\n            <BarEl options={stacked_options} data={stacked_bar_data} />\n          </div>\n        </div>\n      ) : (\n        <div>Loading ...</div>\n      )}\n    </div>\n  </Style>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/y3k.near/widget/NEAR-ATLAS-MonthlyActiveAcounts"}