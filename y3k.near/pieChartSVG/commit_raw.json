{"tx_hash": "8ziaAsu3y99B5BdcTUBLQzEUX7qKGPbCdaRKB9mn17HC", "action_id_social": "CKgsCJEwo2gFXuigDhyiGBX9DoYGef7sZysmwDzTSHCP-0-widget", "block_id": 86184466, "block_timestamp": "2023-02-27 19:06:19.703", "signer_id": "y3k.near", "widget_name": "pieChartSVG", "source_code": "let Style = styled.div`\n\n  .barTextH{\n    transition: fill 0.2s;\n\n  }\n.barTextH:hover{\n    fill: #ad610a;\n\n  }\n  .bar {\n    transition: fill 0.2s;\n  }\n\n  .bar:hover {\n    fill: #ffa726;\n  }\n\n  .bar-chart {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n    svg {\n      width: 80%;\n    }\n\n    rect {\n      shape-rendering: crispEdges;\n      fill: #61dafb;\n      stroke: #333;\n      stroke-width: 1;\n    }\n\n\n    `;\n\nconst values = props.values || [100];\nconst labels = props.labels || [\"NA\"];\n\n// near social doesn't allow MathPI\nconst math_PI = 3.14159;\n\nconst total = values.reduce((acc, value) => acc + value, 0);\nlet startAngle = 0;\nconst [tooltip, setTooltip] = State.init({\n  show: false,\n  value: \"\",\n  x: 0,\n  y: 0,\n});\n\nconst handleMouseEnter = (value, event) => {\n  setTooltip({\n    show: true,\n    value: value,\n    x: event.clientX + 10,\n    y: event.clientY + 10,\n  });\n};\n\nconst handleMouseLeave = () => {\n  setTooltip({ show: false, value: \"\", x: 0, y: 0 });\n};\n\nreturn (\n  <>\n    <svg viewBox=\"0 0 100 100\">\n      {values.map((value, index) => {\n        const angle = (value / total) * 360;\n        const endAngle = startAngle + angle;\n\n        const largeArc = angle > 180 ? 1 : 0;\n\n        const x1 = 50 + 30 * Math.cos((startAngle - 90) * (math_PI / 180));\n        const y1 = 50 + 30 * Math.sin((startAngle - 90) * (math_PI / 180));\n        const x2 = 50 + 30 * Math.cos((endAngle - 90) * (math_PI / 180));\n        const y2 = 50 + 30 * Math.sin((endAngle - 90) * (math_PI / 180));\n\n        const path = `M 50,50  L ${x1},${y1}  A 30,30 0 ${largeArc} 1 ${x2},${y2} Z`;\n\n        startAngle = endAngle;\n\n        return (\n          <path\n            key={index}\n            d={path}\n            fill={`hsl(${(index * 30) % 360}, 70%, 70%)`}\n            onMouseEnter={handleMouseEnter.bind(null, value)}\n            onMouseLeave={handleMouseLeave}\n          />\n        );\n      })}\n    </svg>\n    {tooltip.show && (\n      <div\n        style={{\n          position: \"absolute\",\n          left: tooltip.x,\n          top: tooltip.y,\n          backgroundColor: \"white\",\n          padding: \"5px 10px\",\n          border: \"1px solid black\",\n          borderRadius: \"5px\",\n        }}\n      >\n        {tooltip.value}\n      </div>\n    )}\n    <div style={{ display: \"flex\", alignItems: \"center\" }}>\n      {labels.map((label, index) => (\n        <div key={index} style={{ display: \"flex\", alignItems: \"center\" }}>\n          <div\n            style={{\n              width: 10,\n              height: 10,\n              backgroundColor: `hsl(${(index * 30) % 360}, 70%, 70%)`,\n              marginRight: 5,\n            }}\n          />\n          {label}\n        </div>\n      ))}\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/y3k.near/widget/pieChartSVG"}