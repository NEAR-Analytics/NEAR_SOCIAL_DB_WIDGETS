{"tx_hash": "9qMWAARAuof9oJrZig8P8ref4gcZ1fLzajjbVzAtV33D", "action_id_social": "EmnSwLupASHvse2A77Zc3iC1LAhFznrbeLT2UcxCmtfW-0-widget", "block_id": 94646844, "block_timestamp": "2023-06-20T22:48:54.012Z", "signer_id": "yairnava.near", "widget_name": "VirtualPetsList-BurritoBattle", "source_code": null, "metadata": null, "branch": {"draft": {"": "const virtualPetContract = \"0x6574cBC3a80290D961a2425b5fc5899843B8cC39\";\n\nconst virtualPetAbi = fetch(\n  \"https://indigo-fluttering-emu-841.mypinata.cloud/ipfs/QmanMNCrCSGwJQTgz93x2CLtg1qG654QocJH5XPyZJghDs\"\n);\n\nif (!virtualPetAbi.ok) {\n  return \"Loading\";\n}\n\nconst iface = new ethers.utils.Interface(virtualPetAbi.body);\n\nState.init({\n  myVirtualPets: [],\n});\n\nconst ItemBackground = styled.div`\n        width: 100%;\n        height: 100vh;\n        display: flex;\n        justify-content: center;\n        margin-bottom: -50px;\n        background-image: url('https://pin.ski/444ghZP');\n        background-repeat: no-repeat;\n        background-size: cover;\n        `;\n\nconst ItemContainer = styled.div`\n        margin-top: 30px;\n        box-sizing: border-box;\n        min-width: 700px;\n        max-width: 900px;\n        width: 100%;\n        padding: 0px 32px;\n        position: relative;\n        `;\n\nconst ItemTitle = styled.h3`\n        font-weight: 900;\n        text-align: center;\n        color: white;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        margin-bottom: 1rem;\n        `;\n\nconst ItemImage = styled.img`\n            width: 40px;\n            margin-right: 15px;\n        `;\n\nconst ItemHeader = styled.div`\n        background: rgb(242,167,115);\n        font-weight: 400;\n        font-size: 12px;\n        line-height: 1.6em;\n        border-radius: 20px;\n        margin: 0px;\n        padding: 20px;\n        box-shadow: none;\n        color: rgb(255, 255, 255);\n        border: rgb(139,68,37);\n        border-top-style: outset;\n        `;\n\nconst ItemBody = styled.div`\n        font-weight: 400;\n        font-size: 1em;\n        line-height: 1.6em;\n        border-radius: 0px 0px 20px 20px;\n        margin: -20px 0px 0px;\n        padding: 32px;\n        box-shadow: none;\n        background: white;\n        color: rgb(242,167,115);\n        min-height: 500px;\n        max-height: auto;\n        border: solid 5px;\n        `;\n\nconst ItemMintButton = styled.button`\n        background: gray;\n        color: rgb(255, 255, 255);\n        font-weight: 700;\n        padding: 15px 20px;\n        border-radius: 1rem;\n        border: none;\n        &:hover {\n            background: black;\n        }\n        `;\n\nconst ItemPetsSection = styled.div`\n        gap: 3rem  7rem !important;\n        display: flex !important;\n        flex-wrap: wrap !important;\n        min-height: 500px;\n        max-height: 550px;\n        overflow:scroll;\n        `;\n\nconst ItemPet = styled.div`\n    gap: 0.25rem !important;\n    padding: 1rem !important;\n    flex-direction: column !important;\n    display: flex !important;\n    border: solid 3px;\n    border-radius: 20px;\n    color: rgb(0 0 0 / 30%);\n    background: rgb(0 0 0 / 7%);\n    min-width: 170px;\n    align-items: center;\n`;\n\nconst ItemPetName = styled.label`\n    color: black;\n`;\n\nconst ItemPetImg = styled.img`\n    width: 100px;\n`;\n\nconst ItemNoPets = styled.div`\n    width: 100%;\n    color: black;\n    margin-top: 50px;\n    text-align: center;\n}\n`;\n\nif (state.sender === undefined) {\n  const accounts = Ethers.send(\"eth_requestAccounts\", []);\n  if (accounts.length) {\n    State.update({ sender: accounts[0] });\n  }\n}\n\nif (state.sender) {\n  const contract = new ethers.Contract(\n    virtualPetContract,\n    virtualPetAbi.body,\n    Ethers.provider().getSigner()\n  );\n  // Consultar virtualpets del usuario\n  //   contract.checkStatus(1).then((res) => {\n  //     console.log(res);\n  //   });\n\n  const pets = [\n    {\n      name: \"Pet1\",\n      image: \"https://pin.ski/3Jjp95g\",\n      happiness: 50,\n      hunger: 50,\n      currentActivity: \"Idle\",\n      eat_time: \"13789127389712893\",\n      time_sleep: \"13789127389712893\",\n    },\n    {\n      name: \"Pet1\",\n      image: \"https://pin.ski/3Jjp95g\",\n      happiness: 50,\n      hunger: 50,\n      currentActivity: \"Idle\",\n      eat_time: \"13789127389712893\",\n      time_sleep: \"13789127389712893\",\n    },\n    {\n      name: \"Pet1\",\n      image: \"https://pin.ski/3Jjp95g\",\n      happiness: 50,\n      hunger: 50,\n      currentActivity: \"Idle\",\n      eat_time: \"13789127389712893\",\n      time_sleep: \"13789127389712893\",\n    },\n    {\n      name: \"Pet1\",\n      image: \"https://pin.ski/3Jjp95g\",\n      happiness: 50,\n      hunger: 50,\n      currentActivity: \"Idle\",\n      eat_time: \"13789127389712893\",\n      time_sleep: \"13789127389712893\",\n    },\n    {\n      name: \"Pet1\",\n      image: \"https://pin.ski/3Jjp95g\",\n      happiness: 50,\n      hunger: 50,\n      currentActivity: \"Idle\",\n      eat_time: \"13789127389712893\",\n      time_sleep: \"13789127389712893\",\n    },\n    {\n      name: \"Pet1\",\n      image: \"https://pin.ski/3Jjp95g\",\n      happiness: 50,\n      hunger: 50,\n      currentActivity: \"Idle\",\n      eat_time: \"13789127389712893\",\n      time_sleep: \"13789127389712893\",\n    },\n    {\n      name: \"Pet1\",\n      image: \"https://pin.ski/3Jjp95g\",\n      happiness: 50,\n      hunger: 50,\n      currentActivity: \"Idle\",\n      eat_time: \"13789127389712893\",\n      time_sleep: \"13789127389712893\",\n    },\n  ];\n\n  State.update({ myVirtualPets: pets });\n}\n\nconst getSender = () => {\n  return !state.sender\n    ? \"\"\n    : state.sender.substring(0, 6) +\n        \"...\" +\n        state.sender.substring(state.sender.length - 4, state.sender.length);\n};\n\n// FETCH CSS\n\nconst cssFont = fetch(\n  \"https://fonts.googleapis.com/css2?family=Manrope:wght@200;300;400;500;600;700;800\"\n).body;\nconst css = fetch(\n  \"https://pluminite.mypinata.cloud/ipfs/Qmboz8aoSvVXLeP5pZbRtNKtDD3kX5D9DEnfMn2ZGSJWtP\"\n).body;\n\nif (!cssFont || !css) return \"\";\n\nif (!state.theme) {\n  State.update({\n    theme: styled.div`\n    font-family: Manrope, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue, sans-serif;\n    ${cssFont}\n    ${css}\n`,\n  });\n}\nconst Theme = state.theme;\n\nconsole.log(state.myVirtualPets);\n\nreturn (\n  <Theme>\n    <ItemBackground>\n      <ItemContainer>\n        <ItemHeader>\n          <ItemTitle class=\"row\">\n            <div class=\"col-4\" style={{ \"text-align\": \"left\" }}>\n              <ItemImage src=\"https://pin.ski/3Jkha80\"></ItemImage>\n            </div>\n            <div class=\"col-4\">My Virtual Pets</div>\n            <div class=\"col-4\" style={{ \"text-align\": \"right\" }}>\n              {state.sender ? (\n                <button\n                  style={{\n                    \"box-shadow\":\n                      \"0 0px 13px 0 rgba(0,0,0,0.2), 0 0px 13px 0 rgba(0,0,0,0.19)\",\n                  }}\n                  onClick={async () => {\n                    mint();\n                  }}\n                >\n                  Buy Pet\n                </button>\n              ) : null}\n            </div>\n          </ItemTitle>\n        </ItemHeader>\n        <ItemBody>\n          <div class=\"container text-center\">\n            {state.sender ? (\n              <div>\n                <ItemPetsSection>\n                  {state.myVirtualPets.length > 0 ? (\n                    state.myVirtualPets.map((pet, i) => {\n                      return (\n                        <ItemPet>\n                          <ItemPetImg src={pet.image}></ItemPetImg>\n                          <ItemPetName>{pet.name}</ItemPetName>\n                        </ItemPet>\n                      );\n                    })\n                  ) : (\n                    <ItemNoPets>\n                      You don't have a virtual pet yet, go to the minteo section\n                      to purchase one.\n                    </ItemNoPets>\n                  )}\n                </ItemPetsSection>\n              </div>\n            ) : (\n              <Web3Connect\n                className=\"LidoStakeFormSubmitContainer\"\n                connectLabel=\"Connect with Web3 to View your Virtual Pets\"\n              />\n            )}\n          </div>\n        </ItemBody>\n      </ItemContainer>\n    </ItemBackground>\n  </Theme>\n);\n"}}, "widget_modules_used": null, "widget_url": "https://near.social/#/yairnava.near/widget/VirtualPetsList-BurritoBattle", "__row_index": 1}