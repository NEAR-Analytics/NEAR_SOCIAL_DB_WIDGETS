{"tx_hash": "hye3t2GUow3uzYQ8nDawZmY5nKMqsZh1wjQa647oWSj", "action_id_social": "GxbjxPJMxAhYuLKTPZMUiRBVouwzekRW2EkKo9qtjuhM-0-widget", "block_id": 84782715, "block_timestamp": "2023-02-08 17:50:55.640", "signer_id": "events_v2.near", "widget_name": "event_lists__index__list_item", "source_code": "const EVENTS_CONTRACT = 'events_v2.near';\nconst EVENTS_LIMIT = 5;\nconst DESCRIPTION_MAX_LENGTH = 100;\nconst ANIMATION_DELAY = 200;\n\nconst event_list = props.event_list || null;\n\nif (!event_list) {\n  return props.__engine.helpers.propIsRequiredMessage('event_list');\n}\n\nfunction showEventList() {\n  props.__engine.push('show', { event_list_id: event_list.id });\n}\n\nconst Card = props.__engine.Components.Card;\nconst Text = props.__engine.Components.Text;\nconst TextHeader = props.__engine.Components.TextHeader;\nconst HorizontalScroll = props.__engine.Components.HorizontalScroll;\n\nconst CardHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  padding: 20px;\n  width: 33%;\n  border-right: 1px solid #e0e0e0;\n  min-height: 200px;\n  flex-grow: 1;\n  flex-shrink: 0;\n  word-break: break-all;\n  height: 100%;\n\n  @media (max-width: 768px) {\n    width: 100%;\n    border-right: none;\n    border-bottom: 1px solid #e0e0e0;\n    height: auto;\n    min-height: 0px;\n  }\n`;\n\nconst CardBody = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0 20px;\n  width: 66%;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: auto;\n  flex-wrap: nowrap;\n  flex-grow: 1;\n\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n`;\n\nconst ScrollingEventsContainer = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: stretch;\n  width: 100%;\n  height: 100%;\n\n  padding: 20px 20px;\n\n  @media (max-width: 768px) {\n    height: auto;\n    flex-wrap: wrap;\n  }\n`;\n\nconst AnimationSlideFadeInLeft = styled.keyframes`\n  0% {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n`;\n\nconst EventTileWrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  align-items: stretch;\n  width: 100%;\n  height: 100%;\n  animation: ${AnimationSlideFadeInLeft} 0.5s ease-in-out;\n  animation-delay: ${(props) => props.delay + ANIMATION_DELAY}ms;\n  animation-fill-mode: both;\n  opacity: 0;\n\n  & > * {\n    height: 100%;\n  }\n`;\n\nif (!state) {\n  const events = props.__engine.contract.view(\n    EVENTS_CONTRACT,\n    'get_events_in_event_list',\n    {\n      event_list_id: event_list.id,\n      limit: EVENTS_LIMIT,\n    }\n  );\n\n  if (!events) {\n    return props.__engine.loading();\n  }\n\n  State.init({ events });\n  return props.__engine.loading();\n}\n\nconst scrollingEvents =\n  (state.events || []).length > 0 ? (\n    <ScrollingEventsContainer>\n      <HorizontalScroll itemWidth={'33%'}>\n        {state.events\n          .sort(({ position: a }, { position: b }) => {\n            return a - b;\n          })\n          .map(({ event }, idx) => {\n            return (\n              <EventTileWrapper\n                delay={idx * ANIMATION_DELAY}\n                key={`${idx}-${event.id}`}\n              >\n                {props.__engine.renderComponent(\n                  'index.list_item',\n                  {\n                    event: event,\n                    small: true,\n                  },\n                  { appName: 'events' }\n                )}\n              </EventTileWrapper>\n            );\n          })}\n      </HorizontalScroll>\n    </ScrollingEventsContainer>\n  ) : (\n    <Text>This list is empty :(</Text>\n  );\n\nconst elDescription =\n  event_list.description.length > DESCRIPTION_MAX_LENGTH\n    ? event_list.description.substring(0, DESCRIPTION_MAX_LENGTH) + '...'\n    : event_list.description;\n\nconst TextButton = styled.button`\n  background: transparent;\n  border: none;\n  color: #007bff;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 400;\n  outline: none;\n  padding: 0;\n  text-decoration: underline;\n  transition: color 0.15s ease-in-out;\n  display: inline-block;\n  width: fit-content;\n\n  &:hover {\n    color: #0056b3;\n  }\n\n  &:focus {\n    color: #0056b3;\n    outline: none;\n  }\n`;\n\nconst FlexGrowDesktop = styled.div`\n  flex-grow: 1;\n  flex-shrink: 0;\n  @media (max-width: 768px) {\n    flex-grow: 0;\n    flex-shrink: 1;\n  }\n`;\n\nreturn (\n  <Card orientation=\"horizontal\">\n    <CardHeader>\n      <TextHeader>{event_list.name}</TextHeader>\n\n      <FlexGrowDesktop>\n        <Text>{elDescription}</Text>\n      </FlexGrowDesktop>\n      <TextButton\n        onClick={() => {\n          showEventList();\n        }}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') {\n            showEventList();\n          }\n        }}\n        tabIndex={0}\n      >\n        View\n      </TextButton>\n    </CardHeader>\n\n    <CardBody>{scrollingEvents}</CardBody>\n  </Card>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/events_v2.near/widget/event_lists__index__list_item"}