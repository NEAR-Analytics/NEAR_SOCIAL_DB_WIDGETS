{"tx_hash": "72Vaju6s54mF5Epvki3tQHR66BVtEBwkVGDSNBr27PQP", "action_id_social": "HyHKAgtX4qSTvHjj1Ptvod3Z9vbsr5tzVKdCpSiXEiBK-0-widget", "block_id": 84848873, "block_timestamp": "2023-02-09 15:17:56.521", "signer_id": "events_v2.near", "widget_name": "event_lists__index__list_item", "source_code": "const EVENTS_CONTRACT = 'events_v2.near';\nconst EVENTS_LIMIT = 5;\nconst DESCRIPTION_MAX_LENGTH = 100;\nconst ANIMATION_DELAY = 300;\n\nconst event_list = props.event_list || null;\n\nif (!event_list) {\n  return props.__engine.helpers.propIsRequiredMessage('event_list');\n}\n\nif (!state) {\n  const events = props.__engine.contract.view(\n    EVENTS_CONTRACT,\n    'get_events_in_event_list',\n    {\n      event_list_id: event_list.id,\n      limit: EVENTS_LIMIT,\n    }\n  );\n\n  if (!events) {\n    return props.__engine.loading();\n  }\n\n  State.init({ events });\n  return props.__engine.loading();\n}\n\nfunction showEventList() {\n  props.__engine.push('show', { event_list_id: event_list.id });\n}\n\nconst Card = props.__engine.Components.Card;\nconst CardTitle = props.__engine.Components.CardTitle;\nconst CardHeader = props.__engine.Components.CardHeader;\nconst Text = props.__engine.Components.Text;\nconst HorizontalScroll = props.__engine.Components.HorizontalScroll;\n\nconst CardBody = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0;\n  width: 66%;\n  height: 100%;\n  flex-wrap: nowrap;\n  flex-grow: 1;\n\n  @media (max-width: 768px) {\n    width: 100%;\n  }\n\n  & > * {\n    padding: 20px;\n  }\n\n  @media (max-width: 768px) {\n    & > * {\n      padding: 10px;\n    }\n  }\n`;\n\nconst AnimationSlideFadeInLeft = styled.keyframes`\n  0% {\n    opacity: 0;\n    transform: translateX(-20px);\n  }\n  100% {\n    opacity: 1;\n    transform: translateX(0);\n  }\n`;\n\nconst EventTileWrapper = styled.div`\n  width: 100%;\n  height: auto;\n  animation: ${AnimationSlideFadeInLeft} 0.5s ease-in-out;\n  animation-delay: ${(props) => props.delay + ANIMATION_DELAY}ms;\n  animation-fill-mode: forwards;\n  opacity: 0;\n\n  flex-grow & > * {\n    height: auto;\n  }\n`;\n\nconst TextButton = styled.button`\n  background: transparent;\n  border: none;\n  color: #007bff;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 400;\n  outline: none;\n  padding: 0;\n  text-decoration: underline;\n  transition: color 0.15s ease-in-out;\n  display: inline-block;\n  width: fit-content;\n  margin-top: 10px;\n\n  &:hover {\n    color: #0056b3;\n  }\n\n  &:focus {\n    color: #0056b3;\n    outline: none;\n  }\n`;\n\nconst FlexGrowDesktop = styled.div`\n  flex-grow: 1;\n  flex-shrink: 0;\n  @media (max-width: 768px) {\n    flex-grow: 0;\n    flex-shrink: 1;\n  }\n`;\n\nconst BobbleWrap = styled.div`\n  position: relative;\n  width: 0;\n  height: 100%;\n  margin-left: 30px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n`;\n\nconst Bobble = styled.div`\n  background: #f8f9fa;\n  border-radius: 50%;\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  z-index: 1;\n  transform: translate(-50%, -50%);\n  border: 1px solid #e9ecef;\n\n  font-size: 1.5rem;\n  aspect-ratio: 1 / 1;\n  height: 4rem;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  box-shadow: 0 0 12px -1px rgba(0, 0, 0, 0.2);\n\n  user-select: none;\n`;\n\nconst scrollingEvents =\n  (state.events || []).length > 0 ? (\n    <HorizontalScroll itemWidth={'200px'} style={{ height: '100%' }}>\n      {state.events\n        .sort(({ position: a }, { position: b }) => {\n          return a - b;\n        })\n        .map(({ event }, idx) => {\n          return (\n            <EventTileWrapper\n              delay={idx * ANIMATION_DELAY}\n              key={`${idx}-${event.id}`}\n            >\n              {props.__engine.renderComponent(\n                'index.list_item',\n                {\n                  event: event,\n                  small: true,\n                  delay: `${(idx + 1) * ANIMATION_DELAY}ms`,\n                  duration: '0.9s',\n                },\n                { appName: 'events' }\n              )}\n            </EventTileWrapper>\n          );\n        })}\n\n      {event_list.event_count >= EVENTS_LIMIT && (\n        <EventTileWrapper delay={(state.events.length + 2) * ANIMATION_DELAY}>\n          <BobbleWrap>\n            <Bobble>+{event_list.event_count - EVENTS_LIMIT}</Bobble>\n          </BobbleWrap>\n        </EventTileWrapper>\n      )}\n    </HorizontalScroll>\n  ) : (\n    <Text>This list is empty :(</Text>\n  );\n\nconst elDescription =\n  event_list.description.length > DESCRIPTION_MAX_LENGTH\n    ? event_list.description.substring(0, DESCRIPTION_MAX_LENGTH) + '...'\n    : event_list.description;\n\nreturn (\n  <Card orientation=\"horizontal\">\n    <CardHeader\n      style={{\n        maxWidth: '420px',\n      }}\n    >\n      <CardTitle>{event_list.name}</CardTitle>\n\n      <FlexGrowDesktop>\n        <Text>{elDescription}</Text>\n      </FlexGrowDesktop>\n\n      <TextButton\n        onClick={() => {\n          showEventList();\n        }}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') {\n            showEventList();\n          }\n        }}\n        tabIndex={0}\n      >\n        View\n      </TextButton>\n    </CardHeader>\n\n    <CardBody style={{ height: 'auto' }}>{scrollingEvents}</CardBody>\n  </Card>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/events_v2.near/widget/event_lists__index__list_item"}