{"tx_hash": "E2DZYsF8XdByhPhSGe8dmjvQ5uPq1j5jyqhdvQo4Qu6Q", "action_id_social": "EVy82CYa1AdrwqJiTUDq35MAEkBUUzBAKQgVD5MTkL4R-0-widget", "block_id": 84779807, "block_timestamp": "2023-02-08 16:54:03.263", "signer_id": "events_v2.near", "widget_name": "event_lists__index__list_item", "source_code": "const EVENTS_CONTRACT = 'events_v2.near';\nconst event_list = props.event_list || null;\n\nif (!event_list) {\n  return props.__engine.helpers.propIsRequiredMessage('event_list');\n}\n\nfunction showEventList() {\n  props.__engine.push('show', { event_list_id: event_list.id });\n}\n\nconst Card = props.__engine.Components.Card;\nconst Text = props.__engine.Components.Text;\nconst TextHeader = props.__engine.Components.TextHeader;\nconst HorizontalScroll = props.__engine.Components.HorizontalScroll;\n\nconst CardHeader = styled.div`\n  display: flex;\n  flex-direction: column;\n  justify-content: stretch;\n  padding: 20px;\n  width: 33%;\n  border-right: 1px solid #e0e0e0;\n  min-height: 200px;\n  flex-grow: 1;\n  flex-shrink: 0;\n`;\n\nconst CardBody = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0 20px;\n  width: 66%;\n  height: 100%;\n  overflow-y: hidden;\n  overflow-x: auto;\n  flex-wrap: nowrap;\n  flex-grow: 1;\n`;\n\nconst EVENTS_LIMIT = 2;\nconst DESCRIPTION_MAX_LENGTH = 100;\n\nconst events = props.__engine.contract.view(\n  EVENTS_CONTRACT,\n  'get_events_in_event_list',\n  {\n    event_list_id: event_list.id,\n    limit: EVENTS_LIMIT,\n  }\n);\n\nconst scrollingEvents =\n  (events || []).length > 0 ? (\n    <HorizontalScroll itemWidth={'150px'}>\n      {events.map(({ event }, idx) => {\n        return props.__engine.renderComponent(\n          'index.list_item',\n          {\n            event: event,\n            key: `${idx}-${event.id}`,\n          },\n          { appName: 'events' }\n        );\n      })}\n\n      {event_list.event_count > EVENTS_LIMIT && (\n        <Text>\n          And {event_list.event_count - EVENTS_LIMIT} more events in this list.\n        </Text>\n      )}\n    </HorizontalScroll>\n  ) : (\n    <Text>This list is empty :(</Text>\n  );\n\nconst elDescription =\n  event_list.description.length > DESCRIPTION_MAX_LENGTH\n    ? event_list.description.substring(0, DESCRIPTION_MAX_LENGTH) + '...'\n    : event_list.description;\n\nconst TextButton = styled.button`\n  background: transparent;\n  border: none;\n  color: #007bff;\n  cursor: pointer;\n  font-size: 1rem;\n  font-weight: 400;\n  outline: none;\n  padding: 0;\n  text-decoration: underline;\n  transition: color 0.15s ease-in-out;\n  display: inline-flex;\n\n  &:hover {\n    color: #0056b3;\n  }\n\n  &:focus {\n    color: #0056b3;\n    outline: none;\n  }\n`;\n\nreturn (\n  <Card orientation=\"horizontal\">\n    <CardHeader>\n      <TextHeader>{event_list.name}</TextHeader>\n      <Text>{elDescription}</Text>\n      <TextButton\n        onClick={() => {\n          showEventList();\n        }}\n        onKeyDown={(e) => {\n          if (e.key === 'Enter') {\n            showEventList();\n          }\n        }}\n        tabIndex={0}\n      >\n        View\n      </TextButton>\n    </CardHeader>\n\n    <CardBody>{scrollingEvents}</CardBody>\n  </Card>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/events_v2.near/widget/event_lists__index__list_item"}