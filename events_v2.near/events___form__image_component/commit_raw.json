{"tx_hash": "9eVWt7bRiTBCuDUtpG5mKMH9kChfF4M2hFCD3fRLXDgK", "action_id_social": "9w2rusZgDUNw22opAy3xWE7CBNsvaszkLdXSEBaxFPhz-0-widget", "block_id": 85145651, "block_timestamp": "2023-02-13 14:17:43.950", "signer_id": "events_v2.near", "widget_name": "events___form__image_component", "source_code": "const image = props.image;\n\nif (!image) {\n  return 'loading';\n}\n\nconst ErrorMessage = styled.div`\n  color: red;\n`;\n\nconst onChange = props.onChange;\nif (!onChange) {\n  return <ErrorMessage>onChange is required</ErrorMessage>;\n}\n\nconst onRemove = props.onRemove;\nif (!onRemove) {\n  return <ErrorMessage>onRemove is required</ErrorMessage>;\n}\n\nif (!state) {\n  State.init({\n    img: image.url || { cid: null },\n    type: image.type,\n\n    localImg: image.url,\n  });\n  return props.__engine.loading();\n}\n\nconst ImageTypes = [\n  { value: 'tile', label: 'Tile' },\n  { value: 'banner', label: 'Banner' },\n];\n\nconst Select = styled.select`\n  width: 100%;\n  padding: 0.5rem;\n  margin: 0;\n  border: 1px solid #ccc;\n  border-radius: 4px;\n  box-sizing: border-box;\n`;\n\n// HACK: to call an update on parent as IPFS upload has no callback.\n// we instead check if the localImg exists and differs from the\n// image.url.cid\nif (\n  state.localImg &&\n  !state.localImg.uploading &&\n  state.localImg.cid !== image.url.cid\n) {\n  onChange({\n    url: { cid: state.localImg.cid },\n    type: state.type,\n  });\n}\n\nreturn (\n  <>\n    <Select\n      style={{ width: '100px' }}\n      value={state.type}\n      onChange={(event) => {\n        State.update({ type: event.target.value });\n        onChange({\n          url: state.url,\n          type: state.type,\n        });\n      }}\n    >\n      {ImageTypes.map((type) => (\n        <option key={type.value} value={type.value}>\n          {type.label}\n        </option>\n      ))}\n    </Select>\n\n    <div className=\"ms-2\">\n      <IpfsImageUpload image={state.localImg} />\n    </div>\n\n    <button\n      className=\"ms-4 btn btn-danger\"\n      onClick={() => {\n        onRemove();\n      }}\n    >\n      Remove\n    </button>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/events_v2.near/widget/events___form__image_component"}