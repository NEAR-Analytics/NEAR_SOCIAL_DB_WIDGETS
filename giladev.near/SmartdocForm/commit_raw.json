{"tx_hash": "E55ennSYjAJ8c9rq5DjR3JYVzKKbsAky24mm5rU5U3Q8", "action_id_social": "EKy4AcyEpkCwh9mMSwRWDpF8qLnQ7hwwXbKmW9vJ3HBK-0-widget", "block_id": 94542975, "block_timestamp": "2023-06-19T13:54:37.974Z", "signer_id": "giladev.near", "widget_name": "SmartdocForm", "source_code": null, "metadata": null, "branch": {"draft": {"": "// Styles\nconst Field = styled.div`\n  margin-top: 10px;\n`;\n\n// States\nState.init({\n  form: {\n    name: \"\",\n    avatar: \"\",\n    website: \"\",\n  },\n});\nState.init({ loading: false });\n\nconst sendSmartdoc = () => {\n  // Send form\n  console.log(\"state.form \", state.form);\n  const url = `http://localhost:4004/api/v1/smartdoc`;\n  return asyncFetch(url, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      //accountId: \"context-test1.testnet\",\n      accountId: context.accountId,\n      data: state.form,\n    }),\n  });\n};\n\n/*\n * Handle input change\n */\nconst onInputChange = ({ target }) => {\n  //console.log(\"target\", target);\n  const fieldName = target.dataset.name;\n  let value = target.value;\n  const fieldType = target.dataset.type;\n  if (fieldType === \"int\") {\n    value = parseInt(value);\n  }\n\n  let form = state.form;\n  form[fieldName] = value;\n\n  State.update({ form });\n};\n\n/*\n * Submit form\n */\nconst onSubmitForm = async () => {\n  console.log(\"Submit!!!\");\n  State.update({ loading: true });\n  // Send form\n  sendSmartdoc().then((res) => {\n    console.log(\"res\", res);\n    console.log(\"res.body\", res.body);\n    State.update({ loading: false });\n  });\n};\n\nreturn (\n  <>\n    <div class=\"container border border-info p-3\">\n      <div class=\"container\">\n        <Field>\n          <label>Name</label>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"Enter your name\"\n            onChange={onInputChange}\n            data-name=\"name\"\n            data-type=\"string\"\n            value={state.form[`name`] ? state.form[`name`] : ``}\n          />\n        </Field>\n        <Field>\n          <label>Avatar</label>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"\"\n            onChange={onInputChange}\n            data-name=\"avatar\"\n            data-type=\"string\"\n            value={state.form[`avatar`] ? state.form[`avatar`] : ``}\n          />\n        </Field>\n        <Field>\n          <label>Website</label>\n          <input\n            type=\"text\"\n            class=\"form-control\"\n            placeholder=\"\"\n            onChange={onInputChange}\n            data-name=\"website\"\n            data-type=\"string\"\n            value={state.form[`website`] ? state.form[`website`] : ``}\n          />\n        </Field>\n      </div>\n\n      <div class=\"container p-3 text-center\">\n        <button onClick={onSubmitForm} disabled={state.loading}>\n          Submit\n        </button>\n      </div>\n    </div>\n  </>\n);\n"}}, "widget_modules_used": null, "widget_url": "https://near.social/#/giladev.near/widget/SmartdocForm", "__row_index": 1}