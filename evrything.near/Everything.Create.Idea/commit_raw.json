{"tx_hash": "FQmGvwDAcEDbXeMAzHRT7zvr88D4frMdgArUwLchLdjb", "action_id_social": "2fej8mCkDaQVutJD4S2KAJqPB9nBdXpYfvAQnbxbiXAA-0-widget", "block_id": 88837735, "block_timestamp": "2023-04-05 00:25:07.228", "signer_id": "evrything.near", "widget_name": "Everything.Create.Idea", "source_code": "const ERROR_WIDGET = \"evrything.near/widget/Everything.Error\";\n\nconst Header = styled.div`\n  width: 100%;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n`;\n\nconst Title = styled.div`\n  font-size: 24px;\n  line-height: 33.6px;\n`;\n\nconst Form = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 4px;\n`;\n\nconst Input = styled.input`\n  width: 100%;\n`;\n\nconst TextArea = styled.textarea`\n  width: 100%;\n`;\n\nconst ButtonRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n`;\n\nconst Button = styled.button`\n  padding: 8px 20px;\n  max-width: 90px;\n`;\n\nconst Caption = styled.div`\n  font-size: 12px;\n  line-height: 15.6px;\n  color: #a6a6a6;\n`;\n\nconst typeStr = \"evrything.near/type/Idea\";\n\nconst type = Type.get(typeStr);\n// const type = props.type;\n\nif (!type) {\n  return (\n    <Widget\n      src={ERROR_WIDGET}\n      props={{\n        message: `provided type: \"${props.type}\" is not valid.`,\n      }}\n    />\n  );\n}\n\nState.init({\n  title: \"\",\n  description: \"\",\n});\n\nconst createThing = () => {\n  asyncFetch(\"https://monkfish-app-ginhc.ondigitalocean.app/graphql\", {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      query:\n        \"mutation CreateIdea($type: String, $title: String) { things { create(name: $type) { message } addIdea(name: $title) { entities { id } } } }\",\n      variables: {\n        type: typeStr,\n        title: state.title,\n      },\n    }),\n  }).then((res) => {\n    if (res.body.data) {\n      Social.set(\n        {\n          thing: {\n            main: JSON.stringify({\n              thingId: res.body.data.things.addIdea.entities[0].id,\n            }),\n          },\n          index: {\n            et1: JSON.stringify({\n              key: \"main\",\n              value: {\n                type: \"everything.near/type/Idea\",\n              },\n            }),\n          },\n        },\n        {\n          force: true,\n          onCommit: () => {\n            response(request).send();\n          },\n          onCancel: () => {\n            response(request).send({ error: \"the action was canceled\" });\n          },\n        }\n      );\n    }\n  });\n};\n\nreturn (\n  <>\n    <Form>\n      <Input\n        placeholder={\"title\"}\n        onChange={({ target }) => State.update({ title: target.value })}\n      />\n      <TextArea\n        onInput={({ target }) => State.update({ description: target.value })}\n        placeholder={\"description, markdown supported\"}\n      />\n      <ButtonRow>\n        <Button onClick={createThing}>create</Button>\n      </ButtonRow>\n    </Form>\n  </>\n);\n", "metadata": NaN, "branch": NaN, "widget_modules_used": null, "widget_url": "https://near.social/#/evrything.near/widget/Everything.Create.Idea", "metadata.tags.everything-creator": NaN, "branch.draft": NaN, "metadata.image.ipfs_cid": NaN, "metadata.name": NaN}