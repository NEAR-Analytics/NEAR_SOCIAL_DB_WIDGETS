{"tx_hash": "4T2V7ZvJrYuSLd4E4wPf1BRDgsUX7BvEoUkQExwjJgtk", "action_id_social": "Da31wcJC9ZaXJWAw1KCM2WdBmUBnrvfsGiYMZojT5g4s-0-widget", "block_id": 86881372, "block_timestamp": "2023-03-09 04:48:57.377", "signer_id": "mohammadhs.near", "widget_name": "NearGithubActivityActiveDevelopers", "source_code": "// Monthly Pull Requests\r\nlet data = fetch(\r\n  \"https://api.flipsidecrypto.com/api/v2/queries/3328e097-8469-4179-a82a-91156168b6e4/data/latest\",\r\n  {\r\n    subscribe: true,\r\n    method: \"GET\",\r\n    headers: {\r\n      Accept: \"*/*\",\r\n    },\r\n  }\r\n);\r\n\r\ndata.body = data.body.sort((a, b) => new Date(a.MONTH) - new Date(b.MONTH));\r\nconst METRIC_NAME = \"Monthly Active Developers\";\r\n\r\nfunction formatNumberWithCommas(number) {\r\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\r\n}\r\n\r\nfunction formatDate(dateStr) {\r\n  const date = new Date(dateStr);\r\n  const year = date.getFullYear().toString().slice(-2);\r\n  const months = [\r\n    \"Jan\",\r\n    \"Feb\",\r\n    \"Mar\",\r\n    \"Apr\",\r\n    \"May\",\r\n    \"Jun\",\r\n    \"Jul\",\r\n    \"Aug\",\r\n    \"Sep\",\r\n    \"Oct\",\r\n    \"Nov\",\r\n    \"Dec\",\r\n  ];\r\n  const month = months[date.getMonth()];\r\n  return `${month} ${year}`;\r\n}\r\n\r\nlet Style = styled.div`\r\n\r\n      .barTextH{\r\n        transition: fill 0.2s;\r\n\r\n      }\r\n    .barTextH:hover{\r\n        fill: #fd610a;\r\n\r\n      }\r\n      .bar {\r\n        transition: fill 0.2s;\r\n      }\r\n\r\n      .bar:hover {\r\n        fill: #ffa726;\r\n      }\r\n\r\n      .bar-chart {\r\n        display: flex;\r\n        align-items: center;\r\n        justify-content: center;\r\n      }\r\n\r\n        svg {\r\n          width: 80%;\r\n        }\r\n\r\n        rect {\r\n          shape-rendering: crispEdges;\r\n          fill: #b2aabb;\r\n          stroke: #333;\r\n          stroke-width: 1;\r\n        }\r\n\r\n\r\n        `;\r\n\r\nconst width = 800;\r\nconst height = 500;\r\nconst maxValue = Math.max(...data.body.map((d) => d.DEVELOPERS)) * 1.1;\r\n\r\nreturn (\r\n  <Style>\r\n    <div className=\"text-bg-light rounded-4 p-3 mb-4\">\r\n      {data !== null ? (\r\n        <p>\r\n          <div class=\"d-flex clearfix flex-wrap flex-column flex-sm-row\">\r\n            <div class=\"p-2\">\r\n              <div>\r\n                <h4>Metric: {METRIC_NAME}</h4>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div>\r\n            <hr />\r\n            <div className=\"bar-chart\">\r\n              <svg\r\n                width={width}\r\n                height={height}\r\n                viewBox={`0 0 ${width} ${height + 200} `}\r\n                preserveAspectRatio=\"xMidYMid meet\"\r\n              >\r\n                {data.body.map((d, i) => (\r\n                  <g key={i} className=\"barTextH\">\r\n                    <rect\r\n                      className=\"bar\"\r\n                      x={i * (width / data.body.length)}\r\n                      y={height - (d.DEVELOPERS / maxValue) * height}\r\n                      width={width / data.body.length - 2}\r\n                      height={(d.DEVELOPERS / maxValue) * height}\r\n                      fill=\"#61dafb\"\r\n                    />\r\n                    <text\r\n                      className=\"text-primary-emphasis\"\r\n                      x={\r\n                        i * (width / data.body.length) +\r\n                        width / data.body.length / 2\r\n                      }\r\n                      y={height + 40}\r\n                      transform={`rotate(-75 ${\r\n                        i * (width / data.body.length) +\r\n                        width / data.body.length / 2\r\n                      } ${height + 40})`}\r\n                      textAnchor=\"middle\"\r\n                    >\r\n                      / {formatDate(d.MONTH)}\r\n                    </text>\r\n                    <text\r\n                      className=\"text-primary-emphasis\"\r\n                      x={\r\n                        i * (width / data.body.length) +\r\n                        width / data.body.length / 2\r\n                      }\r\n                      y={height + 90}\r\n                      transform={`rotate(-75 ${\r\n                        i * (width / data.body.length) +\r\n                        width / data.body.length / 2\r\n                      } ${height + 110})`}\r\n                      textAnchor=\"middle\"\r\n                    >\r\n                      {formatNumberWithCommas(d.DEVELOPERS)}\r\n                    </text>\r\n                  </g>\r\n                ))}\r\n              </svg>\r\n            </div>\r\n          </div>\r\n          <div>\r\n            <hr />\r\n            <small className=\"fw-bold\">\r\n              Data is provided by{\" \"}\r\n              <a\r\n                target=\"_blank\"\r\n                style={{ color: \"inherit\" }}\r\n                variant=\"caption\"\r\n                rel=\"nofollow\"\r\n                href=\"https://www.flipsidecrypto.com/\"\r\n              >\r\n                Flipside Crypto\r\n              </a>\r\n            </small>\r\n          </div>\r\n        </p>\r\n      ) : (\r\n        <div>Loading ...</div>\r\n      )}\r\n    </div>\r\n  </Style>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mohammadhs.near/widget/NearGithubActivityActiveDevelopers"}