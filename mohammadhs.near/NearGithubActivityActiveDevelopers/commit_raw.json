{"tx_hash": "4R8Wmo2kX7EF7y9x5kjP8r8qFnwQccNUnQLyHpLCNsQK", "action_id_social": "J6oUtsFUpgPqAR1rkiaD4x98aAefqmVw8N7R53hGXeBk-0-widget", "block_id": 86901545, "block_timestamp": "2023-03-09 11:20:20.911", "signer_id": "mohammadhs.near", "widget_name": "NearGithubActivityActiveDevelopers", "source_code": "// Monthly Pull Requests\nlet data = fetch(\n  \"https://api.flipsidecrypto.com/api/v2/queries/3328e097-8469-4179-a82a-91156168b6e4/data/latest\",\n  {\n    subscribe: true,\n    method: \"GET\",\n    headers: {\n      Accept: \"*/*\",\n    },\n  }\n);\n\ndata.body = data.body.sort((a, b) => new Date(a.MONTH) - new Date(b.MONTH));\nconst METRIC_NAME = \"Monthly Active Developers\";\n\nfunction formatNumberWithCommas(number) {\n  return number.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, \",\");\n}\n\nfunction formatDate(dateStr) {\n  const date = new Date(dateStr);\n  const year = date.getFullYear().toString().slice(-2);\n  const months = [\n    \"Jan\",\n    \"Feb\",\n    \"Mar\",\n    \"Apr\",\n    \"May\",\n    \"Jun\",\n    \"Jul\",\n    \"Aug\",\n    \"Sep\",\n    \"Oct\",\n    \"Nov\",\n    \"Dec\",\n  ];\n  const month = months[date.getMonth()];\n  return `${month} ${year}`;\n}\n\nlet Style = styled.div`\n\n      .barTextH{\n        transition: fill 0.2s;\n\n      }\n    .barTextH:hover{\n        fill: #fd610a;\n\n      }\n      .bar {\n        transition: fill 0.2s;\n      }\n\n      .bar:hover {\n        fill: #ffa726;\n      }\n\n      .bar-chart {\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      }\n\n        svg {\n          width: 80%;\n        }\n\n        rect {\n          shape-rendering: crispEdges;\n          fill: #fbdb61;\n          stroke: #333;\n          stroke-width: 1;\n        }\n\n\n        `;\n\nconst width = 800;\nconst height = 500;\nconst maxValue = Math.max(...data.body.map((d) => d.DEVELOPERS)) * 1.1;\n\nreturn (\n  <Style>\n    <div className=\"text-bg-light rounded-4 p-3 mb-4\">\n      {data !== null ? (\n        <p>\n          <div class=\"d-flex clearfix flex-wrap flex-column flex-sm-row\">\n            <div class=\"p-2\">\n              <div>\n                <h4>Metric: {METRIC_NAME}</h4>\n              </div>\n            </div>\n          </div>\n          <p class=\"blockquote-footer\">\n            Data set to refresh once every 24h,\n            <a\n              href=\"https://flipsidecrypto.xyz/edit/queries/3328e097-8469-4179-a82a-91156168b6e4\"\n              target=\"_blank\"\n            >\n              view and fork the source query\n            </a>\n          </p>\n\n          <div>\n            <hr />\n            <div className=\"bar-chart\">\n              <svg\n                width={width}\n                height={height}\n                viewBox={`0 0 ${width} ${height + 200} `}\n                preserveAspectRatio=\"xMidYMid meet\"\n              >\n                {data.body.map((d, i) => (\n                  <g key={i} className=\"barTextH\">\n                    <rect\n                      className=\"bar\"\n                      x={i * (width / data.body.length)}\n                      y={height - (d.DEVELOPERS / maxValue) * height}\n                      width={width / data.body.length - 2}\n                      height={(d.DEVELOPERS / maxValue) * height}\n                      fill=\"#61dafb\"\n                    />\n                    <text\n                      className=\"text-primary-emphasis\"\n                      x={\n                        i * (width / data.body.length) +\n                        width / data.body.length / 2\n                      }\n                      y={height + 40}\n                      transform={`rotate(-75 ${\n                        i * (width / data.body.length) +\n                        width / data.body.length / 2\n                      } ${height + 40})`}\n                      textAnchor=\"middle\"\n                    >\n                      / {formatDate(d.MONTH)}\n                    </text>\n                    <text\n                      className=\"text-primary-emphasis\"\n                      x={\n                        i * (width / data.body.length) +\n                        width / data.body.length / 2\n                      }\n                      y={height + 90}\n                      transform={`rotate(-75 ${\n                        i * (width / data.body.length) +\n                        width / data.body.length / 2\n                      } ${height + 110})`}\n                      textAnchor=\"middle\"\n                    >\n                      {formatNumberWithCommas(d.DEVELOPERS)}\n                    </text>\n                  </g>\n                ))}\n              </svg>\n            </div>\n          </div>\n          <div>\n            <hr />\n            <small className=\"fw-bold\">\n              Data is provided by{\" \"}\n              <a\n                target=\"_blank\"\n                style={{ color: \"inherit\" }}\n                variant=\"caption\"\n                rel=\"nofollow\"\n                href=\"https://www.flipsidecrypto.com/\"\n              >\n                Flipside Crypto\n              </a>\n            </small>\n          </div>\n        </p>\n      ) : (\n        <div>Loading ...</div>\n      )}\n    </div>\n  </Style>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/mohammadhs.near/widget/NearGithubActivityActiveDevelopers"}