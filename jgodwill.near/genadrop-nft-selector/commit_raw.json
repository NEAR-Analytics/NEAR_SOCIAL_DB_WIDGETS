{"tx_hash": "FrtG7TqwLNqtdV6L9YzJyTXbvtkzLYZK1Z1UbzhrgWLS", "action_id_social": "9S1rERTwWDjgRj9jezqogrpgcUjWV79Qdh3Chf74urjZ-0-widget", "block_id": 91793253, "block_timestamp": "2023-05-13T23:06:54.126Z", "signer_id": "jgodwill.near", "widget_name": "genadrop-nft-selector", "source_code": "const accountId = props.accountId || context.accountId;\r\nconst onChange = props.onChange;\r\n\r\nif (!accountId) {\r\n  return <></>;\r\n}\r\n\r\nconst size = \"100%\";\r\n\r\nconst data = fetch(\"https://graph.mintbase.xyz\", {\r\n  method: \"POST\",\r\n  headers: {\r\n    \"mb-api-key\": \"omni-site\",\r\n    \"Content-Type\": \"application/json\",\r\n    \"x-hasura-role\": \"anonymous\",\r\n  },\r\n  body: JSON.stringify({\r\n    query: `\r\n  query v2_omnisite_GetOwnedTokens{\r\n    tokens: mb_views_nft_owned_tokens(\r\n      where: {\r\n        owner: { _eq: \"${accountId}\" }\r\n      }\r\n    ) {\r\n      tokenId: token_id\r\n      contractId: nft_contract_id\r\n      media\r\n    }}\r\n`,\r\n  }),\r\n});\r\n\r\nconst NFTImageButton = styled.button`\r\n  aspect-ratio: 1/1;\r\n  height: 100px;\r\n  transition: all 0.4s ease-in-out;\r\n  border: 1.41429px solid rgba(28,27,28,.1);\r\n  border-radius: 10px;\r\n  outline:none;\r\n  background:transparent;\r\n  opacity:0.9;\r\n  flex: 1;\r\n  min-width: 100px;\r\n  max-width: 200px;\r\n  object-fit: cover;\r\n  padding:unset;\r\n  overflow:hidden;\r\n  margin: 0 auto;\r\n  &:hover{\r\n    opacity:1;\r\n  }\r\n  &>img{\r\n  transition: all 0.3s ease-in-out;\r\n  }\r\n  &>img:hover{\r\n    transform:scale(1.05);\r\n  }\r\n`;\r\n\r\nconst NFTs = styled.div`\r\n  display: flex;\r\n  gap: 2rem;\r\n  align-items:center;\r\n  margin-top: 20px;\r\n  width:100%;\r\n  padding: 1rem;\r\n  overflow-y:scroll;\r\n  flex-wrap: wrap;\r\n  height:200px;\r\n`;\r\n\r\nconst Heading = styled.p`\r\n  margin: 10px auto 10px auto;\r\n  font-size: 1.3em;\r\n  color:#0f1d40;\r\n  width:60%;\r\n  text-align: center;\r\n  font-family: \"SF Pro Display\",sans-serif;\r\n  line-height: 1.02;\r\n`;\r\nconst Text = styled.p`\r\n  margin: 10px auto 10px auto;\r\n  font-size: 1em;\r\n  color:#0f1d40;\r\n  width:60%;\r\n  text-align: center;\r\n  font-family: \"SF Pro Display\", sans-serif;\r\n`;\r\n\r\nconst finalData = data?.body?.data;\r\n\r\nif (!finalData) {\r\n  return (\r\n    <div className=\"d-flex flex-wrap gap-2 justify-content-center align-items-center flex-column\">\r\n      <Heading className=\"text-center fw-bold\">You own no NFT yet.</Heading>\r\n      <p>\r\n        You can mint an NFT on \ud83d\udca7\r\n        <a href=\"https://genadrop.io\" target=\"_blank\" rel=\"noopener noreferrer\">\r\n          GenaDrop\r\n        </a>\r\n        <Widget\r\n          src=\"miraclx.near/widget/Attribution\"\r\n          props={{ authors: [props.ownerId], dep: true }}\r\n        />\r\n      </p>\r\n    </div>\r\n  );\r\n}\r\n\r\nreturn (\r\n  <>\r\n    <Text className=\"text-center\">Select the NFT you want to list</Text>\r\n    <NFTs>\r\n      {finalData.tokens.map((nft, index) => (\r\n        <NFTImageButton\r\n          key={`${nft.contractId}-${nft.tokenId}-${index}`}\r\n          onClick={() => {\r\n            onChange({\r\n              contractId: nft.contractId,\r\n              tokenId: nft.tokenId,\r\n            });\r\n          }}\r\n        >\r\n          <Widget\r\n            src=\"mob.near/widget/NftImage\"\r\n            props={{\r\n              nft: { tokenId: nft.tokenId, contractId: nft.contractId },\r\n              style: {\r\n                width: size,\r\n                height: size,\r\n                objectFit: \"cover\",\r\n                minWidth: size,\r\n                minHeight: size,\r\n                maxWidth: size,\r\n                maxHeight: size,\r\n                overflowWrap: \"break-word\",\r\n                borderRadius: \"inherit\",\r\n              },\r\n              className: \"\",\r\n              fallbackUrl:\r\n                \"https://ipfs.near.social/ipfs/bafkreihdiy3ec4epkkx7wc4wevssruen6b7f3oep5ylicnpnyyqzayvcry\",\r\n              alt: `NFT ${nft.contractId} ${nft.tokenId}`,\r\n            }}\r\n          />\r\n        </NFTImageButton>\r\n      ))}\r\n    </NFTs>\r\n  </>\r\n);\r\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jgodwill.near/widget/genadrop-nft-selector", "__row_index": 24}