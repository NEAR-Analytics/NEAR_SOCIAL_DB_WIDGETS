{"tx_hash": "2Rdqkfnji6BMThe4JCmfkE6WtXntXATcDpLLamWGiYbY", "action_id_social": "FCzCWpqp4SQmyWuWuEx1C2St2PdBVFoVCjwqTDEXpBFh-1-widget", "block_id": 86547987, "block_timestamp": "2023-03-04 15:51:00.596", "signer_id": "azbang.near", "widget_name": "FeedbackBots", "source_code": "State.init({ isModal: false, editor: null });\n\nconst script = `\nfunctionCall({ ... })\n`;\n\nconst code = `\n<style>\nhtml, body, #container {\n\tposition: absolute;\n\tleft: 0;\n\ttop: 0;\n\twidth: 100%;\n\theight: 100%;\n\tmargin: 0;\n\tpadding: 0;\n\toverflow: hidden;\n}\n</style>\n<div id=\"container\"></div>\n<script src=\"https://unpkg.com/monaco-editor@latest/min/vs/loader.js\"></script>\n<script>\nrequire.config({ paths: { 'vs': 'https://unpkg.com/monaco-editor@latest/min/vs' }});\nwindow.MonacoEnvironment = { getWorkerUrl: () => proxy };\nlet proxy = URL.createObjectURL(new Blob(['self.MonacoEnvironment = {baseUrl: \"https://unpkg.com/monaco-editor@latest/min/\" };importScripts(\"https://unpkg.com/monaco-editor@latest/min/vs/base/worker/workerMain.js\")'], { type: 'text/javascript' }));\n\nrequire([\"vs/editor/editor.main\"], function () {\n\tlet editor = monaco.editor.create(document.getElementById('container'), {\n\t\tvalue: 'functionCall({ })',\n\t\tlanguage: 'javascript',\n        fontSize: 16,\n\t\ttheme: 'vs-dark'\n\t});\n\n    window.addEventListener(\"message\", (e) => {\n        console.log(e)\n    })\n});\n</script>\n`;\n\nconst Header = styled.div`\n    @import url(\"https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.3/font/bootstrap-icons.css\");\n    width: 100%;\n    padding: 16px;\n    border-bottom: 1px solid #333;\n    align-items: center;\n    display: flex;\n    justify-content: space-between;\n    margin-bottom: 16px;\n`;\n\nconst Page = styled.div`\n    width: 100%;\n    height: 100%;\n    min-height: 600px;\n    background-color: #1e1e1e;\n`;\n\nconst Modal = (\n  <div\n    className={`modal fade ${!state.isModal ? \"\" : \"show d-block\"}`}\n    style={{ background: \"rgba(0, 0, 0, 0.3)\" }}\n  >\n    <div className=\"modal-dialog modal-dialog-centered\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Deploy script</h5>\n          <button\n            onClick={() => State.update({ isModal: false })}\n            className=\"btn-close\"\n            data-bs-dismiss=\"modal\"\n            aria-label=\"Close\"\n          />\n        </div>\n        <div className=\"modal-body\"></div>\n        <div className=\"modal-footer\">\n          <button className=\"btn btn-success\" onClick={onConfirm}>\n            Deploy\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n);\n\nconst scripts = [\n  {\n    id: \"0\",\n    deposit: 3,\n    name: \"My awesome trigger\",\n    created: Date.now(),\n    count: 103,\n  },\n];\n\nif (state.editor == null) {\n  return (\n    <Page style={{ padding: 16 }}>\n      <button\n        class=\"btn btn-outline-light\"\n        style={{\n          width: \"100%\",\n          height: 48,\n          marginBottom: 16,\n          fontWeight: \"bolder\",\n        }}\n        onClick={() => State.update({ editor: \"new\" })}\n      >\n        <i class=\"bi bi-plus-lg\" /> Create new\n      </button>\n\n      <div class=\"list-group\">\n        {scripts.map((bot) => (\n          <div\n            style={{ cursor: \"pointer\", padding: 16 }}\n            class=\"list-group-item list-group-item-action\"\n            onClick={() => State.update({ editor: bot.id })}\n          >\n            <div class=\"d-flex w-100 justify-content-between\">\n              <h5 class=\"font-monospace mb-2\">{bot.name}</h5>\n            </div>\n            <p class=\"font-monospace mb-1\">Deposit: 2 NEAR</p>\n            <small class=\"font-monospace\">\n              Created: {new Date(bot.created).toLocaleString()}\n            </small>\n          </div>\n        ))}\n      </div>\n    </Page>\n  );\n}\n\nconst bot = scripts.find((t) => t.id === state.editor);\nconst d = Near.view(\"nearsocialexamples.near\", \"get_greeting\");\n\nreturn (\n  <Page>\n    <Header>\n      <button\n        class=\"btn btn-light\"\n        onClick={() => State.update({ editor: null })}\n      >\n        <i class=\"bi bi-arrow-left\" /> Back\n      </button>\n\n      <p class=\"font-monospace\" style={{ color: \"#fff\", margin: 0 }}>\n        {bot?.name ?? \"New script\"}\n      </p>\n\n      <button\n        class=\"btn btn-light\"\n        onClick={() => State.update({ isModal: true })}\n      >\n        <i class=\"bi bi-play-fill\" /> Deploy\n      </button>\n    </Header>\n\n    {Modal}\n\n    <iframe\n      ref={iframeRef}\n      style={{ width: \"100%\", height: \"calc(100% - 60px)\" }}\n      srcDoc={code}\n      onMessage={props.onChange}\n    />\n  </Page>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/azbang.near/widget/FeedbackBots", "metadata.name": NaN}