{"tx_hash": "66VQ2JoiwQQkYy7XUCQs9MHjmmrdjcMzjiKpQksBrV6s", "action_id_social": "6NZWqUaJQLuiq1AskY79nrviD16GEqovycPQXDg2sf9d-0-widget", "block_id": 85388184, "block_timestamp": "2023-02-17 00:17:01.775", "signer_id": "davidmo.near", "widget_name": "SayThanksToJames", "source_code": "const thanks = Social.index(\"thanks\", \"thanks-click\");\r\nconst counter = {};\r\nconst uniqueThanks = {};\r\n\r\nif (thanks) {\r\n  thanks.reverse().forEach(({ accountId, value }) => {\r\n    const key = JSON.stringify({ accountId, value });\r\n    if (key in uniqueThanks) {\r\n      return;\r\n    }\r\n    counter[accountId] = (counter[accountId] || 0) + 1;\r\n    uniqueThanks[key] = true;\r\n  });\r\n}\r\n\r\nconst top = Object.entries(counter);\r\ntop.sort((a, b) => b[1] - a[1]);\r\n\r\nfunction renderThanks(accountIds) {\r\n  return (\r\n    <div className=\"d-flex flex-wrap gap-3\">\r\n      {accountIds &&\r\n        accountIds.map((accountId) => {\r\n          return (\r\n            <div className=\"position-relative\">\r\n              <a\r\n                href={`#/mob.near/widget/ProfilePage?accountId=${accountId}`}\r\n                className=\"text-decoration-none\"\r\n              >\r\n                <Widget\r\n                  src=\"mob.near/widget/ProfileImage\"\r\n                  props={{\r\n                    accountId,\r\n                    className: \"d-inline-block overflow-hidden\",\r\n                  }}\r\n                />\r\n              </a>\r\n              <span\r\n                className=\"position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success\"\r\n                style={{ zIndex: 1, border: \"1px solid rgb(15,81,51)\" }}\r\n              >\r\n                {counter[accountId]}\r\n              </span>\r\n            </div>\r\n          );\r\n        })}\r\n    </div>\r\n  );\r\n}\r\n\r\nreturn (\r\n  <div>\r\n    <div className=\"mb-4\">\r\n      <CommitButton\r\n        className=\"btn btn-lg btn-success\"\r\n        data={{\r\n          index: {\r\n            thanks: JSON.stringify(\r\n              {\r\n                key: \"thanks-click\",\r\n                value: Date.now(),\r\n              },\r\n              undefined,\r\n              0\r\n            ),\r\n          },\r\n        }}\r\n      >\r\n        Say thanks to James \ud83d\ude4f\r\n      </CommitButton>\r\n    </div>\r\n    <div className=\"mb-4\">\r\n      <h4>Top 10</h4>\r\n      <div>{renderThanks(top.slice(0, 10).map((a) => a[0]))}</div>\r\n    </div>\r\n    <div className=\"mb-4\">\r\n      <h4>Last 10 </h4>\r\n      <div>\r\n        {thanks && renderThanks(thanks.slice(0, 10).map((a) => a.accountId))}\r\n      </div>\r\n    </div>\r\n  </div>\r\n);\r\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/davidmo.near/widget/SayThanksToJames", "metadata.description": "Thanks for the workshop, James.", "metadata.image.ipfs_cid": "bafkreidjc2k7zkdft24qvcyou2sdapqan4va4zfmjyydaxddxqzme5wxaq", "metadata.name": "Thanks, James"}