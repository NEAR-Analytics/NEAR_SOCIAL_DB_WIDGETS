{"tx_hash": "3EEZMp5G94Xc6cRRfSt7Y2yMZvLEyRheE6AzRVUgkqLi", "action_id_social": "2k7vyamNBpsh18Ys5b2Ju3XRPFxr1AU5ZEZogPLK3hdK-0-widget", "block_id": 81320869, "block_timestamp": "2022-12-24 00:56:44.892", "signer_id": "jakmeier.near", "widget_name": "TileGrid", "source_code": "/*\n * TileGrid\n *\n * Display an X by Y grid of tiles, such as often used in 2D games.\n * \n * Props for testing:\n \n { \n    \"tiles\": [\n    [\n      1,\n      2,\n      3,\n      4\n    ],\n    [\n      5,\n      6,\n      7,\n      8\n    ],\n    [\n      9,\n      \"a\",\n      \"b\",\n      \"c\"\n    ]\n  ],\n  \"size\": \"100px\",\n  \"renderTile\": \"id\"\n}\n\n*/\n\n// Props to be defined by parent widget.\n\n// A 2D array of tiles. Tile definition can be anything.\nconst TILES = props.tiles;\n// A function that returns renderable HTML/JSX based on a tile value the parent defines.\nconst RENDER_TILE =\n  props.renderTile === \"id\" ? (x) => <div>{x}</div> : props.renderTile;\n// CSS definition for map size.\nconst MAP_SIZE = props.size ?? \"300px\";\n// CSS definition for tile size.\nconst TILE_SIZE = props.tileSize ?? \"30px\";\n\n// Help user debug when they forget to set props.\nif (!Array.isArray(TILES)) {\n  return \"tiles props not set to an array\";\n}\nif (TILES.length == 0 || !Array.isArray(TILES[0])) {\n  return \"tiles props not set to an array of arrays\";\n}\nif (typeof RENDER_TILE !== \"function\") {\n  return \"renderTile props not set to function\";\n}\n\n// Values set indirectly by props.\nconst ROWS = TILES.length;\nconst COLS = TILES[0].length;\n\n// convert 2D array of tiles (stored in state.currentView) into HTML\nconst renderMap = () => {\n  // Change to column-first to make CSS grid rendering work.\n  const out = [];\n  for (const y = 0; y < COLS; y++) {\n    for (const x = 0; x < ROWS; x++) {\n      out.push(RENDER_TILE(TILES[x][y]));\n    }\n  }\n  return out;\n};\n\nreturn (\n  <div\n    style={{\n      display: \"grid\",\n      gridAutoFlow: \"column\",\n      gridTemplateRows: `repeat(${ROWS},${TILE_SIZE})`,\n      width: MAP_SIZE,\n      height: MAP_SIZE,\n    }}\n  >\n    {renderMap()}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jakmeier.near/widget/TileGrid"}