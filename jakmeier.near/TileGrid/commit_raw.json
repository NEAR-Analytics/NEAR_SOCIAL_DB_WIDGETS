{"tx_hash": "GsPB5KrBVPxotnoX9eM9uAKqtrx6rzRz4Mor1RwBFLTS", "action_id_social": "J3RJAE1VPe2VYFHU7AfkJLK2fXDuJ65EXiJYgRBmw79k-0-widget", "block_id": 81319839, "block_timestamp": "2022-12-24 00:37:27.706", "signer_id": "jakmeier.near", "widget_name": "TileGrid", "source_code": "/*\n * TileGrid\n *\n * Display an X by Y grid of tiles, such as often used in 2D games.\n * \n * Props for testing:\n \n { \n    \"tiles\": [\n    [\n      1,\n      2,\n      3,\n      4\n    ],\n    [\n      5,\n      6,\n      7,\n      8\n    ],\n    [\n      9,\n      \"a\",\n      \"b\",\n      \"c\"\n    ]\n  ],\n  \"size\": \"100px\",\n  \"renderTile\": \"id\"\n}\n\n*/\n\n// Props to be defined by parent widget.\n\n// A 2D array of tiles. Tile definition can be anything.\nconst TILES = props.tiles;\n// A function that returns renderable HTML/JSX based on a tile value the parent defines.\nconst RENDER_TILE = props.renderTile === \"id\" ? (x) => x : props.renderTile;\n// CSS definition for map size.\nconst MAP_SIZE = props.size ?? \"300px\";\n// CSS definition for tile size.\nconst TILE_SIZE = props.tileSize ?? \"30px\";\n\n// Help user debug when they forget to set props.\nif (!Array.isArray(TILES)) {\n  return \"tiles props not set to an array\";\n}\nif (TILES.length == 0 || !Array.isArray(TILES[0])) {\n  return \"tiles props not set to an array of arrays\";\n}\nif (typeof RENDER_TILE !== \"function\") {\n  return \"renderTile props not set to function\";\n}\n\n// Values set indirectly by props.\nconst ROWS = TILES.length;\nconst COLS = TILES[0].length;\n\n// convert 2D array of tiles (stored in state.currentView) into HTML\nconst renderMap = () => {\n  const html = TILES.map((row) =>\n    row.map((tile) => (\n      <div\n        style={{\n          fontSize: TILE_SIZE,\n          width: TILE_SIZE,\n          height: TILE_SIZE,\n        }}\n      >\n        {RENDER_TILE(tile)}\n      </div>\n    ))\n  ).flat();\n  return html;\n};\n\nreturn (\n  <div\n    style={{\n      display: \"grid\",\n      gridTemplateColumns: `repeat(${COLS},${TILE_SIZE})`,\n      width: MAP_SIZE,\n      height: MAP_SIZE,\n    }}\n  >\n    {renderMap()}\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/jakmeier.near/widget/TileGrid"}