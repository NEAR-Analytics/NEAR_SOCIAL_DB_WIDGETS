{"tx_hash": "Aaa5G5huPeUKY2YdLWCwLNy2tRGWNMhF2hCbu89VyYKC", "action_id_social": "BorGe6ekrxdtvrVDb9xY7We7W8jC3s3UZDmML7PqzpKJ-0-widget", "block_id": 95082257, "block_timestamp": "2023-06-26T15:07:10.231Z", "signer_id": "nearcon23.near", "widget_name": "Register.Form", "source_code": "const ownerId = \"nearcon23.near\";\nconst countries = [\n  \"Afghanistan\",\n  \"Albania\",\n  \"Algeria\",\n  \"Andorra\",\n  \"Angola\",\n  \"Antigua and Barbuda\",\n  \"Argentina\",\n  \"Armenia\",\n  \"Australia\",\n  \"Austria\",\n  \"Azerbaija\",\n  \"The Bahamas\",\n  \"Bahrain\",\n  \"Bangladesh\",\n  \"Barbados\",\n  \"Belarus\",\n  \"Belgium\",\n  \"Belize\",\n  \"Benin\",\n  \"Bhutan\",\n  \"Bolivia\",\n  \"Bosnia and Herzegovina\",\n  \"Botswana\",\n  \"Brazil\",\n  \"Brunei\",\n  \"Bulgaria\",\n  \"Burkina Faso\",\n  \"Burundi\",\n  \"Cabo Verde\",\n  \"Cambodia\",\n  \"Cameroon\",\n  \"Canada\",\n  \"Central African Republic\",\n  \"Chad\",\n  \"Chile\",\n  \"China\",\n  \"Colombia\",\n  \"Comoros\",\n  \"Congo, Democratic Republic of the\",\n  \"Congo, Republic of the\",\n  \"Costa Rica\",\n  \"C\u00f4te d\u2019Ivoire\",\n  \"Croatia\",\n  \"Cuba\",\n  \"Cyprus\",\n  \"Czech Republic\",\n  \"Denmark\",\n  \"Djibouti\",\n  \"Dominica\",\n  \"Dominican Republic\",\n  \"East Timor (Timor-Leste)\",\n  \"Ecuador\",\n  \"Egypt\",\n  \"El Salvador\",\n  \"Equatorial Guinea\",\n  \"Eritrea\",\n  \"Estonia\",\n  \"Eswatini\",\n  \"Ethiopia\",\n  \"Fiji\",\n  \"Finland\",\n  \"France\",\n  \"Gabon\",\n  \"The Gambia\",\n  \"Georgia\",\n  \"Germany\",\n  \"Ghana\",\n  \"Greece\",\n  \"Grenada\",\n  \"Guatemala\",\n  \"Guinea\",\n  \"Guinea-Bissau\",\n  \"Guyana\",\n  \"Haiti\",\n  \"Honduras\",\n  \"Hungary\",\n  \"Iceland\",\n  \"India\",\n  \"Indonesia\",\n  \"Iran\",\n  \"Iraq\",\n  \"Ireland\",\n  \"Israel\",\n  \"Italy\",\n  \"Jamaica\",\n  \"Japan\",\n  \"Jordan\",\n  \"Kazakhstan\",\n  \"Kenya\",\n  \"Kiribati\",\n  \"Korea, North\",\n  \"Korea, South\",\n  \"Kosovo\",\n  \"Kuwait\",\n  \"Kyrgyzstan\",\n  \"Laos\",\n  \"Latvia\",\n  \"Lebanon\",\n  \"Lesotho\",\n  \"Liberia\",\n  \"Libya\",\n  \"Liechtenstein\",\n  \"Lithuania\",\n  \"Luxembourg\",\n  \"Madagascar\",\n  \"Malawi\",\n  \"Malaysia\",\n  \"Maldives\",\n  \"Mali\",\n  \"Malta\",\n  \"Marshall Islands\",\n  \"Mauritania\",\n  \"Mauritius\",\n  \"Mexico\",\n  \"Micronesia, Federated States of\",\n  \"Moldova\",\n  \"Monaco\",\n  \"Mongolia\",\n  \"Montenegro\",\n  \"Morocco\",\n  \"Mozambique\",\n  \"Myanmar (Burma)\",\n  \"Namibia\",\n  \"Nauru\",\n  \"Nepal\",\n  \"Netherlands\",\n  \"New Zealand\",\n  \"Nicaragua\",\n  \"Niger\",\n  \"Nigeria\",\n  \"North Macedonia\",\n  \"Norway\",\n  \"Oman\",\n  \"Pakistan\",\n  \"Palau\",\n  \"Panama\",\n  \"Papua New Guinea\",\n  \"Paraguay\",\n  \"Peru\",\n  \"Philippines\",\n  \"Poland\",\n  \"Portugal\",\n  \"Qatar\",\n  \"Romania\",\n  \"Russia\",\n  \"Rwanda\",\n  \"Saint Kitts and Nevis\",\n  \"Saint Lucia\",\n  \"Saint Vincent and the Grenadines\",\n  \"Samoa\",\n  \"San Marino\",\n  \"Sao Tome and Principe\",\n  \"Saudi Arabia\",\n  \"Senegal\",\n  \"Serbia\",\n  \"Seychelles\",\n  \"Sierra Leone\",\n  \"Singapore\",\n  \"Slovakia\",\n  \"Slovenia\",\n  \"Solomon Islands\",\n  \"Somalia\",\n  \"South Africa\",\n  \"Spain\",\n  \"Sri Lanka\",\n  \"Sudan\",\n  \"Sudan, South\",\n  \"Suriname\",\n  \"Sweden\",\n  \"Switzerland\",\n  \"Syria\",\n  \"Taiwan\",\n  \"Tajikistan\",\n  \"Tanzania\",\n  \"Thailand\",\n  \"Togo\",\n  \"Tonga\",\n  \"Trinidad and Tobago\",\n  \"Tunisia\",\n  \"Turkey\",\n  \"Turkmenistan\",\n  \"Tuvalu\",\n  \"Uganda\",\n  \"Ukraine\",\n  \"United Arab Emirates\",\n  \"United Kingdom\",\n  \"United States\",\n  \"Uruguay\",\n  \"Uzbekistan\",\n  \"Vanuatu\",\n  \"Vatican City\",\n  \"Venezuela\",\n  \"Vietnam\",\n  \"Yemen\",\n  \"Zambia\",\n  \"Zimbabwe\",\n].map((value) => ({\n  text: value,\n  value: value.toLowerCase().replace(/\\s/g, \"-\"),\n}));\n\nState.init({\n  firstName: \"\",\n  firstNameError: \"\",\n  lastName: \"\",\n  lastNameError: \"\",\n  email: \"\",\n  emailError: \"\",\n  persona: null,\n  personaError: \"\",\n  accountId: context.accountId,\n  jobTitle: \"\",\n  jobTitleError: \"\",\n  projectOrCompany: \"\",\n  projectOrCompanyError: \"\",\n  country: null,\n  countryError: \"\",\n  age: null,\n  ageError: \"\",\n  goal: \"\",\n  goalError: \"\",\n  twitter: \"\",\n  twitterError: \"\",\n  telegram: \"\",\n  telegramError: \"\",\n  referral: \"\",\n  referralError: \"\",\n});\n\nconst isValid = () => {\n  return (\n    state.firstName &&\n    state.firstNameError === \"\" &&\n    state.lastName &&\n    state.lastNameError === \"\" &&\n    state.email &&\n    state.emailError === \"\" &&\n    state.persona &&\n    state.personaError === \"\" &&\n    state.jobTitle &&\n    state.jobTitleError === \"\" &&\n    state.projectOrCompany &&\n    state.projectOrCompanyError === \"\" &&\n    state.country &&\n    state.countryError === \"\" &&\n    state.goal &&\n    state.goalError === \"\" &&\n    (!state.referral || state.referralError === \"\") &&\n    (!state.age || state.ageError === \"\") &&\n    (!state.twitter || state.twitterError === \"\") &&\n    (!state.telegram || state.telegramError === \"\")\n  );\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: flex-start;\n  justify-content: flex-start;\n  gap: 2em;\n\n  & > span {\n    font-family: \"Mona Sans\";\n    font-style: normal;\n    font-weight: 450;\n    font-size: 0.95em;\n    line-height: 150%;\n    color: #717069;\n    max-width: 20em;\n  }\n`;\n\nconst SubmitButton = styled.a`\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-items: center;\n  padding: 0.5em 1.5em;\n  gap: 0.5em;\n  background: #161615;\n  border-radius: 50px;\n  border: none;\n  color: #ffffff;\n\n  &.disabled {\n    background: #717069 !important;\n  }\n\n  &:hover,\n  &:focus,\n  &:active {\n    background: #161615;\n    text-decoration: none;\n    color: #ffffff;\n  }\n`;\n\nconst encode = (data) => {\n  return data.replaceAll(\n    /[^A\u2013Za-z0-9_.!~*'()-]/g,\n    (c) => `%${c.charCodeAt(0).toString(16).toUpperCase()}`\n  );\n};\n\nconst url = () => {\n  if (!isValid()) {\n    return \"#\";\n  }\n\n  let urlString = \"https://tickets.nearcon.org/?\";\n  urlString += `firstname=${state.firstName}&`;\n  urlString += `lastname=${state.lastName}&`;\n  urlString += `emailaddress=${state.email}&`;\n\n  const meta = {\n    persona: state.persona.value,\n    jobtitle: state.jobTitle,\n    projectorcompany: state.projectOrCompany,\n    country: state.country.value,\n    goal: state.goal,\n  };\n\n  [\"age\", \"twitter\", \"telegram\", \"referral\"].forEach((key) => {\n    if (state[key]) {\n      meta[key] = state[key];\n    }\n  });\n\n  const stringified = JSON.stringify(meta);\n  const encoded = encode(stringified);\n\n  urlString += `meta=${encoded}`;\n\n  return urlString;\n};\n\nreturn (\n  <Container>\n    <Widget\n      src={`${ownerId}/widget/Inputs.Text`}\n      props={{\n        label: \"First Name\",\n        value: state.firstName,\n        error: state.firstNameError,\n        placeholder: \"Enter First Name\",\n        onChange: (firstName) => State.update({ firstName }),\n        validate: () => {\n          if (state.firstName.length < 3) {\n            State.update({\n              firstNameError: \"First name must be at least 3 characters\",\n            });\n            return;\n          }\n\n          if (state.firstName.length > 100) {\n            State.update({\n              firstNameError: \"First name must be less than 100 characters\",\n            });\n            return;\n          }\n\n          State.update({ firstNameError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Text`}\n      props={{\n        label: \"Last Name\",\n        value: state.lastName,\n        error: state.lastNameError,\n        placeholder: \"Enter Last Name\",\n        onChange: (lastName) => State.update({ lastName }),\n        validate: () => {\n          if (state.lastName.length < 3) {\n            State.update({\n              lastNameError: \"First last must be at least 3 characters\",\n            });\n            return;\n          }\n\n          if (state.lastName.length > 100) {\n            State.update({\n              lastNameError: \"First last must be less than 100 characters\",\n            });\n            return;\n          }\n\n          State.update({ lastNameError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Text`}\n      props={{\n        label: \"Email\",\n        value: state.email,\n        error: state.emailError,\n        placeholder: \"Enter Email\",\n        onChange: (email) => State.update({ email }),\n        validate: () => {\n          if (state.email.length < 3) {\n            State.update({\n              emailError: \"Email must be at least 3 characters\",\n            });\n            return;\n          }\n\n          if (state.email.length > 100) {\n            State.update({\n              emailError: \"Email must be less than 100 characters\",\n            });\n            return;\n          }\n\n          State.update({ emailError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Select`}\n      props={{\n        label: \"I consider myself...\",\n        value: state.persona,\n        error: state.personaError,\n        placeholder: \"Choose...\",\n        options: [\n          { value: \"developer\", text: \"Developer\" },\n          { value: \"creative\", text: \"Creative\" },\n          { value: \"entrepreneur\", text: \"Entrepreneur\" },\n          { value: \"other\", text: \"Other\" },\n        ],\n        onChange: (persona) => State.update({ persona }),\n        validate: () => {\n          if (!state.persona) {\n            State.update({\n              personaError: \"Please select a persona\",\n            });\n            return;\n          }\n\n          State.update({ personaError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.AccountId`}\n      props={{\n        label: \"NEAR Account\",\n        value: state.accountId,\n        onChange: (accountId) => State.update({ accountId }),\n        setError: (accountIdError) => State.update({ accountIdError }),\n        error: state.accountIdError,\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Text`}\n      props={{\n        label: \"Job Title\",\n        value: state.jobTitle,\n        error: state.jobTitleError,\n        placeholder: \"Enter Job Title\",\n        onChange: (jobTitle) => State.update({ jobTitle }),\n        validate: () => {\n          if (state.jobTitle.length < 3) {\n            State.update({\n              jobTitleError: \"Job title must be at least 3 characters\",\n            });\n            return;\n          }\n\n          if (state.jobTitle.length > 100) {\n            State.update({\n              jobTitleError: \"Job title must be less than 100 characters\",\n            });\n            return;\n          }\n\n          State.update({ jobTitleError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Text`}\n      props={{\n        label: \"Name of Project or Company\",\n        value: state.projectOrCompany,\n        error: state.projectOrCompanyError,\n        placeholder: \"Enter Name of Project or Company\",\n        onChange: (projectOrCompany) => State.update({ projectOrCompany }),\n        validate: () => {\n          if (state.projectOrCompany.length < 3) {\n            State.update({\n              projectOrCompanyError:\n                \"Project or company name must be at least 3 characters\",\n            });\n            return;\n          }\n\n          if (state.projectOrCompany.length > 100) {\n            State.update({\n              projectOrCompanyError:\n                \"Project or company name must be less than 100 characters\",\n            });\n            return;\n          }\n\n          State.update({ projectOrCompanyError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Countries`}\n      props={{\n        label: \"Country\",\n        value: state.country ? [state.country] : [],\n        error: state.countryError,\n        placeholder: \"Choose...\",\n        options: countries,\n        onChange: ([country]) => State.update({ country }),\n        validate: () => {\n          if (!state.country) {\n            State.update({\n              countryError: \"Please select a country\",\n            });\n            return;\n          }\n\n          State.update({ countryError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Number`}\n      props={{\n        label: \"Age (Optional)\",\n        value: state.age,\n        error: state.ageError,\n        placeholder: \"Enter Age\",\n        onChange: (age) => State.update({ age }),\n        validate: () => {\n          if (state.age < 1) {\n            State.update({\n              ageError: \"Age must be at least 1\",\n            });\n            return;\n          }\n\n          if (state.age > 120) {\n            State.update({\n              ageError: \"Age must be less than 120\",\n            });\n            return;\n          }\n\n          State.update({ ageError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.TextArea`}\n      props={{\n        label: \"What do you hope to discover at Nearcon?\",\n        value: state.goal,\n        error: state.goalError,\n        placeholder: \"\",\n        onChange: (goal) => State.update({ goal }),\n        validate: () => {\n          if (state.goal.length < 3) {\n            State.update({\n              goalError: \"Goal must be at least 3 characters\",\n            });\n            return;\n          }\n\n          if (state.goal.length > 500) {\n            State.update({\n              goalError: \"Goal must be less than 500 characters\",\n            });\n            return;\n          }\n\n          State.update({ goalError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Text`}\n      props={{\n        label: \"Twitter (Optional)\",\n        value: state.twitter,\n        error: state.twitterError,\n        placeholder: \"Enter Twitter\",\n        onChange: (twitter) => State.update({ twitter }),\n        validate: () => {\n          if (state.twitter.length < 3) {\n            State.update({\n              twitterError: \"Twitter must be at least 3 characters\",\n            });\n            return;\n          }\n\n          if (state.twitter.length > 100) {\n            State.update({\n              twitterError: \"Twitter must be less than 100 characters\",\n            });\n            return;\n          }\n\n          State.update({ twitterError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Text`}\n      props={{\n        label: \"Telegram (Optional)\",\n        value: state.telegram,\n        error: state.telegramError,\n        placeholder: \"Enter Telegram\",\n        onChange: (telegram) => State.update({ telegram }),\n        validate: () => {\n          if (state.telegram.length < 3) {\n            State.update({\n              telegramError: \"Telegram must be at least 3 characters\",\n            });\n            return;\n          }\n\n          if (state.telegram.length > 100) {\n            State.update({\n              telegramError: \"Telegram must be less than 100 characters\",\n            });\n            return;\n          }\n\n          State.update({ telegramError: \"\" });\n        },\n      }}\n    />\n    <Widget\n      src={`${ownerId}/widget/Inputs.Text`}\n      props={{\n        label: \"Did anyone refer you? (Optional)\",\n        value: state.referral,\n        error: state.referralError,\n        placeholder: \"Enter referral\",\n        onChange: (referral) => State.update({ referral }),\n        validate: () => {\n          if (state.referral.length > 100) {\n            State.update({\n              referralError: \"Referral must be less than 100 characters\",\n            });\n            return;\n          }\n\n          State.update({ referralError: \"\" });\n        },\n      }}\n    />\n    <SubmitButton href={url()} className={isValid() ? \"\" : \"disabled\"}>\n      Submit\n      <svg\n        width=\"20\"\n        height=\"20\"\n        viewBox=\"0 0 20 20\"\n        fill=\"none\"\n        xmlns=\"http://www.w3.org/2000/svg\"\n      >\n        <path\n          d=\"M15.9375 5V13.125C15.9375 13.3736 15.8387 13.6121 15.6629 13.7879C15.4871 13.9637 15.2486 14.0625 15 14.0625C14.7513 14.0625 14.5129 13.9637 14.3371 13.7879C14.1612 13.6121 14.0625 13.3736 14.0625 13.125V7.26562L5.66325 15.6633C5.48713 15.8394 5.24826 15.9383 4.99918 15.9383C4.75011 15.9383 4.51124 15.8394 4.33512 15.6633C4.159 15.4872 4.06006 15.2483 4.06006 14.9992C4.06006 14.7501 4.159 14.5113 4.33512 14.3352L12.7343 5.9375H6.87497C6.62633 5.9375 6.38787 5.83873 6.21205 5.66291C6.03624 5.4871 5.93747 5.24864 5.93747 5C5.93747 4.75136 6.03624 4.5129 6.21205 4.33709C6.38787 4.16127 6.62633 4.0625 6.87497 4.0625H15C15.2486 4.0625 15.4871 4.16127 15.6629 4.33709C15.8387 4.5129 15.9375 4.75136 15.9375 5Z\"\n          fill=\"#A1A09A\"\n        />\n      </svg>\n    </SubmitButton>\n    <span>Upon submission, you will be redirected to complete your order.</span>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/nearcon23.near/widget/Register.Form", "__row_index": 1}