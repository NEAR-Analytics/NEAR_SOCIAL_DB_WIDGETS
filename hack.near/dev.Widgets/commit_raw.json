{"tx_hash": "GRyx5RPworTixmAC3hmMgATWFH3X9z2joQ3B4Z64eiXD", "action_id_social": "5dNug3L1UFs8h5hhGsvZQgKFhUcVK2pzB8nELfUzLmPS-0-widget", "block_id": 91914019, "block_timestamp": "2023-05-15T12:47:36.927Z", "signer_id": "hack.near", "widget_name": "dev.Widgets", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nconst limitForWidgets = props.limitForWidgets ?? 888;\ninitState({ widgetsByVouches: [] });\n\nconst starredWidgets = Social.get(`${accountId}/index/star`);\n\nconst index = {\n  action: \"star\",\n  key: \"dev\",\n  options: {\n    subscribe: false,\n    limit: limitForWidgets,\n    order: \"desc\",\n  },\n};\n\nif (!state.stars) {\n  State.update({\n    stars: Social.index(index.action, index.key, index.options),\n  });\n  return \"\";\n}\n\nlet widgetsByStars = [];\nstate.stars.map((star) => {\n  const key = JSON.stringify(star.value.item);\n  widgetsByStars[key] = (widgetsByStars[key] ?? 0) + 1;\n});\n\nconst sortedWidgets = Object.keys(widgetsByStars).sort(\n  (a, b) => widgetsByStars[b] - widgetsByStars[a]\n);\n\nconst topWidgets = sortedWidgets.map((widgetStringified) => {\n  const widget = JSON.parse(widgetStringified);\n  return (\n    <div style={{ paddingBottom: \"10px\" }}>\n      <Widget\n        src=\"hack.near/widget/dev.Widget.Card\"\n        props={{\n          accountId: widget.path.replace(\"/widget/starred\", \"\"),\n          blockHeight: widget.blockHeight,\n          vouchesNum: widgetsByStars[widgetStringified],\n        }}\n      />\n    </div>\n  );\n});\n\nreturn (\n  <>\n    <h1>Starred Widgets</h1>\n    {topWidgets}\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/dev.Widgets", "__row_index": 0}