{"tx_hash": "9ouxhDA9LQvb4WuqbM5gqKfgUkNFgNq2m6kmK5bhVe4W", "action_id_social": "5NNBhLNAAT5B7yUQr3LHvUtoEHtRUxecxFavQ7cYDFa4-0-widget", "block_id": 94257946, "block_timestamp": "2023-06-15T18:59:01.602Z", "signer_id": "hack.near", "widget_name": "dev.info", "source_code": "const accountId = props.accountId ?? context.accountId;\nconst daoId = props.daoId ?? \"build.sputnik-dao.near\";\nconst role = props.role ?? \"community\";\n\nState.init({\n  isMember: false,\n});\n\n// Get DAO policy data\nconst policy = Near.view(daoId, \"get_policy\");\n\nif (policy === null) {\n  return \"\";\n}\n\nconst groups = policy.roles\n  .filter((role) => role.name === \"community\")\n  .map((role) => role.kind.Group);\n\n// Check if the user is a member of a group\nconst isMember = groups.some((group) => group.includes(accountId));\nState.update({ isMember });\n\nconst handleProposal = () => {\n  const gas = 300000000000000;\n  const deposit = 100000000000000000000000;\n  Near.call([\n    {\n      contractName: daoId,\n      methodName: \"add_proposal\",\n      args: {\n        proposal: {\n          description: \"potential member\",\n          kind: {\n            AddMemberToRole: {\n              member_id: accountId,\n              role: role,\n            },\n          },\n        },\n      },\n      gas: gas,\n      deposit: deposit,\n    },\n  ]);\n};\n\nreturn (\n  <div>\n    <div className=\"m-2 d-flex gap-2 flex-wrap\">\n      {!isMember ? (\n        <button onClick={handleProposal}>Join DAO</button>\n      ) : (\n        <Widget src=\"mob.near/widget/FollowButton\" props={{ accountId }} />\n      )}\n      <a className=\"btn btn-outline-primary\" href=\"#/hack.near/widget/Academy\">\n        Learn More\n      </a>\n    </div>\n    <div className=\"m-2 d-flex gap-2 flex-wrap\">\n      <a\n        className=\"btn btn-outline-secondary border-0\"\n        href=\"#/mob.near/widget/ProfilePage?accountId=devs.near\"\n      >\n        <i className=\"bi bi-person-circle\"></i>\n      </a>\n      <a\n        className=\"btn btn-outline-secondary border-0\"\n        href=\"https://www.nearbuilders.com\"\n      >\n        <i className=\"bi bi-globe\"></i>\n      </a>\n      <a\n        className=\"btn btn-outline-secondary border-0\"\n        href=\"https://github.com/NEARbuilders\"\n      >\n        <i className=\"bi bi-github\"></i>\n      </a>\n      <a\n        className=\"btn btn-outline-secondary border-0\"\n        href=\"https://calendar.google.com/calendar/u/0?cid=Y182NGYxNGNkMDFiMWY0MmU1OGE4MTY2MGYyOGVmOWFkZjE4NjdhMTJlNDJiM2UyZDNhMTc3ODczOTYwYjAyNTcwQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20\"\n      >\n        <i className=\"bi bi-calendar3\"></i>\n      </a>\n      <a\n        className=\"btn btn-outline-secondary border-0\"\n        href=\"#/devs.near/widget/dev.config\"\n      >\n        <i className=\"bi bi-gear-fill\"></i>\n      </a>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/dev.info", "__row_index": 1}