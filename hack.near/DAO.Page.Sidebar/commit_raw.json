{"tx_hash": "HKKpFDatvdszsrCccAPCcWGgK4j47kUUwnRd6ocFMXDd", "action_id_social": "CxBZHtaNtJo4qpyK5yrT11x7xGSTHJrc7BHoLnQZtybo-0-widget", "block_id": 94495251, "block_timestamp": "2023-06-18T22:52:16.248Z", "signer_id": "hack.near", "widget_name": "DAO.Page.Sidebar", "source_code": "const role = props.role ?? \"community\";\n\nState.init({\n  copiedShareUrl: false,\n});\n\nconst accountId = props.daoId ?? props.accountId ?? \"multi.sputnik-dao.near\";\nconst profile =\n  props.profile || Social.get(`${accountId}/profile/**`, \"final\") || {};\n\nif (!accountId) {\n  return \"\";\n}\n\n// Profile Data:\nconst tags = Object.keys(profile.tags || {});\nconst viewingOwnAccount = accountId === context.accountId;\nconst accountUrl = `/#/hack.near/widget/DAO.Page?daoId=${accountId}`;\nconst shareUrl = `https://near.org${accountUrl}`;\n\n// Follower Count:\nconst following = Social.keys(`${accountId}/graph/follow/*`, \"final\", {\n  return_type: \"BlockHeight\",\n  values_only: true,\n});\nconst followers = Social.keys(`*/graph/follow/${accountId}`, \"final\", {\n  return_type: \"BlockHeight\",\n  values_only: true,\n});\nconst followingCount = following\n  ? Object.keys(following[accountId].graph.follow || {}).length\n  : null;\nconst followersCount = followers ? Object.keys(followers || {}).length : null;\n\n// Account follows you:\nconst accountFollowsYouData = Social.keys(\n  `${accountId}/graph/follow/${context.accountId}`,\n  undefined,\n  {\n    values_only: true,\n  }\n);\nconst accountFollowsYou = Object.keys(accountFollowsYouData || {}).length > 0;\n\nconst Wrapper = styled.div`\n  display: grid;\n  gap: 40px;\n  position: relative;\n\n  .button {\n    display: inline-flex;\n    align-items: center;\n    justify-content: center;\n    gap: 8px;\n    padding: 8px 16px;\n    height: 32px;\n    border-radius: 100px;\n    font-weight: 600;\n    font-size: 12px;\n    line-height: 15px;\n    text-align: center;\n    cursor: pointer;\n    background: #fbfcfd;\n    border: 1px solid #d7dbdf;\n    color: #11181c !important;\n\n    &.button--primary {\n      width: 100%;\n      color: #006adc !important;\n\n      @media (max-width: 1200px) {\n        width: auto;\n      }\n    }\n\n    &:hover,\n    &:focus {\n      background: #ecedee;\n      text-decoration: none;\n      outline: none;\n    }\n\n    i {\n      color: #7e868c;\n    }\n\n    .bi-16 {\n      font-size: 16px;\n    }\n  }\n\n  @media (max-width: 900px) {\n    gap: 24px;\n  }\n`;\n\nconst Section = styled.div`\n  display: grid;\n  gap: 24px;\n`;\n\nconst Avatar = styled.div`\n  width: 133px;\n  height: 133px;\n  flex-shrink: 0;\n  border: 3px solid #fff;\n  overflow: hidden;\n  border-radius: 100%;\n  box-shadow: 0px 12px 16px rgba(16, 24, 40, 0.08),\n    0px 4px 6px rgba(16, 24, 40, 0.03);\n\n  img {\n    object-fit: cover;\n    width: 100%;\n    height: 100%;\n  }\n\n  @media (max-width: 900px) {\n    width: 80px;\n    height: 80px;\n  }\n`;\n\nconst Title = styled.h1`\n  font-weight: 600;\n  font-size: ${(p) => p.size || \"25px\"};\n  line-height: 1.2em;\n  color: #11181c;\n  margin: ${(p) => (p.margin ? \"0 0 24px\" : \"0\")};\n  overflow-wrap: anywhere;\n`;\n\nconst Text = styled.p`\n  margin: 0;\n  line-height: 1.5rem;\n  color: ${(p) => (p.bold ? \"#11181C\" : \"#687076\")} !important;\n  font-weight: ${(p) => (p.bold ? \"600\" : \"400\")};\n  font-size: ${(p) => (p.small ? \"12px\" : \"14px\")};\n  overflow: ${(p) => (p.ellipsis ? \"hidden\" : \"\")};\n  text-overflow: ${(p) => (p.ellipsis ? \"ellipsis\" : \"\")};\n  white-space: ${(p) => (p.ellipsis ? \"nowrap\" : \"\")};\n  overflow-wrap: anywhere;\n\n  b {\n    font-weight: 600;\n    color: #11181c;\n  }\n\n  &[href] {\n    display: inline-flex;\n    gap: 0.25rem;\n\n    &:hover,\n    &:focus {\n      text-decoration: underline;\n    }\n  }\n`;\n\nconst TextLink = styled.a`\n  display: inline-flex;\n  align-items: center;\n  gap: 8px;\n  margin: 0;\n  font-size: 14px;\n  line-height: 20px;\n  color: #11181c !important;\n  font-weight: 400;\n  font-size: 14px;\n  white-space: nowrap;\n  outline: none;\n\n  &:focus,\n  &:hover {\n    text-decoration: underline;\n  }\n\n  i {\n    color: #7e868c;\n  }\n`;\n\nconst TextBadge = styled.p`\n  display: inline-block;\n  margin: 0;\n  font-size: 10px;\n  line-height: 1.1rem;\n  background: #687076;\n  color: #fff;\n  font-weight: 600;\n  white-space: nowrap;\n  padding: 0 6px;\n  border-radius: 3px;\n`;\n\nconst Actions = styled.div`\n  display: flex;\n  gap: 6px;\n`;\n\nconst Stats = styled.div`\n  display: flex;\n  gap: 24px;\n`;\n\nconst SocialLinks = styled.div`\n  display: grid;\n  gap: 9px;\n`;\n\nconst FollowButtonWrapper = styled.div`\n  width: 100%;\n  div,\n  button {\n    width: 100%;\n  }\n  @media (max-width: 1200px) {\n    width: auto;\n    div,\n    button {\n      width: auto;\n    }\n  }\n`;\n\nreturn (\n  <Wrapper>\n    <Avatar>\n      <Widget\n        src=\"mob.near/widget/Image\"\n        props={{\n          image: profile.image,\n          alt: profile.name,\n          fallbackUrl:\n            \"https://ipfs.near.social/ipfs/bafkreibiyqabm3kl24gcb2oegb7pmwdi6wwrpui62iwb44l7uomnn3lhbi\",\n        }}\n      />\n    </Avatar>\n\n    <Section>\n      <div>\n        <Title>{profile.name || accountId}</Title>\n        <Text>@{accountId}</Text>\n\n        {accountFollowsYou && <TextBadge>Follows You</TextBadge>}\n      </div>\n      {profile.description && (\n        <div>\n          <Widget\n            src=\"near/widget/SocialMarkdown\"\n            props={{ text: profile.description }}\n          />\n        </div>\n      )}\n\n      <Actions>\n        {viewingOwnAccount ? (\n          <a\n            className=\"button button--primary\"\n            href=\"#/near/widget/ProfileEditor\"\n          >\n            <i className=\"bi bi-pencil\"></i>\n            Edit Profile\n          </a>\n        ) : context.accountId ? (\n          <>\n            <FollowButtonWrapper>\n              <Widget\n                src=\"near/widget/FollowButton\"\n                props={{\n                  accountId,\n                }}\n              />\n            </FollowButtonWrapper>\n          </>\n        ) : (\n          <></>\n        )}\n      </Actions>\n      <Actions>\n        <FollowButtonWrapper>\n          <Widget\n            src=\"hack.near/widget/DAO.Join\"\n            props={{\n              daoId: accountId,\n              role,\n            }}\n          />\n        </FollowButtonWrapper>\n\n        <OverlayTrigger\n          placement=\"top\"\n          overlay={<Tooltip>Copy URL to clipboard</Tooltip>}\n        >\n          <button\n            className=\"button\"\n            type=\"button\"\n            onMouseLeave={() => {\n              State.update({ copiedShareUrl: false });\n            }}\n            onClick={() => {\n              clipboard.writeText(shareUrl).then(() => {\n                State.update({ copiedShareUrl: true });\n              });\n            }}\n          >\n            {state.copiedShareUrl ? (\n              <i className=\"bi-16 bi bi-check\"></i>\n            ) : (\n              <i className=\"bi-16 bi-link-45deg\"></i>\n            )}\n            Share\n          </button>\n        </OverlayTrigger>\n      </Actions>\n    </Section>\n\n    <Section>\n      <Stats>\n        <Text as=\"a\" href={`${accountUrl}&tab=following`}>\n          <b bold as=\"span\">\n            {followingCount === null ? \"--\" : followingCount}\n          </b>{\" \"}\n          Following\n        </Text>\n        <Text as=\"a\" href={`${accountUrl}&tab=followers`}>\n          <b>{followersCount === null ? \"--\" : followersCount}</b> Followers\n        </Text>\n      </Stats>\n      {tags.length > 0 && (\n        <Widget\n          src=\"near/widget/Tags\"\n          props={{\n            tags,\n          }}\n        />\n      )}\n    </Section>\n\n    {profile.linktree && (\n      <Section>\n        <SocialLinks>\n          {profile.linktree.website && (\n            <TextLink\n              href={`https://${profile.linktree.website}`}\n              target=\"_blank\"\n            >\n              <i className=\"bi bi-globe\"></i> {profile.linktree.website}\n            </TextLink>\n          )}\n\n          {profile.linktree.github && (\n            <TextLink\n              href={`https://github.com/${profile.linktree.github}`}\n              target=\"_blank\"\n            >\n              <i className=\"bi bi-github\"></i> {profile.linktree.github}\n            </TextLink>\n          )}\n\n          {profile.linktree.twitter && (\n            <TextLink\n              href={`https://twitter.com/${profile.linktree.twitter}`}\n              target=\"_blank\"\n            >\n              <i className=\"bi bi-twitter\"></i> {profile.linktree.twitter}\n            </TextLink>\n          )}\n\n          {profile.linktree.telegram && (\n            <TextLink\n              href={`https://t.me/${profile.linktree.telegram}`}\n              target=\"_blank\"\n            >\n              <i className=\"bi bi-telegram\"></i> {profile.linktree.telegram}\n            </TextLink>\n          )}\n        </SocialLinks>\n      </Section>\n    )}\n  </Wrapper>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/DAO.Page.Sidebar", "__row_index": 0}