{"tx_hash": "C7GPq3LKHgBAFiQT4pf2opZi3mCvie8TzKsXsC9huZyw", "action_id_social": "CKBprv6aAfB3yE8fzrCi6RJZWAZKogaE29c4LzLfW37L-0-widget", "block_id": 94954571, "block_timestamp": "2023-06-24T23:11:46.150Z", "signer_id": "hack.near", "widget_name": "dao.proposals", "source_code": "const daoId = props.daoId ?? \"rc-dao.sputnik-dao.near\";\nconst limit = parseInt(props.limit) || 888;\n\nif (!daoId) {\n  return \"\";\n}\n\nconst daoVersion = Near.view(daoId, \"version\");\nif (!daoVersion) {\n  return \"\";\n}\n\nconst config = Near.view(daoId, \"get_config\");\nconst policy = Near.view(daoId, \"get_policy\");\nconst lastProposalId = Near.view(daoId, \"get_last_proposal_id\");\n\nlet proposals = [];\n\nif (lastProposalId) {\n  proposals =\n    Near.view(daoId, \"get_proposals\", {\n      from_index: Math.max(0, lastProposalId - limit),\n      limit,\n    }) || [];\n  proposals.reverse();\n}\n\nreturn (\n  <div className=\"m-3\">\n    <h3>Recent Proposals</h3>\n    {proposals.map((proposal, i) => (\n      <div key={proposal.id} className=\"mb-3\">\n        <Widget\n          src=\"hack.near/widget/dao.proposal\"\n          props={{ daoId, proposal, policy }}\n        />\n      </div>\n    ))}\n    <Widget\n      src=\"near/widget/DIG.Button\"\n      props={{\n        href: \"#/hack.near/widget/dao.proposals\",\n        label: \"See All Proposals\",\n        variant: \"outline-dark\",\n        size: \"small\",\n      }}\n    />\n    <br />\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/dao.proposals", "__row_index": 2}