{"tx_hash": "7ZUmJQsqi7xje6u1kpXFg2WQwc2PJyeLt94nPosoKmWb", "action_id_social": "5dUZ7rBi5sd8M5RWLfJmRM7uNdp9RA6YPrUJB8NgBJzK-0-widget", "block_id": 89702160, "block_timestamp": "2023-04-16 08:43:07.669", "signer_id": "hack.near", "widget_name": "Page.Builder", "source_code": "const accountId = props.accountId; // which account's Types to use\nconst font = props.font || \"Courier\"; // custom font for H1\nconst hashtag = props.hashtag || \"page\"; // where to index data from\nconst text = props.text || hashtag; // text for H1\nconst view = props.view || \"WIDGETS\";\n\nconst pageTypes = [\n  {\n    name: \"group\",\n    hashtag: \"group\",\n    template: \"hack.near/widget/Common.Group\",\n  },\n  {\n    name: \"feed\",\n    hashtag: \"feed\",\n    template: \"hack.near/widget/Common.Feed\",\n  },\n  {\n    name: \"library\",\n    hashtag: \"library\",\n    template: \"hack.near/widget/Common.Library\",\n  },\n];\n\nconst H1 = styled.h1`\n  font-family: ${font}, Times, serif;\n  font-size: 4em;\n  line-height: 1.25;\n  font-weight: 400;\n  cursor: pointer;\n`;\n\nconst Container = styled.div`\n  align-items: center;\n  gap: 16px;\n  width: 100%;\n`;\n\nconst Controller = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  gap: 4px;\n`;\n\nconst ButtonRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 4px;\n  margin: 0 4px;\n`;\n\nconst Button = styled.button`\n  text-transform: lowercase !important;\n`;\n\nState.init({\n  title: text,\n  selectedTab: view,\n  type: null,\n});\n\nconst renderView = () => {\n  switch (state.selectedTab) {\n    case \"CREATE\":\n      return (\n        <Widget\n          src={\"hack.near/widget/Create.Page\"}\n          props={{ typeTag: state.type.hashtag, template: state.type.template }}\n        />\n      );\n    case \"WIDGETS\":\n      return (\n        <Widget\n          src={\"hack.near/widget/Test.Page\"}\n          props={{ hashtag: state.type.hashtag || hashtag }}\n        />\n      );\n  }\n};\n\nconst handleSelectType = (type) => {\n  State.update({\n    type,\n    title: type.name || text,\n    selectedTab: \"WIDGETS\",\n  });\n};\n\nconst handlePageCreate = () => {\n  State.update({\n    selectedTab: \"CREATE\",\n  });\n};\n\nreturn (\n  <>\n    <Container>\n      <Controller>\n        <H1>{state.title}</H1>\n        <ButtonRow>\n          {state.type === null ? (\n            <>\n              {pageTypes.map((it) => (\n                <Button onClick={() => handleSelectType(it)}>{it.name}</Button>\n              ))}\n            </>\n          ) : (\n            <>\n              <Button onClick={() => handleSelectType(null)}>back</Button>\n              <CommitButton\n                onClick={() => handlePageCreate()}\n                className=\"create-button\"\n                data={{\n                  index: {\n                    create: JSON.stringify({\n                      key: accountId,\n                      value: hashtag,\n                    }),\n                  },\n                }}\n                onCommit={() => {\n                  State.update({ hasCreated: true });\n                }}\n              >\n                create new\n              </CommitButton>\n            </>\n          )}\n        </ButtonRow>\n      </Controller>\n      {renderView()}\n    </Container>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/Page.Builder"}