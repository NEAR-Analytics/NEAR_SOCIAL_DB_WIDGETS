{"tx_hash": "CHWaiZtZT8DV25K9oCSRF9Z8iyqzDDJXEbPSR7vVnmty", "action_id_social": "GZWsaETGi8bbzsKnmwzEJMtf7WhCjX2DGKMSNTg7bRDL-0-widget", "block_id": 94672884, "block_timestamp": "2023-06-21T06:55:07.883Z", "signer_id": "hack.near", "widget_name": "event.create", "source_code": "const accountId = context.accountId;\nconst daoId = props.daoId ?? \"build.sputnik-dao.near\";\nif (!accountId) {\n  return \"Please connect your NEAR account :)\";\n}\n\nconst today = Math.floor((Date.now() + 0) / 86400000) * 86400000;\nconst tomorrow = today + 86400000;\n\nState.init({\n  participants: \"\",\n  date,\n  time,\n});\n\nconst policy = Near.view(daoId, \"get_policy\");\n\nconst deposit = policy.proposal_bond;\n\nconst event_args = JSON.stringify({\n  data: {\n    [state.daoId]: {\n      event: {\n        [state.eventId]: state.event,\n      },\n    },\n  },\n});\n\nconst proposal_args = Buffer.from(event_args, \"utf-8\").toString(\"base64\");\n\nconst handleProposal = () => {\n  Near.call([\n    {\n      contractName: daoId,\n      methodName: \"add_proposal\",\n      args: {\n        proposal: {\n          description: \"update DAO profile on NEAR Social\",\n          kind: {\n            FunctionCall: {\n              receiver_id: \"social.near\",\n              actions: [\n                {\n                  method_name: \"set\",\n                  args: proposal_args,\n                  deposit: \"80000000000000000000000\",\n                  gas: \"300000000000000\",\n                },\n              ],\n            },\n          },\n        },\n      },\n      deposit: deposit,\n      gas: \"300000000000000\",\n    },\n  ]);\n};\n\nreturn (\n  <>\n    <div className=\"row\">\n      <div className=\"col-lg-6\">\n        <div className=\"m-2\">\n          <h3>\n            <b>create an event page</b>\n          </h3>\n          <hr />\n          <div className=\"mb-3\">\n            <CommitButton\n              data={{\n                event: {\n                  [state.eventId]: state.event,\n                },\n              }}\n            >\n              save\n            </CommitButton>\n            <a\n              className=\"btn btn-outline-success ms-2\"\n              href={`#/hack.near/widget/event.page?accountId=${accountId}`}\n            >\n              propose\n            </a>\n            <a\n              className=\"btn btn-outline-primary ms-2\"\n              href={`#/hack.near/widget/event.page?accountId=${accountId}`}\n            >\n              view\n            </a>\n            <a\n              className=\"btn btn-outline-primary ms-2\"\n              href={`#/hack.near/widget/events`}\n            >\n              explore\n            </a>\n          </div>\n          <div className=\"d-flex justify-content-center m-2\">\n            <div className=\"col-6 m-2\">\n              <h5>date</h5>\n              <input\n                type=\"date\"\n                value={state.date}\n                onChange={(e) => {\n                  State.update({ data: e.target.value });\n                }}\n              />\n            </div>\n            <div className=\"col-6 m-2\">\n              <h5>time</h5>\n              <input\n                type=\"time\"\n                value={state.time}\n                onChange={(e) => {\n                  State.update({ time: e.target.value });\n                }}\n              />\n            </div>\n          </div>\n          <div className=\"mb-2\">\n            <h5>id</h5>\n            <input\n              type=\"text\"\n              value={state.eventId}\n              onChange={(e) => {\n                State.update({ eventId: e.target.value });\n              }}\n            />\n          </div>\n          <h5 className=\"mt-3\">metadata</h5>\n          <Widget\n            src=\"near/widget/MetadataEditor\"\n            props={{\n              initialMetadata: event,\n              onChange: (event) => State.update({ event }),\n              options: {\n                name: { placeholder: \"title\" },\n                date: { label: \"date\", value: state.date },\n                time: { label: \"time\", value: state.time },\n                image: { label: \"logo\" },\n                backgroundImage: { label: \"image\" },\n                description: { label: \"description\" },\n                tags: {\n                  label: \"tags\",\n                  tagsPattern: \"*/community/*/tags/*\",\n                  placeholder:\n                    \"rust, engineer, artist, humanguild, nft, learner, founder\",\n                },\n                linktree: {\n                  links: [\n                    {\n                      label: \"Twitter\",\n                      prefix: \"https://twitter.com/\",\n                      name: \"twitter\",\n                    },\n                    {\n                      label: \"Github\",\n                      prefix: \"https://github.com/\",\n                      name: \"github\",\n                    },\n                    {\n                      label: \"Telegram\",\n                      prefix: \"https://t.me/\",\n                      name: \"telegram\",\n                    },\n                    {\n                      label: \"Website\",\n                      prefix: \"https://\",\n                      name: \"website\",\n                    },\n                  ],\n                },\n              },\n            }}\n          />\n        </div>\n      </div>\n      <div className=\"col-lg-6\">\n        <Widget\n          src=\"hack.near/widget/event.view\"\n          props={{ accountId, event: state.event }}\n        />\n      </div>\n    </div>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/event.create", "__row_index": 8}