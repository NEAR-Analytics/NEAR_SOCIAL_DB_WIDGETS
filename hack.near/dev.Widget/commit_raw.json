{"tx_hash": "2WwqFy46FpNwBkci5QiUQLzrSXBdqsJKt56hm7V8LQ4V", "action_id_social": "GVmEWHhAZqAQB7Hk51XwLh8F5h3q5r4JyjKyNgneVRPJ-0-widget", "block_id": 91819994, "block_timestamp": "2023-05-14T07:23:53.559Z", "signer_id": "hack.near", "widget_name": "dev.Widget", "source_code": "const accountId = props.accountId ?? context.accountId;\nconst daoId = props.daoId ?? \"build.sputnik-dao.near\";\n\nif (!accountId) {\n  return \"Please connect your NEAR wallet :)\";\n}\n\nconst defaultWidget = \"hack.near/widget/DAO.Profile\";\n\nconst widget = Social.get(`${daoId}/settings/dao/widget`);\n\nif (widget === null) {\n  return \"Loading...\";\n}\n\nState.init({\n  widget: widget ?? defaultWidget,\n});\n\nconst resetWidget = () => {\n  state.widget = defaultWidget;\n  State.update();\n};\n\nconst widget_args = JSON.stringify({\n  data: {\n    [state.daoId]: {\n      settings: {\n        dao: {\n          widget: state.widget,\n        },\n      },\n    },\n  },\n});\n\nconst proposal_args = Buffer.from(widget_args, \"utf-8\").toString(\"base64\");\n\nconst handleProposal = () => {\n  Near.call([\n    {\n      contractName: daoId,\n      methodName: \"add_proposal\",\n      args: {\n        proposal: {\n          description: \"update featured widget\",\n          kind: {\n            FunctionCall: {\n              receiver_id: \"social.near\",\n              actions: [\n                {\n                  method_name: \"set\",\n                  args: proposal_args,\n                  deposit: \"50000000000000000000000\",\n                  gas: \"200000000000000\",\n                },\n              ],\n            },\n          },\n        },\n      },\n      deposit: \"100000000000000000000000\",\n      gas: \"200000000000000\",\n    },\n  ]);\n};\n\nconst Wrapper = styled.div`\n  display: flex;\n  flex-direction: column;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 12px;\n`;\n\nconst H1 = styled.h1`\n  font-weight: 600;\n  font-size: 32px;\n  line-height: 39px;\n  color: #11181c;\n  margin: 0;\n`;\n\nconst Items = styled.div`\n  display: flex;\n  flex-direction: column;\n  gap: 23px;\n`;\n\nconst Item = styled.div``;\n\nconst Div = styled.div`\n  position: relative;\n  @media (hover: hover) {\n    > .edit-link {\n      display: none;\n    }\n  }\n  &:hover {\n    > .edit-link {\n      display: inline;\n    }\n  }\n`;\n\nreturn (\n  <div>\n    <Wrapper>\n      <Header>\n        <H1>Featured Widget</H1>\n        <Widget\n          src=\"miraclx.near/widget/Attribution\"\n          props={{\n            dep: true,\n            authors: [daoId],\n          }}\n        />\n        <b className=\"mt-2\">INPUT NEW SOURCE PATH:</b>\n        <input type=\"text\" value={state.widget} placeholder={defaultWidget} />\n        <div>\n          {context.accountId && (\n            <button\n              key=\"edit\"\n              onClick={submit}\n              disabled={state.widget === defaultWidget}\n              className=\"btn btn-success edit-link position-absolute top-0 end-0 me-2 mt-1\"\n            >\n              <i class=\"bi bi-patch-plus\" /> Submit Proposal\n            </button>\n          )}\n        </div>\n        <Items>\n          <Item>\n            <Widget\n              src=\"adminalpha.near/widget/ComponentCard\"\n              props={{\n                src: `${state.widget}`,\n              }}\n            />\n          </Item>\n        </Items>\n      </Header>\n      <div className=\"mt-5\">\n        <Widget src={state.widget} props={{ accountId, daoId }} />\n      </div>\n    </Wrapper>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/hack.near/widget/dev.Widget", "__row_index": 0}