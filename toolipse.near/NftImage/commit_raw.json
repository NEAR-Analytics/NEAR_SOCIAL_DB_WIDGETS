{"tx_hash": "ASrnDEu3APcEmJo8ZssUAtCDZ6NkdM4fV1Qk3vNzdmDk", "action_id_social": "DwwTDwGJW1rJzBKShVudXbZgALAtimrQEv75FteUrbsB-0-widget", "block_id": 78753232, "block_timestamp": "2022-11-19 00:22:42.040", "signer_id": "toolipse.near", "widget_name": "NftImage", "source_code": "const nft = props.nft ?? {\n  contractId: props.contractId,\n  tokenId: props.tokenId,\n};\nconst contractId = nft.contractId;\nconst tokenId = nft.tokenId;\nconst className = props.className ?? \"img-fluid\";\nconst style = props.style;\nconst alt = props.alt;\nconst thumbnail = props.thumbnail;\nconst fallbackUrl = props.fallbackUrl;\n\nconst nftMetadata = Near.view(contractId, \"nft_metadata\");\nconst nftToken = Near.view(contractId, \"nft_token\", {\n  token_id: tokenId,\n});\n\nlet imageUrl = fallbackUrl;\n\nif (nftMetadata && nftToken) {\n  let tokenMetadata = nftToken.metadata;\n  let tokenMedia = tokenMetadata.media || \"\";\n\n  const ownerId = nftToken.owner_id[\"Account\"]\n    ? nftToken.owner_id[\"Account\"]\n    : nftToken.owner_id;\n\n  imageUrl =\n    tokenMedia.startsWith(\"https://\") ||\n    tokenMedia.startsWith(\"http://\") ||\n    tokenMedia.startsWith(\"data:image\")\n      ? tokenMedia\n      : nftMetadata.base_uri\n      ? `${nftMetadata.base_uri}/${tokenMedia}`\n      : tokenMedia.startsWith(\"Qm\")\n      ? `https://ipfs.near.social/ipfs/${tokenMedia}`\n      : tokenMedia;\n\n  if (\n    !tokenMedia &&\n    tokenMetadata.reference &&\n    nftMetadata.base_uri === \"https://arweave.net\"\n  ) {\n    const res = fetch(`${nftMetadata.base_uri}/${tokenMetadata.reference}`);\n    imageUrl = res.body.media;\n  }\n\n  if (!imageUrl) {\n    imageUrl = fallbackUrl;\n  }\n}\n\nreturn (\n  <img\n    className={className}\n    style={style}\n    src={\n      thumbnail ? `https://i.near.social/${thumbnail}/${imageUrl}` : imageUrl\n    }\n    alt={alt}\n  />\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/toolipse.near/widget/NftImage", "metadata.description": "Digital drawing // 8330 * 6229 px", "metadata.image.nft.contractId": "toolipse.mintbase1.near", "metadata.image.nft.tokenId": "#453", "metadata.name": "Daemons dance (night version)"}