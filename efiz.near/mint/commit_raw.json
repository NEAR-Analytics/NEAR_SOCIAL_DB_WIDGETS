{"tx_hash": "628zCpZxYaWc9gKq9ePJ5t8qxuVxupCefN4buXgpnNfB", "action_id_social": "XQ1iYqcCveTaHACtVD1SpfoobpQqYCxcURu3MsinTku-0-widget", "block_id": 95105675, "block_timestamp": "2023-06-26T22:29:42.986Z", "signer_id": "efiz.near", "widget_name": "mint", "source_code": "const YoctoToNear = (amountYocto) =>\n  new Big(amountYocto).div(new Big(10).pow(24)).toString();\n\nconst accountId = props.accountId || context.accountId;\nconst contractId = props.contractId || context.contractId || \"toolipse.near\";\nconst marketId = \"simple.market.mintbase1.near\";\nconst AFFILIATE_ACCOUNT = props.affiliateAccount || \"toolipse.near\";\n\nconst STORAGE_PRICE_PER_BYTE_EXPONENT = 19;\nconst STORAGE_BYTES = {\n  COMMON: 80, // one royalty owner, one split owner, or one approval\n  TOKEN_BASE: 440,\n  MINTING_BASE: 92,\n  MINTING_FEE: 100, // minting fee of 1 milliNEAR expressed as bytes\n};\n\nfunction calculateMintingDeposit({ nTokens, nRoyalties, nSplits, metadata }) {\n  const nSplitsAdj = nSplits < 1 ? 0 : nSplits - 1;\n  const bytesPerToken =\n    STORAGE_BYTES.TOKEN_BASE +\n    nSplitsAdj * STORAGE_BYTES.COMMON +\n    STORAGE_BYTES.COMMON;\n  const metadataBytesEstimate = JSON.stringify(metadata).length;\n\n  const totalBytes =\n    STORAGE_BYTES.MINTING_BASE +\n    STORAGE_BYTES.MINTING_FEE +\n    metadataBytesEstimate +\n    bytesPerToken * nTokens +\n    STORAGE_BYTES.COMMON * nRoyalties;\n\n  return `${Math.ceil(totalBytes)}${\"0\".repeat(\n    STORAGE_PRICE_PER_BYTE_EXPONENT\n  )}`;\n}\n\nfunction handleMint() {\n  const nTokens = 1;\n  const nRoyalties = Object.keys({})?.length;\n  const nSplits = 0;\n  const metadata = {\n    reference: \"zEQztMC23HShpHFTXcfnQ3GCqgo3WkbvcOfm2AfYFQg\",\n    media: \"rzjQuYYuWnr-lVL0oDE5hYjsFDz1rWxy6jD7VYp9LXU\",\n  };\n  const gas = 300000000000000;\n  const deposit = calculateMintingDeposit({\n    nSplits,\n    nTokens,\n    nRoyalties,\n    metadata,\n  });\n\n  Near.call(\n    \"efiz.mintbase1.near\",\n    \"nft_batch_mint\",\n    {\n      owner_id: \"efiz.near\",\n      metadata,\n      num_to_mint: nTokens,\n      royalty_args: null,\n      token_ids_to_mint: null,\n      split_owners: null,\n    },\n    gas,\n    deposit\n  );\n}\n\nconst Button = styled.button`\n`;\n\nreturn <Button onClick={handleMint}>mint</Button>;\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/mint", "__row_index": 1}