{"tx_hash": "EfxdY8y4TwpgiRMUiY5YrwnYuHK42nm62aZgt4gEEJi6", "action_id_social": "CWzFNS9c5DGFYmoUwbk2H2iQ1tU58xjwdN2zCgDavKDL-0-widget", "block_id": 92011798, "block_timestamp": "2023-05-16T19:20:39.995Z", "signer_id": "efiz.near", "widget_name": "Every.Thing", "source_code": "const dataSource = props.dataSource;\nconst dataSourceArgs = props.dataSourceArgs;\nconst type = props.type;\nconst node = props.node;\nconst isRoot = props.isRoot;\n\nState.init({\n  expanded: false,\n});\n\nconst Button = styled.button`\n  text-transform: lowercase !important;\n`;\n\nconst ButtonRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 4px;\n`;\n\nfunction handleExpand() {\n  State.update({ expanded: !state.expanded });\n}\n\nfunction getData(dataSource, dataSourceArgs, type) {\n  let value = {};\n  if (type === \"account\") {\n    if (dataSource === \"SOCIALDB\") {\n      const path = dataSourceArgs.arg1;\n      const parts = path.split(\"/\");\n      if (parts[0] !== \"*\") {\n        parts.push(\"**\");\n      }\n      // value = Social.get(parts.join(\"/\"), \"final\");\n      value = props.value;\n      return value;\n    }\n  }\n}\n\nconst data = getData(dataSource, dataSourceArgs, type);\nconsole.log(data);\n\nfunction getTypeDetails(type) {\n  if (type === \"account\") {\n    return {\n      properties: [],\n      widgets: {\n        view: \"efiz.near/widget/Every.Account\",\n      },\n    };\n  }\n}\n\nconst typeDetails = getTypeDetails(type);\nconsole.log(typeDetails);\n\nconst widgetSrc = typeDetails?.widgets?.view;\nconsole.log(widgetSrc);\n\nreturn (\n  <>\n    {isRoot ? (\n      <div>\n        <div>\n          <Button onClick={handleExpand}>{state.expanded ? \"-\" : \"+\"}</Button>\n        </div>\n        {state.expanded && (\n          <ButtonRow>\n            {node && typeof node === \"object\"\n              ? Object.entries(node).map(([key, val]) => (\n                  <Widget\n                    src=\"efiz.near/widget/Every.Node\"\n                    props={{\n                      key,\n                      label: key,\n                      path: `${path}/${key}`,\n                      setPath: setPath,\n                      history,\n                      setHistory: setHistory,\n                      isRoot: false,\n                    }}\n                  />\n                ))\n              : null}\n          </ButtonRow>\n        )}\n      </div>\n    ) : null}\n  </>\n);\nif (widgetSrc) {\n  // return custom display\n  return <Widget src={widgetSrc} props={{ data }} />;\n} else {\n  // or basic node\n  // return (\n  //   <Widget\n  //     src=\"efiz.testnet/widget/Every.Node\"\n  //     props={{\n  //       label: path,\n  //       type: type,\n  //       path: path,\n  //       setPath: setPath,\n  //       history: history,\n  //       setHistory: setHistory,\n  //       setRoot: setRoot,\n  //       setType: setType,\n  //       isRoot: true,\n  //       styles: {\n  //         subject: {\n  //           fontFamily: \"Times New Roman\",\n  //           fontSize: \"4em\",\n  //           lineHeight: \"1.25\",\n  //           fontWeight: 400,\n  //           cursor: \"pointer\",\n  //         },\n  //       },\n  //     }}\n  //   />\n  // );\n}\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Every.Thing", "__row_index": 1}