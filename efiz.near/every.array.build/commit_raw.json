{"tx_hash": "AHEw3KnS9T6QCPAHUXn2JF6iqsc475Et9zme5F8Q7MQe", "action_id_social": "E7g9mfHeC15G99hq7ow1D12teTLETCiHWCE1eVfE1DfP-0-widget", "block_id": 94642635, "block_timestamp": "2023-06-20T21:29:35.277Z", "signer_id": "efiz.near", "widget_name": "every.array.build", "source_code": "const item = props.item;\nconst onChange = props.onChange;\n\nconst Input = styled.input`\n`;\n\nconst Button = styled.button`\n`;\n\nconst Container = styled.div`\n    display: flex;\n    flex-direction: column;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  flex-direction: row;\n  gap: 4px;\n`;\n\nState.init({\n  inputValues: item.value || [],\n  newInputValue: item.type === \"string\" ? \"\" : {},\n});\n\nconst handleInputChange = (index, value) => {\n  const newInputValues = [...state.inputValues];\n  newInputValues[index] = value;\n  State.update({ inputValues: newInputValues });\n};\n\nconst handleAddClick = () => {\n  const newInputValue = JSON.parse(JSON.stringify(state.newInputValue));\n  const newInputValues = [...state.inputValues, newInputValue];\n\n  State.update({\n    inputValues: newInputValues,\n    newInputValue: item.type === \"string\" ? \"\" : {},\n  });\n\n  if (onChange) {\n    onChange(newInputValues);\n  }\n};\n\nconst handleDeleteClick = (index) => {\n  const newInputValues = [...state.inputValues];\n  newInputValues.splice(index, 1);\n  State.update({ inputValues: newInputValues });\n  if (onChange) {\n    onChange(newInputValues);\n  }\n};\n\nconst handleNewInputChange = (newValues) => {\n  if (item.type === \"string\") {\n    State.update({\n      newInputValue: newValues.target.value,\n    });\n  } else {\n    const newInputValue = JSON.parse(JSON.stringify(state.newInputValue));\n    State.update({\n      newInputValue: { ...newInputValue, ...newValues },\n    });\n  }\n};\n\nreturn (\n  <Container>\n    {state.inputValues?.map((inputValue, index) => (\n      <Row key={index}>\n        <Widget\n          src=\"efiz.near/widget/create\"\n          props={{\n            item: {\n              type: item.type,\n              value: inputValue,\n            },\n            onChange: (e) => handleInputChange(index, e.target.value),\n          }}\n        />\n        <Button onClick={() => handleDeleteClick(index)}>Delete</Button>\n      </Row>\n    ))}\n    <Row>\n      <Widget\n        src=\"efiz.near/widget/create\"\n        props={{\n          item: {\n            type: item.type,\n            value: state.newInputValue,\n          },\n          onChange: handleNewInputChange,\n        }}\n      />\n      <Button onClick={handleAddClick}>Add</Button>\n    </Row>\n  </Container>\n);\n// <p>{JSON.stringify(state)}</p>\n\n//  disabled={state.newInputValue} // Check that full state is good\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/every.array.build", "__row_index": 10}