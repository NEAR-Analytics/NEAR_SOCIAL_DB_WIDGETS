{"tx_hash": "FiFih4wEcNSYdTx6jdr1kE1NCJfBMjHuCcEwNZELF4Vs", "action_id_social": "3kgbRA4buaiQgRnQZDzWAS6u6cG87dYZxSxj3oiEo6vK-0-widget", "block_id": 87072927, "block_timestamp": "2023-03-11 19:01:08.227", "signer_id": "efiz.near", "widget_name": "Create", "source_code": "/*\r\n---props---\r\n\r\nprops.widgetPath?: string,\r\n\r\n*/\r\n\r\n// How can I access the widget path dynamically?\r\nconst initWidgetPath = \"efiz.near/widget/Create\";\r\n\r\nState.init({\r\n  widgetPath: initWidgetPath,\r\n  color: \"\",\r\n  brand: \"\",\r\n  size: \"\",\r\n  material: \"\",\r\n});\r\n\r\n// START GET THE WIDGET COMMIT\r\nconst historyBlocksRequest = Social.keys(`${initWidgetPath}`, \"final\", {\r\n  return_type: \"History\",\r\n});\r\n\r\nif (historyBlocksRequest === null) return \"loading...\";\r\n\r\nconst [widgetAccountId, _, widgetName] = initWidgetPath.split(\"/\");\r\n\r\nlet blocksChanges =\r\n  historyBlocksRequest[widgetAccountId]?.[\"widget\"]?.[widgetName];\r\n\r\n// Latest commit sits at blocksChanges[0]\r\n// How do we know this is the one they are using though?\r\n// END GET THE WIDGET COMMIT\r\n\r\nconst composeData = () => {\r\n  const data = {\r\n    thing: {\r\n      main: JSON.stringify({\r\n        color: state.color,\r\n        brand: state.brand,\r\n        size: state.size,\r\n        material: state.material,\r\n        commit: blocksChanges[0]\r\n      }),\r\n    },\r\n    index: {\r\n      thing: JSON.stringify({\r\n        key: \"main\",\r\n        value: {\r\n          type: \"thing\",\r\n        },\r\n      }),\r\n    },\r\n  };\r\n\r\n  return data;\r\n};\r\n\r\nreturn (\r\n  <div>\r\n    <h1 class=\"text-center\">Thing</h1>\r\n\r\n    <div class=\"input-group mb-3\">\r\n      <input\r\n        class=\"form-control\"\r\n        placeholder={\"color\"}\r\n        onChange={({ target }) => State.update({ color: target.value })}\r\n      />\r\n      <input\r\n        class=\"form-control\"\r\n        placeholder={\"brand\"}\r\n        onChange={({ target }) => State.update({ brand: target.value })}\r\n      />\r\n      <input\r\n        class=\"form-control\"\r\n        placeholder={\"size\"}\r\n        onChange={({ target }) => State.update({ size: target.value })}\r\n      />\r\n      <input\r\n        class=\"form-control\"\r\n        placeholder={\"material\"}\r\n        onChange={({ target }) => State.update({ material: target.value })}\r\n      />\r\n    </div>\r\n    <div>\r\n      <div className={\"list-group-item list-group-item-action \"}>\r\n        #{blocksChanges[0]}\r\n      </div>\r\n      <div className={\"list-group-item list-group-item-action \"}>\r\n        {state.color}\r\n      </div>\r\n      <div className={\"list-group-item list-group-item-action \"}>\r\n        {state.brand}\r\n      </div>\r\n      <div className={\"list-group-item list-group-item-action \"}>\r\n        {state.size}\r\n      </div>\r\n      <div className={\"list-group-item list-group-item-action \"}>\r\n        {state.material}\r\n      </div>\r\n    </div>\r\n    <CommitButton\r\n      disabled={false}\r\n      force\r\n      className=\"btn btn-dark rounded-3\"\r\n      data={composeData}\r\n    >\r\n      Create\r\n    </CommitButton>\r\n  </div>\r\n);\r\n", "metadata": NaN, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Create", "branch.draft.": NaN, "branch.draft.metadata": NaN, "branch": NaN, "metadata.image.ipfs_cid": NaN, "metadata.linktree.website": NaN, "metadata.name": NaN, "metadata.tags.action": NaN}