{"tx_hash": "5RQomtxMWeXWPYqCdsA9uQvGtB9D2DDVkpfx8azjX5Sx", "action_id_social": "8WzoFGyYgXSXVbCHxdRA89bA2fqDeg5Rt4CMbt1epcFC-0-widget", "block_id": 93380892, "block_timestamp": "2023-06-03T19:06:05.582Z", "signer_id": "efiz.near", "widget_name": "create", "source_code": "State.init({\n  created: false,\n});\n\nfunction composeData() {\n  const data = {\n    thing: {\n      core: {\n        data: {\n          name: \"\",\n          navigation: [\n            {\n              name: \"kanban\",\n              src: \"every.near/thing/kanban\",\n            },\n            {\n              name: \"social\",\n              src: \"every.near/thing/feed\",\n            },\n          ],\n        },\n        type: \"efiz.near/type/core\",\n      },\n    },\n  };\n  return data;\n}\n\nfunction Thing() {\n  // Renders the path according to type (VM doesn't offer switch-case w/ default)\n  if (type === \"widget\") {\n    // TODO: Verify that props are passed\n    // How to allow user to lock at a specific height?\n    return <Widget src={path} props={props} />;\n  }\n  if (type === \"settings\") {\n    // Standardize path to {accountId}/settings/**\n    parts.splice(2);\n    parts.push(\"**\");\n    path = parts.join(\"/\");\n    return (\n      <Widget\n        src=\"efiz.near/widget/Every.Setting\"\n        props={{ path, blockHeight }}\n      />\n    );\n  }\n  if (type === \"thing\") {\n    // get the thing data\n    const thing = Social.get(path, blockHeight);\n    thing = JSON.parse(thing || \"null\");\n    type = thing.type || null;\n    // get the type data\n    const type = JSON.parse(Social.get(type, blockHeight) || \"null\");\n    if (type === null) {\n      console.log(`edge case: thing ${path} had an invalid type: ${thingType}`);\n    }\n    // get the widget to render this thing\n    const widgetSrc = type?.widgets?.view;\n    return (\n      <Widget src={widgetSrc} props={{ data: thing.data, path, blockHeight }} />\n    );\n  }\n  // DEFAULT:\n  return <p>The type: {type} is not yet supported.</p>;\n}\n\nreturn (\n  <>\n    {state.created ? (\n      <></>\n    ) : (\n      <CommitButton\n        force\n        data={composeData}\n        onCommit={() => console.log(\"hello\")}\n      >\n        create something\n      </CommitButton>\n    )}\n  </>\n);\n", "metadata": null, "branch": {"draft": null}, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/create", "__row_index": 0}