{"tx_hash": "8hpRK21AYBNxHB1M3b5VPoS21XBGmvU5YEKt3U1nBoti", "action_id_social": "C1dB1MPGDm5RxdPSLSw5dWTEk2KS7sNkvTxqjJLVFhi6-0-widget", "block_id": 91633191, "block_timestamp": "2023-05-11T21:01:36.375Z", "signer_id": "efiz.near", "widget_name": "Tree", "source_code": "const rootPath = context.accountId ?? \"evrything.near\";\n\nState.init({\n  path: rootPath,\n  history: [rootPath],\n});\n\nfunction setPath(path) {\n  State.update({ path });\n}\n\nfunction setHistory(history) {\n  State.update({ history });\n}\n\nfunction getNode(path) {\n  const parts = path.split(\"/\");\n  if (parts.length === 1) {\n    // ACCOUNT LEVEL //\n    if (parts[0] !== \"*\") {\n      // Otherwise will crash cuz it'll grab all accounts\n      parts.push(\"**\");\n    }\n    const value = Social.get(parts.join(\"/\"), \"final\");\n    return value;\n  } else if (parts.length === 2) {\n    // STANDARD LEVEL //\n    parts.push(\"**\");\n    const value = Social.get(parts.join(\"/\"), \"final\");\n    return value;\n  } else if (parts.length > 2) {\n    // This is to refetch the data necessary for the route\n    const standard = parts[1];\n    let value = {};\n    let type = standard;\n    if (standard === \"graph\") {\n      if (parts.length > 3) {\n        if (parts[2] === \"follow\") {\n          setPath(parts[3]);\n          setHistory([...history, parts[3]]);\n        }\n      } else {\n        parts.push(\"**\");\n        value = Social.get(parts.join(\"/\"), \"final\");\n      }\n    } else if (standard === \"profile\") {\n      value = Social.get(parts.join(\"/\"), \"final\");\n    } else if (standard === \"post\") {\n      value = path;\n    } else {\n      value = Social.get(parts.join(\"/\"), \"final\");\n      value = JSON.parse(value);\n    }\n    return value;\n  }\n}\n\nconst node = getNode(state.path);\n\nreturn (\n  <Widget\n    src=\"efiz.near/widget/Node\"\n    props={{\n      label: state.path,\n      node,\n      path: state.path,\n      setPath: setPath,\n      history: state.history,\n      setHistory: setHistory,\n      isRoot: true,\n    }}\n  />\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Tree", "__row_index": 22}