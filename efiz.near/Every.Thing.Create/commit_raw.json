{"tx_hash": "DaLCxB4Xin2FgYBoU9gTfCkoVbADqVTJiZY5P5htbUbx", "action_id_social": "52jjJtHTeT4KUVyCUrk27JaaqhdCA2TZwJyiUfujViJS-0-widget", "block_id": 92500193, "block_timestamp": "2023-05-23T04:43:14.705Z", "signer_id": "efiz.near", "widget_name": "Every.Thing.Create", "source_code": "const type = props.type || \"\";\nconst postThing = props.postThing;\n\nState.init({\n  selectedType: type,\n});\n\nconst composeData = () => {\n  // generate a random id\n  const thingId = Math.random();\n  const data = {\n    thing: {\n      ...state.extra,\n      [thingId]: JSON.stringify({\n        data: state.thing,\n        type: state.selectedType,\n      }),\n    },\n    index: {\n      thing: JSON.stringify({\n        key: thingId,\n        value: {\n          type: state.selectedType,\n        },\n      }),\n    },\n  };\n  if (postThing) {\n    data = postThing(data);\n  }\n  return data;\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  width: 100%;\n`;\n\nconst Select = styled.select`\n  padding: 5px;\n  width: 100%;\n`;\n\nconst SwitchButton = styled.button`\n  padding: 5px 10px;\n  background-color: ${({ active }) => (active ? \"#5fba7d\" : \"#ccc\")};\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100px;\n`;\n\nconst TextContainer = styled.div`\n    margin-left: 4px;\n`;\n\nconst handleTypeChange = (e) => {\n  State.update({ selectedType: e.target.value });\n};\n\ntype = JSON.parse(Social.get(state.selectedType, \"final\") || null);\n\nif (type === null) {\n  return <></>;\n}\n\nconst handleThingData = (value, extra) => {\n  State.update({ thing: value, extra });\n};\n\nreturn (\n  <>\n    <Container>\n      {props.type === undefined ? (\n        <>\n          <Row>\n            <TextContainer>create a thing of type:</TextContainer>\n          </Row>\n          <Row>\n            <Select value={state.selectedType} onChange={handleTypeChange}>\n              <option value=\"\">Select a type</option>\n              <option value=\"efiz.near/type/Image\">efiz.near/type/Image</option>\n              <option value=\"efiz.near/type/document\">\n                efiz.near/type/document\n              </option>\n            </Select>\n          </Row>\n        </>\n      ) : null}\n\n      {type?.widgets?.create && (\n        <Widget\n          src={type?.widgets?.create}\n          props={{ onChange: handleThingData }} // onChange\n        />\n      )}\n    </Container>\n    <CommitButton\n      force\n      data={composeData()}\n      disabled={!state.thing}\n      className=\"styless\"\n    >\n      create\n    </CommitButton>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Every.Thing.Create", "__row_index": 5}