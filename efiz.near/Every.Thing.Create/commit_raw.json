{"tx_hash": "DAhopZH9eoiapSKDqvSDciNeQU9AzszBa9abwGw1m9D8", "action_id_social": "2KEQVyr1mQraJHH6sAxHUZBKp7KNHFbZLPL8PHVMLYuM-0-widget", "block_id": 92491585, "block_timestamp": "2023-05-23T01:59:09.648Z", "signer_id": "efiz.near", "widget_name": "Every.Thing.Create", "source_code": "const action = props.action || \"\";\nconst type = props.type || \"\";\n\nState.init({\n  selectedAction: action,\n  selectedType: type,\n});\n\nconst composeData = () => {\n  // generate a random id\n  // only really needs to be unique to user\n  const thingId = Math.random();\n  return {\n    data: {\n      thing: {\n        [thingId]: JSON.stringify({\n          data: state.thing,\n          type: state.selectedType,\n        }),\n      },\n      index: {\n        thing: JSON.stringify({\n          key: thingId,\n          value: {\n            type: state.selectedType,\n          },\n        }),\n      },\n    },\n  };\n};\n\nconst Container = styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  align-items: center;\n  margin-bottom: 10px;\n  width: 100%;\n`;\n\nconst Select = styled.select`\n  padding: 5px;\n  width: 100%;\n`;\n\nconst SwitchButton = styled.button`\n  padding: 5px 10px;\n  background-color: ${({ active }) => (active ? \"#5fba7d\" : \"#ccc\")};\n  color: white;\n  border: none;\n  border-radius: 4px;\n  cursor: pointer;\n`;\n\nconst ButtonContainer = styled.div`\n  display: flex;\n  align-items: center;\n  width: 100px;\n`;\n\nconst TextContainer = styled.div`\n\n    margin-left: 4px;\n`;\n\nconst handleActionChange = (e) => {\n  State.update({ selectedAction: e.target.value });\n};\n\nconst handleQuantityToggle = () => {\n  State.update({ isMultiple: !state.isMultiple });\n};\n\n// <ButtonContainer>\n//   <SwitchButton\n//     active={state.isMultiple}\n//     onClick={handleQuantityToggle}\n//   >\n//     {state.isMultiple ? \"Many\" : \"One\"}\n//   </SwitchButton>\n// </ButtonContainer>\n\nconst handleTypeChange = (e) => {\n  State.update({ selectedType: e.target.value });\n};\n\ntype = JSON.parse(Social.get(state.selectedType, \"final\") || null);\n\n// then this has the create button\n// and builds the onChange state\n\nconst handleThingData = (value) => {\n  console.log(value);\n  State.update({ thing: value });\n};\n\nreturn (\n  <>\n    <Container>\n      <Row>\n        <Select value={state.selectedAction} onChange={handleActionChange}>\n          <option value=\"\">Select an action</option>\n          <option value=\"view\">view</option>\n          <option value=\"create\">create</option>\n          <option value=\"edit\">edit</option>\n        </Select>\n      </Row>\n      <Row>\n        <TextContainer>a thing of type:</TextContainer>\n      </Row>\n      <Row>\n        <Select value={state.selectedType} onChange={handleTypeChange}>\n          <option value=\"\">Select a type</option>\n          <option value=\"efiz.near/type/Image\">image</option>\n        </Select>\n      </Row>\n      {type?.widgets[state.selectedAction] && (\n        <Widget\n          src={type?.widgets[state.selectedAction]}\n          props={{ onChange: handleThingData }} // onChange\n        />\n      )}\n    </Container>\n    <CommitButton\n      force\n      data={composeData()}\n      disabled={!state.thing}\n      className=\"styless\"\n    >\n      create\n    </CommitButton>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Every.Thing.Create", "__row_index": 3}