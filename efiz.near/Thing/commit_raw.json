{"tx_hash": "GoRhXANKQauVLkH21auFv9D2RGeXeUkB1MRDsm1SpKyG", "action_id_social": "FF6e6mCgmk4HXJwKSfEKZ16dvKybEWgvVHKFRpWe2zHf-0-widget", "block_id": 92155596, "block_timestamp": "2023-05-18T16:16:11.921Z", "signer_id": "efiz.near", "widget_name": "Thing", "source_code": "const a = props.a;\n\nconst Container = styled.div`\n  border: 1px solid #ccc;\n  padding: 10px;\n  margin-bottom: 10px;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n`;\n\nconst Raw = styled.div`\n  display: ${({ collapsed }) => (collapsed ? \"none\" : \"block\")};\n`;\n\nconst Button = styled.button`\n  text-transform: lowercase !important;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  margin-bottom: 5px;\n`;\n\nconst Key = styled.span`\n  font-weight: bold;\n  margin-right: 5px;\n`;\n\nconst Value = styled.span`\n  color: #888;\n`;\n\nfunction composeData() {\n  return {\n    post: {\n      main: JSON.stringify({\n        path: `${a.value.accountId}/thing/${a.key}}`,\n        blockHeight: a.blockHeight,\n        type: a.value.type,\n      }),\n    },\n    index: {\n      post: JSON.stringify({\n        key: \"main\",\n        value: {\n          type: a.value.type, // because we want to filter by type\n        },\n      }),\n    },\n  };\n}\n\nState.init({ collapsed: true });\n\nconst handleToggle = () => {\n  State.update({ collapsed: !state.collapsed });\n};\n\nlet type = {};\n// This is just hardcoding Type.get(type)\nif (a.value.type === \"image\") {\n  type = {\n    widgets: {\n      create: \"efiz.near/widget/Create.Image\",\n      view: \"mob.near/widget/Image\",\n    },\n  };\n} else if (a.value.type === \"md\") {\n  type = {\n    widgets: {\n      create: \"efiz.near/widget/Posts.Compose\",\n    },\n  };\n}\n\nconst value = Social.get(`${a.accountId}/thing/${a.key}`, a.blockHeight);\nvalue = JSON.parse(value);\n\nreturn (\n  <Container>\n    <Header>\n      <Button onClick={handleToggle}>show raw</Button>\n    </Header>\n    <Raw collapsed={state.collapsed}>\n      <div>\n        <Key>accountId:</Key>\n        <Value>{a.accountId}</Value>\n      </div>\n      <div>\n        <Key>blockHeight:</Key>\n        <Value>{a.blockHeight}</Value>\n      </div>\n      <div>\n        <Key>value.type:</Key>\n        <Value>{a.value.type}</Value>\n      </div>\n      <div>\n        <Key>action:</Key>\n        <Value>{a.action}</Value>\n      </div>\n      <div>\n        <Key>key:</Key>\n        <Value>{a.key}</Value>\n      </div>\n      <div>\n        <Key>index:</Key>\n        <Value>{a.index}</Value>\n      </div>\n    </Raw>\n    {type?.widgets?.view && (\n      <Widget\n        src={type.widgets.view}\n        props={{ image: { ipfs_cid: value.data } }}\n      />\n    )}\n    {/** this should check if it has been posted before */}\n    <CommitButton force data={composeData} className=\"styless\">\n      post\n    </CommitButton>\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Thing", "__row_index": 5}