{"tx_hash": "iookwEBHCW4Bz1QWQaZdxxgjrTR8pypZbkvSUKqnVcb", "action_id_social": "FdXMreBMaVEwjC69yK974h9KsqTDc1YBi9S3w6SWHNKN-0-widget", "block_id": 92161341, "block_timestamp": "2023-05-18T18:04:27.641Z", "signer_id": "efiz.near", "widget_name": "Thing", "source_code": "const path = props.path;\nconst blockHeight = props.blockHeight || \"final\";\n\n// GET THE THING //\nconst thing = JSON.parse(Social.get(path, blockHeight) || \"null\");\n\nif (thing === null) {\n  console.log(`thing not found at path: ${path}`);\n  return <></>;\n}\n\n// GET THE TYPE //\nconst type = JSON.parse(Social.get(thing.type, \"final\") || \"null\");\n\nif (type === null) {\n  return <p>type not found: {thing.type}</p>;\n}\n\nconst Container = styled.div`\n  border: 1px solid #ccc;\n  padding: 10px;\n  margin-bottom: 10px;\n`;\n\nconst Header = styled.div`\n  display: flex;\n  align-items: center;\n  cursor: pointer;\n`;\n\nconst Button = styled.button`\n  text-transform: lowercase !important;\n`;\n\nconst ButtonRow = styled.div`\n  display: flex;\n  flex-direction: row;\n  flex-wrap: wrap;\n  gap: 4px;\n`;\n\nconst Row = styled.div`\n  display: flex;\n  margin-bottom: 5px;\n`;\n\nconst Key = styled.span`\n  font-weight: bold;\n  margin-right: 5px;\n`;\n\nconst Value = styled.span`\n  color: #888;\n`;\n\nfunction composePost() {\n  return {\n    post: {\n      main: JSON.stringify({\n        path,\n        blockHeight,\n        type: thing.type,\n      }),\n    },\n    index: {\n      post: JSON.stringify({\n        key: \"main\",\n        value: {\n          type: thing.type, // because we want to filter by type\n        },\n      }),\n    },\n  };\n}\n\nState.init({ raw: false });\n\nconst handleToggleRaw = () => {\n  State.update({ raw: !state.raw });\n};\n\nfunction renderRaw() {\n  const text = `\n\\`\\`\\`json\n${JSON.stringify(thing, undefined, 2)}\n\\`\\`\\`\n`;\n  return <Markdown text={text} />;\n}\n\nreturn (\n  <Container>\n    <Header>\n      <ButtonRow>\n        <Button onClick={handleToggleRaw}>\n          show {state.raw ? \"thing\" : \"raw\"}\n        </Button>\n        <CommitButton force data={composePost} className=\"styless\">\n          post\n        </CommitButton>\n      </ButtonRow>\n    </Header>\n    {state.raw ? (\n      <>{renderRaw()}</>\n    ) : (\n      <>\n        {type?.widgets?.view && (\n          <Widget src={type.widgets.view} props={{ data: thing.data }} />\n        )}\n      </>\n    )}\n  </Container>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/efiz.near/widget/Thing", "__row_index": 6}