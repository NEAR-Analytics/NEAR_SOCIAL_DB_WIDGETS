{"tx_hash": "3q1JXdzYB16nYmufRbV5BXvoieGUpL62gxEDAh3rjtQv", "action_id_social": "BanSk3bNEzh2uJFyB3jTu8kPXLw9mtDtVAaQSaTeejLx-0-widget", "block_id": 85951989, "block_timestamp": "2023-02-24 16:45:47.663", "signer_id": "meta-pool-official.near", "widget_name": "MetaStakingVote", "source_code": "let validators = fetch(\"https://vote.metapool.app/api/validators_extended\", {\n  subscribe: true,\n});\nif (!validators) {\n  return \"Loading\";\n}\nconst TRUNCATE_LENGTH = 18;\nconst near_staked = validators.body.near_staked;\nconst near_assigned = validators.body.near_assigned;\ninitState({\n  data: validators.body.data,\n  filteredData: validators.body.data,\n});\n\nif (!validators.body) {\n  return \"Illegal data\";\n}\n\nconst onChangeData = (_data) => {\n  State.update({ filteredData: _data.result });\n};\nreturn (\n  <>\n    <div class=\"d-flex justify-content-evenly m-2\">\n      <div class=\"col-md-2\">\n        <Widget\n          src=\"manzanal.near/widget/ValidatorsCount\"\n          props={{ count: validators.body.data.length }}\n        />\n      </div>\n      <div class=\"col-md-5\">\n        <Widget\n          src=\"manzanal.near/widget/MetaStakingDashComponent\"\n          props={{\n            near_staked: near_staked,\n            near_assigned: near_assigned,\n          }}\n        />\n      </div>\n      <div class=\"col-md-4\">\n        <Widget src=\"manzanal.near/widget/UserVotingDashComponent\" props={{}} />\n      </div>\n    </div>\n    <Widget\n      src=\"manzanal.near/widget/SearchComponent\"\n      props={{\n        data: validators.body.data,\n        searchTermKey: \"account_id\",\n        minLength: 0,\n        placeholder: \"Search Valdator\",\n        onChange: onChangeData,\n      }}\n    />\n    <div class=\"table-responsive w-100 mt-2\">\n      <table class=\"table table-striped table-bordered\">\n        <thead>\n          <tr>\n            <th class=\"text-center\">Name</th>\n            <th class=\"text-center\">APY</th>\n            <th class=\"text-center\">Votes</th>\n            <th class=\"text-center\">Assigned&nbsp;By&nbsp;Votes</th>\n            <th class=\"text-center\">Assigned&nbsp;Total&nbsp;</th>\n            <th class=\"text-center\">Meta&nbsp;Pool&nbsp;Staked</th>\n            <th class=\"text-center\">Pending</th>\n            <th class=\"text-center\">Action</th>\n          </tr>\n        </thead>\n        <tbody>\n          {Object.entries(state.filteredData).map(([key, pool]) => (\n            <tr className=\"align-middle\">\n              <td class=\"text-start\">\n                <span\n                  class=\"fs-6\"\n                  data-toggle=\"tooltip\"\n                  title={pool.account_id}\n                  trigger=\"hover focus\"\n                >\n                  {\" \"}\n                  {pool.account_id.substring(0, pool.account_id.indexOf(\".\"))\n                    .length > TRUNCATE_LENGTH\n                    ? pool.account_id\n                        .substring(0, pool.account_id.indexOf(\".\"))\n                        .substring(0, TRUNCATE_LENGTH) + \"...\"\n                    : pool.account_id.substring(\n                        0,\n                        pool.account_id.indexOf(\".\")\n                      )}\n                </span>\n                <span\n                  data-toggle=\"tooltip\"\n                  title=\"Pool performance in the last four epochs is low, votes will not be considered until the validator has four epochs with good performance\"\n                  trigger=\"hover focus\"\n                  className={\n                    Number(pool.extraData.apy) > 0 ? \"d-none\" : \"text-warning\"\n                  }\n                >\n                  \u26a0\n                </span>\n              </td>\n              <td class=\"text-center\">\n                <span\n                  className={\n                    Number(pool.extraData.apy) > 0\n                      ? \"text-success\"\n                      : \"text-danger\"\n                  }\n                >\n                  {pool.extraData.apy.toLocaleString(\"en-US\")}%\n                </span>\n              </td>\n              <td class=\"text-end text-nowrap\">\n                {`${pool.votes.toLocaleString(\n                  \"en-US\"\n                )}(${pool.votes_weight.toFixed(0)}%)`}\n              </td>\n              <td class=\"text-end\">\n                {pool.stakedAsignedByVotes.toLocaleString(\"en-US\")}&nbsp;\u24c3\n              </td>\n              <td class=\"text-end\">\n                {`${pool.stakedAssignedTotal.toLocaleString(\"en-US\")} \u24c3`}\n              </td>\n              <td class=\"text-end\">\n                {pool.stakedn.toLocaleString(\"en-US\")}&nbsp;\u24c3\n              </td>\n              <td class=\"text-end text-nowrap\">\n                <span\n                  className={\n                    Number(pool.pendingAmount) > 0\n                      ? \"text-success\"\n                      : \"text-danger\"\n                  }\n                >\n                  <span>{pool.pendingAmount > 0 ? \"\u25b2\" : \"\u25bc\"}</span>\n                  {pool.pendingAmount.toLocaleString(\"en-US\")}\n                </span>\n                <span>\u24c3</span>\n              </td>\n              <td>\n                <Widget\n                  src=\"manzanal.near/widget/VoteValidatorButton\"\n                  props={{\n                    accountId: pool.account_id,\n                    short: true,\n                  }}\n                />\n              </td>\n            </tr>\n          ))}\n        </tbody>\n      </table>\n    </div>\n  </>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/meta-pool-official.near/widget/MetaStakingVote", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.linktree.website": NaN, "metadata.name": NaN, "metadata.tags.app": NaN, "metadata.tags.meta-pool": NaN, "metadata.tags.staking": NaN, "metadata.tags.validators": NaN, "metadata.tags.vote": NaN, "metadata": NaN}