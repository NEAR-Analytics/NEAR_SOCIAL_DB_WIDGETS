{"tx_hash": "DXWmEqb19QyzgiSQFUWM99ew8dCci7pBcCZoTyNPwzgM", "action_id_social": "FR2UPHpJC3k9wrzhdhKyvQqyBquUvdYnbLqjA4XEM9T6-0-widget", "block_id": 88470425, "block_timestamp": "2023-03-31 00:16:56.115", "signer_id": "infinity.near", "widget_name": "CreateDrop", "source_code": "const accountId = props.accountId ?? context.accountId;\n\nif (!accountId) {\n  return \"Please connect your NEAR wallet :)\";\n}\n\nState.init({\n  amount: \"\",\n  claims: \"\",\n});\n\nconst YoctoToNear = (amount) =>\n  new Big(amount).div(new Big(10).pow(24)).toString();\n\nconst keyInfo = Near.view(\"v2.keypom.near\", \"get_key_information\");\n\nconst handleFunctionCall = () => {\n  Near.call([\n    {\n      public_keys: keyInfo.key,\n      contractName: \"v2.keypom.near\",\n      methodName: \"create_drop\",\n      gas: \"100000000000000\",\n      args: {\n        public_keys: [new_public_key],\n        deposit_per_use: state.amount ?? \"5\",\n        drop_config: {\n          max_claims_per_key: state.claims ?? \"1\",\n        },\n      },\n    },\n  ]);\n};\n\nconst onChangeClaims = (claims) => {\n  State.update({\n    claims,\n  });\n};\n\nconst onChangeAmount = (amount) => {\n  State.update({\n    amount,\n  });\n};\n\nreturn (\n  <div className=\"mb-3\">\n    <div className=\"mb-3\">\n      Amount per Drop:\n      <input type=\"text\" onChange={(e) => onChangeAmount(e.target.value)} />\n    </div>\n    <div className=\"mb-3\">\n      # of Claims per Drop:\n      <input type=\"text\" onChange={(e) => onChangeClaims(e.target.value)} />\n    </div>\n    <button\n      className=\"btn btn-outline-danger mt-3\"\n      onClick={handleFunctionCall}\n    >\n      Create Drop\n    </button>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/infinity.near/widget/CreateDrop"}