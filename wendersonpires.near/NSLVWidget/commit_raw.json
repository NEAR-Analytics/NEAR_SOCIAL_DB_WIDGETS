{"tx_hash": "AviyeLJw2SYQgkhGvHBFYfqQn6s96tBckR3VJv8kVSeM", "action_id_social": "7dhHUFuLbpRKyusdVSDzvcH3Dr4GkRhAPupcRXyJYBGS-0-widget", "block_id": 88958708, "block_timestamp": "2023-04-06 14:28:20.594", "signer_id": "wendersonpires.near", "widget_name": "NSLVWidget", "source_code": "/**\n * This is a widget created to be used with \"NEAR Social Local Viewer\" CLI.\n * A tool that enables you to develop your widgets locally.\n * Learn more here: https://github.com/wpdas/near-social-local-viewer\n *\n * This Widget lives here: https://near.social/#/wendersonpires.near/widget/NSLVWidget\n *\n * How it works:\n *\n * 1 - This widget connects to both local and remote widgets;\n * 2 - Example of use:\n *\n * <Widget\n *   src={\"wendersonpires.near/widget/NSLVWidget\"}\n *   props={{ src: \"wendersonpires.near/widget/Profile\" }}\n * />\n *\n * Where \"NSLVWidget\" Loads the Near Social Local Viewer logic to render local or remote widget\n * and \"props={src: \"wendersonpires.near/widget/Profile\"}\" is the widget path\n *\n * It will always try to find a local Widget first, if it fails, the remote Widget will be used.\n */\n\nconst src = props.src;\n\nState.init({\n  code: null,\n  ready: false,\n  props: props.srcProps || {},\n});\n\nif (!src) {\n  return (\n    <div>\n      <p\n        style={{ fontWeight: 600, color: \"#AB2E28\", fontFamily: \"Courier new\" }}\n      >\n        This is a widget created to be used with\n        <a href=\"https://github.com/wpdas/near-social-local-viewer\">\n          \"NEAR Social Local Viewer\"\n        </a>{\" \"}\n        CLI. A tool that enables you to develop your widgets locally.\n      </p>\n      <p\n        style={{ fontWeight: 600, color: \"#AB2E28\", fontFamily: \"Courier new\" }}\n      >\n        Learn more here:{\" \"}\n        <a href=\"https://github.com/wpdas/near-social-local-viewer\">\n          https://github.com/wpdas/near-social-local-viewer\n        </a>\n      </p>\n    </div>\n  );\n}\n\nconst localWidgetPath = src.split(\"/\");\nconst localWidgetName = localWidgetPath[localWidgetPath.length - 1];\n\nconst fetchCode = () => {\n  asyncFetch(`http://localhost:9000/widget/get/${localWidgetName}`)\n    .then((localWidgetSrc) => {\n      if (\n        localWidgetSrc &&\n        localWidgetSrc?.status === 200 &&\n        localWidgetSrc?.body?.code\n      ) {\n        // Set local widget code\n        State.update({ code: localWidgetSrc.body.code });\n\n        // If it's local (because its using local code server), refresh every 1 sec (to get most updated local widget)\n        setTimeout(() => {\n          fetchCode();\n        }, 1000);\n      }\n    })\n    .finally(() => {\n      State.update({ ready: true });\n    });\n};\n\nfetchCode();\n\n// Wait till it loads\nif (!state.code) {\n  return <div />;\n}\n\nif (state.ready && state.code) {\n  // Render local widget\n  return <Widget code={state.code} props={state.props} />;\n}\n\n// Render remote widget\nif (state.ready && !state.code) {\n  return <Widget src={src} props={state.props} />;\n}\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/wendersonpires.near/widget/NSLVWidget", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.linktree.website": NaN, "metadata.name": NaN, "metadata.tags.cli": NaN, "metadata.tags.component": NaN, "metadata.tags.local": NaN, "metadata.tags.vm": NaN, "metadata.tags.widget": NaN}