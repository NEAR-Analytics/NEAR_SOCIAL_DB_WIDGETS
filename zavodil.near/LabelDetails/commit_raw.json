{"tx_hash": "GTyw3LhyCiPicvYqnNQMW7d3ho229VuRvuN2w9DZzHG9", "action_id_social": "HyNS9hy84pF2WhRMu7TG25zY1iY6Unu7tdYLWPnUJHNh-0-widget", "block_id": 79092731, "block_timestamp": "2022-11-23 14:39:17.248", "signer_id": "zavodil.near", "widget_name": "LabelDetails", "source_code": "// LabelDetails\nconst ownerId = \"zavodil.near\";\nconst appName = \"nametag\";\n\nif (!props.tag) {\n  return \"Undefined tag\";\n}\n\nlet tag = props.tag;\nconst data = Social.get(`*/${appName}/*/tags/${tag}`, \"final\");\n\nif (!data) {\n  return \"Loading\";\n}\n\nconst records = [];\n\nlet counter = 0;\n\nObject.keys(data).forEach((accountId) => {\n  Object.keys(data[accountId][appName]).forEach((contractId) => {\n    Object.values(data[accountId][appName][contractId]).forEach((tags) => {\n      if (Object.keys(tags).includes(tag)) {\n        let text =\n          accountId == contractId ? (\n            `tagged themself`\n          ) : (\n            <>\n              tagged{\" \"}\n              <Widget\n                src={`${ownerId}/widget/ProfileLine`}\n                props={{ accountId: contractId }}\n              />\n            </>\n          );\n        records.push(\n          <li className=\"list-group-item\">\n            <Widget\n              src={`${ownerId}/widget/ProfileLine`}\n              props={{ accountId }}\n            />{\" \"}\n            {text}\n            <span className=\"public-tags collapse show\">\n              <button\n                className=\"btn btn-sm btn-outline-secondary border-0\"\n                data-bs-toggle=\"collapse\"\n                data-bs-target={`.public-tags-${counter}`}\n                aria-expanded=\"false\"\n                aria-controls={`public-tags-${counter}`}\n                type=\"button\"\n              >\n                <i className=\"bi bi-arrows-angle-expand me-1\"></i>All tags\n              </button>\n            </span>\n            <div className={`collapse public-tags-${counter}`}>\n              <Widget\n                src={`${ownerId}/widget/PublicTags`}\n                props={{ accountId: contractId }}\n              />\n            </div>\n          </li>\n        );\n\n        counter++;\n      }\n    });\n  });\n});\n\nreturn (\n  <>\n    <h4 className=\"ms-3\">\n      Public Tag <span className=\"badge rounded-pill bg-primary\">{tag}</span>\n    </h4>\n    <ul className=\"list-group list-group-flush\">{records}</ul>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/LabelDetails"}