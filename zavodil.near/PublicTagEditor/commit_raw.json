{"tx_hash": "3hYGJXP9Yn8rBTNhi8mE2ZBZHKXN2ntnHE8TAi7nWagw", "action_id_social": "BPjvdDmKrUGf4eU2uMnJPG9tiXPuqEHGtnVHfUZtno1P-0-widget", "block_id": 79097782, "block_timestamp": "2022-11-23 16:18:23.116", "signer_id": "zavodil.near", "widget_name": "PublicTagEditor", "source_code": "// PublicTagEditor\nconst ownerId = \"zavodil.near\";\nconst appName = \"nametag\";\nconst accountId = context.accountId;\nconst contractId = props.contractId ?? ownerId;\nconst debug = props.debug ?? false;\n\nif (!accountId) {\n  return (\n    <>\n      <h3>Public Name Tags App</h3>\n      <p>\n        Please sign in with NEAR wallet to tag any contract/account as you like\n        and soon this data may appear in the blockexplorer & wallet built into\n        the <a href=\"/\">near.social</a>\n      </p>\n    </>\n  );\n}\n\nState.init({ contractId });\n\nconst metadata = Social.getr(\n  `${accountId}/${appName}/${state.contractId}`,\n  \"final\"\n);\n\n// current user tags only\nconst pattern = `*/${appName}/*/tags/*`;\n\nreturn (\n  <div className=\"row\">\n    <div className=\"col-lg-6\">\n      <div>\n        <h4>Name tag editor</h4>\n      </div>\n      <div className=\"mb-2\">\n        Near Account Id:\n        <input\n          type=\"text\"\n          value={state.contractId}\n          onChange={(event) =>\n            State.update({ contractId: event.target.value.toLowerCase() })\n          }\n        />\n      </div>\n      <div className=\"mb-2\" style={{ minHeight: \"62px\" }}>\n        {metadata !== null ? (\n          <Widget\n            src={\"mob.near/widget/MetadataEditor\"}\n            key={`public-tags-metadata-${state.contractId}`}\n            props={{\n              initialMetadata: metadata,\n              onChange: (metadata) => {\n                State.update({ metadata });\n              },\n              options: {\n                tags: {\n                  label: \"Public Tags\",\n                  pattern,\n                  placeholder: \"binance, cex, nft, ft, fake, scam\",\n                },\n              },\n            }}\n          />\n        ) : (\n          \"Loading\"\n        )}\n      </div>\n      <div className=\"mb-2\">\n        <CommitButton\n          disabled={metadata === null}\n          data={{\n            [appName]: {\n              [state.contractId]: state.metadata,\n            },\n          }}\n        >\n          Save Tags\n        </CommitButton>\n\n        <button\n          class=\"btn btn-outline-secondary\"\n          type=\"button\"\n          data-bs-toggle=\"collapse\"\n          data-bs-target=\"#collapseExample\"\n          aria-expanded=\"false\"\n          aria-controls=\"collapseExample\"\n        >\n          Tags best practices\n        </button>\n      </div>\n\n      <div className=\"collapse\" id=\"collapseExample\">\n        <div class=\"card card-body\">\n          <h5>Tags best practices:</h5>\n          <ul>\n            <li>Do: Keep tags short and concise</li>\n            <li>Do: Use \"-\" (minus) instead of space</li>\n            <li>Do: Use only English words</li>\n            <li>Don't: Create redundant tags</li>\n          </ul>\n        </div>\n      </div>\n    </div>\n    <div className=\"col-lg-6\">\n      <div>\n        <h4>Preview</h4>\n        <br />\n      </div>\n      <div className=\"mb-2 card\">\n        <div className=\"card-body\">\n          <div className=\"text-truncate\">\n            <Widget\n              src={`mob.near/widget/ProfileLine`}\n              props={{ accountId: state.contractId }}\n            />\n          </div>\n          <Widget\n            src={`${ownerId}/widget/PublicTags`}\n            props={{\n              accountId: state.contractId,\n              extraTags: state.metadata.tags,\n            }}\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/PublicTagEditor"}