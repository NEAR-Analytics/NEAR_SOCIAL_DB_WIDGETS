{"tx_hash": "9UVSASCb4d2z2cdso6yG28E6bmhgwPS3mqsetKW6faBS", "action_id_social": "7PcVjvfFGBTGo7Q875EoqKMJm4fzJcUDJrxFCMGaXUia-0-widget", "block_id": 80426683, "block_timestamp": "2022-12-11 18:11:55.002", "signer_id": "zavodil.near", "widget_name": "StakingPools", "source_code": "let data = fetch(\"https://near.zavodil.ru/pools.txt\");\nif (!data) {\n  return \"Loading\";\n}\n\nlet flags = {\n  ad: -352,\n  ae: -368,\n  af: -384,\n  ag: -400,\n  ai: -416,\n  al: -432,\n  am: -448,\n  an: -464,\n  ao: -480,\n  aq: -496,\n  ar: -512,\n  as: -528,\n  at: -544,\n  au: -560,\n  aw: -576,\n  az: -592,\n  ba: -608,\n  bb: -624,\n  bd: -640,\n  be: -656,\n  bf: -672,\n  bg: -688,\n  bh: -704,\n  bi: -720,\n  bj: -736,\n  bm: -752,\n  bn: -768,\n  bo: -784,\n  br: -800,\n  bs: -816,\n  bt: -832,\n  bw: -848,\n  by: -864,\n  bz: -880,\n  ca: -896,\n  cg: -912,\n  cf: -928,\n  cd: -944,\n  ch: -960,\n  ci: -976,\n  ck: -992,\n  cl: -1008,\n  cm: -1024,\n  cn: -1040,\n  co: -1056,\n  cr: -1072,\n  cu: -1088,\n  cv: -1104,\n  cy: -1120,\n  cz: -1136,\n  de: -1152,\n  dj: -1168,\n  dk: -1184,\n  dm: -1200,\n  do: -1216,\n  dz: -1232,\n  ec: -1248,\n  ee: -1264,\n  eg: -1280,\n  eh: -1296,\n  er: -1312,\n  es: -1328,\n  et: -1344,\n  fi: -1360,\n  fj: -1376,\n  fm: -1392,\n  fo: -1408,\n  fr: -1424,\n  ga: -1440,\n  gb: -1456,\n  gd: -1472,\n  ge: -1488,\n  gg: -1504,\n  gh: -1520,\n  gi: -1536,\n  gl: -1552,\n  gm: -1568,\n  gn: -1584,\n  gp: -1600,\n  gq: -1616,\n  gr: -1632,\n  gt: -1648,\n  gu: -1664,\n  gw: -1680,\n  gy: -1696,\n  hk: -1712,\n  hn: -1728,\n  hr: -1744,\n  ht: -1760,\n  hu: -1776,\n  id: -1792,\n  mc: -1792,\n  ie: -1808,\n  il: -1824,\n  im: -1840,\n  in: -1856,\n  iq: -1872,\n  ir: -1888,\n  is: -1904,\n  it: -1920,\n  je: -1936,\n  jm: -1952,\n  jo: -1968,\n  jp: -1984,\n  ke: -2000,\n  kg: -2016,\n  kh: -2032,\n  ki: -2048,\n  km: -2064,\n  kn: -2080,\n  kp: -2096,\n  kr: -2112,\n  kw: -2128,\n  ky: -2144,\n  kz: -2160,\n  la: -2176,\n  lb: -2192,\n  lc: -2208,\n  li: -2224,\n  lk: -2240,\n  lr: -2256,\n  ls: -2272,\n  lt: -2288,\n  lu: -2304,\n  lv: -2320,\n  ly: -2336,\n  ma: -2352,\n  md: -2368,\n  me: -2384,\n  mg: -2400,\n  mh: -2416,\n  mk: -2432,\n  ml: -2448,\n  mm: -2464,\n  mn: -2480,\n  mo: -2496,\n  mq: -2512,\n  mr: -2528,\n  ms: -2544,\n  mt: -2560,\n  mu: -2576,\n  mv: -2592,\n  mw: -2608,\n  mx: -2624,\n  my: -2640,\n  mz: -2656,\n  na: -2672,\n  nc: -2688,\n  ne: -2704,\n  ng: -2720,\n  ni: -2736,\n  nl: -2752,\n  no: -2768,\n  np: -2784,\n  nr: -2800,\n  nz: -2816,\n  om: -2832,\n  pa: -2848,\n  pe: -2864,\n  pf: -2880,\n  pg: -2896,\n  ph: -2912,\n  pk: -2928,\n  pl: -2944,\n  pr: -2960,\n  ps: -2976,\n  pt: -2992,\n  pw: -3008,\n  py: -3024,\n  qa: -3040,\n  re: -3056,\n  ro: -3072,\n  rs: -3088,\n  ru: -3104,\n  rw: -3120,\n  sa: -3136,\n  sb: -3152,\n  sc: -3168,\n  sd: -3184,\n  se: -3200,\n  sg: -3216,\n  si: -3232,\n  sk: -3248,\n  sl: -3264,\n  sm: -3280,\n  sn: -3296,\n  so: -3312,\n  sr: -3328,\n  st: -3344,\n  sv: -3360,\n  sy: -3376,\n  sz: -3392,\n  tc: -3408,\n  td: -3424,\n  tg: -3440,\n  th: -3456,\n  tj: -3472,\n  tl: -3488,\n  tm: -3504,\n  tn: -3520,\n  to: -3536,\n  tr: -3552,\n  tt: -3568,\n  tv: -3584,\n  tw: -3600,\n  tz: -3616,\n  ua: -3632,\n  ug: -3648,\n  us: -3664,\n  uy: -3680,\n  uz: -3696,\n  va: -3712,\n  vc: -3728,\n  ve: -3744,\n  vg: -3760,\n  vi: -3776,\n  vn: -3792,\n  vu: -3808,\n  ws: -3824,\n  ye: -3840,\n  za: -3856,\n  zm: -3872,\n  zw: -3872,\n};\n\nconst FlagItem = styled.div`\ndisplay: inline-block;\n    height: 16px;\n    width: 16px;\n    vertical-align: text-bottom;\n    line-height: 16px;\n    background: url(https://github.s3.amazonaws.com/downloads/lafeber/world-flags-sprite/flags16.png) no-repeat;\n    background-position: 0 ${(props) => props.flagPosition}px;    \n      \n  `;\n\nlet validatorsData = Social.get(\"pool-details.near/**\", \"final\") ?? {};\nlet validators = [];\nObject.entries(validatorsData).forEach((item) => {\n  validators[item[0]] = item[1];\n});\nconsole.log(validators);\n\ndata = JSON.parse(data.body);\nif (!data.data.length) {\n  return \"Illegal data\";\n}\n\nlet pools = data.data.map((pool) => {\n  let details = validators[pool.account_id] ?? {};\n\n  return (\n    <tr className=\"align-middle\">\n      <td scope=\"row\">\n        {!!details.location.country_code ? (\n          <>\n            <FlagItem\n              flagPosition={\n                flags[details.location.country_code.toLowerCase()] ?? null\n              }\n            />\n          </>\n        ) : (\n          \"\"\n        )}\n        {!!details.name ? `${details.name} ` : \"\"}\n        {pool.account_id}\n        {details.description ? (\n          <div class=\"form-text fw-normal\">{details.description}</div>\n        ) : (\n          \"\"\n        )}\n        {details[\"pool-owner\"] ? (\n          <div class=\"form-text fw-normal\">\n            Managed by\n            <Widget\n              src=\"zavodil.near/widget/ProfileLine\"\n              props={{ accountId: details[\"pool-owner\"] }}\n            />\n            <span className=\"ms-2\"> </span>\n            <Widget\n              src=\"zavodil.near/widget/LinkTree\"\n              props={{ linktree: details.linktree }}\n            />\n          </div>\n        ) : (\n          \"\"\n        )}\n      </td>\n      <td class=\"text-center\">{parseFloat(pool.numerator.toFixed(2))}%</td>\n      <td class=\"text-center\">\n        {pool.number_of_accounts.toFixed(0).replace(/\\d(?=(\\d{3})+$)/g, \"$&,\")}\n      </td>\n      <td class=\"text-end\">\n        {pool.stake.toFixed(0).replace(/\\d(?=(\\d{3})+$)/g, \"$&,\")}&nbsp;\u24c3\n      </td>\n      <td>\n        <a\n          className=\"btn btn-primary\"\n          href={`/#/zavodil.near/widget/NearStake?poolId=${\n            pool.account_id\n          }&serviceFee=${parseFloat(pool.numerator.toFixed(2))}`}\n          role=\"button\"\n        >\n          Stake\n        </a>\n      </td>\n    </tr>\n  );\n});\n\nreturn (\n  <div class=\"table-responsive\">\n    <table class=\"table table-striped table-bordered\">\n      <thead>\n        <tr>\n          <th>Pool&nbsp;ID</th>\n          <th>Service&nbsp;Fee&nbsp;</th>\n          <th>Delegators&nbsp;</th>\n          <th>Current&nbsp;Stake&nbsp;</th>\n          <th>Action</th>\n        </tr>\n      </thead>\n\n      <tbody>{pools}</tbody>\n    </table>\n  </div>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/StakingPools", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.linktree.website": NaN, "metadata.name": NaN, "metadata.tags.app": NaN, "metadata.tags.staking": NaN, "metadata": NaN}