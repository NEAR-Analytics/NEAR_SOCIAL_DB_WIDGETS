{"tx_hash": "8y1yqwRa5kFZqkUEzHiSTgCFqkMz2iua3tLriaSr4MSL", "action_id_social": "36cWm36RutMefeSXgnqTPtnAToUn6qgynzVwBdD3xFB1-0-widget", "block_id": 89815742, "block_timestamp": "2023-04-17 20:40:37.425", "signer_id": "zavodil.near", "widget_name": "AssetListModal", "source_code": "const title = props.title ?? \"Select a token\";\nconst network = props.network ?? \"NEAR\";\nconst assets = props.assets;\nconst coinGeckoTokenIds = props.coinGeckoTokenIds ?? {};\nconst selectedAssets = props.selectedAssets ?? [];\n\nconst hidden = props.hidden;\nconst onClose = props.onClose;\n\nState.init({\n  searchBy: \"\",\n  cache: {},\n});\n\nconst css = `\n* {\n    font-family: 'Inter custom',sans-serif;\n    scrollbar-width: thin;\n    scrollbar-color: #c5c5c5 #fff;\n}\n\n*::-webkit-scrollbar {\n    width:10px;\n    height: 10px;\n}\n\n*::-webkit-scrollbar-track {\n    background: #fff;\n}\n\n*::-webkit-scrollbar-thumb {\n    background-color: #c5c5c5;\n    border-radius: 20px;\n    border: 3px solid #fff;\n}\n\n.asset-list-scroll {\n    background-color: rgb(255, 255, 255);\n    width: 100%;\n    overflow: hidden;\n    flex: 1 1 0%;\n    position: relative;\n    display: flex;\n    flex-direction: column;\n    -webkit-box-pack: start;\n    justify-content: flex-start;\n}\n\n.asset-list-container{        \n    max-height: 300px;\n    min-height: 300px;\n    position: relative;\n    width: 100%;\n    overflow-y: auto;\n    overflow-x: hidden;\n    will-change: transform;\n    direction: ltr;  \n}\n.asset-list-header {\n    padding-left: 20px;\n    box-sizing: border-box;\n    margin: 0px;\n    min-width: 0px;\n    font-weight: 500;\n    font-size: 16px;\n}\n.asset-search-container{\n    width: 100%;\n    display: flex;\n    padding: 0px;\n    -webkit-box-align: center;\n    align-items: center;\n    -webkit-box-pack: start;\n    justify-content: flex-start;\n    box-sizing: border-box;\n    min-width: 0px;\n    margin-bottom: 16px;\n}\n.asset-search-container input{\n    background: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24' fill='none' stroke='%2399A1BD' stroke-width='2' stroke-linecap='round' stroke-linejoin='round' class='feather feather-search'%3E%3Ccircle cx='11' cy='11' r='8'/%3E%3Cline x1='21' y1='21' x2='16.65' y2='16.65'/%3E%3C/svg%3E\") 12px center / 20px 20px no-repeat scroll rgb(245, 246, 252);\n    position: relative;\n    display: flex;\n    padding: 16px 16px 16px 40px;\n    height: 40px;\n    -webkit-box-align: center;\n    align-items: center;\n    width: 100%;\n    white-space: nowrap;\n    outline: none;\n    border-radius: 12px;\n    color: rgb(13, 17, 28);\n    border: 1px solid rgb(210, 217, 238);\n    appearance: none;\n    font-size: 16px;\n    transition: border 100ms ease 0s;\n}\n`;\n\nif (!css) return \"\";\n\nif (!state.theme) {\n  State.update({\n    theme: styled.div`\n    ${css}`,\n  });\n}\n\nconst Theme = state.theme;\n\nconst Modal = styled.div`\n  display: flex;\n  position: fixed;\n  inset: 0;\n  justify-content: center;\n  align-items: center;\n  opacity: 1;\n  z-index: 1;\n  color: rgb(90, 90, 90);\n`;\n\nconst ModalBackdrop = styled.div`\n  position: absolute;\n  inset: 0;\n  background-color: rgba(0, 0, 0, 0.5);\n  opacity: 0.4;\n`;\n\nconst ModalDialog = styled.div`\n  padding: 20px;\n  z-index: 3;\n  background-color: white;\n  border-radius: 20px;\n  width: 40%;\n`;\n\nconst ModalHeader = styled.div`\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: flex-start;\n`;\n\nconst CloseButton = styled.button`\n  background-color: white;\n  border: 0;\n  color: #344054;\n`;\n\nconst containsSearchBy = (assetData) => {\n  return (\n    !assetData ||\n    state.searchBy === \"\" ||\n    assetData.metadata?.symbol\n      .toLowerCase()\n      .includes(state.searchBy.toLowerCase()) ||\n    assetData.metadata?.name\n      .toLowerCase()\n      .includes(state.searchBy.toLowerCase())\n  );\n};\n\nconst assetList = assets\n  .filter((tokenId) => containsSearchBy(state.cache[tokenId]))\n  .map((tokenId) => {\n    return (\n      <Widget\n        src=\"zavodil.near/widget/AssetListItem\"\n        props={{\n          tokenId,\n          coinGeckoTokenId: coinGeckoTokenIds?.[tokenId] ?? tokenId,\n          network,\n          selected: selectedAssets.includes(tokenId),\n          searchBy: state.searchBy,\n          saveAssetData: (_tokenId, _assetData) => {\n            const cache = state.cache;\n            cache[_tokenId] = _assetData;\n            State.update({ cache });\n          },\n          assetData: state.cache[tokenId],\n          onClick: () => {\n            console.log(`${tokenId} selected`);\n            if (props.onClick) {\n              props.onClick(tokenId);\n            }\n          },\n        }}\n      />\n    );\n  });\n\nconst inputOnChange = (e) => {\n  State.update({\n    searchBy: e.target.value,\n  });\n};\n\nconst body = (\n  <div class=\"asset-search-container\">\n    <input\n      class=\"asset-search-input\"\n      placeholder=\"Search name\" //  or paste address\n      onChange={inputOnChange}\n      value={state.searchBy}\n    />\n  </div>\n);\n\nif (hidden) {\n  return <div />;\n}\n\nreturn (\n  <>\n    <Theme>\n      <Modal>\n        <ModalBackdrop />\n        <ModalDialog>\n          <ModalHeader>\n            <div class=\"asset-list-header\">{title}</div>\n            <CloseButton onClick={onClose}>\n              <svg\n                width=\"20\"\n                height=\"20\"\n                viewBox=\"0 0 20 20\"\n                fill=\"none\"\n                xmlns=\"http://www.w3.org/2000/svg\"\n              >\n                <path\n                  d=\"M15.5 5L5.5 15M5.5 5L15.5 15\"\n                  stroke=\"currentColor\"\n                  stroke-width=\"1.66667\"\n                  stroke-linecap=\"round\"\n                  stroke-linejoin=\"round\"\n                />\n              </svg>\n            </CloseButton>\n          </ModalHeader>\n          <div>\n            {body}\n            <div class=\"asset-list-scroll\">\n              <div class=\"asset-list-container\">{assetList}</div>\n            </div>\n          </div>\n        </ModalDialog>\n      </Modal>\n    </Theme>\n  </>\n);\n", "metadata": null, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/AssetListModal"}