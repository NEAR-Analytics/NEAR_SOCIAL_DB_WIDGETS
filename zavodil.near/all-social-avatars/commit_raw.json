{"tx_hash": "UmQ1m2QY1WBgd9RdF6PkLd88NESDPrv2zpbs91ev3nn", "action_id_social": "E2sikS4ef6Ja6CjrZCJtYhiXntXK5c1ywnsW96CDT77S-0-widget", "block_id": 81014072, "block_timestamp": "2022-12-19 16:09:58.120", "signer_id": "zavodil.near", "widget_name": "all-social-avatars", "source_code": "let avatarId = props.id ?? -1;\ninitState({ tokens: [] });\n\nif (!state.tokens.length) {\n  Near.asyncView(\"avtr.near\", \"nft_tokens\", {}).then((tokens) =>\n    State.update({ tokens })\n  );\n\n  return \"Loading\";\n}\n\nconsole.log(state.tokens);\n\nlet tokenDiv = styled.div`\nwidth: 10rem;\nheight: 12rem;\nbackground-image: url(${(props) => props.media});\nbackground-size: auto;\n    background-repeat: no-repeat;\nvertical-align: bottom;\noverflow: hidden;\n    `;\n\nlet tokenOwner = styled.div`\n    margin-top: 10rem;\n        font-size: 0.7rem!important;\n        background-color: #616161;\n        color: #FFF;\n    `;\n\nlet previews = [];\nlet modals = [];\nlet activeAvatar = null;\n\nstate.tokens.map((token) => {\n  let price = 0;\n  try {\n    price = new Big(JSON.parse(token.metadata.extra).mint_price)\n      .div(new Big(10).pow(24))\n      .toFixed(1);\n  } catch (e) {\n    console.log(e);\n  }\n\n  const token_id = token.token_id.replace(\"#\", \"-\").replace(\" \", \"\");\n\n  previews.push(\n    <>\n      <div class=\"float-start align-bottom\">\n        <tokenDiv\n          media={token.metadata.media}\n          type=\"button\"\n          data-bs-toggle=\"modal\"\n          data-bs-target={`#token-${token_id}`}\n        >\n          <tokenOwner>{token.owner_id}</tokenOwner>\n        </tokenDiv>\n      </div>\n    </>\n  );\n\n  if (avatarId >= 0 && `Avatar-${avatarId}` === token_id) {\n    activeAvatar = (\n      <div class=\"modal-body text-center mb-5\">\n        <div class=\"row justify-content-md-center\">\n          <h5 class=\"modal-title pb-2\" id={`token-${token_id}Label`}>\n            Token {token.token_id}\n            {price > 0 && (\n              <span class=\"ms-1 badge bg-success\">\n                Mint Price: {price} NEAR\n              </span>\n            )}\n          </h5>\n          <div class=\"col-5\">\n            <img src={token.metadata.media} class=\" text-center\" />\n          </div>\n        </div>\n        <div class=\"pt-2\">\n          Token owner:\n          <Widget\n            src={`zavodil.near/widget/ProfileLine`}\n            props={{ accountId: token.owner_id }}\n          />\n        </div>\n      </div>\n    );\n  }\n\n  modals.push(\n    <div\n      class=\"modal fade\"\n      id={`token-${token_id}`}\n      tabindex=\"-1\"\n      aria-labelledby={`token-${token_id}Label`}\n      role=\"dialog\"\n      aria-hidden=\"true\"\n    >\n      {`Avatar-${avatarId}`}\n      {token_id}\n      <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id={`token-${token_id}Label`}>\n              Token {token.token_id}\n              {price > 0 && (\n                <span class=\"ms-1 badge bg-success\">\n                  Mint Price: {price} NEAR\n                </span>\n              )}\n            </h5>\n            <button\n              type=\"button\"\n              class=\"btn-close\"\n              data-bs-dismiss=\"modal\"\n              aria-label=\"Close\"\n            ></button>\n          </div>\n          <div class=\"modal-body text-center\">\n            <img src={token.metadata.media} />\n            <div class=\"pt-2\">\n              Token owner:\n              <Widget\n                src={`zavodil.near/widget/ProfileLine`}\n                props={{ accountId: token.owner_id }}\n              />\n            </div>\n          </div>\n          <div class=\"modal-footer\">\n            <button\n              type=\"button\"\n              class=\"btn btn-secondary\"\n              data-bs-dismiss=\"modal\"\n            >\n              Close\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n});\n\nreturn (\n  <>\n    <div class=\"row\">\n      <div class=\"col\">\n        <div class=\"text-center\">\n          {activeAvatar}\n          <h4>All Social Avatars</h4>\n          <div class=\"pt-1\">{previews}</div>\n        </div>\n        {modals}\n      </div>\n    </div>\n    <div class=\"row pt-2 pb-5 text-center\">\n      <div class=\"col\">\n        <a\n          href=\"/#/zavodil.near/widget/social-avatar-editor\"\n          class=\"btn btn-success\"\n        >\n          Mint Social Avatar\n        </a>\n      </div>\n    </div>\n  </>\n);\n", "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/all-social-avatars", "metadata.image.ipfs_cid": NaN, "metadata.name": NaN, "metadata.tags.app": NaN, "metadata": NaN}