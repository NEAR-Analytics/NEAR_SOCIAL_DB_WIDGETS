{"tx_hash": "CuCSdzS1j2yTLzqS3ywwtTFjLxigoHkee21ScYGXYoQj", "action_id_social": "A8EHtrwbSbQ67JQkHi4xTV94cmGvHDrqiQc45JAaBXgv-0-widget", "block_id": 79160930, "block_timestamp": "2022-11-24 12:53:42.828", "signer_id": "zavodil.near", "widget_name": "QuickSocial", "source_code": "// QuickSocial\nlet accountId = context.accountId;\nlet targetId = props.accountId ?? accountId;\n\nif (!accountId) {\n  return \"Please sign in with NEAR wallet\";\n}\n\n// pre check since Social.keys crashes if no data\nlet followingData = Social.get(`${targetId}/graph/follow/*`, \"final\", {\n  values_only: true,\n});\n\nlet followed = [];\nif (followingData) {\n  let following = Social.keys(`${targetId}/graph/follow/*`, \"final\", {\n    values_only: true,\n  });\n\n  if (following === null) {\n    return \"Loading\";\n  }\n  followed = Object.keys(following[targetId][\"graph\"][\"follow\"]);\n}\n\nconsole.log(followingData);\n\nconst allStatuses = [];\n\nconsole.log(followed);\n\nfor (let i = 0; i < followed.length; ++i) {\n  const accountId = followed[i];\n\n  const dataFollowed = Social.get(`${accountId}/memo`, \"final\");\n\n  console.log(dataFollowed);\n\n  if (dataFollowed) {\n    allStatuses.push(\n      <div className=\"mb-2\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <Widget\n              src=\"zavodil.near/widget/ProfileLine\"\n              props={{ accountId }}\n            />\n\n            <Widget src=\"mob.near/widget/FollowButton\" props={{ accountId }} />\n          </div>\n          <div class=\"card-body\">{dataFollowed}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nlet title = allStatuses.length\n  ? `Feed of ${targetId}:`\n  : `Feed of ${targetId} is empty`;\n\nreturn (\n  <div>\n    <h1>QuickSocial</h1>\n    <div className=\"me-4 mb-4\">\n      <Widget src=\"zavodil.near/widget/Status\" props={{ accountId }} />\n    </div>\n\n    <h4>{title}</h4>\n\n    <div className=\"d-flex justify-content-between mb-3\">\n      <div className=\"me-4\">\n        <Widget src=\"mob.near/widget/Profile\" props={{ accountId: targetId }} />\n      </div>\n      <div>\n        <Widget\n          src=\"mob.near/widget/FollowButton\"\n          props={{ accountId: targetId }}\n        />\n      </div>\n    </div>\n\n    <div>{allStatuses}</div>\n  </div>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/QuickSocial", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.name": NaN, "metadata.tags.app": NaN}