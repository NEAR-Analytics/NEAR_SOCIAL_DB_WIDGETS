{"tx_hash": "AYMW1d1kWYezDzxLhvGUxeNULc5hBQBZULBu6abH8rgR", "action_id_social": "4n4SHu5HG1xvQcSz2bTH5KfN6xmoHK33S2KKjRCUNDms-0-widget", "block_id": 79163430, "block_timestamp": "2022-11-24 13:42:36.947", "signer_id": "zavodil.near", "widget_name": "QuickSocial", "source_code": "// QuickSocial\nlet accountId = context.accountId;\nlet targetId = props.accountId ?? accountId;\n\nlet allUsersBlock = (\n  <div className=\"mt-3 mb-5\">\n    <a\n      className=\"btn btn-outline-primary\"\n      href=\"/#/zavodil.near/widget/QuickSocialUsers\"\n    >\n      All QuickSocial Users\n    </a>\n  </div>\n);\n\nif (!props.accountId && !accountId) {\n  return (\n    <div>\n      <div>Please sign in with NEAR wallet to use QuickSocial</div>\n      {allUsersBlock}\n    </div>\n  );\n}\n\n// pre check since Social.keys crashes if no data\nlet followingData = Social.get(`${targetId}/graph/follow/*`, \"final\", {\n  values_only: true,\n});\n\nif (followingData === null) {\n  return \"Loading\";\n}\n\nlet followed = [];\nif (followingData) {\n  let following = Social.keys(`${targetId}/graph/follow/*`, \"final\", {\n    values_only: true,\n  });\n\n  if (following === null) {\n    return \"Loading\";\n  }\n\n  followed = Object.keys(following[targetId][\"graph\"][\"follow\"]);\n}\n\nconst targetStatus = Social.get(`${targetId}/memo`, \"final\");\n\nif (targetStatus === null) {\n  return \"Loading\";\n}\n\nconst allStatuses = [];\n\nlet currentAccountBlock = (\n  <>\n    <h1>QuickSocial</h1>\n    <div className=\"me-4 mb-4\">\n      <Widget src=\"zavodil.near/widget/Status\" props={{ accountId }} />\n    </div>\n\n    <div class=\"alert alert-primary\" role=\"alert\">\n      <div className=\"d-flex justify-content-between mb-3\">\n        <div className=\"me-4\">\n          <Widget\n            src=\"mob.near/widget/Profile\"\n            props={{ accountId: targetId }}\n          />\n        </div>\n        <div>\n          <Widget\n            src=\"mob.near/widget/FollowButton\"\n            props={{ accountId: targetId }}\n          />\n        </div>\n      </div>\n      {targetStatus}\n    </div>\n  </>\n);\n\nfor (let i = 0; i < followed.length; ++i) {\n  const accountId = followed[i];\n\n  const dataFollowed = Social.get(`${accountId}/memo`, \"final\");\n\n  if (dataFollowed) {\n    allStatuses.push(\n      <div className=\"mb-2\">\n        <div class=\"card\">\n          <div class=\"card-header\">\n            <Widget\n              src=\"zavodil.near/widget/ProfileLine\"\n              props={{ accountId }}\n            />\n\n            <Widget src=\"mob.near/widget/FollowButton\" props={{ accountId }} />\n          </div>\n          <div class=\"card-body\">{dataFollowed}</div>\n        </div>\n      </div>\n    );\n  }\n}\n\nlet title = allStatuses.length\n  ? `Feed of ${targetId}:`\n  : `Feed of ${targetId} is empty`;\n\nreturn (\n  <div>\n    {currentAccountBlock}\n\n    <h4>{title}</h4>\n\n    <div>{allStatuses}</div>\n\n    <hr />\n\n    {allUsersBlock}\n  </div>\n);\n", "metadata": NaN, "branch": null, "widget_modules_used": null, "widget_url": "https://near.social/#/zavodil.near/widget/QuickSocial", "metadata.description": NaN, "metadata.image.ipfs_cid": NaN, "metadata.name": NaN, "metadata.tags.app": NaN}